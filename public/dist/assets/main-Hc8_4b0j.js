import{c as a,o as i,t as u,a as e,b as d,F as p,d as h,r as g,n as M,p as L,e as I,f as G,g as E,h as f,w as C,v as z,U as ne,i as re,W as ie,j as ae,N as oe,k as le,P as de,l as A,m as U,q as y,s as S,u as N,x as F,y as ue,z as ce,A as he,B as me,C as _e,_ as fe}from"./vendor-1Ww9G70n.js";const V=(s,t)=>{const n=s.__vccOpts||s;for(const[_,l]of t)n[_]=l;return n},pe={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},ve=["innerHTML"];function be(s,t,n,_,l,r){return i(),a("span",{class:"heures",innerHTML:r.affichage},null,8,ve)}const ge=V(pe,[["render",be]]),ye=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"})),xe={name:"Utilisateur",props:{nom:String,mail:String}},ke=["href"];function Ce(s,t,n,_,l,r){return i(),a("a",{href:`mailto:${n.mail}`},u(n.nom),9,ke)}const Ve=V(xe,[["render",Ce]]),$e=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"})),Pe={name:"Details",components:{},props:{formule:{type:Object},phpClass:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},Se=["innerHTML"],De={class:"mb-2"},Ee=["href"],Te=e("i",{class:"fas fa-rotate-left"},null,-1);function Me(s,t,n,_,l,r){return i(),a(p,null,[e("h1",null,"Code source de "+u(n.formule.code),1),e("div",{innerHTML:n.phpClass,class:"code"},null,8,Se),e("div",De,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[Te,d(" Retour à l'administration des formules")],8,Ee)])],64)}const we=V(Pe,[["render",Me]]),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),Re={name:"Formulator",components:{},props:{phpClass:{type:String},error:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},je=e("h1",null,"Formulator",-1),Ue={class:"mb-2"},Le=["href"],Ie=e("i",{class:"fas fa-rotate-left"},null,-1),He={key:0},qe={class:"alert alert-danger"},Fe={key:1},Oe=e("div",{class:"alert alert-success"},"Formule bien intégrée",-1),Be=[Oe],ze={key:2},Ne=e("h3",null,"Code généré :",-1),Ge=["innerHTML"];function Ye(s,t,n,_,l,r){return i(),a(p,null,[je,e("div",Ue,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[Ie,d(" Retour à l'administration des formules")],8,Le)]),n.error?(i(),a("div",He,[e("div",qe,u(n.error),1)])):(i(),a("div",Fe,Be)),n.phpClass?(i(),a("div",ze,[Ne,e("div",{innerHTML:n.phpClass},null,8,Ge)])):h("",!0),d(" "+u(n.error),1)],64)}const Je=V(Re,[["render",Ye]]),We=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),Qe={name:"Index",components:{},props:{formules:{required:!0,type:Array},canEdit:{required:!0,type:Boolean}},methods:{telechargementUrl(s){return unicaenVue.url("formule/administration/telecharger-tableur/"+s)},televersementUrl(){return unicaenVue.url("formule/administration/televerser-tableur")},detailsUrl(s){return unicaenVue.url("formule/administration/details/"+s)}}},k=s=>(L("data-v-ba77464f"),s=s(),I(),s),Xe=k(()=>e("h1",null,"Formules de calcul",-1)),Ze={class:"table table-bordered table-hover table-sort"},Ke=k(()=>e("thead",null,[e("tr",null,[e("th",null,"Libellé"),e("th",null,"Paramètres"),e("th",null,"Règle de délégation"),e("th",null,"Ressources")])],-1)),et=["title"],tt=k(()=>e("br",null,null,-1)),st={key:0,class:"cartridge"},nt=k(()=>e("span",null,"intervenant",-1)),rt=k(()=>e("span",null,"param1",-1)),it={key:1,class:"cartridge"},at=k(()=>e("span",null,"intervenant",-1)),ot=k(()=>e("span",null,"param2",-1)),lt={key:2,class:"cartridge"},dt=k(()=>e("span",null,"intervenant",-1)),ut=k(()=>e("span",null,"param3",-1)),ct={key:3,class:"cartridge"},ht=k(()=>e("span",null,"intervenant",-1)),mt=k(()=>e("span",null,"param4",-1)),_t={key:4,class:"cartridge"},ft=k(()=>e("span",null,"intervenant",-1)),pt=k(()=>e("span",null,"param5",-1)),vt={key:5,class:"cartridge"},bt=k(()=>e("span",null,"volume horaire",-1)),gt=k(()=>e("span",null,"param1",-1)),yt={key:6,class:"cartridge"},xt=k(()=>e("span",null,"volume horaire",-1)),kt=k(()=>e("span",null,"param2",-1)),Ct={key:7,class:"cartridge"},Vt=k(()=>e("span",null,"volume horaire",-1)),$t=k(()=>e("span",null,"param3",-1)),Pt={key:8,class:"cartridge"},St=k(()=>e("span",null,"volume horaire",-1)),Dt=k(()=>e("span",null,"param4",-1)),Et={key:9,class:"cartridge"},Tt=k(()=>e("span",null,"volume horaire",-1)),Mt=k(()=>e("span",null,"param5",-1)),wt={key:0},At={key:1},Rt=["href"],jt=k(()=>e("i",{class:"fas fa-table-cells"},null,-1)),Ut=k(()=>e("br",null,null,-1)),Lt=["href"],It=k(()=>e("i",{class:"fas fa-table-cells"},null,-1)),Ht=k(()=>e("br",null,null,-1)),qt={key:0,class:"card bg-warning"},Ft=k(()=>e("div",{class:"card-header"},[e("h3",null,"Création/Modification d'une formule à partir d'un tableur")],-1)),Ot={class:"card-body"},Bt=k(()=>e("div",{class:"alert alert-warning"},[e("span",{class:"icon iconly icon-attention"}),e("strong",null,"Attention :"),d(" cette opération peut avoir un impact déterminant sur le calcul de vos heures complémentaires et par extension sur tous vos paiements. En outre, le fichier doit être bâti selon un modèle bien précis. Vous êtes invités à ne téléverser que des tableurs préparés ou validés par l'équipe OSE. ")],-1)),zt=["action"],Nt=G('<div class="form-group mb-3" data-v-ba77464f><label for="formule-name" data-v-ba77464f>Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier" data-v-ba77464f></div><div class="form-group" data-v-ba77464f><button type="submit" class="btn btn-primary" data-v-ba77464f>Ajout/Modification à partir d&#39;un tableur</button></div>',2),Gt=[Nt];function Yt(s,t,n,_,l,r){return i(),a(p,null,[Xe,e("table",Ze,[Ke,e("tbody",null,[(i(!0),a(p,null,g(n.formules,o=>(i(),a("tr",{key:s.id,class:M({desactivee:!o.active}),title:o.active?"":"Cette formule est désactivée"},[e("td",null,[d(u(o.libelle),1),tt,e("i",null,u(o.code),1)]),e("td",null,[o.iParam1Libelle?(i(),a("div",st,[nt,rt,d(" "+u(o.iParam1Libelle),1)])):h("",!0),o.iParam2Libelle?(i(),a("div",it,[at,ot,d(" "+u(o.iParam2Libelle),1)])):h("",!0),o.iParam3Libelle?(i(),a("div",lt,[dt,ut,d(" "+u(o.iParam3Libelle),1)])):h("",!0),o.iParam4Libelle?(i(),a("div",ct,[ht,mt,d(" "+u(o.iParam4Libelle),1)])):h("",!0),o.iParam5Libelle?(i(),a("div",_t,[ft,pt,d(" "+u(o.iParam5Libelle),1)])):h("",!0),o.vhParam1Libelle?(i(),a("div",vt,[bt,gt,d(" "+u(o.vhParam1Libelle),1)])):h("",!0),o.vhParam2Libelle?(i(),a("div",yt,[xt,kt,d(" "+u(o.vhParam2Libelle),1)])):h("",!0),o.vhParam3Libelle?(i(),a("div",Ct,[Vt,$t,d(" "+u(o.vhParam3Libelle),1)])):h("",!0),o.vhParam4Libelle?(i(),a("div",Pt,[St,Dt,d(" "+u(o.vhParam4Libelle),1)])):h("",!0),o.vhParam5Libelle?(i(),a("div",Et,[Tt,Mt,d(" "+u(o.vhParam5Libelle),1)])):h("",!0)]),o.delegationAnnee?(i(),a("td",wt,[d("Avant "+u(o.delegationAnnee)+"/"+u(o.delegationAnnee+1)+", utilise ",1),e("i",null,u(o.delegationFormule),1)])):(i(),a("td",At)),e("td",null,[e("a",{href:this.telechargementUrl(o.id)},[jt,d(" tableur")],8,Rt),Ut,this.canEdit?(i(),a("a",{key:0,href:this.detailsUrl(o.id)},[It,d(" code PHP")],8,Lt)):h("",!0)])],10,et))),128))])]),Ht,this.canEdit?(i(),a("div",qt,[Ft,e("div",Ot,[Bt,e("form",{method:"post",enctype:"multipart/form-data",action:this.televersementUrl()},Gt,8,zt)])])):h("",!0)],64)}const Jt=V(Qe,[["render",Yt],["__scopeId","data-v-ba77464f"]]),Wt=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"})),Qt={name:"Test",data(){return{page:1,tdata:[[1,"un"],[2,"deux"],[3,"trois"],[4,"quatre"],[5,"cinq"],[6,"six"],[7,"sept"],[8,"huit"],[9,"neuf"],[10,"dix"],[11,"trois"],[12,"douze"],[13,"treize"],[14,"quatorze"]],preventableModal:!1}},methods:{detailsUrl(s){return unicaenVue.url("formule/administration/details/"+s)}}},Xt=e("div",null,"qsdqsd",-1),Zt=e("div",null,"qsdqsd",-1),Kt=e("div",null,"qsdqsd",-1),es=e("thead",null,[e("tr",null,[e("th",null,"A"),e("th",null,"B")])],-1);function ts(s,t,n,_,l,r){const o=z,c=z,m=ne,v=ie,x=ae,b=oe,P=le,ee=de,te=re,se=E("data-table");return i(),a(p,null,[Xt,Zt,f(o,{"model-value":!0,variant:"danger"},{default:C(()=>[d("coucou tout le monde!!!")]),_:1}),f(o,{"model-value":!0},{default:C(()=>[d("Default Alert")]),_:1}),f(o,{variant:"success","model-value":!0},{default:C(()=>[d("Success Alert")]),_:1}),f(c,{modelValue:s.showDismissibleAlert,"onUpdate:modelValue":t[0]||(t[0]=q=>s.showDismissibleAlert=q),variant:"danger",dismissible:""},{default:C(()=>[d(" Dismissible Alert! ")]),_:1},8,["modelValue"]),Kt,f(m,{modelValue:this.page,"onUpdate:modelValue":t[1]||(t[1]=q=>this.page=q),"total-rows":"1000","per-page":"10"},null,8,["modelValue"]),f(te,{bordered:""},{default:C(()=>[f(b,null,{default:C(()=>[f(x,null,{default:C(()=>[f(v,{"sticky-column":""},{default:C(()=>[d("Sticky Column Header")]),_:1}),f(v,null,{default:C(()=>[d("Heading 1")]),_:1}),f(v,null,{default:C(()=>[d("Heading 2")]),_:1}),f(v,null,{default:C(()=>[d("Heading 3")]),_:1}),f(v,null,{default:C(()=>[d("Heading 4")]),_:1})]),_:1})]),_:1}),f(ee,null,{default:C(()=>[f(x,null,{default:C(()=>[f(v,null,{default:C(()=>[d("Sticky Column Row Header")]),_:1}),f(P,null,{default:C(()=>[d("Cell")]),_:1}),f(P,null,{default:C(()=>[d("Cell")]),_:1}),f(P,null,{default:C(()=>[d("Cell")]),_:1}),f(P,null,{default:C(()=>[d("Cell")]),_:1})]),_:1}),f(x,null,{default:C(()=>[f(v,null,{default:C(()=>[d("Sticky Column Row Header")]),_:1}),f(P,null,{default:C(()=>[d("Cell")]),_:1}),f(P,null,{default:C(()=>[d("Cell")]),_:1}),f(P,null,{default:C(()=>[d("Cell")]),_:1}),f(P,null,{default:C(()=>[d("Cell")]),_:1})]),_:1})]),_:1})]),_:1}),f(se,{data:this.tdata,class:"table table-bordered"},{default:C(()=>[es]),_:1},8,["data"])],64)}const ss=V(Qt,[["render",ts]]),rs=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"})),is={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(s){this.formatted=this.formatage(s)}},methods:{formatage(s){if(s===void 0)return;let t=new Date(s);const n=t.getFullYear(),_=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),r=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0"),c=t.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${l}/${_}/${n} à ${r}:${o}`;case"time":return`${r}:${o}:${c}`}return`${l}/${_}/${n}`}}};function as(s,t,n,_,l,r){return u(l.formatted)}const j=V(is,[["render",as]]),os={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(s){this.searchTerm=s.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(s){return unicaenVue.url("intervenant/code:"+s+"/voir")},reload(){var s=document.getElementById("term");s.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(t=>{let n=t.data,_=[];for(const l in n){if(n[l].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){_.push(n[l]);continue}if(n[l].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){_.push(n[l]);continue}if(n[l].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){_.push(n[l]);continue}}this.intervenants=_,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(t=>{console.log(t.message)})},800)}}},ls=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),ds={class:"intervenant-recherche"},us={class:"critere"},cs=e("br",null,null,-1),hs=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),ms=e("br",null,null,-1),_s={key:0,class:"table table-bordered table-hover"},fs=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),ps=["title"],vs={style:{}},bs=["href"],gs=e("i",{class:"fas fa-eye"},null,-1),ys={key:1,class:"table table-bordered table-hover"},xs=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),ks=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),Cs=[xs,ks];function Vs(s,t,n,_,l,r){const o=j;return i(),a(p,null,[ls,e("div",ds,[e("div",us,[e("div",null,[e("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:t[0]||(t[0]=(...c)=>r.rechercher&&r.rechercher(...c))},null,32),cs]),e("div",null,[hs,A(e("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>l.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:t[2]||(t[2]=c=>r.reload())},null,544),[[U,l.checkedTypes]]),d(" Permanent "),A(e("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>l.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:t[4]||(t[4]=c=>r.reload())},null,544),[[U,l.checkedTypes]]),d(" Vacataire "),A(e("input",{"onUpdate:modelValue":t[5]||(t[5]=c=>l.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:t[6]||(t[6]=c=>r.reload())},null,544),[[U,l.checkedTypes]]),d(" Etudiant ")]),ms])]),l.intervenants.length>0?(i(),a("table",_s,[fs,e("tbody",null,[(i(!0),a(p,null,g(l.intervenants,(c,m)=>(i(),a("tr",{class:M({"bg-danger":c.destruction!==null}),title:c.destruction!==null?"Fiche historisé":""},[e("td",vs,[e("a",{href:r.urlFiche(c.code)},[gs,d(" Fiche")],8,bs)]),e("td",null,u(c.civilite),1),e("td",null,u(c.nom),1),e("td",null,u(c.prenom),1),e("td",null,u(c.structure),1),e("td",null,u(c.statut),1),e("td",null,[f(o,{value:c["date-naissance"]},null,8,["value"])]),e("td",null,u(c["numero-personnel"]),1)],10,ps))),256))])])):h("",!0),l.intervenants.length==0&&l.noResult==1?(i(),a("table",ys,Cs)):h("",!0)],64)}const $s=V(os,[["render",Vs]]),Ps=Object.freeze(Object.defineProperty({__proto__:null,default:$s},Symbol.toStringTag,{value:"Module"})),Ss={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return this.structure.structures.length>0}},methods:{saisie(s){modAjax(s.currentTarget,t=>{this.refresh()})},supprimer(s){popConfirm(s.currentTarget,t=>{this.refresh()})},refresh(){this.liste.reload()}}},w=s=>(L("data-v-a94dbf9e"),s=s(),I(),s),Ds={class:"accordion-item"},Es={class:"accordion-header"},Ts=["data-bs-target","aria-controls"],Ms=["href"],ws=w(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),As=[ws],Rs=["href"],js=w(()=>e("i",{class:"fas fa-trash-can"},null,-1)),Us=[js],Ls=["id"],Is={class:"accordion-body"},Hs={class:"row"},qs=w(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),d(" : ")],-1)),Fs={class:"col-md-5"},Os={class:"row"},Bs=w(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),d(" : ")],-1)),zs={class:"col-md-5"},Ns={class:"row"},Gs=w(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),d(" : ")],-1)),Ys={class:"col-md-5"},Js={key:0,class:"fas fa-check text-success"},Ws={key:1,class:"fas fa-xmark text-danger"},Qs={class:"row"},Xs=w(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),d(" : ")],-1)),Zs={class:"col-md-5"},Ks={key:0,class:"fas fa-check text-success"},en={key:1,class:"fas fa-xmark text-danger"},tn={class:"row"},sn=w(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),d(" : ")],-1)),nn={class:"col-md-5"},rn={key:0,class:"sous-structures"},an=w(()=>e("h4",null,"Sous-structures",-1)),on={class:"accordion"};function ln(s,t,n,_,l,r){const o=E("structure",!0);return i(),a("div",Ds,[e("h2",Es,[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":`#str${n.structure.id}`,"aria-expanded":"true","aria-controls":n.structure.id},[n.structure.canEdit?(i(),a("a",{key:0,title:"Modifier la structure",href:l.saisieUrl,class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=y((...c)=>r.saisie&&r.saisie(...c),["prevent"]))},As,8,Ms)):h("",!0),n.structure.canDelete?(i(),a("a",{key:1,title:"Supprimer la structure",href:l.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",onClick:t[1]||(t[1]=y((...c)=>r.supprimer&&r.supprimer(...c),["prevent"]))},Us,8,Rs)):h("",!0),d("   "+u(n.structure.libelleLong)+" ("+u(n.structure.libelleCourt)+") ",1)],8,Ts)]),e("div",{id:`str${n.structure.id}`,class:"accordion-collapse collapse show"},[e("div",Is,[e("div",Hs,[qs,e("div",Fs,u(n.structure.code),1)]),e("div",Os,[Bs,e("div",zs,u(n.structure.source.libelle),1)]),e("div",Ns,[Gs,e("div",Ys,[n.structure.enseignement?(i(),a("i",Js)):n.structure.enseignement?h("",!0):(i(),a("i",Ws))])]),e("div",Qs,[Xs,e("div",Zs,[n.structure.affAdresseContrat?(i(),a("i",Ks)):n.structure.affAdresseContrat?h("",!0):(i(),a("i",en))])]),e("div",tn,[sn,e("div",nn,[e("pre",null,u(n.structure.adresse),1)])]),r.hasSousStructures?(i(),a("div",rn,[an,e("div",on,[(i(!0),a(p,null,g(n.structure.structures,c=>(i(),S(o,{onRefresh:r.refresh,key:c.id,structure:c},null,8,["onRefresh","structure"]))),128))])])):h("",!0)])],8,Ls)])}const Y=V(Ss,[["render",ln],["__scopeId","data-v-a94dbf9e"]]),dn=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"})),un={components:{structure:Y},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(s){modAjax(s.currentTarget,t=>{console.log("coucou"),this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(s=>{this.structures=s.data})}}},cn=e("h1",null,"Administration des structures",-1),hn={class:"accordion"},mn=["href"],_n=e("i",{class:"fas fa-pen-to-square"},null,-1);function fn(s,t,n,_,l,r){const o=E("structure");return i(),a(p,null,[cn,e("div",hn,[(i(!0),a(p,null,g(l.structures,c=>(i(),S(o,{key:c.id,structure:c},null,8,["structure"]))),128))]),n.canAdd?(i(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:t[0]||(t[0]=y((...c)=>r.ajout&&r.ajout(...c),["prevent"])),title:"Ajouter une structure"},[_n,d(" Ajouter une structure ")],8,mn)):h("",!0)],64)}const pn=V(un,[["render",fn]]),vn=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),bn={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},gn=["id"],yn={class:"modal-dialog"},xn={class:"modal-content"},kn={class:"modal-header"},Cn={class:"modal-title"},Vn=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),$n={class:"modal-body"},Pn={class:"modal-footer"},Sn=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function Dn(s,t,n,_,l,r){return i(),a("div",{class:"modal fade",id:n.id,tabindex:"-1","aria-hidden":"true"},[e("div",yn,[e("div",xn,[e("div",kn,[e("h5",Cn,u(n.title),1),Vn]),e("div",$n,[N(s.$slots,"body")]),e("div",Pn,[N(s.$slots,"footer"),Sn])])])],8,gn)}const En=V(bn,[["render",Dn]]),Tn={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},Mn=["id"];function wn(s,t,n,_,l,r){return i(),a("i",{class:M(`fas fa-${n.name} text-${n.variant} fa-rotate-${n.rotate}`),id:`${n.id}`},null,10,Mn)}const R=V(Tn,[["render",wn]]),An={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(s){this.validationText=this.calcValidation(s)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(s){return s===null?"A valider":s.id===null?"Autovalidée":"Validation du "+Util.dateToString(s.histoCreation)+" par "},saisie(s){modAjax(s.currentTarget,t=>{this.refresh()})},supprimer(s){popConfirm(s.currentTarget,t=>{this.$emit("supprimer",this.mission)})},valider(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},devalider(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireSupprimer(s){s.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:s.currentTarget.dataset.id}),popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireValider(s){s.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:s.currentTarget.dataset.id}),popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireDevalider(s){s.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:s.currentTarget.dataset.id}),popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(s=>{this.$emit("refresh",s.data)})}}},T=s=>(L("data-v-1735108d"),s=s(),I(),s),Rn=["id"],jn={class:"card-header card-header-h3"},Un={key:0},Ln={class:"float-end"},In={key:1},Hn={key:2},qn={class:"float-end"},Fn={class:"card-body"},On={class:"row"},Bn={class:"col-md-8"},zn={class:"row"},Nn={class:"col-md-12"},Gn=T(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),Yn={class:"form-control"},Jn={class:"row"},Wn={class:"col-md-6"},Qn=T(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),Xn={class:"form-control"},Zn={class:"col-md-6"},Kn=T(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),er={class:"form-control"},tr={class:"col-md-7"},sr=T(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),nr={class:"input-group mb-3"},rr=["innerHTML"],ir=["data-bs-target"],ar={key:0,class:"col-md-5"},or=T(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),lr={class:"form-control"},dr={class:"row"},ur={class:"col-md-12"},cr=T(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),hr={class:"form-control"},mr={key:0,class:"row"},_r={class:"col-md-12"},fr=T(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),pr={class:"form-control"},vr=T(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),br={class:"row"},gr={class:"col-md-12"},yr=["href"],xr=["href"],kr=["href"],Cr=["href"],Vr={class:"col-md-4"},$r=T(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),Pr={class:"table table-bordered table-condensed"},Sr=T(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),Dr={style:{"text-align":"right"}},Er=T(()=>e("br",null,null,-1)),Tr={key:0},Mr=["data-id"],wr=["data-id"],Ar=["data-id"];function Rr(s,t,n,_,l,r){const o=j,c=R,m=E("utilisateur"),v=E("u-heures"),x=En;return i(),a(p,null,[e("div",{id:n.mission.id,class:M([{"bg-success":n.mission.valide,"bg-default":!n.mission.valide},"card"])},[e("form",{onSubmit:t[4]||(t[4]=y((...b)=>s.submitForm&&s.submitForm(...b),["prevent"]))},[e("div",jn,[n.mission.libelleMission?(i(),a("h5",Un,[d(u(n.mission.libelleMission)+" ",1),e("span",Ln,[d("Du "),f(o,{value:n.mission.dateDebut},null,8,["value"]),d(" au "),f(o,{value:n.mission.dateFin},null,8,["value"])])])):h("",!0),n.mission.libelleMission?(i(),a("h6",In,u(n.mission.typeMission.libelle),1)):h("",!0),n.mission.libelleMission?h("",!0):(i(),a("h5",Hn,[d(u(n.mission.typeMission.libelle)+" ",1),e("span",qn,[d("Du "),f(o,{value:n.mission.dateDebut},null,8,["value"]),d(" au "),f(o,{value:n.mission.dateFin},null,8,["value"])])]))]),e("div",Fn,[e("div",On,[e("div",Bn,[e("div",zn,[e("div",Nn,[Gn,e("div",Yn,u(n.mission.structure.libelle),1)])]),e("div",Jn,[e("div",Wn,[Qn,e("div",Xn,u(n.mission.tauxRemu?n.mission.tauxRemu.libelle:null),1)]),e("div",Zn,[Kn,e("div",er,u(n.mission.tauxRemuMajore?n.mission.tauxRemuMajore.libelle:n.mission.tauxRemu?"Idem ("+n.mission.tauxRemu.libelle+")":null),1)]),e("div",tr,[sr,e("div",nr,[e("div",{class:"form-control",innerHTML:r.heuresLib},null,8,rr),e("button",{"data-bs-target":`#details-${n.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,ir)])]),n.mission.typeMission.besoinFormation?(i(),a("div",ar,[or,e("div",lr,u(n.mission.heuresFormation),1)])):h("",!0)]),e("div",dr,[e("div",ur,[cr,e("div",hr,u(n.mission.description),1)])]),n.mission.typeMission.accompagnementEtudiants?(i(),a("div",mr,[e("div",_r,[fr,e("div",pr,[e("pre",null,u(n.mission.etudiantsSuivis),1)])])])):h("",!0),vr,e("div",br,[e("div",gr,[n.mission.canSaisie?(i(),a("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...b)=>r.saisie&&r.saisie(...b),["prevent"]))},"Modifier",8,yr)):h("",!0),n.mission.canValider?(i(),a("a",{key:1,href:l.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:t[1]||(t[1]=y((...b)=>r.valider&&r.valider(...b),["prevent"]))},"Valider",8,xr)):h("",!0),n.mission.canDevalider?(i(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:t[2]||(t[2]=y((...b)=>r.devalider&&r.devalider(...b),["prevent"]))},"Dévalider",8,kr)):h("",!0),n.mission.canSupprimer?(i(),a("a",{key:3,href:l.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:t[3]||(t[3]=y((...b)=>r.supprimer&&r.supprimer(...b),["prevent"]))},"Supprimer",8,Cr)):h("",!0)])])]),e("div",Vr,[$r,e("div",null,[f(c,{name:"thumbs-up",variant:"success"}),d(" Créé le "),f(o,{value:n.mission.histoCreation},null,8,["value"]),d(" par "),f(m,{mail:n.mission.histoCreateur.email,nom:n.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[f(c,{name:n.mission.valide?"thumbs-up":"thumbs-down",variant:n.mission.valide?"success":"info"},null,8,["name","variant"]),d(" "+u(l.validationText)+" ",1),n.mission.validation&&n.mission.validation.histoCreateur?(i(),S(m,{key:0,mail:n.mission.validation.histoCreateur.email,nom:n.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):h("",!0)]),e("div",null,[f(c,{name:n.mission.contrat?"thumbs-up":"thumbs-down",variant:n.mission.contrat?"success":"info"},null,8,["name","variant"]),d(" "+u(n.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,u(n.mission.heuresRealisees)+" heure"+u(n.mission.heuresRealisees<2?"":"s")+" réalisée"+u(n.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,Rn),f(x,{id:`details-${n.mission.id}`,title:"Détail des heures prévisionnelles"},{body:C(()=>[e("table",Pr,[Sr,e("tbody",null,[(i(!0),a(p,null,g(n.mission.volumesHorairesPrevus,b=>(i(),a("tr",{key:b.id},[e("td",Dr,[f(v,{valeur:b.heures},null,8,["valeur"])]),e("td",null,[f(c,{name:"thumbs-up",variant:"success"}),d(" Saisi par "),f(m,{mail:b.histoCreateur.email,nom:b.histoCreateur.displayName},null,8,["mail","nom"]),d(" le "),f(o,{value:b.histoCreation},null,8,["value"]),Er,f(c,{name:b.valide?"thumbs-up":"thumbs-down",variant:b.valide?"success":"info"},null,8,["name","variant"]),d(" "+u(b.validation&&b.validation.id==null?"Autovalidé":b.validation?"":"à valider")+" ",1),b.validation&&b.validation.histoCreateur?(i(),a("span",Tr,[d(" Validé par "),f(m,{mail:b.validation.histoCreateur.email,nom:b.validation.histoCreateur.displayName},null,8,["mail","nom"]),d(" le "),f(o,{value:b.validation.histoCreation},null,8,["value"])])):h("",!0)]),e("td",null,[b.canValider?(i(),a("a",{key:0,"data-id":b.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:t[5]||(t[5]=y((...P)=>r.volumeHoraireValider&&r.volumeHoraireValider(...P),["prevent"]))},"Valider",8,Mr)):h("",!0),b.canDevalider?(i(),a("a",{key:1,"data-id":b.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:t[6]||(t[6]=y((...P)=>r.volumeHoraireDevalider&&r.volumeHoraireDevalider(...P),["prevent"]))},"Dévalider",8,wr)):h("",!0),b.canSupprimer?(i(),a("a",{key:2,"data-id":b.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:t[7]||(t[7]=y((...P)=>r.volumeHoraireSupprimer&&r.volumeHoraireSupprimer(...P),["prevent"]))},"Supprimer",8,Ar)):h("",!0)])]))),128))])])]),footer:C(()=>[]),_:1},8,["id"])],64)}const J=V(An,[["render",Rr],["__scopeId","data-v-1735108d"]]),jr=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"})),Ur={components:{mission:J},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(s){modAjax(s.currentTarget,t=>{this.reload()})},supprimer(s){this.reload()},refresh(s){let t=Util.json.indexById(this.missions,s.id);this.missions[t]=s,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(s=>{this.missions=s.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},Lr=["href"];function Ir(s,t,n,_,l,r){const o=E("mission");return i(),a(p,null,[(i(!0),a(p,null,g(l.missions,c=>(i(),S(o,{onSupprimer:r.supprimer,onRefresh:r.refresh,key:c.id,mission:c},null,8,["onSupprimer","onRefresh","mission"]))),128)),n.canAddMission?(i(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:t[0]||(t[0]=y((...c)=>r.ajout&&r.ajout(...c),["prevent"]))},"Ajout d'une nouvelle mission",8,Lr)):h("",!0)],64)}const Hr=V(Ur,[["render",Ir]]),qr=Object.freeze(Object.defineProperty({__proto__:null,default:Hr},Symbol.toStringTag,{value:"Module"})),Fr={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},canValiderCandidature:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(s=>{this.candidatures=s.data})},validerCandidature(s){modAjax(s.currentTarget,t=>{this.reload()})},refuserCandidature(s){popConfirm(s.target,t=>{this.reload()})},urlOffre(s){return unicaenVue.url("offre-emploi/detail/:offre",{offre:s.offre.id})},urlAccepterCandidature:function(s){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:s.id})},urlRefuserCandidature:function(s){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:s.id})}}},Or={class:"table table-bordered"},Br=e("th",null,"Offre d'emploi",-1),zr=e("th",null,"Composante",-1),Nr=e("th",null,"Etat",-1),Gr=e("th",null,"Date commission",-1),Yr={key:0},Jr={key:0},Wr={key:0,colspan:"5",style:{"text-align":"center"}},Qr={style:{"text-align":"center"}},Xr=["href"],Zr={style:{"text-align":"center"}},Kr={style:{"text-align":"center"}},ei={key:0,class:"badge rounded-pill bg-success"},ti={key:1,class:"badge rounded-pill bg-danger"},si={key:2,class:"badge rounded-pill bg-warning"},ni={key:0,style:{"text-align":"center"}},ri=["href"],ii=e("i",{class:"fa-solid fa-check"},null,-1),ai=[ii],oi=["href"],li=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),di=[li],ui=["href"];function ci(s,t,n,_,l,r){const o=j,c=R;return i(),a("div",null,[e("table",Or,[e("thead",null,[e("tr",null,[Br,zr,Nr,Gr,n.canValiderCandidature?(i(),a("th",Yr,"Action")):h("",!0)])]),e("tbody",null,[l.candidatures.length==0?(i(),a("tr",Jr,[n.canValiderCandidature?(i(),a("td",Wr,"Aucune candidature")):h("",!0)])):h("",!0),(i(!0),a(p,null,g(l.candidatures,m=>(i(),a("tr",{key:m.id},[e("td",Qr,[e("a",{href:r.urlOffre(m)},u(m.offre.titre),9,Xr)]),e("td",Zr,u(m.offre.structure.libelleCourt),1),e("td",Kr,[m.validation?(i(),a("span",ei,"Acceptée par "+u(m.validation.histoCreateur.displayName),1)):h("",!0),!m.validation&&m.motif!==null?(i(),a("span",ti,u(m.motif),1)):h("",!0),!m.validation&&m.motif===null?(i(),a("span",si,"En attente d'acceptation")):h("",!0)]),e("td",null,[m.dateCommission?(i(),S(o,{key:0,value:m.dateCommission},null,8,["value"])):h("",!0)]),this.canValiderCandidature?(i(),a("td",ni,[m.validation?h("",!0):(i(),a("a",{key:0,href:r.urlAccepterCandidature(m),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:t[0]||(t[0]=y((...v)=>r.validerCandidature&&r.validerCandidature(...v),["prevent"]))},ai,8,ri)),d("  "),e("a",{href:r.urlRefuserCandidature(m),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:t[1]||(t[1]=y((...v)=>r.refuserCandidature&&r.refuserCandidature(...v),["prevent"]))},di,8,oi)])):h("",!0)]))),128))])]),e("a",{href:l.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[f(c,{name:"eye"}),d(" Voir toutes les offres d'emploi ")],8,ui),d("  ")])}const hi=V(Fr,[["render",ci]]),mi=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"})),_i={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let s=this.offre.description.substr(0,200);return this.offre.description.length>200&&(s+="..."),s},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let s="auth/connexion?redirect="+window.location.href;return unicaenVue.url(s)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(s){modAjax(s.target,t=>{this.refresh()})},urlVoir:function(s){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+s.intervenant.code})},urlVoirCandidature:function(s){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+s.intervenant.code})},urlAccepterCandidature:function(s){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:s.id})},urlRefuserCandidature:function(s){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:s.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(s=>{this.$emit("refresh",s.data)})},supprimer(s){popConfirm(s.target,t=>{this.$emit("supprimer",this.offre)})},postuler(s){popConfirm(s.target,t=>{this.$emit("postuler",this.offre)})},valider(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},devalider(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},validerCandidature(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},refuserCandidature(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})}}},fi={key:0,class:"col"},pi={class:"card h-100"},vi={class:"card-header"},bi={class:"badge rounded-pill bg-info"},gi={key:0,class:"badge rounded-pill bg-success"},yi={key:1,class:"badge rounded-pill bg-warning"},xi={class:"card-body"},ki={class:"bg-light",style:{padding:"5px"}},Ci=e("b",null,"Créée le : ",-1),Vi=e("br",null,null,-1),$i=e("b",null,"Période à pourvoir : ",-1),Pi=e("br",null,null,-1),Si=e("b",null,"Demandée par la composante :",-1),Di=e("br",null,null,-1),Ei=e("b",null,"Type de mission :",-1),Ti={class:"card-footer"},Mi={class:"d-grid gap-2 d-md-flex justify-content-md-end"},wi=["href"],Ai={key:1},Ri={class:"page-header"},ji={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},Ui=e("i",{class:"fa-solid fa-user"},null,-1),Li={class:"ms-2"},Ii=["href"],Hi={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},qi=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),Fi=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),Oi=[qi,Fi],Bi={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},zi=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),Ni=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),Gi=[zi,Ni],Yi={class:"bg-light",style:{padding:"10px"}},Ji=e("b",null,"Créée le : ",-1),Wi=e("br",null,null,-1),Qi=e("b",null,"Période à pourvoir : ",-1),Xi=e("br",null,null,-1),Zi=e("b",null,"Date limite de candidature :",-1),Ki=e("br",null,null,-1),ea=e("b",null,"Demandé par la composante :",-1),ta=e("br",null,null,-1),sa=e("b",null,"Type de mission :",-1),na=e("br",null,null,-1),ra=e("b",null,"Nombre d'heures pour la mission :",-1),ia=e("br",null,null,-1),aa=e("b",null,"Nombre de postes à pourvoir :",-1),oa=e("br",null,null,-1),la={key:3,class:"alert alert-info"},da=["innerHTML"],ua=e("br",null,null,-1),ca={key:4},ha=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),ma={class:"table table-bordered"},_a=e("th",null,"Intervenant",-1),fa=e("th",null,"Etat",-1),pa={key:0},va={key:0},ba={key:0,colspan:"4",style:{"text-align":"center"}},ga={key:1,colspan:"3",style:{"text-align":"center"}},ya=["href"],xa={key:0,class:"badge rounded-pill bg-success"},ka={key:1,class:"badge rounded-pill bg-danger"},Ca={key:2,class:"badge rounded-pill bg-warning"},Va={key:0},$a=["href"],Pa={class:"mt-5"},Sa=["href"],Da=["href"],Ea=["href"],Ta=["href"],Ma=["href"],wa=["href"];function Aa(s,t,n,_,l,r){const o=j,c=R;return i(),a(p,null,[this.extended?h("",!0):(i(),a("div",fi,[e("div",pi,[e("div",vi,[e("h4",null,u(n.offre.titre),1),e("span",bi,u(n.offre.nombreHeures)+" heure(s)",1),d("   "),n.offre.validation?(i(),a("span",gi,[d("Validée le "),f(o,{value:n.offre.validation.histoCreation},null,8,["value"]),d(" par "+u(n.offre.validation.histoCreateur.displayName),1)])):h("",!0),n.offre.validation?h("",!0):(i(),a("span",yi," En attente de validation par la DRH")),d("  ")]),e("div",xi,[e("p",ki,[Ci,f(o,{value:n.offre.histoCreation},null,8,["value"]),d(" par "+u(n.offre.histoCreateur.displayName),1),Vi,$i,d("du "),f(o,{value:n.offre.dateDebut},null,8,["value"]),d(" au "),f(o,{value:n.offre.dateFin},null,8,["value"]),Pi,Si,d(" "+u(n.offre.structure.libelleCourt)+" ",1),Di,Ei,d(" "+u(n.offre.typeMission.libelle),1)]),d(" "+u(r.shortDesc),1)]),e("div",Ti,[e("div",Mi,[e("a",{href:l.consulterUrl,class:"btn btn-primary",title:"Consulter "},[f(c,{name:"eye"}),d(" Voir ")],8,wi)])])])])),this.extended?(i(),a("div",Ai,[e("h1",Ri,u(n.offre.titre),1),this.utilisateur?h("",!0):(i(),a("div",ji,[Ui,e("div",Li,[d(" Vous devez "),e("a",{href:r.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,Ii),d(" pour pouvoir postuler. ")])])),!n.offre.canPostuler&&this.utilisateur?(i(),a("div",Hi,Oi)):h("",!0),r.isCandidat&&this.utilisateur?(i(),a("div",Bi,Gi)):h("",!0),e("p",Yi,[Ji,f(o,{value:n.offre.histoCreation},null,8,["value"]),d(" par "+u(n.offre.histoCreateur.displayName),1),Wi,Qi,d("du "),f(o,{value:n.offre.dateDebut},null,8,["value"]),d(" au "),f(o,{value:n.offre.dateFin},null,8,["value"]),Xi,Zi,f(o,{value:n.offre.dateLimite},null,8,["value"]),Ki,ea,d(" "+u(n.offre.structure.libelleCourt)+" ",1),ta,sa,d(" "+u(n.offre.typeMission.libelle)+" ",1),na,ra,d(" "+u(n.offre.nombreHeures)+" heure(s) ",1),ia,aa,d(" "+u(n.offre.nombrePostes)+" poste(s) ",1),oa]),e("p",null,u(this.descriptionHtml),1),this.decretText?(i(),a("p",la,[A(e("input",{id:"decret","onUpdate:modelValue":t[0]||(t[0]=m=>l.decret=m),name:"decret",type:"checkbox"},null,512),[[U,l.decret]]),d("  "),e("span",{innerHTML:this.decretText},null,8,da)])):h("",!0),ua,this.canValiderCandidature?(i(),a("div",ca,[ha,e("table",ma,[e("thead",null,[e("tr",null,[_a,fa,n.canValiderCandidature?(i(),a("th",pa,"Action")):h("",!0)])]),e("tbody",null,[n.offre.candidatures.length==0?(i(),a("tr",va,[n.canValiderCandidature?(i(),a("td",ba,"Aucune candidature")):h("",!0),n.canValiderCandidature?h("",!0):(i(),a("td",ga,"Aucune candidature"))])):h("",!0),(i(!0),a(p,null,g(n.offre.candidatures,m=>(i(),a("tr",null,[e("td",null,[e("a",{href:r.urlVoir(m)},u(m.intervenant.prenom+" "+m.intervenant.nomUsuel),9,ya)]),e("td",null,[m.validation?(i(),a("span",xa,[d("Acceptée le "),f(o,{value:m.validation.histoCreation},null,8,["value"]),d(" par "+u(m.validation.histoCreateur.displayName),1)])):h("",!0),!m.validation&&m.motif!==null?(i(),a("span",ka,u(m.motif),1)):h("",!0),!m.validation&&m.motif===null?(i(),a("span",Ca,"En attente d'acceptation")):h("",!0)]),this.canValiderCandidature?(i(),a("td",Va,[e("a",{href:r.urlVoirCandidature(m),class:"btn btn-primary",title:"Consulter "},[f(c,{name:"eye"}),d(" Voir ")],8,$a)])):h("",!0)]))),256))])])])):h("",!0),e("div",Pa,[e("a",{href:l.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,Sa),d("  "),this.canPostuler?(i(),a("a",{key:0,href:l.postulerUrl,class:M(["btn btn-primary",l.decret?"":"disabled"]),"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,Da)):h("",!0),d("  "),n.offre.canModifier?(i(),a("a",{key:1,href:l.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:t[1]||(t[1]=y((...m)=>r.saisir&&r.saisir(...m),["prevent"]))},[f(c,{name:"pen-to-square"}),d(" Modifier ")],8,Ea)):h("",!0),d("  "),n.offre.validation&&n.offre.canValider?(i(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:t[2]||(t[2]=y((...m)=>r.devalider&&r.devalider(...m),["prevent"]))},[f(c,{name:"thumbs-down"}),d(" Devalider ")],8,Ta)):h("",!0),d("  "),!n.offre.validation&&n.offre.canValider?(i(),a("a",{key:3,href:l.validerUrl,class:"btn btn-success",title:"Valider",onClick:t[3]||(t[3]=y((...m)=>r.valider&&r.valider(...m),["prevent"]))},[f(c,{name:"thumbs-up"}),d(" Valider ")],8,Ma)):h("",!0),d("  "),n.offre.canSupprimer?(i(),a("a",{key:4,href:l.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:t[4]||(t[4]=y((...m)=>r.supprimer&&r.supprimer(...m),["prevent"]))},[f(c,{name:"trash"}),d(" Supprimer ")],8,wa)):h("",!0)])])):h("",!0)],64)}const W=V(_i,[["render",Aa]]),Ra=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"})),ja={components:{offreEmploi:W},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(s){modAjax(s.target,t=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(s){let t=Util.json.indexById(this.offres,s.id);this.offres[t]=s},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(s=>{this.offres=[s.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(s=>{this.offres=s.data})}}},Ua={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},La={key:1},Ia=["href"],Ha={key:2};function qa(s,t,n,_,l,r){const o=E("offreEmploi");return i(),a(p,null,[r.extended?h("",!0):(i(),a("div",Ua,[(i(!0),a(p,null,g(l.offres,c=>(i(),S(o,{key:c.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:c,decretText:c.decretText,onRefresh:r.refresh,onSupprimer:r.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),r.extended?h("",!0):(i(),a("div",La,[this.canModifier?(i(),a("a",{key:0,href:l.ajoutUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...c)=>r.ajout&&r.ajout(...c),["prevent"]))},"Ajouter une nouvelle offre",8,Ia)):h("",!0)])),r.extended?(i(),a("div",Ha,[(i(!0),a(p,null,g(l.offres,c=>(i(),S(o,{key:c.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:c.decretText,extended:r.extended,offre:c,utilisateur:this.utilisateur,onRefresh:r.refresh,onSupprimer:r.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):h("",!0)],64)}const Fa=V(ja,[["render",qa]]),Oa=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"})),Ba={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(s){popConfirm(s.target,t=>{this.$emit("reload")})},valider(s){popConfirm(s.target,t=>{this.$emit("reload")})},devalider(s){popConfirm(s.target,t=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(s=>{this.$emit("reload")})},modifierPrime(s){modAjax(s.currentTarget,t=>{this.$emit("reload")})},supprimerPrime(s){popConfirm(s.target,t=>{this.$emit("reload")})}}},za={key:0},Na=e("br",null,null,-1),Ga=e("u",null,"Mission(s) concernée(s)",-1),Ya={key:0},Ja=["action"],Wa={class:"card-body"},Qa={class:"row"},Xa={key:0,class:"col-md-6"},Za={class:"card text-dark bg-light"},Ka=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),eo={class:"card-body"},to=e("p",{class:"card-text"},[d(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),d(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),d(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),so=["disabled"],no={class:"card-footer d-grid gap-2"},ro=["disabled"],io={key:1,class:"col-md-6"},ao={class:"card text-dark bg-light"},oo=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),lo={class:"card-body"},uo=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),co=["href"],ho={class:"card-footer",style:{"text-align":"right"}},mo=["href"],_o=["href"],fo=["href"],po={class:"col-md-6"},vo={key:0},bo=["checked","disabled"],go=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),yo=e("br",null,null,-1),xo=e("br",null,null,-1),ko=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),Co={key:0},Vo={key:1},$o={key:2},Po={key:3},So={key:4},Do={key:5},Eo={key:6},To={class:"row"},Mo={class:"col-md-12"},wo={class:"float-end"},Ao=["href"],Ro=["href"];function jo(s,t,n,_,l,r){const o=j,c=R;return i(),a("div",{class:M([{"bg-success":n.prime.validation,"bg-default":!n.prime.validation&&!n.prime.dateRefus,"bg-danger":n.prime.dateRefus},"card"])},[e("div",{class:M([{"text-white":n.prime.dateRefus},"card-header card-header-h3"])},[n.prime.id?(i(),a("h5",za,[d(" Indemnité de fin de contrat N°"+u(n.numero+1),1),Na])):h("",!0),e("div",null,[Ga,d(" : "),(i(!0),a(p,null,g(n.prime.missions,(m,v)=>(i(),a("span",null,[d(u(m.typeMission.libelle)+" (Pour "+u(m.structure.libelleCourt)+" du ",1),f(o,{value:m.dateDebut},null,8,["value"]),d(" au "),f(o,{value:m.dateFin},null,8,["value"]),d(") "),v!=n.prime.missions.length-1?(i(),a("span",Ya,", ")):h("",!0)]))),256))])],2),e("form",{action:l.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",Wa,[e("div",Qa,[n.prime.declaration?h("",!0):(i(),a("div",Xa,[e("div",Za,[Ka,e("div",eo,[to,e("input",{ref:"file",disabled:!!n.prime.dateRefus,name:"files[]",type:"file"},null,8,so)]),e("div",no,[e("input",{disabled:!!n.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,ro)])])])),n.prime.declaration?(i(),a("div",io,[e("div",ao,[oo,e("div",lo,[uo,e("a",{href:l.telechargerUrl},u(n.prime.declaration.nom),9,co)]),e("div",ho,[n.prime.declaration&&!n.prime.validation&&!n.prime.dateRefus?(i(),a("a",{key:0,href:l.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:t[0]||(t[0]=y((...m)=>r.supprimer&&r.supprimer(...m),["prevent"]))}," Supprimer ",8,mo)):h("",!0),d("  "),n.prime.declaration&&!n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(i(),a("a",{key:1,href:l.validerUrl,class:"btn btn-success",title:"Valider",onClick:t[1]||(t[1]=y((...m)=>r.valider&&r.valider(...m),["prevent"]))}," Valider ",8,_o)):h("",!0),d("  "),n.prime.declaration&&n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(i(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:t[2]||(t[2]=y((...m)=>r.devalider&&r.devalider(...m),["prevent"]))}," Dévalider ",8,fo)):h("",!0),d("  ")])])])):h("",!0),e("div",po,[n.prime.validation?h("",!0):(i(),a("div",vo,[e("input",{checked:n.prime.dateRefus,disabled:n.prime.validation,name:"prime",type:"checkbox",onChange:t[3]||(t[3]=(...m)=>r.refuser&&r.refuser(...m))},null,40,bo),d("  Ou en cochant cette case, "),go,d(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),yo,xo])),e("div",null,[ko,n.prime.dateRefus?(i(),a("div",Co,[f(c,{name:"thumbs-down",variant:"danger"}),d(" Indemnité refusée le "),f(o,{value:n.prime.dateRefus},null,8,["value"])])):h("",!0),n.prime.declaration&&!n.prime.dateRefus?(i(),a("div",Vo,[f(c,{name:"thumbs-up",variant:"success"}),d(" Déclaration déposée le "),f(o,{value:n.prime.declaration.histoCreation},null,8,["value"]),d(" par "+u(n.prime.declaration.histoCreateur.displayName),1)])):h("",!0),!n.prime.declaration&&!n.prime.dateRefus?(i(),a("div",$o,[f(c,{name:"thumbs-down",variant:"info"}),d(" Aucune déclaration déposée ")])):h("",!0),n.prime.validation&&!n.prime.dateRefus?(i(),a("div",Po,[f(c,{name:"thumbs-up",variant:"success"}),d(" Déclaration validée le "),f(o,{value:n.prime.validation.histoCreation},null,8,["value"]),d(" par "+u(n.prime.validation.histoCreateur.displayName),1)])):h("",!0),!n.prime.validation&&!n.prime.dateRefus?(i(),a("div",So,[f(c,{name:"thumbs-down",variant:"info"}),d(" Aucune déclaration validée ")])):h("",!0),n.prime.validation&&!n.prime.dateRefus?(i(),a("div",Do,[f(c,{name:"euro-sign",variant:"success"}),d(" Intervenant éligible à une indemnité de fin de contrat ")])):h("",!0),n.prime.dateRefus?(i(),a("div",Eo,[f(c,{name:"euro-sign",variant:"info"}),d(" Intervenant non éligible à une indemnité de fin de contrat ")])):h("",!0)])])]),e("div",To,[e("div",Mo,[e("span",wo,[!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(i(),a("a",{key:0,href:l.modifierPrimeUrl,class:"btn btn-primary",onClick:t[4]||(t[4]=y((...m)=>r.modifierPrime&&r.modifierPrime(...m),["prevent"]))},"Modifier",8,Ao)):h("",!0),d("   "),!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(i(),a("a",{key:1,href:l.supprimerPrimeUrl,class:"btn btn-danger",onClick:t[5]||(t[5]=y((...m)=>r.supprimerPrime&&r.supprimerPrime(...m),["prevent"]))},"Supprimer",8,Ro)):h("",!0)])])])])],8,Ja)],2)}const Q=V(Ba,[["render",jo]]),Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),Lo={components:{prime:Q},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(s){modAjax(s.currentTarget,t=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(s=>{this.primes=s.data,this.load=!0})}}},Io={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Ho=e("br",null,null,-1),qo=e("br",null,null,-1),Fo={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Oo=e("br",null,null,-1),Bo=e("br",null,null,-1),zo={key:2},No=["href"];function Go(s,t,n,_,l,r){const o=E("prime");return i(),a(p,null,[(i(!0),a(p,null,g(l.primes,(c,m)=>(i(),S(o,{canGerer:n.canGerer,intervenant:this.intervenant,numero:m,prime:c,onReload:r.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),l.load?h("",!0):(i(),a("div",Io,[d(" Chargement en cours..."),Ho,qo])),l.primes.length==0&&l.load?(i(),a("div",Fo,[d(" Aucune indemnité de fin de contrat actuellement..."),Oo,Bo])):h("",!0),this.missionsWithoutPrime>0&&this.canGerer?(i(),a("div",zo,[e("a",{href:l.ajoutUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...c)=>r.ajout&&r.ajout(...c),["prevent"]))},"Créer une nouvelle indemnité",8,No)])):h("",!0)],64)}const Yo=V(Lo,[["render",Go]]),Jo=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Wo={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const s=new Date(this.date);return{mois:s.getMonth()+1,annee:s.getFullYear()}},computed:{listeJours(){const s=new Date(this.date);s.setDate(1),s.setMonth(s.getMonth()+1),s.setDate(s.getDate()-1);let t=s.getDate();return Array.from({length:t},(n,_)=>_+1)}},watch:{date:function(s,t){const n=new Date(this.date);this.mois=n.getMonth()+1,this.annee=n.getFullYear()},mois:function(s,t){const n=new Date(this.date);n.setMonth(s-1),this.$emit("changeDate",n)},annee:function(s,t){const n=new Date(this.date);n.setFullYear(s),this.$emit("changeDate",n)}},methods:{nomJour(s){const t=new Date(this.date);return t.setDate(s),t.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let s=[];const t=new Date;for(let n=1;n<=12;n++){t.setMonth(n-1);let _=t.toLocaleString("fr-FR",{month:"long"});s.push({id:n,libelle:_})}return s},listeAnnees(){const t=new Date().getFullYear(),n=1;let _=[];for(let l=t-n;l<=t+n;l++)_.push(l);return _},canAdd(s){if(!this.canAddEvent)return!1;let t=this.addDateDebut;t===void 0?t=new Date("2000-01-01"):t==="now"?t=new Date:t=new Date(t);let n=this.addDateFin;n===void 0?n=new Date("2500-01-01"):n==="now"?n=new Date:n=new Date(n);let _=new Date(this.date);return _.setDate(s),t=this.isoDateOnly(t),n=this.isoDateOnly(n),_=this.isoDateOnly(_),!(_<t||_>n)},addEvent(s){const t=new Date(this.date);t.setDate(s.currentTarget.dataset.jour),this.$emit("addEvent",t,s)},prevMois(){const s=new Date(this.date);s.setMonth(s.getMonth()-1),this.$emit("changeDate",s)},nextMois(){const s=new Date(this.date);s.setMonth(s.getMonth()+1),this.$emit("changeDate",s)},eventsByJour(s){const t=new Date(this.date);let n={};for(let _ in this.events){let l=this.events[_];l.date.getFullYear()===t.getFullYear()&&l.date.getMonth()+1===t.getMonth()+1&&l.date.getDate()===s&&(n[_]=l)}return n},isoDateOnly(s){const t=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),_=String(s.getDate()).padStart(2,"0");return`${t}-${n}-${_}`}}},Qo={class:"calendar"},Xo={class:"recherche"},Zo={class:"recherche btn-group"},Ko=["value"],el=["value"],tl={class:"table table-bordered table-hover table-sm"},sl=["data-jour"],nl={class:"nom-jour"},rl={class:"numero-jour"},il={class:"num-jour badge bg-secondary rounded-circle"},al={key:0},ol=["data-jour"];function ll(s,t,n,_,l,r){const o=R;return i(),a("div",Qo,[e("div",Xo,[e("div",Zo,[e("button",{class:"btn btn-light",id:"prevMois",onClick:t[0]||(t[0]=(...c)=>r.prevMois&&r.prevMois(...c)),title:"Mois précédant"},[f(o,{name:"chevron-left"})]),A(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":t[1]||(t[1]=c=>l.mois=c)},[(i(!0),a(p,null,g(r.listeMois(),c=>(i(),a("option",{value:c.id},u(c.libelle),9,Ko))),256))],512),[[F,l.mois]]),A(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":t[2]||(t[2]=c=>l.annee=c)},[(i(!0),a(p,null,g(r.listeAnnees(),c=>(i(),a("option",{value:c},u(c),9,el))),256))],512),[[F,l.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:t[3]||(t[3]=(...c)=>r.nextMois&&r.nextMois(...c)),title:"Mois suivant"},[f(o,{name:"chevron-right"})])])]),e("table",tl,[(i(!0),a(p,null,g(r.listeJours,c=>(i(),a("tr",{"data-jour":c},[e("th",nl,u(r.nomJour(c)),1),e("th",rl,[e("div",il,u(c<10?"0"+c.toString():c),1)]),e("td",null,[(i(!0),a(p,null,g(r.eventsByJour(c),(m,v)=>(i(),a("div",{class:"event",style:ue("border-color:"+m.color+";background-color:"+m.bgcolor),key:v},[(i(),S(ce(m.component),{event:m},null,8,["event"]))],4))),128)),r.canAdd(c)?(i(),a("div",al,[e("button",{onClick:t[4]||(t[4]=(...m)=>r.addEvent&&r.addEvent(...m)),"data-jour":c,class:"btn btn-light btn-sm"},[f(o,{name:"plus"}),d(" Nouvel événement ")],8,ol)])):h("",!0)])],8,sl))),256))])])}const dl=V(Wo,[["render",ll],["__scopeId","data-v-51bbc42d"]]),ul={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(s){modAjax(s.currentTarget,t=>{this.suivi.refresh()})},supprimer(s){popConfirm(s.currentTarget,t=>{this.suivi.refresh()})},valider(s){unicaenVue.axios.get(this.validerUrl).then(t=>{this.suivi.refresh()})},devalider(s){popConfirm(s.currentTarget,t=>{this.suivi.refresh()})}}},cl={class:"event-content"},hl={class:"mission"},ml={key:0,class:"badge bg-success"},_l={class:"horaires"},fl={key:0,class:"badge bg-secondary"},pl={key:0,class:"description"},vl={class:"event-actions"},bl={class:"btn-group btn-group-sm"},gl=["data-url"],yl=["data-url"],xl=["data-url"],kl=["data-url"];function Cl(s,t,n,_,l,r){const o=R;return i(),a(p,null,[e("div",cl,[e("p",hl,[d(u(n.event.mission.libelleCourt)+" ",1),n.event.valide?(i(),a("span",ml,"Validé")):h("",!0)]),e("p",_l,[d(" de "+u(r.heureDebut)+" à "+u(r.heureFin)+", soit "+u(r.heures)+" heure"+u(r.heures<2?"":"s")+" ",1),n.event.formation?(i(),a("span",fl,"En formation")):h("",!0)]),n.event.description?(i(),a("p",pl,u(n.event.description),1)):h("",!0)]),e("div",vl,[e("div",bl,[n.event.canEdit?(i(),a("button",{key:0,class:"btn btn-light",onClick:t[0]||(t[0]=(...c)=>r.modifier&&r.modifier(...c)),title:"Modifier le suivi","data-url":l.modifierUrl},[f(o,{name:"pen-to-square"})],8,gl)):h("",!0),n.event.canValider?(i(),a("button",{key:1,class:"btn btn-light",onClick:t[1]||(t[1]=(...c)=>r.valider&&r.valider(...c)),title:"Valider le suivi","data-url":l.validerUrl},[f(o,{name:"check",class:"text-success"})],8,yl)):h("",!0),n.event.canDevalider?(i(),a("button",{key:2,class:"btn btn-light",onClick:t[2]||(t[2]=(...c)=>r.devalider&&r.devalider(...c)),title:"Dévalider le suivi","data-url":l.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[f(o,{name:"xmark",class:"text-danger"})],8,xl)):h("",!0),n.event.canSupprimer?(i(),a("button",{key:3,class:"btn btn-light",onClick:t[3]||(t[3]=(...c)=>r.supprimer&&r.supprimer(...c)),title:"Supprimer le suivi","data-url":l.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[f(o,{name:"trash-can",class:"text-danger"})],8,kl)):h("",!0)])])],64)}const X=V(ul,[["render",Cl],["__scopeId","data-v-17cb1f29"]]),Vl=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"})),$l={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(s){this.date=s},ajouter(s,t){const n={intervenant:this.intervenant,date:s.toISOString().slice(0,10)};t.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",n),modAjax(t.currentTarget,_=>{this.refresh()})},refresh(){const s=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let t=0,n=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(_=>{let l=[];for(let r in _.data){let o=_.data[r];n[o.mission.id]===void 0&&(n[o.mission.id]=s[t],t++),o.valide&&(o.bgcolor="#d0eddb"),o.color=n[o.mission.id],o.component=he(X),o.date=new Date(o.date),o.intervenant=this.intervenant,l.push(o)}this.suivi=l,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function Pl(s,t,n,_,l,r){const o=dl;return i(),S(o,{date:l.date,onChangeDate:r.changeDate,onAddEvent:r.ajouter,"can-add-event":n.canAddMission,addDateFin:"now",events:l.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const Sl=V($l,[["render",Pl]]),Dl=Object.freeze(Object.defineProperty({__proto__:null,default:Sl},Symbol.toStringTag,{value:"Module"}));function El(s){for(let t in s)for(let n in s[t])Z(s[t][n],t)}function Tl(){let s=document.getElementById("unicaen-vue-toast-container");return s||(s=document.createElement("div"),s.id="unicaen-vue-toast-container",s.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(s)),s}function Ml(s){return s=wl(s),s=Al(s),s}function wl(s){const t=document.createElement("div");t.innerHTML=s;const n=t.querySelector(".alert");return n?n.innerHTML:t.innerHTML}function Al(s){const t=document.createElement("div");return t.innerHTML=s,t.querySelectorAll("i.fas").forEach(_=>_.style.display="none"),t.innerHTML}function Z(s,t,n=null){const _={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},l={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},r=document.createElement("button");r.classList.add("btn-close","btn-close-white","h5"),r.style.float="right",r.setAttribute("data-bs-dismiss","toast"),r.setAttribute("aria-label","Close");const o=document.createElement("i");o.classList.add("icon","fas",`fa-${l[t]}`),o.style.float="left",o.style.fontSize="26pt",o.style.paddingLeft=".4rem",o.style.marginTop=".4rem",o.style.paddingRight="1rem";const c=document.createElement("div");c.classList.add("toast-body"),c.innerHTML=Ml(s);const m=document.createElement("div");m.appendChild(r),m.appendChild(o),m.appendChild(c);const v=document.createElement("div");v.classList.add("toast","text-white",_[t]?_[t]:"bg-secondary"),v.setAttribute("role","alert"),v.setAttribute("aria-live","assertive"),v.setAttribute("aria-atomic","true"),t==="error"&&s.length>500&&v.setAttribute("style","width:700px"),v.appendChild(m),Tl().appendChild(v),n==null&&(n={animation:!0,delay:t==="warning"?15e3:5e3,autohide:t!=="error"}),new bootstrap.Toast(v,n).show()}const O={toast:Z,toasts:El};let H={...me};H.interceptors.request.use(s=>{if(s.submitter){let t=s.msg?s.msg:"Action en cours";s.popover!=null&&s.popover.dispose(),s.popover=new bootstrap.Popover(s.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+t,html:!0,trigger:"focus"}),s.popover.show()}return s});H.interceptors.response.use(s=>{if(s.messages=s.data.messages,s.data=s.data.data,s.hasErrors=!!(s.messages&&s.messages.error&&s.messages.error.length>0),s.config.popover){var t=s.config.popover;let n="";for(ns in s.messages)for(mid in s.messages[ns])n+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+s.messages[ns][mid]+"</div>";n?(t._config.content=n,t.setContent(),setTimeout(()=>{t.dispose()},5e3)):t.dispose()}return s.messages&&O.toasts(s.messages),s},s=>{let t=s.response.data;s.response.status==403?t="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":t=s.response.data,O.toast(t,"error")});H.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Rl={uvAxios:H},B={axios:Rl.uvAxios,flashMessenger:O,url:(s,t,n)=>{let _=window.__unicaenVueBaseUrl;if(t)for(let r in t)s=s.replace(`:${r}`,t[r]);let l=n?B.encodeUrlQueryParam(n):null;return _+s+(l?`?${l}`:"")},encodeUrlQueryParam:(s,t)=>{var n=[];for(var _ in s)if(s.hasOwnProperty(_)){var l=s[_],r=t?t+"["+encodeURIComponent(_)+"]":encodeURIComponent(_);if(typeof l=="object"&&l!==null)n.push(B.encodeUrlQueryParam(l,r));else{var o=encodeURIComponent(l);n.push(r+"="+o)}}return n.join("&")}};window.unicaenVue=B;const jl={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:null,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(s){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let t=document.getElementById("formRechercheDemandeMiseEnPaiement"),n=new FormData(t),_=document.getElementById("btn-rdmep"),l=document.getElementById("btn-rdmep-inprogress");l.classList.remove("d-none"),_.classList.add("d-none"),_.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,n,{}).then(r=>{this.dispatchDatas(r.data),_.disabled=!1,l.classList.add("d-none"),_.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(c,m){c.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(c=>{let m=c.data;this.dotation=m.dotation,this.liquidation=m.liquidation,this.refreshTotalConsommation()})}).catch(r=>{console.error(r)})},processDemandeMiseEnPaiement(s){let t=document.getElementById("formProcessDemandeMiseEnPaiement"),n=new FormData(t);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>this.totalConsommationRessourcePropre||!this.haveDotation){let _=document.getElementById("btn-pdmep"),l=document.getElementById("btn-pdmep-inprogress");l.classList.remove("d-none"),_.classList.add("d-none"),_.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,n,{}).then(r=>{this.findDemandeMiseEnPaiement(),_.disabled=!1,l.classList.add("d-none"),_.classList.remove("d-none")}).catch(r=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let s=0,t=0,n=0;s=parseFloat(this.liquidation.paieEtat),t=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(l,r){l.hasAttribute("data-paie-etat")&&l.checked&&(s+=parseFloat(l.getAttribute("data-paie-etat")),n+=parseFloat(l.getAttribute("data-paie-etat"))),l.hasAttribute("data-ressource-propre")&&l.checked&&(t+=parseFloat(l.getAttribute("data-ressource-propre")),n+=parseFloat(l.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=s.toFixed(2),this.totalConsommationRessourcePropre=t.toFixed(2),this.totalConsommation=n.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(s){let t=0;return s.forEach((n,_)=>{n.centreCout.code!=""&&(t+=n.heuresAPayer)}),t.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalNonPayable(s){let t=0;return s.forEach((n,_)=>{n.centreCout.code==""&&(t+=n.heuresAPayer)}),t.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePaieEtat(s){let t=0;return s.forEach((n,_)=>{n.centreCout.typeRessourceCode=="paie-etat"&&(t+=n.heuresAPayer)}),t.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(s){let t=0;return s.forEach((n,_)=>{n.centreCout.typeRessourceCode=="ressources-propres"&&(t+=n.heuresAPayer)}),t.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(s){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[],s.forEach((t,n)=>{switch(t.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(t),this.intervenants.push(t);break;case"Intervenant permanent":this.permanents.push(t),this.intervenants.push(t);break;case"Étudiant":this.etudiants.push(t),this.intervenants.push(t);break;default:this.autres.push(t),this.intervenants.push(t)}})},toggleCheckbox(s){let t=Array.from(document.getElementsByClassName(s.target.className));s.target.checked?t.forEach(function(n,_){n.checked=!0}):t.forEach(function(n,_){n.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(s){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:s.datasIntervenant.code})},formattedHETD(s){return Util.formattedHeures(s,!1)}}},Ul=e("h1",null,"Demande de mise en paiement par lots",-1),Ll={class:"card text-dark bg-light"},Il=e("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1),Hl={class:"card-body"},ql={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},Fl={class:"mb-3"},Ol=e("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1),Bl=["value"],zl={class:"mb-3"},Nl=e("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),d("  Veuillez patienter... ")],-1),Gl=["disabled"],Yl=e("div",{class:"alert alert-info",role:"alert"}," Seules les HETD avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisées. Pour les autres, il faudra passer sur chaque fiches intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ",-1),Jl={key:0},Wl={key:0,class:"alert alert-danger",role:"alert"},Ql={class:"table table-bordered caption-top"},Xl=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Budget"),e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressource propre"),e("th",{class:"fw-bold",scope:"col"},"Total")])],-1),Zl=e("td",null,"Dotation",-1),Kl={class:"fw-bold"},ed=e("td",null,"Consommation",-1),td={class:"fw-bold"},sd={id:"dmep",class:"accordion"},nd={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},rd={key:0,class:"accordion-item"},id={id:"dmep-permanents-heading",class:"accordion-header"},ad={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},od={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},ld={class:"accordion-body"},dd={class:"table"},ud={scope:"col"},cd=e("th",{scope:"col"},"Intervenant",-1),hd=e("th",{scope:"col"},"HETD avec centre coût",-1),md=e("th",{scope:"col"},"HETD sans centre coût",-1),_d=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],fd=["href"],pd=["title"],vd={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Aucun centre de coût"},bd={key:1,class:"accordion-item"},gd={id:"dmep-vacataires-heading",class:"accordion-header"},yd={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},xd={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},kd={class:"accordion-body"},Cd={class:"table"},Vd=e("th",null,"Intervenant",-1),$d=e("th",null,"HETD avec centre coût",-1),Pd=e("th",null,"HETD sans centre coût",-1),Sd=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Dd=["href"],Ed=["title"],Td={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Aucun centre de coût"},Md={key:2,class:"accordion-item"},wd={id:"dmep-etudiants-heading",class:"accordion-header"},Ad={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},Rd={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},jd={class:"accordion-body"},Ud={class:"table"},Ld=e("th",null,"Intervenant",-1),Id=e("th",null,"HETD avec centre coût",-1),Hd=e("th",null,"HETD sans centre coût",-1),qd=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Fd=["href"],Od=["title"],Bd={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Aucun centre de coût"},zd={key:3,class:"accordion-item"},Nd={id:"dmep-autres-heading",class:"accordion-header"},Gd={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},Yd={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},Jd={class:"accordion-body"},Wd={class:"table"},Qd=e("th",null,"Intervenant",-1),Xd=e("th",null,"HETD avec centre coût",-1),Zd=e("th",null,"HETD sans centre coût",-1),Kd=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],eu=["href"],tu=["title"],su={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Aucun centre de coût"},nu={key:4,class:"mt-3"},ru=e("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),d("  Veuillez patienter... ")],-1),iu=["disabled"];function au(s,t,n,_,l,r){return i(),a(p,null,[Ul,e("div",Ll,[Il,e("div",Hl,[e("form",ql,[e("div",Fl,[Ol,d("  "),A(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.selectedStructure=o),class:"form-select",name:"structure"},[(i(!0),a(p,null,g(n.structures,o=>(i(),a("option",{value:o.id},u(o.libelle),9,Bl))),256))],512),[[F,l.selectedStructure]])]),e("div",zl,[Nl,e("button",{id:"btn-rdmep",disabled:!l.selectedStructure,class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=(...o)=>r.findDemandeMiseEnPaiement&&r.findDemandeMiseEnPaiement(...o))}," Lancer la recherche ",8,Gl)])])])]),Yl,r.haveDotation?(i(),a("div",Jl,[l.alertDotation?(i(),a("div",Wl," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):h("",!0),e("table",Ql,[Xl,e("tbody",null,[e("tr",null,[Zl,e("td",null,u(r.formattedHETD(this.dotation.paieEtat))+" HETD",1),e("td",null,u(r.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),e("td",Kl,u(r.formattedHETD(this.dotation.total))+" HETD",1)]),e("tr",null,[ed,e("td",null,[e("span",{class:M(r.alertPaieEtat)},u(r.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),e("td",null,[e("span",{class:M(r.alertRessourcePropre)},u(r.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),e("td",td,u(r.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):h("",!0),e("div",sd,[e("form",nd,[this.permanents.length>0?(i(),a("div",rd,[e("h2",id,[e("button",ad,u(this.permanents.length)+" Permanent(s) ",1)]),e("div",od,[e("div",ld,[e("table",dd,[e("thead",null,[e("tr",null,[e("th",ud,[e("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:t[2]||(t[2]=(...o)=>r.toggleCheckbox&&r.toggleCheckbox(...o))})]),cd,hd,md])]),e("tbody",null,[(i(!0),a(p,null,g(this.permanents,o=>(i(),a("tr",null,[e("td",null,[e("input",{id:"permanent-"+o.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(o.heures),"data-ressource-propre":r.totalRessourcePropre(o.heures),disabled:r.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:r.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:t[3]||(t[3]=c=>r.refreshTotalConsommation())},null,40,_d)]),e("td",null,[e("a",{href:r.urlIntervenant(o),target:"_blank"},u(o.datasIntervenant.prenom+" "+o.datasIntervenant.nom_usuel),9,fd)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+r.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(o.heures))+" h",9,pd)]),e("td",null,[e("span",vd,u(r.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.vacataires.length>0?(i(),a("div",bd,[e("h2",gd,[e("button",yd,u(this.vacataires.length)+" Vacataire(s) ",1)]),e("div",xd,[e("div",kd,[e("table",Cd,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:t[4]||(t[4]=(...o)=>r.toggleCheckbox&&r.toggleCheckbox(...o))})]),Vd,$d,Pd])]),e("tbody",null,[(i(!0),a(p,null,g(this.vacataires,o=>(i(),a("tr",null,[e("td",null,[e("input",{id:"vacataire-"+o.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(o.heures),"data-ressource-propre":r.totalRessourcePropre(o.heures),disabled:r.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:r.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:t[5]||(t[5]=c=>r.refreshTotalConsommation())},null,40,Sd)]),e("td",null,[e("a",{href:r.urlIntervenant(o),target:"_blank"},u(o.datasIntervenant.prenom+" "+o.datasIntervenant.nom_usuel),9,Dd)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+r.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(o.heures))+" h",9,Ed)]),e("td",null,[e("span",Td,u(r.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.etudiants.length>0?(i(),a("div",Md,[e("h2",wd,[e("button",Ad,u(this.etudiants.length)+" Etudiant(s) ",1)]),e("div",Rd,[e("div",jd,[e("table",Ud,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:t[6]||(t[6]=(...o)=>r.toggleCheckbox&&r.toggleCheckbox(...o))})]),Ld,Id,Hd])]),e("tbody",null,[(i(!0),a(p,null,g(this.etudiants,o=>(i(),a("tr",null,[e("td",null,[e("input",{id:"etudiant-"+o.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(o.heures),"data-ressource-propre":r.totalRessourcePropre(o.heures),disabled:r.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:r.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:t[7]||(t[7]=c=>r.refreshTotalConsommation())},null,40,qd)]),e("td",null,[e("a",{href:r.urlIntervenant(o),target:"_blank"},u(o.datasIntervenant.prenom+" "+o.datasIntervenant.nom_usuel),9,Fd)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+r.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(o.heures))+" h",9,Od)]),e("td",null,[e("span",Bd,u(r.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.autres.length>0?(i(),a("div",zd,[e("h2",Nd,[e("button",Gd,u(this.autres.length)+" Autre(s) ",1)]),e("div",Yd,[e("div",Jd,[e("table",Wd,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:t[8]||(t[8]=(...o)=>r.toggleCheckbox&&r.toggleCheckbox(...o))})]),Qd,Xd,Zd])]),e("tbody",null,[(i(!0),a(p,null,g(this.etudiants,o=>(i(),a("tr",null,[e("td",null,[e("input",{id:"autre-"+o.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(o.heures),"data-ressource-propre":r.totalRessourcePropre(o.heures),disabled:r.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:r.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:t[9]||(t[9]=c=>r.refreshTotalConsommation())},null,40,Kd)]),e("td",null,[e("a",{href:r.urlIntervenant(o),target:"_blank"},u(o.datasIntervenant.prenom+" "+o.datasIntervenant.nom_usuel),9,eu)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+r.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(o.heures))+" h",9,tu)]),e("td",null,[e("span",su,u(r.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.intervenants.length>0?(i(),a("div",nu,[ru,e("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:t[10]||(t[10]=(...o)=>r.processDemandeMiseEnPaiement&&r.processDemandeMiseEnPaiement(...o))}," Enregistrer les demandes de paiement ",8,iu)])):h("",!0)])])],64)}const ou=V(jl,[["render",au]]),lu=Object.freeze(Object.defineProperty({__proto__:null,default:ou},Symbol.toStringTag,{value:"Module"})),du={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},D=s=>(L("data-v-d4a24889"),s=s(),I(),s),uu=D(()=>e("h2",null,"Paramètres généraux ou bien selon le statut",-1)),cu={class:"table table-bordered table-condensed table-extra-condensed"},hu=D(()=>e("tr",null,[e("th",null,"Paramètre général"),e("th",null,"Valeur")],-1)),mu=D(()=>e("h2",null,"Services à payer",-1)),_u={class:"card"},fu={class:"card-header"},pu={class:"badge bg-primary"},vu={class:"card-body"},bu={class:"row lap"},gu={class:"col-md-6"},yu=D(()=>e("h6",null,"Heures à payer",-1)),xu={class:"table table-bordered table-xs"},ku={key:0,rowspan:"2"},Cu={key:1,rowspan:"2"},Vu=D(()=>e("th",{colspan:"2"},"Taux de rému.",-1)),$u=D(()=>e("th",{colspan:"3"},"Heures",-1)),Pu=D(()=>e("tr",null,[e("th",null,"Nom"),e("th",null,"Valeur"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")],-1)),Su={key:0},Du=["title"],Eu={key:1},Tu=["title"],Mu={class:"col-md-6"},wu=D(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),d(" correspondantes")],-1)),Au={class:"table table-bordered table-xs"},Ru=D(()=>e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{colspan:"3"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")])],-1)),ju=["title"],Uu=["title"],Lu={key:0},Iu={class:"badge bg-info"},Hu={key:0,class:"row"},qu=D(()=>e("div",{class:"col-md-6"},null,-1)),Fu={class:"col-md-6"},Ou=D(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),d(" en trop")],-1)),Bu={class:"table table-bordered table-xs"},zu=D(()=>e("thead",{class:"bg-danger"},[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{rowspan:"2"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date")])],-1)),Nu=["title"],Gu=["title"];function Yu(s,t,n,_,l,r){return i(),a(p,null,[uu,e("table",cu,[hu,(i(!0),a(p,null,g(n.parametres,(o,c)=>(i(),a("tr",{key:c},[e("th",null,u(c),1),e("td",null,u(o),1)]))),128))]),mu,(i(!0),a(p,null,g(n.servicesAPayer,(o,c)=>(i(),a("div",{key:c},[e("div",_u,[e("div",fu,[e("span",pu,u(o.type),1),d(" "+u(o.libelle),1)]),e("div",vu,[e("ul",null,[(i(!0),a(p,null,g(o.parametres,(m,v)=>(i(),a("li",{key:v},u(v)+" : "+u(m),1))),128))]),(i(!0),a(p,null,g(o.laps,m=>(i(),a("div",bu,[e("div",gu,[yu,e("table",xu,[e("thead",null,[e("tr",null,[o.type!="Référentiel"?(i(),a("th",ku,"Volume horaire")):(i(),a("th",Cu,"Volumes horaires")),Vu,$u]),Pu]),e("tbody",null,[e("tr",null,[o.type!="Référentiel"?(i(),a("td",Su,[e("abbr",{class:"badge bg-secondary",title:m.volumeHoraireHisto},u(m.volumeHoraireId),9,Du),d(" "+u(m.volumeHoraire),1)])):(i(),a("td",Eu,[(i(!0),a(p,null,g(m.volumeHoraireId,v=>(i(),a("div",null,[e("abbr",{class:"badge bg-secondary",title:v.HISTO},u(v.ID),9,Tu),d(" "+u(v.HEURES)+"h ",1)]))),256))])),e("td",null,u(m.tauxRemu),1),e("td",null,u(m.tauxValeur)+"€",1),e("td",null,u(m.heures),1),e("td",null,u(m.heuresAA),1),e("td",null,u(m.heuresAC),1)])])])]),e("div",Mu,[wu,e("table",Au,[Ru,e("tbody",null,[(i(!0),a(p,null,g(m.misesEnPaiement,v=>(i(),a("tr",{key:v.id},[e("td",null,[e("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+v.heuresTotal+`
Domaine fonctionnel : `+v.domaineFonctionnel+`
`+v.historique},u(v.id),9,ju)]),e("td",null,[e("abbr",{title:v.centreCoutLibelle},u(v.centreCoutCode),9,Uu)]),e("td",null,u(v.periodePaiement),1),e("td",null,u(v.date),1),e("td",null,u(v.heures),1),e("td",null,u(v.heuresAA),1),e("td",null,u(v.heuresAC),1)]))),128))])]),m.heuresRestantes!="0,00"?(i(),a("div",Lu,[e("span",Iu,u(m.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):h("",!0)])]))),256)),o.misesEnPaiement&&o.misesEnPaiement.length>0?(i(),a("div",Hu,[qu,e("div",Fu,[Ou,e("table",Bu,[zu,e("tbody",null,[(i(!0),a(p,null,g(o.misesEnPaiement,m=>(i(),a("tr",{key:m.id},[e("td",null,[e("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+m.domaineFonctionnel+`
`+m.historique},u(m.id),9,Nu)]),e("td",null,[e("abbr",{title:m.centreCoutLibelle},u(m.centreCoutCode),9,Gu)]),e("td",null,u(m.periodePaiement),1),e("td",null,u(m.date),1),e("td",null,u(m.heures),1)]))),128))])])])])):h("",!0)])])]))),128))],64)}const Ju=V(du,[["render",Yu],["__scopeId","data-v-d4a24889"]]),Wu=Object.freeze(Object.defineProperty({__proto__:null,default:Ju},Symbol.toStringTag,{value:"Module"})),Qu={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(s){this.selectedFile=s.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(s){s.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let t=document.getElementById("btn-import"),n=document.getElementById("btn-import-inprogress");n.classList.remove("d-none"),t.classList.add("d-none"),t.disabled=!0;let _=document.getElementById("formImport"),l=new FormData(_);unicaenVue.axios.post(this.importUrl,l,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{let o=r.data;this.fileErrors=o.file,this.intervenantMissing=o.intervenant,o.message.length!=0?this.messageErrors=o.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",t.disabled=!1,n.classList.add("d-none"),t.classList.remove("d-none")}).catch(r=>{console.error("Error uploading")})}}},Xu={class:"card text-dark bg-light"},Zu=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),Ku={class:"card-body"},ec={key:0,class:"alert alert-danger",role:"alert"},tc={key:1,class:"alert alert-success",role:"alert"},sc={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},nc=e("p",{class:"fs-9 text"},[d(" Vous pouvez utiliser le modèle directement extrait de winpaie "),e("strong",null,"(format .xlsx ou .ods)"),d(" ou créer votre modèle générique de classeur "),e("strong",null,"(format .xlsx ou .ods)"),d(" incluant 3 colonnes : insee,numero pec, nom. ")],-1),rc={class:"mb-3"},ic=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),ac=G('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),oc={class:"mb-3"},lc=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),d("  Veuillez patienter... ")],-1),dc={key:0,id:"fileErrors",class:"card text-dark bg-light"},uc=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),cc={class:"card-body"},hc={key:0},mc=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),_c={key:1},fc=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function pc(s,t,n,_,l,r){return i(),a(p,null,[e("div",Xu,[Zu,e("div",Ku,[this.messageErrors?(i(),a("div",ec,u(this.messageErrors),1)):h("",!0),this.messageConfirm?(i(),a("div",tc,u(this.messageConfirm),1)):h("",!0),e("form",sc,[nc,e("div",rc,[ic,d("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:t[0]||(t[0]=(...o)=>r.handleFileUpload&&r.handleFileUpload(...o))},null,32)]),ac,e("div",oc,[lc,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:t[1]||(t[1]=(...o)=>r.importFile&&r.importFile(...o))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(i(),a("div",dc,[uc,e("div",cc,[this.fileErrors.length!=0?(i(),a("div",hc,[mc,e("ul",null,[(i(!0),a(p,null,g(this.fileErrors,o=>(i(),a("li",null,u(),1))),256))])])):h("",!0),this.intervenantMissing.length!=0?(i(),a("div",_c,[fc,e("ul",null,[(i(!0),a(p,null,g(this.intervenantMissing,o=>(i(),a("li",null,u(o),1))),256))])])):h("",!0)])])):h("",!0)],64)}const vc=V(Qu,[["render",pc]]),bc=Object.freeze(Object.defineProperty({__proto__:null,default:vc},Symbol.toStringTag,{value:"Module"})),gc={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(s){modAjax(s.target,t=>{this.$emit("refreshListe")})},ajoutValeur(s){modAjax(s.target,t=>{this.$emit("refreshListe")})},saisieValeur(s){s.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:s.currentTarget.dataset.id}),modAjax(s.currentTarget,t=>{this.$emit("refreshListe")})},refreshListe(s){this.$emit("refreshListe")},supprimer(s){popConfirm(s.target,t=>{this.$emit("refreshListe")})},supprimerValeur(s){s.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:s.currentTarget.dataset.id}),popConfirm(s.currentTarget,t=>{this.$emit("refreshListe")})},refresh(s){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:s.id})).then(t=>{this.$emit("refresh",t.data)})}}},yc={class:"card-header"},xc={style:{display:"inline"}},kc={class:"float-end"},Cc=["href"],Vc=["href"],$c={class:"card-body"},Pc={key:0},Sc=e("br",null,null,-1),Dc={class:""},Ec={class:"row align-items-start"},Tc={class:"col-md-6"},Mc={class:"col"},wc=["data-id"],Ac=["data-id"],Rc=["href"],jc={key:1,class:"row"},Uc={class:"col-md-7"},Lc=e("br",null,null,-1),Ic={class:"row align-items-start"},Hc={class:"col-md-8"},qc={class:"col-md-auto"},Fc=["data-id"],Oc=["data-id"],Bc=["href"],zc={class:"col"},Nc=e("br",null,null,-1),Gc={key:0},Yc={key:0};function Jc(s,t,n,_,l,r){const o=R,c=E("u-heures"),m=j,v=E("taux",!0);return i(),a(p,null,[e("div",{class:M(["card",{"ms-5":n.taux.tauxRemu}])},[e("div",yc,[e("h3",xc,u(n.taux.libelle)+" ("+u(n.taux.code)+")",1),e("div",kc,[n.taux.canEdit?(i(),a("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...x)=>r.saisie&&r.saisie(...x),["prevent"]))},[f(o,{name:"pen-to-square"}),d(" Modifier")],8,Cc)):h("",!0),d("   "),n.taux.canDelete?(i(),a("a",{key:1,href:l.supprimerUrl,class:"btn btn-danger",onClick:t[1]||(t[1]=y((...x)=>r.supprimer&&r.supprimer(...x),["prevent"]))},[f(o,{name:"trash-can"}),d(" Supprimer")],8,Vc)):h("",!0)])]),e("div",$c,[n.taux.tauxRemu?h("",!0):(i(),a("div",Pc,[d(" Modification :"),Sc,e("ul",null,[(i(!0),a(p,null,g(n.taux.tauxRemuValeurs,x=>(i(),a("div",{key:x.id},[e("li",Dc,[e("div",Ec,[e("div",Tc,[f(c,{valeur:x.valeur},null,8,["valeur"]),d("€/h à partir du "),f(m,{value:x.dateEffet},null,8,["value"])]),e("div",Mc,[n.taux.canEdit?(i(),a("a",{key:0,class:"text-primary",onClick:t[2]||(t[2]=y((...b)=>r.saisieValeur&&r.saisieValeur(...b),["prevent"])),"data-id":x.id},[f(o,{name:"pen-to-square"})],8,wc)):h("",!0),d("   "),n.taux.canEdit?(i(),a("a",{key:1,class:"text-primary",onClick:t[3]||(t[3]=y((...b)=>r.supprimerValeur&&r.supprimerValeur(...b),["prevent"])),"data-id":x.id},[f(o,{name:"trash-can"})],8,Ac)):h("",!0)])])])]))),128))]),n.taux.canEdit?(i(),a("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:t[4]||(t[4]=y((...x)=>r.ajoutValeur&&r.ajoutValeur(...x),["prevent"]))},[f(o,{name:"plus"}),d(" Ajouter une valeur ")],8,Rc)):h("",!0)])),n.taux.tauxRemu?(i(),a("div",jc,[e("div",Uc,[d(" Modification :"),Lc,e("ul",null,[(i(!0),a(p,null,g(n.taux.tauxRemuValeurs,x=>(i(),a("div",null,[e("li",null,[e("div",Ic,[e("div",Hc,[d(" Coéfficient de "),f(c,{valeur:x.valeur},null,8,["valeur"]),d(" à partir du "),f(m,{value:x.dateEffet},null,8,["value"])]),e("div",qc,[n.taux.canEdit?(i(),a("a",{key:0,class:"text-primary",onClick:t[5]||(t[5]=y((...b)=>r.saisieValeur&&r.saisieValeur(...b),["prevent"])),"data-id":x.id},[f(o,{name:"pen-to-square"})],8,Fc)):h("",!0),d("   "),n.taux.canEdit?(i(),a("a",{key:1,class:"text-primary",onClick:t[6]||(t[6]=y((...b)=>r.supprimerValeur&&r.supprimerValeur(...b),["prevent"])),"data-id":x.id},[f(o,{name:"trash-can"})],8,Oc)):h("",!0)])])])]))),256))]),n.taux.canEdit?(i(),a("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:t[7]||(t[7]=y((...x)=>r.ajoutValeur&&r.ajoutValeur(...x),["prevent"]))},[f(o,{name:"plus"})],8,Bc)):h("",!0)]),e("div",zc,[d(" Valeurs calculées (indexées sur le taux "+u(n.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(i(!0),a(p,null,g(n.taux.tauxRemuValeursIndex,x=>(i(),a("div",null,[e("li",null,[f(c,{valeur:x.valeur},null,8,["valeur"]),d("€/h à partir du "),f(m,{value:x.date},null,8,["value"])])]))),256))]),Nc])])):h("",!0)])],2),n.taux.tauxRemu?h("",!0):(i(),a("div",Gc,[(i(!0),a(p,null,g(n.listeTaux,x=>(i(),a("div",{key:x},[x.tauxRemu&&x.tauxRemu.id===n.taux.id?(i(),a("div",Yc,[(i(),S(v,{onSupprimer:r.supprimer,onRefreshListe:r.refreshListe,key:n.taux.id,taux:x,listeTaux:n.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):h("",!0)]))),128))]))],64)}const K=V(gc,[["render",Jc]]),Wc=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"})),Qc={components:{taux:K},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(s){modAjax(s.currentTarget,t=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(s){let t=Util.json.indexById(this.listeTaux,s.id);this.listeTaux[t]=s},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(s=>{this.listeTaux=s.data})}}},Xc=["href"];function Zc(s,t,n,_,l,r){const o=E("taux");return i(),a(p,null,[(i(!0),a(p,null,g(l.listeTaux,c=>(i(),a("div",null,[c.tauxRemu?h("",!0):(i(),S(o,{onSupprimer:r.supprimer,onRefreshListe:r.refreshListe,key:c.id,taux:c,listeTaux:l.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),n.canEditTaux?(i(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:t[0]||(t[0]=y((...c)=>r.ajout&&r.ajout(...c),["prevent"]))},"Ajout d'un nouveau taux",8,Xc)):h("",!0)],64)}const Kc=V(Qc,[["render",Zc]]),eh=Object.freeze(Object.defineProperty({__proto__:null,default:Kc},Symbol.toStringTag,{value:"Module"})),th={UHeures:"Application/UI/UHeures",Utilisateur:"Application/Utilisateur"};function sh(s,t){const n={};t===void 0&&(t={});for(const _ in s){let r=_.slice(2,-4).replaceAll("/","");n[r]=s[_].default}for(const _ of document.getElementsByClassName("vue-app")){let l=_e({template:_.innerHTML,components:n});if(t.beforeMount!==void 0&&t.beforeMount(l),t.autoloads!==void 0)for(const r in t.autoloads){let o=t.autoloads[r].replaceAll("/","");l.component(r,n[o])}l.use(fe({components:!0,directives:!0})),l.mount(_),t.afterMount!==void 0&&t.afterMount(l)}}const nh={init:sh},rh=Object.assign({"./Application/UI/UHeures.vue":ye,"./Application/Utilisateur.vue":$e,"./Formule/Administration/Details.vue":Ae,"./Formule/Administration/Formulator.vue":We,"./Formule/Administration/Index.vue":Wt,"./Formule/Test/Index.vue":rs,"./Intervenant/Recherche.vue":Ps,"./Lieu/Structure.vue":dn,"./Lieu/StructuresAdmin.vue":vn,"./Mission/Liste.vue":qr,"./Mission/ListeCandidatures.vue":mi,"./Mission/ListeOffreEmploi.vue":Oa,"./Mission/ListePrime.vue":Jo,"./Mission/Mission.vue":jr,"./Mission/OffreEmploi.vue":Ra,"./Mission/Prime.vue":Uo,"./Mission/Suivi.vue":Dl,"./Mission/SuiviEvent.vue":Vl,"./Paiement/DemandeMiseEnPaiementLot.vue":lu,"./Paiement/DetailsCalculs.vue":Wu,"./Paiement/ImportNumeroPec.vue":bc,"./Paiement/ListeTaux.vue":eh,"./Paiement/Taux.vue":Wc}),ih={autoloads:th};nh.init(rh,ih);
