import{c as u,n as S,o as r,t as o,a as i,b as h,w as _,d as f,e as v,f as U,r as b,F as y,g as k,h as M}from"./vendor-eb9f4386.js";const w={toast:()=>{alert("salut mon pote")}},p=(e,t)=>{const s=e.__vccOpts||e;for(const[m,a]of t)s[m]=a;return s},x={name:"icon",props:{name:{required:!0,type:String}}};function N(e,t,s,m,a,n){return r(),u("i",{class:S(`fas fa-${s.name}`)},null,2)}const O=p(x,[["render",N]]),T=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"})),P={name:"Utilisateur",props:{nom:String,mail:String}},V=["href"];function B(e,t,s,m,a,n){return r(),u("a",{href:`mailto:${s.mail}`},o(s.nom),9,V)}const L=p(P,[["render",B]]),z=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),D={name:"Mission",props:{mission:{required:!0}},data(){return{saisieUrl:Util.url("mission/saisie/:mission",{mission:this.mission.id}),supprimerUrl:Util.url("mission/supprimer/:mission",{mission:this.mission.id})}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures-this.mission.heuresValidees==0?this.mission.heures+" heures validés":this.mission.heuresValidees==0?this.mission.heures+" heures à valider":this.mission.heures+" heures dont "+(this.mission.heures-this.mission.heuresValidees)+" à valider"},validation:function(){return this.mission.validation===null?"A valider":this.mission.validation.id===null?"Autovalidée":"Validation du "+this.mission.validation.histoCreation+" par "}},methods:{saisie(e){modAjax(e.target,t=>{axios.get(Util.url("mission/get/:mission",{mission:this.mission.id})).then(s=>{this.mission=s.data})})},supprimer(e){popAjax(e.target,t=>{this.$emit("supprimer",this.mission),w.toast()})},valider(){},devalider(){},test(){}}},F=["id"],q={class:"float-end"},E={class:"card-body"},I={class:"row"},H={class:"col-md-8"},R={class:"row"},G={class:"col-md-12"},J=i("label",{class:"form-label"},"Composante en charge du suivi",-1),K={class:"form-control"},Q={class:"row"},W={class:"col-md-6"},X=i("label",{class:"form-label"},"Taux de rémunération",-1),Y={class:"form-control"},Z={class:"col-md-6"},$=i("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1),ss={class:"input-group mb-3"},is={class:"form-control"},es=i("button",{onclick:"alert('non implémenté')",class:"input-group-btn btn btn-secondary"},"Suivi",-1),ts={class:"row"},ns={class:"col-md-12"},os=i("label",{class:"form-label"},"Descriptif de la mission",-1),as={class:"form-control"},ls=i("div",{class:"row"},[i("div",{class:"col-md-12"}," ")],-1),rs={class:"row"},ms={class:"col-md-12"},ds=["href"],us=["href"],cs={class:"col-md-4"},_s=i("div",null,[i("label",{class:"form-label"},"Suivi")],-1),hs=i("div",null," Aucune heure réalisée ",-1);function vs(e,t,s,m,a,n){const c=b("icon"),d=b("utilisateur");return r(),u("div",{id:s.mission.id,class:"card bg-default"},[i("form",{onSubmit:t[3]||(t[3]=_((...l)=>e.submitForm&&e.submitForm(...l),["prevent"]))},[i("div",{class:S(["card-header",{"bg-info":s.mission.valide}])},[h(o(s.mission.typeMission.libelle)+" ",1),i("span",q,"Du "+o(s.mission.dateDebut)+" au "+o(s.mission.dateFin),1)],2),i("div",E,[i("div",I,[i("div",H,[i("div",R,[i("div",G,[J,i("div",K,o(s.mission.structure.libelle),1)])]),i("div",Q,[i("div",W,[X,i("div",Y,o(s.mission.missionTauxRemu.libelle),1)]),i("div",Z,[$,i("div",ss,[i("div",is,o(n.heuresLib),1),es])])]),i("div",ts,[i("div",ns,[os,i("div",as,o(s.mission.description),1)])]),ls,i("div",rs,[i("div",ms,[s.mission.canEdit?(r(),u("a",{key:0,href:a.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=_((...l)=>n.saisie&&n.saisie(...l),["prevent"]))},"Modifier la mission",8,ds)):f("",!0),i("a",{class:"btn btn-danger",onClick:t[1]||(t[1]=_((...l)=>e.devalidation&&e.devalidation(...l),["prevent"]))},"Dévalidation de la mission"),i("a",{class:"btn btn-danger",href:a.supprimerUrl,"data-title":"Suppression de la mission","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-confirm":"true",onClick:t[2]||(t[2]=_((...l)=>n.supprimer&&n.supprimer(...l),["prevent"]))},"Suppression de la mission",8,us)])])]),i("div",cs,[_s,i("div",null,[v(c,{name:"thumbs-up"}),h(" Créé le "+o(s.mission.histoCreation)+" par ",1),v(d,{nom:s.mission.histoCreateur.displayName,mail:s.mission.histoCreateur.email},null,8,["nom","mail"])]),i("div",null,[v(c,{name:s.mission.valide?"thumbs-up":"thumbs-down"},null,8,["name"]),h(" "+o(n.validation)+" ",1),s.mission.validation&&s.mission.validation.histoCreateur?(r(),U(d,{key:0,nom:s.mission.validation.histoCreateur.displayName,mail:s.mission.validation.histoCreateur.email},null,8,["nom","mail"])):f("",!0)]),i("div",null,[v(c,{name:s.mission.contrat?"thumbs-up":"thumbs-down"},null,8,["name"]),h(" "+o(s.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),hs])])])],32),i("button",{onClick:t[4]||(t[4]=(...l)=>n.test&&n.test(...l))},"Test")],8,F)}const A=p(D,[["render",vs]]),ps=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"})),fs={components:{mission:A},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],ajoutUrl:Util.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){axios.get(Util.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(e=>{this.missions=e.data})},methods:{ajout(e){modAjax(e.target,t=>{axios.get(Util.url("mission/get/:mission",{mission:this.mission.id})).then(s=>{this.missions.push(s.data)})})},supprimer(e){this.missions.indexOf(e)}}},bs=["href"];function gs(e,t,s,m,a,n){const c=b("mission");return r(),u(y,null,[(r(!0),u(y,null,k(a.missions,d=>(r(),U(c,{onSupprimer:n.supprimer,key:d.id,mission:d},null,8,["onSupprimer","mission"]))),128)),s.canAddMission?(r(),u("a",{key:0,class:"btn btn-primary",href:a.ajoutUrl,onClick:t[0]||(t[0]=_((...d)=>n.ajout&&n.ajout(...d),["prevent"]))},"Ajout d'une nouvelle mission",8,bs)):f("",!0)],64)}const ys=p(fs,[["render",gs]]),Cs=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"})),C={utilisateur:"Application/Utilisateur",icon:"Application/Icon"},j=Object.assign({"./components/Application/Icon.vue":T,"./components/Application/Utilisateur.vue":z,"./components/Mission/Liste.vue":Cs,"./components/Mission/Mission.vue":ps});let js="./components/";const g={};for(const e in j){let s=e.slice(js.length,-4).replace("/","");g[s]=j[e].default}for(const e of document.getElementsByClassName("vue-app")){let t=M({template:e.innerHTML,components:g});for(const s in C){let m=C[s].replace("/","");t.component(s,g[m])}t.mount(e)}
