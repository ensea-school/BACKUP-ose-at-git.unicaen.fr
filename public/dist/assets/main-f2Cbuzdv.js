import{c as i,a as m,b as t,d as b,n as M,e as h,t as d,w,F as g,B as Ne,o as r,r as C,f as _,v as Oe,g as H,h as j,_ as re,i as I,j as ye,k as xe,l as ee,m as qe,p as D,q as ie,s as R,u as Ce,x,y as Y,z as Ve,A as ze,C as $e,D as Be,E as B,G as L,H as X,I as J,J as Je,K as Ge,L as We}from"./vendor-BjZdYsi6.js";const P=(n,e)=>{const s=n.__vccOpts||n;for(const[v,l]of e)s[v]=l;return s},Qe={name:"Connexion",props:{data:Object},data(){return{identity:"",currentRoleId:null,selectedStructures:{}}},mounted(){this.currentRoleId=this.data.roleId;for(let n in this.data.roles)this.selectedStructures[n]=-1;this.selectedStructures[this.currentRoleId]=this.data.structureId??-1},methods:{userProfileChange(n){let e=this.selectedStructures[n];e==-1&&(e=null),n!=this.currentRoleId&&(this.currentRoleId=n),document.body.classList.add("wait-cursor"),unicaenVue.axios.post(this.selectionProfilUrl,{role:n,structure:e,route:this.data.route}).then(s=>{s.data.needGoHome===!0?window.location.href=unicaenVue.url(""):window.location.reload()})}},computed:{roleIcon(){return this.data.usurpationEnCours?"fa fa-theater-masks":"fa fa-user"},roleContent(){return"coucou!!!"},connexionUrl(){return this.data.connecte?unicaenVue.url("auth/deconnexion"):unicaenVue.url("auth/connexion")},connexionTitle(){return this.data.connecte?"Supprime les informations de connexion":"Affiche le formulaire d'authentification"},connexionContent(){return this.data.connecte?"Déconnexion":"Connexion"},startUsurpationUrl(){return unicaenVue.url("utilisateur/usurper-identite")},stopUsurpationUrl(){return unicaenVue.url("utilisateur/stopper-usurpation")},selectionProfilUrl(){return unicaenVue.url("utilisateur/selectionner-profil")}}},Ye={key:0,class:"navbar-link",id:"user-current-info",href:"#"},Xe={id:"user-status"},Ke={id:"user-status-name"},Ze={key:1},et=["href","title"],tt={method:"POST",class:"user-profile-select-form"},nt=["value","onClick"],st=["onUpdate:modelValue","onChange"],rt=["value"],it={key:0},lt=["action"],at={class:"mb-2"},ot={class:"mb-2"},ut=["disabled"],dt={key:1};function ct(n,e,s,v,l,a){const u=re,c=Ne;return r(),i(g,null,[s.data.connecte?(r(),i("a",Ye,[t("span",Xe,[t("span",{class:M(a.roleIcon)},null,2),e[2]||(e[2]=t("span",{class:"caret"}," ",-1)),t("span",Ke,[t("strong",null,d(s.data.utilisateurNom),1),h(", "+d(s.data.roleNom),1)])])])):m("",!0),s.data.connecte?(r(),i("span",Ze,"|")):m("",!0),t("a",{class:"navbar-link user-connection",href:a.connexionUrl,title:a.connexionUrl},d(a.connexionContent),9,et),b(c,{click:!0,"close-on-hide":!0,delay:{show:0,hide:0},target:"user-current-info"},{title:w(()=>e[3]||(e[3]=[h("Utilisateur connecté à l'application")])),default:w(()=>[e[8]||(e[8]=t("div",null,[t("strong",null,"Profil utilisateur :")],-1)),t("div",null,[t("form",tt,[(r(!0),i(g,null,C(s.data.roles,(p,o)=>(r(),i("div",{key:o,class:"radio"},[t("label",null,[_(t("input",{type:"radio",name:"role",class:"user-profile-select-input",title:"Cliquez pour changer de profil courant",value:o,onClick:y=>a.userProfileChange(o),"onUpdate:modelValue":e[0]||(e[0]=y=>l.currentRoleId=y)},null,8,nt),[[Oe,l.currentRoleId]]),h(d(p.libelle),1)]),e[5]||(e[5]=h("  ")),s.data.roles[o].peutChangerStructure?_((r(),i("select",{key:0,class:"user-profile-select-input-structure","onUpdate:modelValue":y=>l.selectedStructures[o]=y,onChange:y=>a.userProfileChange(o),title:"Cliquez pour sélectionner la structure associée au profil Administrateur"},[e[4]||(e[4]=t("option",{value:"-1"},"- toutes structures -",-1)),(r(!0),i(g,null,C(s.data.structures,(y,f)=>(r(),i("option",{key:f,value:f},d(y),9,rt))),128))],40,st)),[[H,l.selectedStructures[o]]]):m("",!0)]))),128))])]),s.data.usurpationEnabled&&!s.data.usurpationEnCours?(r(),i("div",it,[t("form",{action:a.startUsurpationUrl},[e[6]||(e[6]=t("div",null,[t("strong",null,"Usurpation d'identité :")],-1)),t("div",at,[_(t("input",{type:"text",name:"identity","onUpdate:modelValue":e[1]||(e[1]=p=>l.identity=p),class:"user-usurpation-input form-control",placeholder:"Identifiant utilisateur",value:""},null,512),[[j,l.identity]])]),t("div",ot,[t("input",{type:"submit",name:"submit",disabled:!l.identity,class:"user-usurpation-submit btn btn-danger form-control",value:"Usurper"},null,8,ut)])],8,lt)])):m("",!0),s.data.usurpationEnabled&&s.data.usurpationEnCours?(r(),i("div",dt,[b(u,{variant:"danger",href:a.stopUsurpationUrl},{default:w(()=>e[7]||(e[7]=[h("Stopper l'usurpation")])),_:1},8,["href"])])):m("",!0)]),_:1})],64)}const ke=P(Qe,[["render",ct],["__scopeId","data-v-f3514bdf"]]),mt=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"})),pt={name:"Navbar",components:{Connexion:ke},props:{data:Object},data(){return{identity:"",currentRoleId:null,selectedStructures:{}}},methods:{},computed:{}},ft={class:"navbar navbar-expand-lg navbar-dark bg-dark",id:"navbar"},ht={class:"container"},vt=["href","title"],bt={class:"title"},_t={class:"annee"},gt=["value"],yt={class:"collapse navbar-collapse",id:"navbarSupportedContent"},xt={class:"navbar-nav me-auto mb-2 mb-lg-0"},Ct={class:"nav-item"},Vt=["href"];function kt(n,e,s,v,l,a){const u=I("Connexion");return r(),i("nav",ft,[t("div",ht,[t("a",{class:"navbar-brand",href:s.data.appUrl,title:s.data.appTitle},[t("h1",bt,d(s.data.appName),1)],8,vt),t("span",_t,[_(t("select",{"onUpdate:modelValue":e[0]||(e[0]=c=>s.data.annee=c),onchange:"Util.changementAnnee(this.value)"},[(r(!0),i(g,null,C(s.data.annees,(c,p)=>(r(),i("option",{value:p},d(c),9,gt))),256))],512),[[H,s.data.annee]])]),e[1]||(e[1]=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1)),t("div",yt,[t("ul",xt,[(r(!0),i(g,null,C(s.data.menuItems,c=>(r(),i("li",Ct,[t("a",{class:M({"nav-link":!0,active:c.active}),href:c.url},d(c.label),11,Vt)]))),256))]),b(u,{data:s.data.connexion},null,8,["data"])])])])}const St=P(pt,[["render",kt]]),Pt=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})),At={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},Dt=["innerHTML"];function Tt(n,e,s,v,l,a){return r(),i("span",{class:"heures",innerHTML:a.affichage},null,8,Dt)}const Mt=P(At,[["render",Tt]]),Et=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"})),Ft={name:"UInputFloat",props:{modelValue:{},isPourc:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},class:{type:String,required:!1,default:""},fraction:{type:Boolean,required:!1,default:!1},maximumDigits:{required:!1,default:8}},data(){return{fractions:{.333333:"1/3",.166667:"1/6",.142857:"1/7",.111111:"1/9",.666667:"2/3",.285714:"2/7",.222222:"2/9",.428571:"3/7",1.333333:"4/3",.571429:"4/7",.444444:"4/9",1.666667:"5/3",.833333:"5/6",.714286:"5/7",.555556:"5/9",.857143:"6/7",2.333333:"7/3",1.166667:"7/6",.777778:"7/9",2.666667:"8/3",1.142857:"8/7",.888889:"8/9",1.285714:"9/7"},inError:!1}},emits:["update:modelValue"],computed:{value:{get(){let n=this.modelValue;return this.isPourc&&(n*=100),this.floatToString(n)},set(n){const e=/^-?\d*\.?\d+$/;if(this.inError=n!==void 0&&n!==""&&!e.test(n.replace("/","").replace(",","").replace(".","")),!this.inError){let s=this.stringToFloat(n);this.isPourc&&(s/=100),(s===void 0||!isNaN(s)&&isFinite(s))&&this.$emit("update:modelValue",s)}}},cclass(){let n=this.class;return this.inError&&(n+=" is-invalid"),n}},methods:{floatToString(n){if(n==null)return;const e=Math.round(n*1e6)/1e6;if(this.fraction&&this.fractions[e]!==void 0)return this.fractions[e];var s="fr",v={minimumFractionDigits:0,maximumFractionDigits:this.maximumDigits,useGrouping:!1},l=new Intl.NumberFormat(s,v);return l.format(n)},stringToFloat(n){if(!(n===null||n===""||n===void 0))return n.indexOf("/")!==-1?(n=n.split("/"),n=Util.stringToFloat(n[0])/Util.stringToFloat(n[1])):n=parseFloat(n.replace(",",".")),n}},mounted(){}},Ut=["disabled"];function wt(n,e,s,v,l,a){return _((r(),i("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u),disabled:s.disabled,ref:"inputFloat",class:M(a.cclass)},null,10,Ut)),[[j,a.value]])}const It=P(Ft,[["render",wt],["__scopeId","data-v-29c90e6d"]]),Rt=Object.freeze(Object.defineProperty({__proto__:null,default:It},Symbol.toStringTag,{value:"Module"})),jt={name:"Utilisateur",props:{nom:String,mail:String}},Ht=["href"];function Lt(n,e,s,v,l,a){return r(),i("a",{href:`mailto:${s.mail}`},d(s.nom),9,Ht)}const Nt=P(jt,[["render",Lt]]),Ot=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"})),qt={name:"UTableAjax",emits:["update:modelValue"],props:{modelValue:{required:!0},id:{required:!1,type:String},size:{required:!1,default:10},count:{required:!1},search:{required:!1},dataUrl:{required:!0,type:String}},data(){return{page:1,pageSizes:[10,25,50,100,"Tous"],defaultSize:10,dSize:this.size,dCount:this.count,dSearch:this.search,searchTimer:null,columns:{},loading:!1,orderCol:void 0,orderDir:"asc"}},computed:{cSize(){return isNaN(this.dSize)?9999999999999:this.dSize},storageIdentifier(){return"UTableAjax-"+this.id+"-"+window.location.href},elStart(){return isNaN(this.dSize)?1:(this.page-1)*this.dSize+1},elEnd(){return isNaN(this.dCount)?(this.page-1)*this.dSize+this.dSize:isNaN(this.dSize)?this.dCount:Math.min(this.dCount,(this.page-1)*this.dSize+this.dSize)}},watch:{dSize(n){localStorage.setItem(this.storageIdentifier,n),this.getData()},dSearch(n){const e=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.page>1?this.page=1:e.getData()},500)},page(n){this.getData()}},methods:{getData(){unicaenVue.axios.post(this.dataUrl,{page:this.page,size:this.dSize,elStart:this.elStart,elEnd:this.elEnd,search:this.dSearch,orderCol:this.orderCol,orderDir:this.orderDir}).then(n=>{let e=n.data;this.dCount=e.count,this.$emit("update:modelValue",e.data)})},orderBy(n){const e=this.columns[n];for(let v in this.columns)v!=n&&(this.columns[v].classList.contains("sorting_asc")&&this.columns[v].classList.remove("sorting_asc"),this.columns[v].classList.contains("sorting_desc")&&this.columns[v].classList.remove("sorting_desc"),console.log(v));let s="asc";e.classList.contains("sorting_asc")?(s="desc",e.classList.remove("sorting_asc"),e.classList.add("sorting_desc")):(e.classList.contains("sorting_desc")&&e.classList.remove("sorting_desc"),e.classList.add("sorting_asc")),this.orderCol=n,this.orderDir=s,this.getData()}},mounted(){this.dSize=parseInt(localStorage.getItem(this.storageIdentifier))||this.defaultSize,this.page=1,this.dSize=this.size,this.dCount=this.count;const n=this.$refs.tableRef,e=this;n&&n.querySelectorAll("th[column]").forEach(v=>{Array.from(v.attributes).forEach(l=>{l.name=="column"&&(this.columns[l.value]=v,v.dataset.column=l.value,v.onclick=function(){e.orderBy(this.dataset.column)},v.removeAttribute(l.name),v.classList.add("sorting"))})}),this.getData()}},zt={class:"dt-bootstrap5"},$t=["value"],Bt={class:"float-end"},Jt={class:"table table-bordered dataTable mb-2",ref:"tableRef"},Gt={class:"dataTables_paginate paging_simple_numbers"};function Wt(n,e,s,v,l,a){const u=ye,c=xe,p=qe;return r(),i("div",zt,[b(c,null,{default:w(()=>[b(u,null,{default:w(()=>[e[3]||(e[3]=h(" Afficher ")),t("label",null,[_(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.dSize=o),class:"form-select form-select-sm"},[(r(!0),i(g,null,C(l.pageSizes,o=>(r(),i("option",{key:o,value:o},d(o),9,$t))),128))],512),[[H,l.dSize]])]),e[4]||(e[4]=h(" éléments "))]),_:1}),b(u,null,{default:w(()=>[t("div",Bt,[e[5]||(e[5]=h(" Rechercher : ")),t("label",null,[_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.dSearch=o),class:"form-control form-inline form-control-sm"},null,512),[[j,l.dSearch]])])])]),_:1})]),_:1}),t("table",Jt,[ee(n.$slots,"default")],512),b(c,null,{default:w(()=>[b(u,null,{default:w(()=>[h("Affichage de l'élément "+d(a.elStart)+" à "+d(a.elEnd)+" sur "+d(l.dCount)+" éléments",1)]),_:1}),b(u,null,{default:w(()=>[t("div",Gt,[b(p,{align:"end",page:l.page,modelValue:l.page,"onUpdate:modelValue":e[2]||(e[2]=o=>l.page=o),"total-rows":l.dCount,"per-page":a.cSize,"last-number":"true",firstNumber:"true","prev-text":"Précédent","next-text":"Suivant"},null,8,["page","modelValue","total-rows","per-page"])])]),_:1})]),_:1})])}const le=P(qt,[["render",Wt]]),Qt={name:"listeEmployeur",data(){return{dataUrl:unicaenVue.url("employeur/get-data"),dataNewEmployeur:unicaenVue.url("employeur/saisie"),lines:[]}},methods:{saisie(n){modAjax(n.currentTarget,e=>{this.$refs.employeurs.getData()})},editUrl(n){return unicaenVue.url("employeur/saisie/:id",{id:n})}}},Yt={key:0},Xt=["href"],Kt={key:1},Zt=["href"];function en(n,e,s,v,l,a){const u=le;return r(),i(g,null,[e[5]||(e[5]=t("h1",{class:"page-header"},"Gestion des employeurs",-1)),b(u,{ref:"employeurs",modelValue:l.lines,"onUpdate:modelValue":e[1]||(e[1]=c=>l.lines=c),"data-url":this.dataUrl},{default:w(()=>[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",{column:"ID"},"Id"),t("th",{column:"RAISON_SOCIALE"},"Raison sociale"),t("th",{column:"NOM_COMMERCIAL"},"Nom commercial"),t("th",null,"Siren"),t("th",null," ")])],-1)),t("tbody",null,[(r(!0),i(g,null,C(l.lines,(c,p)=>(r(),i("tr",{key:p},[t("td",null,d(c.ID),1),t("td",null,d(c.RAISON_SOCIALE),1),t("td",null,d(c.NOM_COMMERCIAL),1),t("td",null,d(c.SIREN),1),c.IMPORTABLE==0?(r(),i("td",Yt,[c.IMPORTABLE==0?(r(),i("a",{key:0,href:a.editUrl(c.ID),onClick:e[0]||(e[0]=D((...o)=>a.saisie&&a.saisie(...o),["prevent"]))},"Modifier",8,Xt)):m("",!0)])):m("",!0),c.IMPORTABLE==1?(r(),i("td",Kt," NON MODIFIABLE ")):m("",!0)]))),128))])]),_:1},8,["modelValue","data-url"]),t("a",{class:"btn btn-primary",onClick:e[2]||(e[2]=D((...c)=>a.saisie&&a.saisie(...c),["prevent"])),href:this.dataNewEmployeur,title:"Ajouter un employeur"},e[4]||(e[4]=[t("i",{class:"fas fa-plus"},null,-1),h(" Ajout d'un employeur")]),8,Zt)],64)}const tn=P(Qt,[["render",en]]),nn=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),sn={name:"Details",components:{},props:{formule:{type:Object},phpClass:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},rn=["innerHTML"],ln={class:"mb-2"},an=["href"];function on(n,e,s,v,l,a){return r(),i(g,null,[t("h1",null,"Code source de "+d(s.formule.code),1),t("div",{innerHTML:s.phpClass,class:"code"},null,8,rn),t("div",ln,[t("a",{class:"btn btn-secondary",href:this.indexUrl()},e[0]||(e[0]=[t("i",{class:"fas fa-rotate-left"},null,-1),h(" Retour à l'administration des formules")]),8,an)])],64)}const un=P(sn,[["render",on]]),dn=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),cn={name:"Formulator",components:{},props:{phpClass:{type:String},error:{type:String},test:{type:Number}},methods:{indexUrl(){return unicaenVue.url("formule/administration")},testUrl(n){return unicaenVue.url("formule-test/saisir/:id",{id:n})}}},mn={class:"mb-2"},pn=["href"],fn=["href"],hn={key:0},vn={class:"alert alert-danger"},bn={key:1},_n={key:2},gn=["innerHTML"];function yn(n,e,s,v,l,a){return r(),i(g,null,[e[4]||(e[4]=t("h1",null,"Formulator",-1)),t("div",mn,[t("a",{class:"btn btn-primary",href:a.testUrl(s.test)},"Affichage du jeu de test",8,pn),e[1]||(e[1]=h("   ")),t("a",{class:"btn btn-secondary",href:this.indexUrl()},e[0]||(e[0]=[t("i",{class:"fas fa-rotate-left"},null,-1),h(" Retour à l'administration des formules")]),8,fn)]),s.error?(r(),i("div",hn,[t("pre",vn,d(s.error),1)])):(r(),i("div",bn,e[2]||(e[2]=[t("div",{class:"alert alert-success"},"Formule bien intégrée",-1)]))),s.phpClass?(r(),i("div",_n,[e[3]||(e[3]=t("h3",null,"Code généré :",-1)),t("div",{innerHTML:s.phpClass},null,8,gn)])):m("",!0)],64)}const xn=P(cn,[["render",yn]]),Cn=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),Vn={name:"Index",components:{},props:{formules:{required:!0,type:Array},canEdit:{required:!0,type:Boolean}},methods:{telechargementUrl(n){return unicaenVue.url("formule/administration/telecharger-tableur/"+n)},televersementUrl(){return unicaenVue.url("formule/administration/televerser-tableur")},detailsUrl(n){return unicaenVue.url("formule/administration/details/"+n)}}},kn={class:"table table-bordered table-hover table-sort"},Sn=["title"],Pn={key:0,class:"cartridge"},An={key:1,class:"cartridge"},Dn={key:2,class:"cartridge"},Tn={key:3,class:"cartridge"},Mn={key:4,class:"cartridge"},En={key:5,class:"cartridge"},Fn={key:6,class:"cartridge"},Un={key:7,class:"cartridge"},wn={key:8,class:"cartridge"},In={key:9,class:"cartridge"},Rn={key:0},jn={key:1},Hn=["href"],Ln=["href"],Nn={key:0,class:"card bg-warning"},On={class:"card-body"},qn=["action"];function zn(n,e,s,v,l,a){return r(),i(g,null,[e[28]||(e[28]=t("h1",null,"Formules de calcul",-1)),t("table",kn,[e[24]||(e[24]=t("thead",null,[t("tr",null,[t("th",null,"Libellé"),t("th",null,"Paramètres"),t("th",null,"Règle de délégation"),t("th",null,"Ressources")])],-1)),t("tbody",null,[(r(!0),i(g,null,C(s.formules,u=>(r(),i("tr",{key:n.id,class:M({desactivee:!u.active}),title:u.active?"":"Cette formule est désactivée"},[t("td",null,[h(d(u.libelle),1),e[0]||(e[0]=t("br",null,null,-1)),t("i",null,d(u.code),1)]),t("td",null,[u.iParam1Libelle?(r(),i("div",Pn,[e[1]||(e[1]=t("span",null,"intervenant",-1)),e[2]||(e[2]=t("span",null,"param1",-1)),h(" "+d(u.iParam1Libelle),1)])):m("",!0),u.iParam2Libelle?(r(),i("div",An,[e[3]||(e[3]=t("span",null,"intervenant",-1)),e[4]||(e[4]=t("span",null,"param2",-1)),h(" "+d(u.iParam2Libelle),1)])):m("",!0),u.iParam3Libelle?(r(),i("div",Dn,[e[5]||(e[5]=t("span",null,"intervenant",-1)),e[6]||(e[6]=t("span",null,"param3",-1)),h(" "+d(u.iParam3Libelle),1)])):m("",!0),u.iParam4Libelle?(r(),i("div",Tn,[e[7]||(e[7]=t("span",null,"intervenant",-1)),e[8]||(e[8]=t("span",null,"param4",-1)),h(" "+d(u.iParam4Libelle),1)])):m("",!0),u.iParam5Libelle?(r(),i("div",Mn,[e[9]||(e[9]=t("span",null,"intervenant",-1)),e[10]||(e[10]=t("span",null,"param5",-1)),h(" "+d(u.iParam5Libelle),1)])):m("",!0),u.vhParam1Libelle?(r(),i("div",En,[e[11]||(e[11]=t("span",null,"volume horaire",-1)),e[12]||(e[12]=t("span",null,"param1",-1)),h(" "+d(u.vhParam1Libelle),1)])):m("",!0),u.vhParam2Libelle?(r(),i("div",Fn,[e[13]||(e[13]=t("span",null,"volume horaire",-1)),e[14]||(e[14]=t("span",null,"param2",-1)),h(" "+d(u.vhParam2Libelle),1)])):m("",!0),u.vhParam3Libelle?(r(),i("div",Un,[e[15]||(e[15]=t("span",null,"volume horaire",-1)),e[16]||(e[16]=t("span",null,"param3",-1)),h(" "+d(u.vhParam3Libelle),1)])):m("",!0),u.vhParam4Libelle?(r(),i("div",wn,[e[17]||(e[17]=t("span",null,"volume horaire",-1)),e[18]||(e[18]=t("span",null,"param4",-1)),h(" "+d(u.vhParam4Libelle),1)])):m("",!0),u.vhParam5Libelle?(r(),i("div",In,[e[19]||(e[19]=t("span",null,"volume horaire",-1)),e[20]||(e[20]=t("span",null,"param5",-1)),h(" "+d(u.vhParam5Libelle),1)])):m("",!0)]),u.delegationAnnee?(r(),i("td",Rn,[h("Avant "+d(u.delegationAnnee)+"/"+d(u.delegationAnnee+1)+", utilise ",1),t("i",null,d(u.delegationFormule),1)])):(r(),i("td",jn)),t("td",null,[t("a",{href:this.telechargementUrl(u.id)},e[21]||(e[21]=[t("i",{class:"fas fa-table-cells"},null,-1),h(" tableur")]),8,Hn),e[23]||(e[23]=t("br",null,null,-1)),this.canEdit?(r(),i("a",{key:0,href:this.detailsUrl(u.id)},e[22]||(e[22]=[t("i",{class:"fas fa-table-cells"},null,-1),h(" code PHP")]),8,Ln)):m("",!0)])],10,Sn))),128))])]),e[29]||(e[29]=t("br",null,null,-1)),this.canEdit?(r(),i("div",Nn,[e[27]||(e[27]=t("div",{class:"card-header"},[t("h3",null,"Création/Modification d'une formule à partir d'un tableur")],-1)),t("div",On,[e[26]||(e[26]=t("div",{class:"alert alert-warning"},[t("span",{class:"icon iconly icon-attention"}),t("strong",null,"Attention :"),h(" cette opération peut avoir un impact déterminant sur le calcul de vos heures complémentaires et par extension sur tous vos paiements. En outre, le fichier doit être bâti selon un modèle bien précis. Vous êtes invités à ne téléverser que des tableurs préparés ou validés par l'équipe OSE. ")],-1)),t("form",{method:"post",enctype:"multipart/form-data",action:this.televersementUrl()},e[25]||(e[25]=[ie('<div class="form-group mb-3" data-v-ba77464f><label for="formule-name" data-v-ba77464f>Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier" data-v-ba77464f></div><div class="form-group" data-v-ba77464f><button type="submit" class="btn btn-primary" data-v-ba77464f>Ajout/Modification à partir d&#39;un tableur</button></div>',2)]),8,qn)])])):m("",!0)],64)}const $n=P(Vn,[["render",zn],["__scopeId","data-v-ba77464f"]]),Bn=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"})),Jn={name:"DetailsServiceEnseignement",components:{},props:{enseignement:{type:Object}},computed:{tauxFi(){return Util.floatToString(this.enseignement.tauxFi*100)+"% FI"},tauxFa(){return Util.floatToString(this.enseignement.tauxFa*100)+"% FA"},tauxFc(){return Util.floatToString(this.enseignement.tauxFc*100)+"% FC"}}},Gn={key:0},Wn={key:1},Qn={key:0,class:"cartridge"},Yn={class:"code"},Xn={class:"code"},Kn={key:1,class:"cartridge gray"},Zn={key:0};function es(n,e,s,v,l,a){const u=Ce;return r(),i(g,null,[t("h6",null,[e[0]||(e[0]=h(" Enseignement ")),s.enseignement.elementPedagogique?m("",!0):(r(),i("span",Gn," extérieur")),s.enseignement.elementPedagogique?(r(),i("span",Wn,[b(u,null,{default:w(()=>[h(d(s.enseignement.structure.libelle),1)]),_:1}),s.enseignement.tauxFi>0?(r(),R(u,{key:0,variant:"light"},{default:w(()=>[h(d(a.tauxFi),1)]),_:1})):m("",!0),s.enseignement.tauxFa>0?(r(),R(u,{key:1,variant:"light"},{default:w(()=>[h(d(a.tauxFa),1)]),_:1})):m("",!0),s.enseignement.tauxFc>0?(r(),R(u,{key:2,variant:"light"},{default:w(()=>[h(d(a.tauxFc),1)]),_:1})):m("",!0)])):m("",!0)]),s.enseignement.elementPedagogique?(r(),i("div",Qn,[t("span",null,[t("span",Yn,d(s.enseignement.etape.code),1),h(" "+d(s.enseignement.etape.libelle),1)]),t("span",null,[t("span",Xn,d(s.enseignement.elementPedagogique.code),1),h(" "+d(s.enseignement.elementPedagogique.libelle),1)])])):(r(),i("div",Kn,[t("span",null,d(s.enseignement.etablissement.libelle),1),s.enseignement.description?(r(),i("span",Zn,d(s.enseignement.description),1)):m("",!0)]))],64)}const Se=P(Jn,[["render",es],["__scopeId","data-v-f6c21cf6"]]),ts=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),ss={name:"DetailsServiceEnseignement",components:{},props:{referentiel:{type:Object}}},rs={class:"cartridge"},is={key:0};function ls(n,e,s,v,l,a){const u=Ce;return r(),i(g,null,[t("h6",null,[e[0]||(e[0]=h(" Référentiel ")),b(u,null,{default:w(()=>[h(d(s.referentiel.structure.libelle),1)]),_:1})]),t("div",rs,[t("span",null,d(s.referentiel.fonction.libelle),1),s.referentiel.description?(r(),i("span",is,d(s.referentiel.description),1)):m("",!0)])],64)}const Pe=P(ss,[["render",ls]]),as=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"})),os={name:"DetailsVolumeHoraireEnseignement",components:{},props:{vh:{type:Object},visibilite:{type:Object}},methods:{histoTooltip(){return"Créé le "+Util.dateToString(this.vh.histo.creation)+" par "+this.vh.histo.createur.libelle+`
Modifié le `+Util.dateToString(this.vh.histo.modification)+" par "+this.vh.histo.modificateur.libelle+`
`},typeInterventionTooltip(){return"Taux en service : "+Util.floatToString(this.vh.tauxServiceDu)+`
Taux en HC : `+Util.floatToString(this.vh.tauxServiceCompl)+`
`},motifNonPaiement(){return this.vh.motifNonPaiement?this.vh.motifNonPaiement.libelle:this.vh.nonPayable?"Non payable":""},floatToString(n){return Util.floatToString(n)}}},us={style:{"text-align":"center"}},ds=["title"],cs={key:0},ms={key:1},ps={style:{"text-align":"center"}},fs={key:2},hs=["title"],vs={key:3},bs={key:0,class:"fa fa-check text-success"},_s={key:1,class:"fa fa-xmark text-danger"},gs={key:4},ys={key:5};function xs(n,e,s,v,l,a){const u=I("u-heures");return r(),i(g,null,[t("td",us,[t("abbr",{title:a.histoTooltip()},e[0]||(e[0]=[t("i",{class:"fa-regular fa-user"},null,-1)]),8,ds)]),s.visibilite.horaires?(r(),i("td",cs,d(s.vh.horaireDebut),1)):m("",!0),s.visibilite.horaires?(r(),i("td",ms,d(s.vh.horaireFin),1)):m("",!0),t("td",ps,d(s.vh.periode.libelle),1),(r(!0),i(g,null,C(s.vh.params,(c,p)=>(r(),i("td",{key:p},d(c),1))),128)),s.visibilite.motifsNonPaiement?(r(),i("td",fs,d(a.motifNonPaiement()),1)):m("",!0),t("td",null,[t("abbr",{title:a.typeInterventionTooltip()},d(s.vh.typeIntervention.code),9,hs)]),s.visibilite.servicesStatutaire?(r(),i("td",vs,[s.vh.serviceStatutaire?(r(),i("i",bs)):(r(),i("i",_s))])):m("",!0),s.visibilite.majorations?(r(),i("td",gs,d(a.floatToString(s.vh.ponderationServiceDu)),1)):m("",!0),s.visibilite.majorations?(r(),i("td",ys,d(a.floatToString(s.vh.ponderationServiceCompl)),1)):m("",!0),t("td",null,[b(u,{valeur:s.vh.heures},null,8,["valeur"])]),e[1]||(e[1]=t("td",null," ",-1))],64)}const Ae=P(os,[["render",xs]]),Cs=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"})),Vs={name:"DetailsVolumeHoraireReferentiel",components:{},props:{vhr:{type:Object},visibilite:{type:Object}},methods:{histoTooltip(){return"Créé le "+Util.dateToString(this.vhr.histo.creation)+" par "+this.vhr.histo.createur.libelle+`
Modifié le `+Util.dateToString(this.vhr.histo.modification)+" par "+this.vhr.histo.modificateur.libelle+`
`},motifNonPaiement(){return this.vhr.motifNonPaiement?this.vhr.motifNonPaiement.libelle:this.vhr.nonPayable?"Non payable":""},floatToString(n){return Util.floatToString(n)}}},ks={style:{"text-align":"center"}},Ss=["title"],Ps={key:0},As={key:1},Ds={key:2},Ts={key:3},Ms={key:0,class:"fa fa-check text-success"},Es={key:1,class:"fa fa-xmark text-danger"},Fs={key:4},Us={key:5};function ws(n,e,s,v,l,a){const u=I("u-heures");return r(),i(g,null,[t("td",ks,[t("abbr",{title:a.histoTooltip()},e[0]||(e[0]=[t("i",{class:"fa-regular fa-user"},null,-1)]),8,Ss)]),s.visibilite.horaires?(r(),i("td",Ps)):m("",!0),s.visibilite.horaires?(r(),i("td",As)):m("",!0),e[1]||(e[1]=t("td",null,null,-1)),(r(!0),i(g,null,C(s.vhr.params,(c,p)=>(r(),i("td",{key:p},d(c),1))),128)),s.visibilite.motifsNonPaiement?(r(),i("td",Ds,d(a.motifNonPaiement()),1)):m("",!0),e[2]||(e[2]=t("td",null,"Référentiel",-1)),s.visibilite.servicesStatutaire?(r(),i("td",Ts,[n.vh.serviceStatutaire?(r(),i("i",Ms)):(r(),i("i",Es))])):m("",!0),s.visibilite.majorations?(r(),i("td",Fs,d(a.floatToString(s.vhr.ponderationServiceDu)),1)):m("",!0),s.visibilite.majorations?(r(),i("td",Us,d(a.floatToString(s.vhr.ponderationServiceCompl)),1)):m("",!0),t("td",null,[b(u,{valeur:s.vhr.heures},null,8,["valeur"])]),e[3]||(e[3]=t("td",null," ",-1))],64)}const De=P(Vs,[["render",ws]]),Is=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"})),Rs={name:"DetailsHetd",components:{},props:{type:{type:String},hetd:{type:Object}},computed:{arrondiClass(){switch(this.hetd.arrondi){case-1:return"arrondi-defaut";case 1:return"arrondi-exces"}return this.hetd.original!=this.hetd.valeur?"arrondi":""},legende(){let n="";return this.hetd.arrondi==1?n="L'arrondisseur de règle de calcul a procédé à un arrondi à l'excès":this.hetd.arrondi==-1&&(n="L'arrondisseur de règle de calcul a procédé à un arrondi par troncature"),this.hetd.original!=this.hetd.valeur&&(n!=""&&(n+=`
`),n+="Valeur originale : "+Util.floatToString(this.hetd.original,15)),n}}},js=["title"];function Hs(n,e,s,v,l,a){const u=I("u-heures");return r(),i("td",{class:M(a.arrondiClass),title:a.legende},[b(u,{valeur:s.hetd.valeur},null,8,["valeur"])],10,js)}const Te=P(Rs,[["render",Hs],["__scopeId","data-v-717df7b7"]]),Ls=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),Ns={name:"DetailsHetds",components:{DetailsHetd:Te},props:{hetds:{type:Object}}};function Os(n,e,s,v,l,a){const u=I("details-hetd");return r(!0),i(g,null,C(s.hetds,(c,p)=>(r(),R(u,{key:p,type:p,hetd:c},null,8,["type","hetd"]))),128)}const Me=P(Ns,[["render",Os]]),qs=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"})),zs={name:"Details",components:{DetailsVolumeHoraireReferentiel:De,DetailsVolumeHoraireEnseignement:Ae,DetailsServiceEnseignement:Se,DetailsServiceReferentiel:Pe,DetailsHetds:Me},props:{intervenant:{type:Number},typesVolumesHoraires:{type:Object},canReporter:{type:Boolean}},data(){return{data:{},typeVolumeHoraire:null,etatVolumeHoraire:null}},mounted(){if(this.countChoix()==1){for(let n in this.typesVolumesHoraires){this.typeVolumeHoraire=n;for(let e in this.typesVolumesHoraires[n].etats)this.etatVolumeHoraire=e}this.load(this.typeVolumeHoraire,this.etatVolumeHoraire)}},methods:{load(n,e){this.typeVolumeHoraire=n,this.etatVolumeHoraire=e;const s={intervenant:this.intervenant,typeVolumeHoraire:this.typeVolumeHoraire,etatVolumeHoraire:this.etatVolumeHoraire};IntraNavigator.loadBegin(),unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/formule/details-data/:typeVolumeHoraire/:etatVolumeHoraire",s)).then(v=>{this.data=v.data,IntraNavigator.loadEnd()})},reportUrl(){const n={intervenant:this.intervenant,typeVolumeHoraire:this.data.intervenant.typeVolumeHoraireId,etatVolumeHoraire:this.data.intervenant.etatVolumeHoraireId};return unicaenVue.url("formule-test/creer-from-reel/:intervenant/:typeVolumeHoraire/:etatVolumeHoraire",n)},totalColSpan(){let n=4;return this.data.visibilite.horaires&&(n+=2),this.data.visibilite.motifsNonPaiement&&(n+=1),this.data.visibilite.servicesStatutaire&&(n+=1),this.data.visibilite.majorations&&(n+=2),n},countChoix(){let n=0;for(let e in this.typesVolumesHoraires)for(let s in this.typesVolumesHoraires[e].etats)n++;return n}},computed:{listeTypes(){let n={};for(let e in this.typesVolumesHoraires)n[e]=this.typesVolumesHoraires[e].libelle;return n},listeEtats(){let n={};for(let s in this.typesVolumesHoraires)for(let v in this.typesVolumesHoraires[s].etats)n[v]=this.typesVolumesHoraires[s].etats[v];return Object.keys(n).sort((s,v)=>s-v).reduce((s,v)=>(s[v]=n[v],s),{})}}},$s={key:0},Bs={key:1},Js={class:"d-flex justify-content-center align-items-center"},Gs={class:"table table-borderless table-xs"},Ws={key:0},Qs=["onClick"],Ys={key:0,class:"alert alert-info"},Xs={key:2},Ks={key:3},Zs={key:0},er={class:"table table-bordered"},tr={key:0},nr={key:1},sr={key:0},rr={key:1},ir={key:2},lr={key:0},ar={key:1},or={key:1,class:"alert alert-info"},ur={key:2,class:"alert alert-info"},dr={class:"table table-bordered table-xs table-details"},cr={class:"service",colspan:"999"},mr={class:"details"},pr={key:0,colspan:"2"},fr={key:1,rowspan:"2"},hr={key:2,rowspan:"2"},vr={key:3,colspan:"2"},br=["rowspan","colspan"],_r={class:"details"},gr={key:0},yr={key:1},xr={key:2},Cr={key:3},Vr=["colspan"],kr=["colspan"],Sr=["href"];function Pr(n,e,s,v,l,a){const u=I("u-heures"),c=I("details-service-enseignement"),p=I("details-service-referentiel"),o=I("details-volume-horaire-enseignement"),y=I("details-volume-horaire-referentiel"),f=I("details-hetds");return r(),i(g,null,[e[20]||(e[20]=t("br",null,null,-1)),a.countChoix()==0?(r(),i("div",$s,e[0]||(e[0]=[t("div",{class:"alert alert-info"},"Aucun service saisi",-1)]))):m("",!0),a.countChoix()>1?(r(),i("div",Bs,[t("div",Js,[t("div",null,[t("table",Gs,[(r(!0),i(g,null,C(a.listeTypes,(V,S)=>(r(),i("tr",{key:S},[(r(!0),i(g,null,C(a.listeEtats,(T,F)=>(r(),i("td",{key:F},[s.typesVolumesHoraires[S].etats[F]?(r(),i("div",Ws,[t("a",{class:M({"btn btn-outline-secondary btn-choixtevh":!0,active:!(S==l.typeVolumeHoraire&&F==l.etatVolumeHoraire)}),onClick:U=>a.load(S,F)},d(V)+" "+d(T),11,Qs)])):m("",!0)]))),128))]))),128))])])]),l.typeVolumeHoraire?m("",!0):(r(),i("div",Ys,"Veuillez cliquer sur un des boutons ci-dessus pour afficher de détail de calcul des HETD "))])):(r(),i("div",Xs,[t("h2",null,d(a.listeTypes[l.typeVolumeHoraire])+" "+d(a.listeEtats[l.etatVolumeHoraire]),1)])),Object.keys(this.data).length>0?(r(),i("div",Ks,[l.data.typesHetd.length==0?(r(),i("div",Zs,e[1]||(e[1]=[t("div",{class:"alert alert-warning"},"Aucune heure HETD n'a été calculée",-1)]))):m("",!0),e[18]||(e[18]=t("h2",null,"Paramètres intervenant",-1)),t("table",er,[t("tbody",null,[t("tr",null,[e[3]||(e[3]=t("th",null,"Structure",-1)),l.data.intervenant.structure?(r(),i("td",tr,d(l.data.intervenant.structure.libelle),1)):(r(),i("td",nr,e[2]||(e[2]=[t("span",{class:"text-secondary"},"Aucune structure d'affectation",-1)])))]),l.data.intervenant.heuresServiceStatutaire>0&&l.data.intervenant.heuresServiceStatutaire!=l.data.intervenant.serviceDu?(r(),i("tr",sr,[e[4]||(e[4]=t("th",null,"Heures de service statutaire",-1)),t("td",null,[b(u,{valeur:l.data.intervenant.heuresServiceStatutaire},null,8,["valeur"])])])):m("",!0),l.data.intervenant.heuresServiceModifie>0?(r(),i("tr",rr,[e[5]||(e[5]=t("th",null,"Heures de service modifié",-1)),t("td",null,[b(u,{valeur:l.data.intervenant.heuresServiceModifie},null,8,["valeur"])])])):m("",!0),l.data.intervenant.serviceDu>0?(r(),i("tr",ir,[e[6]||(e[6]=t("th",null,"Heures de service dû",-1)),t("td",null,[b(u,{valeur:l.data.intervenant.serviceDu},null,8,["valeur"])])])):m("",!0),t("tr",null,[e[7]||(e[7]=t("th",null,"Dépassement de service dû sans HC",-1)),l.data.intervenant.depassementServiceDuSansHC?(r(),i("td",lr,"Oui")):(r(),i("td",ar,"Non"))]),(r(!0),i(g,null,C(l.data.iParams,(V,S)=>(r(),i("tr",{key:S},[t("th",null,d(V)+" "+d(S),1),t("td",null,d(l.data.intervenant.params[S]),1)]))),128))])]),e[19]||(e[19]=t("h2",null,[h("Données utilisées pour le calcul des "),t("abbr",{title:"Heures équivalent TD"},"HETD")],-1)),l.data.intervenant.arrondisseur==0?(r(),i("div",or,"L'arrondisseur de calcul HETD est désactivé ")):m("",!0),l.data.intervenant.arrondisseur==1?(r(),i("div",ur,`L'arrondisseur de calcul HETD est ici activé en mode "minimal" : les opérations d'arrondissage ne se font ici qu'au niveau des volumes horaires et ne prennent pas en compte la totalisation des heures au niveau de la fiche de l'intervenant. `)):m("",!0),t("table",dr,[e[17]||(e[17]=t("thead",null,null,-1)),t("tbody",null,[(r(!0),i(g,null,C(l.data.services,(V,S)=>(r(),i(g,{key:S},[t("tr",null,[t("th",cr,[V.type=="enseignement"?(r(),R(c,{key:0,enseignement:V},null,8,["enseignement"])):(r(),R(p,{key:1,referentiel:V},null,8,["referentiel"]))])]),t("tr",mr,[e[9]||(e[9]=t("th",{rowspan:"2"}," ",-1)),l.data.visibilite.horaires?(r(),i("th",pr,"Horaire")):m("",!0),e[10]||(e[10]=t("th",{rowspan:"2"},"Période",-1)),(r(!0),i(g,null,C(l.data.vhParams,(T,F)=>(r(),i("th",{rowspan:"2",key:F},d(T),1))),128)),l.data.visibilite.motifsNonPaiement?(r(),i("th",fr,"Motif non paiement")):m("",!0),e[11]||(e[11]=t("th",{rowspan:"2"},"Type d'intervention",-1)),l.data.visibilite.servicesStatutaire?(r(),i("th",hr,e[8]||(e[8]=[t("abbr",{title:"Détermine si les heures peuvent être comptées dans le service statutaire de l'intervenant ou non"},"Peut dans serv.",-1)]))):m("",!0),l.data.visibilite.majorations?(r(),i("th",vr,"Majoration")):m("",!0),e[12]||(e[12]=t("th",{rowspan:"2"},"Heures",-1)),e[13]||(e[13]=t("th",{rowspan:"2"}," ",-1)),(r(!0),i(g,null,C(l.data.typesHetd,(T,F)=>(r(),i("th",{key:F,rowspan:T.length==0?2:1,colspan:Math.max(T.length,1)},d(F),9,br))),128))]),t("tr",_r,[l.data.visibilite.horaires?(r(),i("th",gr,"Début")):m("",!0),l.data.visibilite.horaires?(r(),i("th",yr,"Fin")):m("",!0),l.data.visibilite.majorations?(r(),i("th",xr,"Service")):m("",!0),l.data.visibilite.majorations?(r(),i("th",Cr,"Compl.")):m("",!0),(r(!0),i(g,null,C(l.data.typesHetd,T=>(r(),i(g,{key:T},[(r(!0),i(g,null,C(T,(F,U)=>(r(),i("th",{key:U},d(F),1))),128))],64))),128))]),(r(!0),i(g,null,C(V.volumesHoraires,(T,F)=>(r(),i("tr",{key:F},[V.type=="enseignement"?(r(),R(o,{key:0,vh:T,visibilite:l.data.visibilite},null,8,["vh","visibilite"])):(r(),R(y,{key:1,vhr:T,visibilite:l.data.visibilite},null,8,["vhr","visibilite"])),b(f,{hetds:T.hetd},null,8,["hetds"])]))),128)),t("tr",null,[t("th",{class:"total",colspan:a.totalColSpan()},"Total",8,Vr),e[14]||(e[14]=t("th",null," ",-1)),b(f,{hetds:V.hetd},null,8,["hetds"])])],64))),128)),e[16]||(e[16]=t("tr",null,[t("th",{class:"service",colspan:"999"}," ")],-1)),t("tr",null,[t("th",{class:"total",colspan:a.totalColSpan()},"Total intervenant",8,kr),e[15]||(e[15]=t("th",null," ",-1)),b(f,{hetds:l.data.intervenant.hetd},null,8,["hetds"])])])]),s.canReporter?(r(),i("a",{key:3,href:a.reportUrl(),class:"btn btn-secondary"},"Reporter les données de cet intervenant dans l'interface de tests de formule",8,Sr)):m("",!0)])):m("",!0)],64)}const Ar=P(zs,[["render",Pr],["__scopeId","data-v-b9d45fe9"]]),Dr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),Tr={data(){return{dataUrl:unicaenVue.url("formule-test/data"),lines:[]}},methods:{addUrl(){return unicaenVue.url("formule-test/saisir")},editUrl(n){return unicaenVue.url("formule-test/saisir/:id",{id:n})},deleteUrl(n){return unicaenVue.url("formule-test/supprimer/:id",{id:n})},importUrl(){return unicaenVue.url("formule-test/import")},supprimerTest(n){return popConfirm(n.currentTarget,e=>{this.$refs.testsFormules.getData()}),!1}}},Mr={style:{width:"1%","white-space":"nowrap"}},Er=["href"],Fr=["href"],Ur={class:"card bg-warning"},wr={class:"card-body"},Ir=["action"];function Rr(n,e,s,v,l,a){const u=le,c=re;return r(),i(g,null,[e[9]||(e[9]=t("h1",{class:"page-header"},"Page de tests de formule de calcul des HETD",-1)),b(u,{"data-url":this.dataUrl,modelValue:l.lines,"onUpdate:modelValue":e[1]||(e[1]=p=>l.lines=p),ref:"testsFormules"},{default:w(()=>[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",{column:"ID"},"Id"),t("th",{column:"LIBELLE"},"Libellé"),t("th",{column:"FORMULE"},"Formule"),t("th",{column:"ANNEE"},"Année"),t("th",null," ")])],-1)),t("tbody",null,[(r(!0),i(g,null,C(l.lines,(p,o)=>(r(),i("tr",{key:o},[t("td",null,d(p.ID),1),t("td",null,d(p.LIBELLE),1),t("td",null,d(p.FORMULE),1),t("td",null,d(p.ANNEE),1),t("td",Mr,[t("a",{href:a.editUrl(p.ID),title:"Modification du test de formule"},e[2]||(e[2]=[t("i",{class:"fas fa-pencil"},null,-1)]),8,Er),e[4]||(e[4]=h("   ")),t("a",{href:a.deleteUrl(p.ID),title:"Suppression du test de formule","data-content":"Êtes-vous sur de vouloir supprimer ce test ?","data-title":"Suppression du test de formule",onClick:e[0]||(e[0]=D((...y)=>a.supprimerTest&&a.supprimerTest(...y),["prevent"]))},e[3]||(e[3]=[t("i",{class:"fas fa-trash-can"},null,-1)]),8,Fr)])]))),128))])]),_:1},8,["data-url","modelValue"]),b(c,{variant:"primary",href:a.addUrl()},{default:w(()=>e[6]||(e[6]=[h("Ajout d'un nouveau test")])),_:1},8,["href"]),e[10]||(e[10]=t("br",null,null,-1)),e[11]||(e[11]=t("br",null,null,-1)),t("div",Ur,[e[8]||(e[8]=t("div",{class:"card-header"},[t("h3",null,"Import d'un nouveau test à partir d'un tableur")],-1)),t("div",wr,[t("form",{method:"post",enctype:"multipart/form-data",action:this.importUrl()},e[7]||(e[7]=[ie('<div class="form-group mb-3"><label for="formule-name">Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier"></div><div class="form-group"><button type="submit" class="btn btn-primary">Import d&#39;un test à partir d&#39;un tableur</button></div>',2)]),8,Ir)])])],64)}const jr=P(Tr,[["render",Rr]]),Hr=Object.freeze(Object.defineProperty({__proto__:null,default:jr},Symbol.toStringTag,{value:"Module"})),Lr={props:{id:{type:Number},formules:{type:Object},annees:{type:Object},typesIntervenants:{type:Object},typesVolumesHoraires:{type:Object},etatsVolumesHoraires:{type:Object},defaultFormule:{type:Number}},data(){return{indexUrl:unicaenVue.url("formule-test"),dataUrl:unicaenVue.url("formule-test/data"),tauxAutre1Visibility:!0,tauxAutre2Visibility:!1,tauxAutre3Visibility:!1,tauxAutre4Visibility:!1,tauxAutre5Visibility:!1,resMode:"hetd",debug:{},intervenant:{formule:void 0,tauxCmServiceDu:1.5,tauxCmServiceCompl:1.5,tauxTpServiceDu:1,tauxTpServiceCompl:.6666666666667},volumesHoraires:[],formule:{iParam1Libelle:void 0,iParam2Libelle:void 0,iParam3Libelle:void 0,iParam4Libelle:void 0,iParam5Libelle:void 0,vhParam1Libelle:void 0,vhParam2Libelle:void 0,vhParam3Libelle:void 0,vhParam4Libelle:void 0,vhParam5Libelle:void 0},structures:{},typesIntervention:["CM","TD","TP",void 0,void 0,void 0,void 0,void 0,"Référentiel"]}},watch:{"intervenant.tauxAutre1Code"(n){this.tauxAutre2Visibility=n||this.intervenant.tauxAutre1Code||this.intervenant.tauxAutre2ServiceDu||this.intervenant.tauxAutre2ServiceCompl,this.typesIntervention[3]=n},"intervenant.tauxAutre2Code"(n){this.tauxAutre3Visibility=n||this.intervenant.tauxAutre2Code||this.intervenant.tauxAutre3ServiceDu||this.intervenant.tauxAutre3ServiceCompl,this.typesIntervention[4]=n},"intervenant.tauxAutre3Code"(n){this.tauxAutre4Visibility=n||this.intervenant.tauxAutre3Code||this.intervenant.tauxAutre4ServiceDu||this.intervenant.tauxAutre4ServiceCompl,this.typesIntervention[5]=n},"intervenant.tauxAutre4Code"(n){this.tauxAutre5Visibility=n||this.intervenant.tauxAutre4Code||this.intervenant.tauxAutre5ServiceDu||this.intervenant.tauxAutre5ServiceCompl,this.typesIntervention[6]=n},"intervenant.tauxAutre5Code"(n){this.typesIntervention[7]=n},"intervenant.formule"(n){n&&(this.formule=this.formules[n])}},computed:{filteredTypesIntervention(){let n=Object.values(this.typesIntervention).filter(e=>e);return n.unshift(""),n},vhParamCount(){let n=0;for(let e=1;e<6;e++)this.formule["vhParam"+e+"Libelle"]&&n++;return n}},methods:{charger(){unicaenVue.axios.get(unicaenVue.url("formule-test/saisir-data/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0})).then(n=>{this.intervenant=this.dropTauxNonUtilises(n.data.intervenant),this.volumesHoraires=n.data.volumesHoraires,this.debug={},this.addVolumeHoraire(),this.updateStructures()})},enregistrer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires}).then(n=>{this.intervenant=this.dropTauxNonUtilises(n.data.intervenant),this.volumesHoraires=n.data.volumesHoraires,n.data.debug?this.debug=n.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},calculer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires,simpleCalcul:!0}).then(n=>{this.intervenant=this.dropTauxNonUtilises(n.data.intervenant),this.volumesHoraires=n.data.volumesHoraires,n.data.debug?this.debug=n.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},exporter:function(){const n={intervenant:this.intervenant,volumesHoraires:this.volumesHoraires},e=this.intervenant.libelle;var s=document.createElement("a"),v=new Blob([JSON.stringify(n)],{type:"text/json"});s.href=window.URL.createObjectURL(v),s.download="Test de formule "+e+".json",s.click()},exporterCsv:function(){let n=`Structure;Heures non payables;Compte dans le service statutaire;Type d’intervention;Taux FI;Taux FA;Taux FC;Modulation service dû;Modulation service compl.;Param 1;Param 2;Param 3;Param 4;Param 5;Heures;Service FI;Service FA;Service FC;Service Référentiel;HC FI;HC FA;HC FC;HC Référentiel;Primes;Non payable FI;Non payable FA;Non payable FC;Non payable Référentiel
`;for(const l in this.volumesHoraires){const a=this.volumesHoraires[l];n+=(a.structureCode?a.structureCode:"")+";"+(a.nonPayable?"Oui":"Non")+";"+(a.serviceStatutaire?"Oui":"Non")+";"+(a.referentiel?"Référentiel":a.typeInterventionCode?a.typeInterventionCode:"")+";"+(a.tauxFi?a.tauxFi.toLocaleString("fr-FR"):"")+";"+(a.tauxFa?a.tauxFa.toLocaleString("fr-FR"):"")+";"+(a.tauxFc?a.tauxFc.toLocaleString("fr-FR"):"")+";"+(a.ponderationServiceDu?a.ponderationServiceDu.toLocaleString("fr-FR"):"")+";"+(a.ponderationServiceCompl?a.ponderationServiceCompl.toLocaleString("fr-FR"):"")+";"+(a.param1?a.param1:"")+";"+(a.param2?a.param2:"")+";"+(a.param3?a.param3:"")+";"+(a.param4?a.param4:"")+";"+(a.param5?a.param5:"")+";"+(a.heures?a.heures.toLocaleString("fr-FR"):"")+";"+(a.heuresServiceFi?a.heuresServiceFi.toLocaleString("fr-FR"):"")+";"+(a.heuresServiceFa?a.heuresServiceFa.toLocaleString("fr-FR"):"")+";"+(a.heuresServiceFc?a.heuresServiceFc.toLocaleString("fr-FR"):"")+";"+(a.heuresServiceReferentiel?a.heuresServiceReferentiel.toLocaleString("fr-FR"):"")+";"+(a.heuresComplFi?a.heuresComplFi.toLocaleString("fr-FR"):"")+";"+(a.heuresComplFa?a.heuresComplFa.toLocaleString("fr-FR"):"")+";"+(a.heuresComplFc?a.heuresComplFc.toLocaleString("fr-FR"):"")+";"+(a.heuresComplReferentiel?a.heuresComplReferentiel.toLocaleString("fr-FR"):"")+";"+(a.heuresPrimes?a.heuresPrimes.toLocaleString("fr-FR"):"")+";"+(a.heuresNonPayableFi?a.heuresNonPayableFi.toLocaleString("fr-FR"):"")+";"+(a.heuresNonPayableFa?a.heuresNonPayableFa.toLocaleString("fr-FR"):"")+";"+(a.heuresNonPayableFc?a.heuresNonPayableFc.toLocaleString("fr-FR"):"")+";"+(a.heuresNonPayableReferentiel?a.heuresNonPayableReferentiel.toLocaleString("fr-FR"):"")+`;
`}const e=this.intervenant.libelle;var s=document.createElement("a"),v=new Blob([n],{type:"text/csv"});s.href=window.URL.createObjectURL(v),s.download="Test de formule "+e+".csv",s.click()},importer:function(n){const e=n.target.files[0];if(!e.type.match("application/json")){console.error("Le fichier n'est pas de type JSON.");return}const s=new FileReader;s.onload=v=>{try{const l=JSON.parse(v.target.result);l.intervenant.id=this.intervenant.id,this.intervenant=l.intervenant,this.volumesHoraires=l.volumesHoraires,this.updateStructures()}catch(l){console.error("Erreur lors de l'analyse du contenu JSON :",l)}},s.readAsText(e)},dropTauxNonUtilises(n){return n.tauxAutre1Code||(n.tauxAutre1ServiceDu=void 0,n.tauxAutre1ServiceCompl=void 0),n.tauxAutre2Code||(n.tauxAutre2ServiceDu=void 0,n.tauxAutre2ServiceCompl=void 0),n.tauxAutre3Code||(n.tauxAutre3ServiceDu=void 0,n.tauxAutre3ServiceCompl=void 0),n.tauxAutre4Code||(n.tauxAutre4ServiceDu=void 0,n.tauxAutre4ServiceCompl=void 0),n.tauxAutre5Code||(n.tauxAutre5ServiceDu=void 0,n.tauxAutre5ServiceCompl=void 0),n},updateStructures(){let n={"":""};this.intervenant.structureCode&&(n[this.intervenant.structureCode]=this.intervenant.structureCode);for(let e in this.volumesHoraires){const s=this.volumesHoraires[e].structureCode;s&&(n[s]=s)}n.__UNIV__="Université (établissement)",n.__EXTERIEUR__="Extérieur (autre établissement)",n.__new_structure__="- Ajout d'une nouvelle structure -",this.structures=n},selectStructure(n){if(n.target.value=="__new_structure__"&&this.addStructure(n.target),n.target.dataset.variable!="intervenant"){const e=parseInt(n.target.dataset.variable);e==this.lastVolumeHoraireIndex()&&this.volumesHoraires[e].structureCode&&this.addVolumeHoraire()}},majTauxFi(n){const e=n.target.dataset.variable;this.volumesHoraires[e].tauxFi=1-this.volumesHoraires[e].tauxFa-this.volumesHoraires[e].tauxFc},lastVolumeHoraireIndex(){return this.volumesHoraires.length==0?-1:parseInt(Object.keys(this.volumesHoraires).pop())},addVolumeHoraire(){this.volumesHoraires.push({structureCode:null,typeInterventionCode:null,tauxFi:1,tauxFa:0,tauxFc:0,ponderationServiceDu:1,ponderationServiceCompl:1,serviceStatutaire:!0,heures:null})},addStructure(n){const e=prompt("Ajout d'une nouvelle structure");this.structures[e]=e,setTimeout(()=>{const s=n.dataset.variable;s=="intervenant"?this.intervenant.structureCode=e:this.volumesHoraires[s].structureCode=e},200)}},mounted(){this.charger()}},Nr={class:"row"},Or={class:"col-md-6"},qr={class:"table table-xs table-bordered fti"},zr={class:"saisie"},$r={class:"saisie"},Br=["value"],Jr={class:"saisie"},Gr=["value"],Wr={class:"saisie"},Qr=["value"],Yr={class:"saisie"},Xr=["value"],Kr={class:"saisie"},Zr=["value"],ei={class:"saisie"},ti=["value"],ni={class:"saisie"},si={class:"saisie"},ri={class:"saisie"},ii={class:"i-param i-param-1"},li={class:"i-param"},ai={class:"saisie"},oi={class:"i-param i-param-2"},ui={class:"i-param"},di={class:"saisie"},ci={class:"i-param i-param-3"},mi={class:"i-param"},pi={class:"saisie"},fi={class:"i-param i-param-4"},hi={class:"i-param"},vi={class:"saisie"},bi={class:"i-param i-param-5"},_i={class:"i-param"},gi={class:"saisie"},yi={class:"actions"},xi={class:"row mb-4"},Ci={class:"col-md-6"},Vi={class:"col-md-6"},ki={class:"row mb-4"},Si={class:"col-md-6"},Pi={class:"col-md-6"},Ai={for:"importbtn"},Di={class:"row"},Ti={class:"col-md-6"},Mi={class:"col-md-5"},Ei={class:"types-interventions"},Fi={class:"table table-bordered table-xs"},Ui={style:{width:"10%"}},wi={style:{width:"10%"}},Ii={style:{width:"10%"}},Ri={style:{width:"10%"}},ji={style:{width:"10%"}},Hi={class:"saisie"},Li={class:"saisie"},Ni={class:"saisie"},Oi={class:"saisie"},qi={class:"saisie"},zi={class:"saisie"},$i={class:"saisie"},Bi={class:"saisie"},Ji={class:"saisie"},Gi={class:"saisie"},Wi={class:"saisie"},Qi={class:"saisie"},Yi={class:"saisie"},Xi={class:"saisie"},Ki={class:"table table-xs table-bordered resultats"},Zi={class:"table table-bordered table-xs table-hover fvh"},el=["colspan"],tl={colspan:"13"},nl=["colspan"],sl={colspan:"4"},rl={colspan:"4"},il={rowspan:"2"},ll={colspan:"4"},al={colspan:"4"},ol={colspan:"4"},ul={rowspan:"2"},dl={colspan:"4"},cl={rowspan:"2"},ml=["onUpdate:modelValue","data-variable"],pl=["value"],fl=["onUpdate:modelValue"],hl=["onUpdate:modelValue"],vl=["onUpdate:modelValue"],bl=["value"],_l=["onUpdate:modelValue"],gl=["onUpdate:modelValue"],yl=["onUpdate:modelValue"],xl=["onUpdate:modelValue"],Cl=["onUpdate:modelValue"],Vl={class:"debug-td"},kl={key:0},Sl={class:"debug-cell"},Pl={class:"debug-val"},Al={key:0},Dl={class:"debug-cell"},Tl={class:"debug-val"},Ml=["href"];function El(n,e,s,v,l,a){const u=I("u-input-float"),c=re,p=I("u-heures");return r(),i(g,null,[e[114]||(e[114]=t("h1",{class:"page-header"},"Modification d'un test de formule",-1)),t("div",Nr,[t("div",Or,[e[54]||(e[54]=t("h2",null,"Intervenant",-1)),t("table",qr,[t("tr",null,[e[40]||(e[40]=t("th",null,"Libellé",-1)),t("td",zr,[_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.intervenant.libelle=o),class:"dinput"},null,512),[[j,l.intervenant.libelle]])])]),t("tr",null,[e[41]||(e[41]=t("th",null,"Formule",-1)),t("td",$r,[_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.intervenant.formule=o),class:"dinput"},[(r(!0),i(g,null,C(s.formules,o=>(r(),i("option",{value:o.id},d(o.libelle),9,Br))),256))],512),[[H,l.intervenant.formule]])])]),t("tr",null,[e[42]||(e[42]=t("th",null,"Année",-1)),t("td",Jr,[_(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.intervenant.annee=o),class:"dinput"},[(r(!0),i(g,null,C(s.annees,o=>(r(),i("option",{value:o.id},d(o.libelle),9,Gr))),256))],512),[[H,l.intervenant.annee]])])]),t("tr",null,[e[43]||(e[43]=t("th",null,"Type",-1)),t("td",Wr,[_(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.intervenant.typeIntervenant=o),class:"dinput"},[(r(!0),i(g,null,C(s.typesIntervenants,o=>(r(),i("option",{value:o.id},d(o.libelle),9,Qr))),256))],512),[[H,l.intervenant.typeIntervenant]])])]),t("tr",null,[e[44]||(e[44]=t("th",null,"Structure",-1)),t("td",Yr,[_(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.intervenant.structureCode=o),"data-variable":"intervenant",class:"dinput",onChange:e[5]||(e[5]=(...o)=>a.selectStructure&&a.selectStructure(...o))},[(r(!0),i(g,null,C(l.structures,(o,y)=>(r(),i("option",{value:y,key:y},d(o),9,Xr))),128))],544),[[H,l.intervenant.structureCode]])])]),t("tr",null,[e[45]||(e[45]=t("th",null,"Type de volume horaire",-1)),t("td",Kr,[_(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.intervenant.typeVolumeHoraire=o),class:"dinput"},[(r(!0),i(g,null,C(s.typesVolumesHoraires,o=>(r(),i("option",{value:o.id},d(o.libelle),9,Zr))),256))],512),[[H,l.intervenant.typeVolumeHoraire]])])]),t("tr",null,[e[46]||(e[46]=t("th",null,"État de volume horaire",-1)),t("td",ei,[_(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.intervenant.etatVolumeHoraire=o),class:"dinput"},[(r(!0),i(g,null,C(s.etatsVolumesHoraires,o=>(r(),i("option",{value:o.id},d(o.libelle),9,ti))),256))],512),[[H,l.intervenant.etatVolumeHoraire]])])]),t("tr",null,[e[47]||(e[47]=t("th",null,"Heures de service statutaire",-1)),t("td",ni,[b(u,{modelValue:l.intervenant.heuresServiceStatutaire,"onUpdate:modelValue":e[8]||(e[8]=o=>l.intervenant.heuresServiceStatutaire=o),class:"dinput"},null,8,["modelValue"])])]),t("tr",null,[e[48]||(e[48]=t("th",null,"Heures de service modifié",-1)),t("td",si,[b(u,{modelValue:l.intervenant.heuresServiceModifie,"onUpdate:modelValue":e[9]||(e[9]=o=>l.intervenant.heuresServiceModifie=o),class:"dinput"},null,8,["modelValue"])])]),t("tr",null,[e[50]||(e[50]=t("th",null,"Dépassement de service dû sans HC",-1)),t("td",ri,[_(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.intervenant.depassementServiceDuSansHC=o),class:"dinput"},e[49]||(e[49]=[t("option",{value:!0},"Oui",-1),t("option",{value:!1},"Non",-1)]),512),[[H,l.intervenant.depassementServiceDuSansHC]])])]),_(t("tr",ii,[t("th",li,d(l.formule.iParam1Libelle),1),t("td",ai,[_(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>l.intervenant.param1=o),class:"dinput"},null,512),[[j,l.intervenant.param1]])])],512),[[x,l.formule.iParam1Libelle]]),_(t("tr",oi,[t("th",ui,d(l.formule.iParam2Libelle),1),t("td",di,[_(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>l.intervenant.param2=o),class:"dinput"},null,512),[[j,l.intervenant.param2]])])],512),[[x,l.formule.iParam2Libelle]]),_(t("tr",ci,[t("th",mi,d(l.formule.iParam3Libelle),1),t("td",pi,[_(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>l.intervenant.param3=o),class:"dinput"},null,512),[[j,l.intervenant.param3]])])],512),[[x,l.formule.iParam3Libelle]]),_(t("tr",fi,[t("th",hi,d(l.formule.iParam4Libelle),1),t("td",vi,[_(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>l.intervenant.param4=o),class:"dinput"},null,512),[[j,l.intervenant.param4]])])],512),[[x,l.formule.iParam4Libelle]]),_(t("tr",bi,[t("th",_i,d(l.formule.iParam5Libelle),1),t("td",gi,[_(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>l.intervenant.param5=o),class:"dinput"},null,512),[[j,l.intervenant.param5]])])],512),[[x,l.formule.iParam5Libelle]])]),t("div",yi,[t("div",xi,[t("div",Ci,[b(c,{variant:"primary",onClick:a.enregistrer},{default:w(()=>e[51]||(e[51]=[h("Enregistrer les données")])),_:1},8,["onClick"])]),t("div",Vi,[b(c,{variant:"secondary",onClick:a.calculer},{default:w(()=>e[52]||(e[52]=[h("Calculer les HETD")])),_:1},8,["onClick"])])]),t("div",ki,[t("div",Si,[t("button",{class:"exporter btn btn-secondary",onClick:e[16]||(e[16]=(...o)=>a.exporter&&a.exporter(...o))},"Télécharger les données")]),t("div",Pi,[t("label",Ai,[e[53]||(e[53]=t("span",{class:"btn btn-secondary"},"Téléverser un jeu de données",-1)),t("input",{type:"file",id:"importbtn",class:"importer",onChange:e[17]||(e[17]=(...o)=>a.importer&&a.importer(...o))},null,32)])])]),t("div",Di,[t("div",Ti,[t("button",{class:"exporter btn btn-secondary",onClick:e[18]||(e[18]=(...o)=>a.exporterCsv&&a.exporterCsv(...o))},"Télécharger les données en CSV ")])])])]),t("div",Mi,[e[84]||(e[84]=t("h2",null,"Types d'intervention (HETD)",-1)),t("div",Ei,[t("table",Fi,[e[63]||(e[63]=t("tr",null,[t("th"),t("th",{colspan:"3"},"Standards"),t("th",{colspan:"5"},"Personnalisés")],-1)),t("tr",null,[e[55]||(e[55]=t("th",{style:{width:"20%"}},null,-1)),e[56]||(e[56]=t("th",{style:{width:"5%"}},"CM",-1)),e[57]||(e[57]=t("th",{style:{width:"5%"}},"TD",-1)),e[58]||(e[58]=t("th",{style:{width:"5%"}},"TP",-1)),_(t("th",Ui,[_(t("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>l.intervenant.tauxAutre1Code=o),class:"dinput"},null,512),[[j,l.intervenant.tauxAutre1Code]])],512),[[x,l.tauxAutre1Visibility]]),_(t("th",wi,[_(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>l.intervenant.tauxAutre2Code=o),class:"dinput"},null,512),[[j,l.intervenant.tauxAutre2Code]])],512),[[x,l.tauxAutre2Visibility]]),_(t("th",Ii,[_(t("input",{"onUpdate:modelValue":e[21]||(e[21]=o=>l.intervenant.tauxAutre3Code=o),class:"dinput"},null,512),[[j,l.intervenant.tauxAutre3Code]])],512),[[x,l.tauxAutre3Visibility]]),_(t("th",Ri,[_(t("input",{"onUpdate:modelValue":e[22]||(e[22]=o=>l.intervenant.tauxAutre4Code=o),class:"dinput"},null,512),[[j,l.intervenant.tauxAutre4Code]])],512),[[x,l.tauxAutre4Visibility]]),_(t("th",ji,[_(t("input",{"onUpdate:modelValue":e[23]||(e[23]=o=>l.intervenant.tauxAutre5Code=o),class:"dinput"},null,512),[[j,l.intervenant.tauxAutre5Code]])],512),[[x,l.tauxAutre5Visibility]])]),t("tr",null,[e[59]||(e[59]=t("th",null,"En service",-1)),t("td",Hi,[b(u,{modelValue:l.intervenant.tauxCmServiceDu,"onUpdate:modelValue":e[24]||(e[24]=o=>l.intervenant.tauxCmServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),e[60]||(e[60]=t("td",null,"1",-1)),t("td",Li,[b(u,{modelValue:l.intervenant.tauxTpServiceDu,"onUpdate:modelValue":e[25]||(e[25]=o=>l.intervenant.tauxTpServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),_(t("td",Ni,[b(u,{modelValue:l.intervenant.tauxAutre1ServiceDu,"onUpdate:modelValue":e[26]||(e[26]=o=>l.intervenant.tauxAutre1ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre1Visibility]]),_(t("td",Oi,[b(u,{modelValue:l.intervenant.tauxAutre2ServiceDu,"onUpdate:modelValue":e[27]||(e[27]=o=>l.intervenant.tauxAutre2ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre2Visibility]]),_(t("td",qi,[b(u,{modelValue:l.intervenant.tauxAutre3ServiceDu,"onUpdate:modelValue":e[28]||(e[28]=o=>l.intervenant.tauxAutre3ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre3Visibility]]),_(t("td",zi,[b(u,{modelValue:l.intervenant.tauxAutre4ServiceDu,"onUpdate:modelValue":e[29]||(e[29]=o=>l.intervenant.tauxAutre4ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre4Visibility]]),_(t("td",$i,[b(u,{modelValue:l.intervenant.tauxAutre5ServiceDu,"onUpdate:modelValue":e[30]||(e[30]=o=>l.intervenant.tauxAutre5ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre5Visibility]])]),t("tr",null,[e[61]||(e[61]=t("th",null,"Au-delà du service",-1)),t("td",Bi,[b(u,{modelValue:l.intervenant.tauxCmServiceCompl,"onUpdate:modelValue":e[31]||(e[31]=o=>l.intervenant.tauxCmServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),e[62]||(e[62]=t("td",null,"1",-1)),t("td",Ji,[b(u,{modelValue:l.intervenant.tauxTpServiceCompl,"onUpdate:modelValue":e[32]||(e[32]=o=>l.intervenant.tauxTpServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),_(t("td",Gi,[b(u,{modelValue:l.intervenant.tauxAutre1ServiceCompl,"onUpdate:modelValue":e[33]||(e[33]=o=>l.intervenant.tauxAutre1ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre1Visibility]]),_(t("td",Wi,[b(u,{modelValue:l.intervenant.tauxAutre2ServiceCompl,"onUpdate:modelValue":e[34]||(e[34]=o=>l.intervenant.tauxAutre2ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre2Visibility]]),_(t("td",Qi,[b(u,{modelValue:l.intervenant.tauxAutre3ServiceCompl,"onUpdate:modelValue":e[35]||(e[35]=o=>l.intervenant.tauxAutre3ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre3Visibility]]),_(t("td",Yi,[b(u,{modelValue:l.intervenant.tauxAutre4ServiceCompl,"onUpdate:modelValue":e[36]||(e[36]=o=>l.intervenant.tauxAutre4ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre4Visibility]]),_(t("td",Xi,[b(u,{modelValue:l.intervenant.tauxAutre5ServiceCompl,"onUpdate:modelValue":e[37]||(e[37]=o=>l.intervenant.tauxAutre5ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[x,l.tauxAutre5Visibility]])])])]),e[85]||(e[85]=t("h2",null,"Résultat",-1)),t("table",Ki,[t("tr",null,[e[64]||(e[64]=t("th",{colspan:"2"},"Service dû",-1)),t("td",null,[b(p,{valeur:l.intervenant.serviceDu??NaN},null,8,["valeur"])])]),t("tr",null,[e[65]||(e[65]=t("th",{rowspan:"4"},"Service",-1)),e[66]||(e[66]=t("th",null,"FI",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresServiceFi??NaN},null,8,["valeur"])])]),t("tr",null,[e[67]||(e[67]=t("th",null,"FA",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresServiceFa??NaN},null,8,["valeur"])])]),t("tr",null,[e[68]||(e[68]=t("th",null,"FC",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresServiceFc??NaN},null,8,["valeur"])])]),t("tr",null,[e[69]||(e[69]=t("th",null,"Référentiel",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresServiceReferentiel??NaN},null,8,["valeur"])])]),t("tr",null,[e[70]||(e[70]=t("th",{colspan:"2"},"Total service dû assuré",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresService??NaN},null,8,["valeur"])])]),t("tr",null,[e[71]||(e[71]=t("th",{rowspan:"4"},"Heures compl.",-1)),e[72]||(e[72]=t("th",null,"FI",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresComplFi??NaN},null,8,["valeur"])])]),t("tr",null,[e[73]||(e[73]=t("th",null,"FA",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresComplFa??NaN},null,8,["valeur"])])]),t("tr",null,[e[74]||(e[74]=t("th",null,"FC",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresComplFc??NaN},null,8,["valeur"])])]),t("tr",null,[e[75]||(e[75]=t("th",null,"Référentiel",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresComplReferentiel??NaN},null,8,["valeur"])])]),t("tr",null,[e[76]||(e[76]=t("th",{colspan:"2"},"Total heures compl. à payer",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresCompl??NaN},null,8,["valeur"])])]),t("tr",null,[e[77]||(e[77]=t("th",{colspan:"2"},"Primes",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresPrimes??NaN},null,8,["valeur"])])]),t("tr",null,[e[78]||(e[78]=t("th",{rowspan:"4"},"Heures non payables",-1)),e[79]||(e[79]=t("th",null,"FI",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresNonPayableFi??NaN},null,8,["valeur"])])]),t("tr",null,[e[80]||(e[80]=t("th",null,"FA",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresNonPayableFa??NaN},null,8,["valeur"])])]),t("tr",null,[e[81]||(e[81]=t("th",null,"FC",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresNonPayableFc??NaN},null,8,["valeur"])])]),t("tr",null,[e[82]||(e[82]=t("th",null,"Référentiel",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresNonPayableReferentiel??NaN},null,8,["valeur"])])]),t("tr",null,[e[83]||(e[83]=t("th",{colspan:"2"},"Total heures non payables",-1)),t("td",null,[b(p,{valeur:l.intervenant.heuresNonPayable??NaN},null,8,["valeur"])])])])]),e[113]||(e[113]=t("h2",null,"Heures effectuées (A saisir de manière chronologique)",-1)),t("table",Zi,[t("thead",null,[t("tr",null,[e[87]||(e[87]=t("th",{rowspan:"3"},null,-1)),t("th",{colspan:10+a.vhParamCount,class:"vh-donnees"},"Données",8,el),e[88]||(e[88]=t("th",{rowspan:"3",class:"spacer"}," ",-1)),t("th",tl,[_(t("select",{"onUpdate:modelValue":e[38]||(e[38]=o=>l.resMode=o),class:"form-select res-mode"},e[86]||(e[86]=[t("option",{value:"attendu"},"Résultats attendus (en HETD)",-1),t("option",{value:"hetd",selected:"selected"},"Résultats calculés (en HETD)",-1),t("option",{value:"debug"},"Informations de débogage",-1)]),512),[[H,l.resMode]])])]),t("tr",null,[e[89]||(e[89]=t("th",{rowspan:"2",style:{"min-width":"10em"}},"Structure",-1)),e[90]||(e[90]=t("th",{rowspan:"2"},"Non payable",-1)),e[91]||(e[91]=t("th",{rowspan:"2"},"Compte dans le service statutaire",-1)),e[92]||(e[92]=t("th",{rowspan:"2",style:{"min-width":"5em"}},"Type d'intervention",-1)),e[93]||(e[93]=t("th",{colspan:"3"},"Répartition",-1)),e[94]||(e[94]=t("th",{colspan:"2"},"Modulation",-1)),_(t("th",{colspan:a.vhParamCount},"Paramètres",8,nl),[[x,a.vhParamCount>0]]),e[95]||(e[95]=t("th",{rowspan:"2"},"Heures",-1)),_(t("th",sl,"Service",512),[[x,l.resMode=="attendu"]]),_(t("th",rl,"Heures compl.",512),[[x,l.resMode=="attendu"]]),_(t("th",il,"Primes",512),[[x,l.resMode=="attendu"]]),_(t("th",ll,"Heures non payables",512),[[x,l.resMode=="attendu"]]),_(t("th",al,"Service",512),[[x,l.resMode=="hetd"]]),_(t("th",ol,"Heures compl.",512),[[x,l.resMode=="hetd"]]),_(t("th",ul,"Primes",512),[[x,l.resMode=="hetd"]]),_(t("th",dl,"Heures non payables",512),[[x,l.resMode=="hetd"]]),_(t("th",cl,"Informations de débogage",512),[[x,l.resMode=="debug"]])]),t("tr",null,[e[96]||(e[96]=t("th",null,"Fi",-1)),e[97]||(e[97]=t("th",null,"Fa",-1)),e[98]||(e[98]=t("th",null,"Fc",-1)),e[99]||(e[99]=t("th",null,"Service dû",-1)),e[100]||(e[100]=t("th",null,"Service compl.",-1)),(r(),i(g,null,C([1,2,3,4,5],o=>_(t("th",{key:o},d(l.formule["vhParam"+o+"Libelle"]),1),[[x,l.formule["vhParam"+o+"Libelle"]]])),64)),_(t("th",null,"Fi",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fa",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fc",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Référentiel",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fi",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fa",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fc",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Référentiel",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fi",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fa",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fc",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Référentiel",512),[[x,l.resMode=="attendu"]]),_(t("th",null,"Fi",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Fa",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Fc",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Référentiel",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Fi",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Fa",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Fc",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Référentiel",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Fi",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Fa",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Fc",512),[[x,l.resMode=="hetd"]]),_(t("th",null,"Référentiel",512),[[x,l.resMode=="hetd"]])])]),t("tbody",null,[(r(!0),i(g,null,C(l.volumesHoraires,(o,y)=>(r(),i("tr",{key:y},[t("th",null,d(y+1),1),t("td",null,[_(t("select",{"onUpdate:modelValue":f=>o.structureCode=f,"data-variable":y,class:"dinput",onChange:e[39]||(e[39]=(...f)=>a.selectStructure&&a.selectStructure(...f))},[(r(!0),i(g,null,C(l.structures,(f,V)=>(r(),i("option",{value:V,key:V},d(f),9,pl))),128))],40,ml),[[H,o.structureCode]])]),t("td",null,[_(t("select",{"onUpdate:modelValue":f=>o.nonPayable=f,class:"dinput"},e[101]||(e[101]=[t("option",{value:!0},"Oui",-1),t("option",{value:!1},"Non",-1)]),8,fl),[[H,o.nonPayable],[x,o.structureCode]])]),t("td",null,[_(t("select",{"onUpdate:modelValue":f=>o.serviceStatutaire=f,class:"dinput"},e[102]||(e[102]=[t("option",{value:!0},"Oui",-1),t("option",{value:!1},"Non",-1)]),8,hl),[[H,o.serviceStatutaire],[x,o.structureCode]])]),t("td",null,[_(t("select",{"onUpdate:modelValue":f=>o.typeInterventionCode=f,class:"dinput"},[(r(!0),i(g,null,C(a.filteredTypesIntervention,f=>(r(),i("option",{value:f,key:f},d(f),9,bl))),128))],8,vl),[[H,o.typeInterventionCode],[x,o.structureCode]])]),t("td",null,[_(t("div",null,[b(u,{modelValue:o.tauxFi,"onUpdate:modelValue":f=>o.tauxFi=f,"is-pourc":"",class:"doutput",readonly:"",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),e[103]||(e[103]=t("span",{class:"pourc"},"%",-1))],512),[[x,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),t("td",null,[_(t("div",null,[b(u,{modelValue:o.tauxFa,"onUpdate:modelValue":f=>o.tauxFa=f,"is-pourc":"",class:"dinput","data-variable":y,onChange:a.majTauxFi,onClick:a.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange","onClick"]),e[104]||(e[104]=t("span",{class:"pourc"},"%",-1))],512),[[x,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),t("td",null,[_(t("div",null,[b(u,{modelValue:o.tauxFc,"onUpdate:modelValue":f=>o.tauxFc=f,"is-pourc":"",class:"dinput","data-variable":y,onChange:a.majTauxFi,onClick:a.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange","onClick"]),e[105]||(e[105]=t("span",{class:"pourc"},"%",-1))],512),[[x,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),t("td",null,[_(t("div",null,[b(u,{modelValue:o.ponderationServiceDu,"onUpdate:modelValue":f=>o.ponderationServiceDu=f,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),e[106]||(e[106]=t("span",{class:"pourc"},"%",-1))],512),[[x,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),t("td",null,[_(t("div",null,[b(u,{modelValue:o.ponderationServiceCompl,"onUpdate:modelValue":f=>o.ponderationServiceCompl=f,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),e[107]||(e[107]=t("span",{class:"pourc"},"%",-1))],512),[[x,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),_(t("td",null,[_(t("input",{"onUpdate:modelValue":f=>o.param1=f,class:"dinput"},null,8,_l),[[j,o.param1],[x,o.structureCode]])],512),[[x,l.formule.vhParam1Libelle]]),_(t("td",null,[_(t("input",{"onUpdate:modelValue":f=>o.param2=f,class:"dinput"},null,8,gl),[[j,o.param2],[x,o.structureCode]])],512),[[x,l.formule.vhParam2Libelle]]),_(t("td",null,[_(t("input",{"onUpdate:modelValue":f=>o.param3=f,class:"dinput"},null,8,yl),[[j,o.param3],[x,o.structureCode]])],512),[[x,l.formule.vhParam3Libelle]]),_(t("td",null,[_(t("input",{"onUpdate:modelValue":f=>o.param4=f,class:"dinput"},null,8,xl),[[j,o.param4],[x,o.structureCode]])],512),[[x,l.formule.vhParam4Libelle]]),_(t("td",null,[_(t("input",{"onUpdate:modelValue":f=>o.param5=f,class:"dinput"},null,8,Cl),[[j,o.param5],[x,o.structureCode]])],512),[[x,l.formule.vhParam5Libelle]]),t("td",null,[_(b(u,{modelValue:o.heures,"onUpdate:modelValue":f=>o.heures=f,class:"dinput",onChange:a.calculer},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[x,!["",null].includes(o.typeInterventionCode)]])]),e[109]||(e[109]=t("td",{class:"spacer"},null,-1)),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesServiceFi,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesServiceFa,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesServiceFc,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesServiceReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesServiceReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesComplFi,"onUpdate:modelValue":f=>o.heuresAttenduesComplFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesComplFa,"onUpdate:modelValue":f=>o.heuresAttenduesComplFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesComplFc,"onUpdate:modelValue":f=>o.heuresAttenduesComplFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesComplReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesComplReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesPrimes,"onUpdate:modelValue":f=>o.heuresAttenduesPrimes=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesNonPayableFi,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesNonPayableFa,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesNonPayableFc,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresAttenduesNonPayableReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[x,l.resMode=="attendu"]]),_(t("td",null,[b(u,{modelValue:o.heuresServiceFi,"onUpdate:modelValue":f=>o.heuresServiceFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesServiceFi!=null&&Math.round(o.heuresAttenduesServiceFi*100)!=Math.round(o.heuresServiceFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresServiceFa,"onUpdate:modelValue":f=>o.heuresServiceFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesServiceFa!=null&&Math.round(o.heuresAttenduesServiceFa*100)!=Math.round(o.heuresServiceFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresServiceFc,"onUpdate:modelValue":f=>o.heuresServiceFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesServiceFc!=null&&Math.round(o.heuresAttenduesServiceFc*100)!=Math.round(o.heuresServiceFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresServiceReferentiel,"onUpdate:modelValue":f=>o.heuresServiceReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesServiceReferentiel!=null&&Math.round(o.heuresAttenduesServiceReferentiel*100)!=Math.round(o.heuresServiceReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresComplFi,"onUpdate:modelValue":f=>o.heuresComplFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesComplFi!=null&&Math.round(o.heuresAttenduesComplFi*100)!=Math.round(o.heuresComplFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresComplFa,"onUpdate:modelValue":f=>o.heuresComplFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesComplFa!=null&&Math.round(o.heuresAttenduesComplFa*100)!=Math.round(o.heuresComplFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresComplFc,"onUpdate:modelValue":f=>o.heuresComplFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesComplFc!=null&&Math.round(o.heuresAttenduesComplFc*100)!=Math.round(o.heuresComplFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresComplReferentiel,"onUpdate:modelValue":f=>o.heuresComplReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesComplReferentiel!=null&&Math.round(o.heuresAttenduesComplReferentiel*100)!=Math.round(o.heuresComplReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresPrimes,"onUpdate:modelValue":f=>o.heuresPrimes=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesPrimes!=null&&Math.round(o.heuresAttenduesPrimes*100)!=Math.round(o.heuresPrimes*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresNonPayableFi,"onUpdate:modelValue":f=>o.heuresNonPayableFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFi!=null&&Math.round(o.heuresAttenduesNonPayableFi*100)!=Math.round(o.heuresNonPayableFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresNonPayableFa,"onUpdate:modelValue":f=>o.heuresNonPayableFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFa!=null&&Math.round(o.heuresAttenduesNonPayableFa*100)!=Math.round(o.heuresNonPayableFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresNonPayableFc,"onUpdate:modelValue":f=>o.heuresNonPayableFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFc!=null&&Math.round(o.heuresAttenduesNonPayableFc*100)!=Math.round(o.heuresNonPayableFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",null,[b(u,{modelValue:o.heuresNonPayableReferentiel,"onUpdate:modelValue":f=>o.heuresNonPayableReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableReferentiel!=null&&Math.round(o.heuresAttenduesNonPayableReferentiel*100)!=Math.round(o.heuresNonPayableReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[x,l.resMode=="hetd"]]),_(t("td",Vl,[l.debug.vh&&l.debug.vh[y]?(r(),i("div",kl,[(r(!0),i(g,null,C(l.debug.vh[y],(f,V)=>(r(),i("span",Sl,[h(d(V)+" ",1),t("span",Pl,d(Math.round(f*100)/100),1)]))),256)),e[108]||(e[108]=h("  "))])):m("",!0)],512),[[x,l.resMode=="debug"]])]))),128))])]),l.resMode=="debug"&&l.debug.global?(r(),i("div",Al,[e[110]||(e[110]=t("h4",null,"Débogage : calculs globaux",-1)),(r(!0),i(g,null,C(l.debug.global,(o,y)=>(r(),i("span",Dl,[h(d(y)+" ",1),t("span",Tl,d(Math.round(o*100)/100),1)]))),256)),e[111]||(e[111]=h("  "))])):m("",!0),t("div",null,[t("a",{class:"btn btn-secondary",href:l.indexUrl},e[112]||(e[112]=[t("i",{class:"fas fa-rotate-left","aria-hidden":"true"},null,-1),h(" Retour à la liste des formules")]),8,Ml)])])],64)}const Fl=P(Lr,[["render",El],["__scopeId","data-v-d56a086c"]]),Ul=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"})),wl={name:"TotauxHetd",props:{intervenant:{type:Number},typeVolumeHoraire:{type:Number}},data(){return{data:{types:[]},serviceLigne:""}},mounted(){this.load(),window.addEventListener("Formule/TotauxHetd.refresh",n=>{this.load()})},methods:{load(){unicaenVue.axios.get(unicaenVue.url("intervenant/formule-totaux-hetd/:intervenant/:typeVolumeHoraire",{intervenant:this.intervenant,typeVolumeHoraire:this.typeVolumeHoraire})).then(n=>{this.data=n.data.data,this.data.serviceStatutaire>0&&(this.data.serviceDu!=this.data.serviceStatutaire?this.serviceLigne="* "+this.data.serviceDu+"h de service dû en tenant compte des modifications de service":this.serviceLigne="* "+this.data.serviceStatutaire+"h de service statutaire")})},tradType(n){switch(n){case"fi":return"FI";case"fa":return"FA";case"fc":return"FC";case"enseignement":return"Enseignement";case"referentiel":return"Référentiel";case"total":return"Total";default:return n}},tradCategorie(n){switch(n){case"service":return"Service*";case"compl":return"Heures complémentaires";case"payable":return"Heures";case"non-payable":return"Non payable";case"primes":return"Primes";case"total":return"Total";default:return n}}}},Il={class:"table table-bordered"},Rl=["colspan"];function jl(n,e,s,v,l,a){const u=I("u-heures"),c=ye,p=xe;return r(),i(g,null,[l.data.types.length>0?(r(),R(p,{key:0},{default:w(()=>[b(c,{cols:"6"},{default:w(()=>[e[1]||(e[1]=t("h2",null,"Totaux en heures équivalent TD",-1)),t("table",Il,[t("tr",null,[e[0]||(e[0]=t("th",null," ",-1)),(r(!0),i(g,null,C(l.data.types,o=>(r(),i("th",{key:o},d(a.tradType(o)),1))),128))]),(r(!0),i(g,null,C(l.data.heures,(o,y)=>(r(),i("tr",{key:y},[t("th",null,d(a.tradCategorie(y)),1),y!=="primes"?(r(!0),i(g,{key:0},C(o,(f,V)=>(r(),i("td",{class:"nombre",key:V},[b(u,{valeur:f},null,8,["valeur"])]))),128)):(r(),i("td",{key:1,class:"nombre",colspan:o.length},[b(u,{valeur:l.data.heures.primes.total},null,8,["valeur"])],8,Rl))]))),128))]),h(" "+d(l.serviceLigne),1)]),_:1})]),_:1})):m("",!0),e[2]||(e[2]=t("br",null,null,-1))],64)}const Hl=P(wl,[["render",jl],["__scopeId","data-v-f852d328"]]),Ll=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"})),Nl={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(n){this.formatted=this.formatage(n)}},methods:{formatage(n){if(n===void 0)return;let e=new Date(n);const s=e.getFullYear(),v=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getDate().toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),u=e.getMinutes().toString().padStart(2,"0"),c=e.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${l}/${v}/${s} à ${a}:${u}`;case"time":return`${a}:${u}:${c}`}return`${l}/${v}/${s}`}}};function Ol(n,e,s,v,l,a){return d(l.formatted)}const z=P(Nl,[["render",Ol]]),ql={name:"Recherche",data(){return{searchTerm:"",noResult:0,canView:!1,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(n){this.searchTerm=n.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(n){return unicaenVue.url("intervenant/code:"+n+"/voir")},reload(){var n=document.getElementById("term");n.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(e=>{let s=e.data,v=[];this.canView=!1;for(const l in s){if(s[l].canView&&(this.canView=!0),s[l].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){v.push(s[l]);continue}if(s[l].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){v.push(s[l]);continue}if(s[l].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){v.push(s[l]);continue}}this.intervenants=v,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(e=>{console.log(e.message)})},800)}}},zl={class:"intervenant-recherche"},$l={class:"critere"},Bl={key:0,class:"table table-bordered table-hover"},Jl={key:0,style:{width:"90px"}},Gl=["title"],Wl={key:0},Ql=["href"],Yl={key:1,class:"table table-bordered table-hover"};function Xl(n,e,s,v,l,a){const u=z;return r(),i(g,null,[e[22]||(e[22]=t("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1)),t("div",zl,[t("div",$l,[t("div",null,[t("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:e[0]||(e[0]=(...c)=>a.rechercher&&a.rechercher(...c))},null,32),e[7]||(e[7]=t("br",null,null,-1))]),t("div",null,[e[8]||(e[8]=t("span",{class:"fw-bold"},"Types d'intervenant : ",-1)),_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>l.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:e[2]||(e[2]=c=>a.reload())},null,544),[[Y,l.checkedTypes]]),e[9]||(e[9]=h(" Permanent ")),_(t("input",{"onUpdate:modelValue":e[3]||(e[3]=c=>l.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:e[4]||(e[4]=c=>a.reload())},null,544),[[Y,l.checkedTypes]]),e[10]||(e[10]=h(" Vacataire ")),_(t("input",{"onUpdate:modelValue":e[5]||(e[5]=c=>l.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:e[6]||(e[6]=c=>a.reload())},null,544),[[Y,l.checkedTypes]]),e[11]||(e[11]=h(" Etudiant "))]),e[12]||(e[12]=t("br",null,null,-1))])]),l.intervenants.length>0?(r(),i("table",Bl,[t("thead",null,[t("tr",null,[l.canView?(r(),i("th",Jl)):m("",!0),e[13]||(e[13]=t("th",null,"Civilité",-1)),e[14]||(e[14]=t("th",null,"Nom",-1)),e[15]||(e[15]=t("th",null,"Prenom",-1)),e[16]||(e[16]=t("th",null,"Structure",-1)),e[17]||(e[17]=t("th",null,"Statut",-1)),e[18]||(e[18]=t("th",null,"Date de naissance",-1)),e[19]||(e[19]=t("th",null,"N° Personnel",-1))])]),t("tbody",null,[(r(!0),i(g,null,C(l.intervenants,(c,p)=>(r(),i("tr",{class:M({"bg-danger":c.destruction!==null}),title:c.destruction!==null?"Fiche historisé":""},[c.canView?(r(),i("td",Wl,[t("a",{href:a.urlFiche(c.code)},e[20]||(e[20]=[t("i",{class:"fas fa-eye"},null,-1),h(" Fiche")]),8,Ql)])):m("",!0),t("td",null,d(c.civilite),1),t("td",null,d(c.nom),1),t("td",null,d(c.prenom),1),t("td",null,d(c.structure),1),t("td",null,d(c.statut),1),t("td",null,[b(u,{value:c["date-naissance"]},null,8,["value"])]),t("td",null,d(c["numero-personnel"]),1)],10,Gl))),256))])])):m("",!0),l.intervenants.length==0&&l.noResult==1?(r(),i("table",Yl,e[21]||(e[21]=[t("thead",null,[t("tr",null,[t("th",{style:{width:"90px"}}),t("th",null,"Civilité"),t("th",null,"Nom"),t("th",null,"Prenom"),t("th",null,"Structure"),t("th",null,"Statut"),t("th",null,"Date de naissance"),t("th",null,"N° Personnel")])],-1),t("tbody",null,[t("tr",null,[t("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1)]))):m("",!0)],64)}const Kl=P(ql,[["render",Xl]]),Zl=Object.freeze(Object.defineProperty({__proto__:null,default:Kl},Symbol.toStringTag,{value:"Module"})),ea={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return Object.keys(this.structure.structures).length>0}},methods:{saisie(n){modAjax(n.currentTarget,e=>{this.refresh()})},supprimer(n){popConfirm(n.currentTarget,e=>{this.refresh()})},refresh(){this.liste.reload()}}},ta={class:"accordion-item"},na={class:"accordion-header"},sa=["aria-controls","data-bs-target"],ra=["href"],ia=["href"],la=["id"],aa={class:"accordion-body"},oa={class:"row"},ua={class:"col-md-5"},da={class:"row"},ca={class:"col-md-5"},ma={class:"row"},pa={class:"col-md-5"},fa={key:0,class:"fas fa-check text-success"},ha={key:1,class:"fas fa-xmark text-danger"},va={class:"row"},ba={class:"col-md-5"},_a={key:0,class:"fas fa-check text-success"},ga={key:1,class:"fas fa-xmark text-danger"},ya={class:"row"},xa={class:"col-md-5"},Ca={key:0,class:"sous-structures"},Va={class:"accordion"};function ka(n,e,s,v,l,a){const u=I("structure",!0);return r(),i("div",ta,[t("h2",na,[t("button",{"aria-controls":s.structure.id,"data-bs-target":`#str${s.structure.id}`,"aria-expanded":"true",class:"accordion-button","data-bs-toggle":"collapse",type:"button"},[s.structure.canEdit?(r(),i("a",{key:0,href:l.saisieUrl,class:"btn btn-primary btn-sm",title:"Modifier la structure",onClick:e[0]||(e[0]=D((...c)=>a.saisie&&a.saisie(...c),["prevent"]))},e[2]||(e[2]=[t("i",{class:"fas fa-pen-to-square"},null,-1)]),8,ra)):m("",!0),s.structure.canDelete?(r(),i("a",{key:1,href:l.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",title:"Supprimer la structure",onClick:e[1]||(e[1]=D((...c)=>a.supprimer&&a.supprimer(...c),["prevent"]))},e[3]||(e[3]=[t("i",{class:"fas fa-trash-can"},null,-1)]),8,ia)):m("",!0),h("   "+d(s.structure.libelleLong)+" ("+d(s.structure.libelleCourt)+") ",1)],8,sa)]),t("div",{id:`str${s.structure.id}`,class:"accordion-collapse collapse show"},[t("div",aa,[t("div",oa,[e[4]||(e[4]=t("div",{class:"col-md-5"},[t("strong",null,"Code"),h(" :")],-1)),t("div",ua,d(s.structure.code),1)]),t("div",da,[e[5]||(e[5]=t("div",{class:"col-md-5"},[t("strong",null,"Source"),h(" :")],-1)),t("div",ca,d(s.structure.source.libelle),1)]),t("div",ma,[e[6]||(e[6]=t("div",{class:"col-md-5"},[t("strong",null,"Composante d'enseignement"),h(" :")],-1)),t("div",pa,[s.structure.enseignement?(r(),i("i",fa)):s.structure.enseignement?m("",!0):(r(),i("i",ha))])]),t("div",va,[e[7]||(e[7]=t("div",{class:"col-md-5"},[t("strong",null,"Affichage de l'adresse sur le contrat de travail"),h(" :")],-1)),t("div",ba,[s.structure.affAdresseContrat?(r(),i("i",_a)):s.structure.affAdresseContrat?m("",!0):(r(),i("i",ga))])]),t("div",ya,[e[8]||(e[8]=t("div",{class:"col-md-5"},[t("strong",null,"Adresse"),h(" :")],-1)),t("div",xa,[t("pre",null,d(s.structure.adresse),1)])]),a.hasSousStructures?(r(),i("div",Ca,[e[9]||(e[9]=t("h4",null,"Sous-structures",-1)),t("div",Va,[(r(!0),i(g,null,C(s.structure.structures,c=>(r(),R(u,{key:c.id,structure:c,onRefresh:a.refresh},null,8,["structure","onRefresh"]))),128))])])):m("",!0)])],8,la)])}const Ee=P(ea,[["render",ka],["__scopeId","data-v-046af32d"]]),Sa=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"})),Pa={components:{structure:Ee},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(n){modAjax(n.currentTarget,e=>{this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(n=>{this.structures=n.data})}}},Aa={class:"accordion no-intranavigation"},Da=["href"];function Ta(n,e,s,v,l,a){const u=I("structure");return r(),i(g,null,[e[2]||(e[2]=t("h1",null,"Administration des structures",-1)),t("div",Aa,[(r(!0),i(g,null,C(l.structures,c=>(r(),R(u,{key:c.id,structure:c},null,8,["structure"]))),128))]),s.canAdd?(r(),i("a",{key:0,class:"btn btn-primary no-intranavigation",href:l.ajoutUrl,onClick:e[0]||(e[0]=D((...c)=>a.ajout&&a.ajout(...c),["prevent"])),title:"Ajouter une structure"},e[1]||(e[1]=[t("i",{class:"fas fa-pen-to-square"},null,-1),h(" Ajouter une structure ")]),8,Da)):m("",!0)],64)}const Ma=P(Pa,[["render",Ta]]),Ea=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"})),Fa={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},Ua=["id"],wa={class:"modal-dialog"},Ia={class:"modal-content"},Ra={class:"modal-header"},ja={class:"modal-title"},Ha={class:"modal-body"},La={class:"modal-footer"};function Na(n,e,s,v,l,a){return r(),i("div",{class:"modal fade",id:s.id,tabindex:"-1","aria-hidden":"true"},[t("div",wa,[t("div",Ia,[t("div",Ra,[t("h5",ja,d(s.title),1),e[0]||(e[0]=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),t("div",Ha,[ee(n.$slots,"body")]),t("div",La,[ee(n.$slots,"footer"),e[1]||(e[1]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1))])])])],8,Ua)}const Oa=P(Fa,[["render",Na]]),qa={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},za=["id"];function $a(n,e,s,v,l,a){return r(),i("i",{class:M(`fas fa-${s.name} text-${s.variant} fa-rotate-${s.rotate}`),id:`${s.id}`},null,10,za)}const O=P(qa,[["render",$a]]),Ba={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(n){this.validationText=this.calcValidation(n)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(n){return n===null?"A valider":n.id===null?"Autovalidée":"Validation du "+Util.dateToString(n.histoCreation)+" par "},saisie(n){modAjax(n.currentTarget,e=>{this.refresh()})},supprimer(n){popConfirm(n.currentTarget,e=>{this.$emit("supprimer",this.mission)})},valider(n){popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})},devalider(n){popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})},volumeHoraireSupprimer(n){n.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:n.currentTarget.dataset.id}),popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})},volumeHoraireValider(n){n.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:n.currentTarget.dataset.id}),popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})},volumeHoraireDevalider(n){n.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:n.currentTarget.dataset.id}),popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(n=>{this.$emit("refresh",n.data)})}}},Ja=["id"],Ga={class:"card-header card-header-h3"},Wa={key:0},Qa={class:"float-end"},Ya={key:1},Xa={key:2},Ka={class:"float-end"},Za={class:"card-body"},eo={class:"row"},to={class:"col-md-8"},no={class:"row"},so={class:"col-md-12"},ro={class:"form-control"},io={class:"row"},lo={class:"col-md-6"},ao={class:"form-control"},oo={class:"col-md-6"},uo={class:"form-control"},co={class:"col-md-7"},mo={class:"input-group mb-3"},po=["innerHTML"],fo=["data-bs-target"],ho={key:0,class:"col-md-5"},vo={class:"form-control"},bo={class:"row"},_o={class:"col-md-12"},go={class:"form-control"},yo={key:0,class:"row"},xo={class:"col-md-12"},Co={class:"form-control"},Vo={class:"row"},ko={class:"col-md-12"},So=["href"],Po=["href"],Ao=["href"],Do=["href"],To={class:"col-md-4"},Mo={class:"table table-bordered table-condensed"},Eo={style:{"text-align":"right"}},Fo={key:0},Uo=["data-id"],wo=["data-id"],Io=["data-id"];function Ro(n,e,s,v,l,a){const u=z,c=O,p=I("utilisateur"),o=I("u-heures"),y=Oa;return r(),i(g,null,[t("div",{id:s.mission.id,class:M([{"bg-success":s.mission.valide,"bg-default":!s.mission.valide},"card"])},[t("form",{onSubmit:e[4]||(e[4]=D((...f)=>n.submitForm&&n.submitForm(...f),["prevent"]))},[t("div",Ga,[s.mission.libelleMission?(r(),i("h5",Wa,[h(d(s.mission.libelleMission)+" ",1),t("span",Qa,[e[8]||(e[8]=h("Du ")),b(u,{value:s.mission.dateDebut},null,8,["value"]),e[9]||(e[9]=h(" au ")),b(u,{value:s.mission.dateFin},null,8,["value"])])])):m("",!0),s.mission.libelleMission?(r(),i("h6",Ya,d(s.mission.typeMission.libelle),1)):m("",!0),s.mission.libelleMission?m("",!0):(r(),i("h5",Xa,[h(d(s.mission.typeMission.libelle)+" ",1),t("span",Ka,[e[10]||(e[10]=h("Du ")),b(u,{value:s.mission.dateDebut},null,8,["value"]),e[11]||(e[11]=h(" au ")),b(u,{value:s.mission.dateFin},null,8,["value"])])]))]),t("div",Za,[t("div",eo,[t("div",to,[t("div",no,[t("div",so,[e[12]||(e[12]=t("label",{class:"form-label"},"Composante en charge du suivi",-1)),t("div",ro,d(s.mission.structure.libelle),1)])]),t("div",io,[t("div",lo,[e[13]||(e[13]=t("label",{class:"form-label"},"Taux de rémunération",-1)),t("div",ao,d(s.mission.tauxRemu?s.mission.tauxRemu.libelle:null),1)]),t("div",oo,[e[14]||(e[14]=t("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),t("div",uo,d(s.mission.tauxRemuMajore?s.mission.tauxRemuMajore.libelle:s.mission.tauxRemu?"Idem ("+s.mission.tauxRemu.libelle+")":null),1)]),t("div",co,[e[15]||(e[15]=t("label",{class:"form-label"},"Nombre d'heures effectives prévisionnelles",-1)),t("div",mo,[t("div",{class:"form-control",innerHTML:a.heuresLib},null,8,po),t("button",{"data-bs-target":`#details-${s.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,fo)])]),s.mission.typeMission.besoinFormation?(r(),i("div",ho,[e[16]||(e[16]=t("label",{class:"form-label"},"Heures de formation prévues",-1)),t("div",vo,d(s.mission.heuresFormation),1)])):m("",!0)]),t("div",bo,[t("div",_o,[e[17]||(e[17]=t("label",{class:"form-label"},"Descriptif de la mission",-1)),t("div",go,d(s.mission.description),1)])]),s.mission.typeMission.accompagnementEtudiants?(r(),i("div",yo,[t("div",xo,[e[18]||(e[18]=t("label",{class:"form-label"},"Etudiants suivis",-1)),t("div",Co,[t("pre",null,d(s.mission.etudiantsSuivis),1)])])])):m("",!0),e[19]||(e[19]=t("div",{class:"row"},[t("div",{class:"col-md-12"}," ")],-1)),t("div",Vo,[t("div",ko,[s.mission.canSaisie?(r(),i("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:e[0]||(e[0]=D((...f)=>a.saisie&&a.saisie(...f),["prevent"]))},"Modifier",8,So)):m("",!0),s.mission.canValider?(r(),i("a",{key:1,href:l.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:e[1]||(e[1]=D((...f)=>a.valider&&a.valider(...f),["prevent"]))},"Valider",8,Po)):m("",!0),s.mission.canDevalider?(r(),i("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:e[2]||(e[2]=D((...f)=>a.devalider&&a.devalider(...f),["prevent"]))},"Dévalider",8,Ao)):m("",!0),s.mission.canSupprimer?(r(),i("a",{key:3,href:l.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:e[3]||(e[3]=D((...f)=>a.supprimer&&a.supprimer(...f),["prevent"]))},"Supprimer",8,Do)):m("",!0)])])]),t("div",To,[e[22]||(e[22]=t("div",null,[t("label",{class:"form-label"},"Suivi")],-1)),t("div",null,[b(c,{name:"thumbs-up",variant:"success"}),e[20]||(e[20]=h(" Créé le ")),b(u,{value:s.mission.histoCreation},null,8,["value"]),e[21]||(e[21]=h(" par ")),b(p,{mail:s.mission.histoCreateur.email,nom:s.mission.histoCreateur.displayName},null,8,["mail","nom"])]),t("div",null,[b(c,{name:s.mission.valide?"thumbs-up":"thumbs-down",variant:s.mission.valide?"success":"info"},null,8,["name","variant"]),h(" "+d(l.validationText)+" ",1),s.mission.validation&&s.mission.validation.histoCreateur?(r(),R(p,{key:0,mail:s.mission.validation.histoCreateur.email,nom:s.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):m("",!0)]),t("div",null,[b(c,{name:s.mission.contrat?"thumbs-up":"thumbs-down",variant:s.mission.contrat?"success":"info"},null,8,["name","variant"]),h(" "+d(s.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),t("div",null,d(s.mission.heuresRealisees)+" heure"+d(s.mission.heuresRealisees<2?"":"s")+" réalisée"+d(s.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,Ja),b(y,{id:`details-${s.mission.id}`,title:"Détail des heures prévisionnelles"},{body:w(()=>[t("table",Mo,[e[28]||(e[28]=t("thead",null,[t("tr",null,[t("th",null,"Heures"),t("th",null,"Statut"),t("th",null,"Actions")])],-1)),t("tbody",null,[(r(!0),i(g,null,C(s.mission.volumesHorairesPrevus,f=>(r(),i("tr",{key:f.id},[t("td",Eo,[b(o,{valeur:f.heures},null,8,["valeur"])]),t("td",null,[b(c,{name:"thumbs-up",variant:"success"}),e[25]||(e[25]=h(" Saisi par ")),b(p,{mail:f.histoCreateur.email,nom:f.histoCreateur.displayName},null,8,["mail","nom"]),e[26]||(e[26]=h(" le ")),b(u,{value:f.histoCreation},null,8,["value"]),e[27]||(e[27]=t("br",null,null,-1)),b(c,{name:f.valide?"thumbs-up":"thumbs-down",variant:f.valide?"success":"info"},null,8,["name","variant"]),h(" "+d(f.validation&&f.validation.id==null?"Autovalidé":f.validation?"":"à valider")+" ",1),f.validation&&f.validation.histoCreateur?(r(),i("span",Fo,[e[23]||(e[23]=h(" Validé par ")),b(p,{mail:f.validation.histoCreateur.email,nom:f.validation.histoCreateur.displayName},null,8,["mail","nom"]),e[24]||(e[24]=h(" le ")),b(u,{value:f.validation.histoCreation},null,8,["value"])])):m("",!0)]),t("td",null,[f.canValider?(r(),i("a",{key:0,"data-id":f.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:e[5]||(e[5]=D((...V)=>a.volumeHoraireValider&&a.volumeHoraireValider(...V),["prevent"]))},"Valider",8,Uo)):m("",!0),f.canDevalider?(r(),i("a",{key:1,"data-id":f.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:e[6]||(e[6]=D((...V)=>a.volumeHoraireDevalider&&a.volumeHoraireDevalider(...V),["prevent"]))},"Dévalider",8,wo)):m("",!0),f.canSupprimer?(r(),i("a",{key:2,"data-id":f.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:e[7]||(e[7]=D((...V)=>a.volumeHoraireSupprimer&&a.volumeHoraireSupprimer(...V),["prevent"]))},"Supprimer",8,Io)):m("",!0)])]))),128))])])]),footer:w(()=>e[29]||(e[29]=[])),_:1},8,["id"])],64)}const Fe=P(Ba,[["render",Ro],["__scopeId","data-v-6ff4d26e"]]),jo=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"})),Ho={components:{mission:Fe},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(n){modAjax(n.currentTarget,e=>{this.reload()})},supprimer(n){this.reload()},refresh(n){let e=Util.json.indexById(this.missions,n.id);this.missions[e]=n,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(n=>{this.missions=n.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},Lo=["href"];function No(n,e,s,v,l,a){const u=I("mission");return r(),i(g,null,[(r(!0),i(g,null,C(l.missions,c=>(r(),R(u,{onSupprimer:a.supprimer,onRefresh:a.refresh,key:c.id,mission:c},null,8,["onSupprimer","onRefresh","mission"]))),128)),s.canAddMission?(r(),i("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:e[0]||(e[0]=D((...c)=>a.ajout&&a.ajout(...c),["prevent"]))},"Ajout d'une nouvelle mission",8,Lo)):m("",!0)],64)}const Oo=P(Ho,[["render",No]]),qo=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),zo={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},renseignerDonneesPersonnelles:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},computed:{urlDonneesPersonnelles:function(){return unicaenVue.url("intervenant/:intervenant/dossier",{intervenant:this.intervenant})}},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(n=>{this.candidatures=n.data})},validerCandidature(n){modAjax(n.currentTarget,e=>{this.reload()})},refuserCandidature(n){popConfirm(n.currentTarget,e=>{this.reload()})},urlOffre(n){return unicaenVue.url("offre-emploi/detail/:offre",{offre:n.offre.id})},urlAccepterCandidature:function(n){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:n.id})},urlRefuserCandidature:function(n){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:n.id})}}},$o={key:0,class:"alert alert-primary",role:"alert"},Bo=["href"],Jo={class:"table table-bordered"},Go={key:0},Wo={style:{"text-align":"center"}},Qo=["href"],Yo={style:{"text-align":"center"}},Xo={style:{"text-align":"center"}},Ko={key:0,class:"badge rounded-pill bg-success"},Zo={key:1,class:"badge rounded-pill bg-danger"},eu={key:2,class:"badge rounded-pill bg-warning"},tu={style:{"text-align":"center"}},nu=["href"],su=["href"],ru=["href"];function iu(n,e,s,v,l,a){const u=z,c=O;return r(),i("div",null,[this.renseignerDonneesPersonnelles?(r(),i("div",$o,[e[2]||(e[2]=h(" Afin que vos candidatures soient étudiées, veuillez compléter ")),t("a",{href:this.urlDonneesPersonnelles},"vos données personnelles",8,Bo),e[3]||(e[3]=h(" et fournir les pièces justificatives qui vous seront demandées. "))])):m("",!0),t("table",Jo,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"Offre d'emploi"),t("th",null,"Composante"),t("th",null,"Etat"),t("th",null,"Date commission"),t("th",null,"Action")])],-1)),t("tbody",null,[l.candidatures.length==0?(r(),i("tr",Go,e[4]||(e[4]=[t("td",{colspan:"5",style:{"text-align":"center"}},"Aucune candidature",-1)]))):m("",!0),(r(!0),i(g,null,C(l.candidatures,p=>(r(),i("tr",{key:p.id},[t("td",Wo,[t("a",{href:a.urlOffre(p)},d(p.offre.titre),9,Qo)]),t("td",Yo,d(p.offre.structure.libelleCourt),1),t("td",Xo,[p.validation?(r(),i("span",Ko,"Acceptée par "+d(p.validation.histoCreateur.displayName),1)):m("",!0),!p.validation&&p.motif!==null?(r(),i("span",Zo,d(p.motif),1)):m("",!0),!p.validation&&p.motif===null?(r(),i("span",eu,"En attente d'acceptation")):m("",!0)]),t("td",null,[p.dateCommission?(r(),R(u,{key:0,value:p.dateCommission},null,8,["value"])):m("",!0)]),t("td",tu,[!p.validation&&p.canValider?(r(),i("a",{key:0,href:a.urlAccepterCandidature(p),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:e[0]||(e[0]=D((...o)=>a.validerCandidature&&a.validerCandidature(...o),["prevent"]))},e[5]||(e[5]=[t("i",{class:"fa-solid fa-check"},null,-1)]),8,nu)):m("",!0),e[7]||(e[7]=h("  ")),!p.motif&&p.canRefuser?(r(),i("a",{key:1,href:a.urlRefuserCandidature(p),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:e[1]||(e[1]=D((...o)=>a.refuserCandidature&&a.refuserCandidature(...o),["prevent"]))},e[6]||(e[6]=[t("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1)]),8,su)):m("",!0)])]))),128))])]),t("a",{href:l.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[b(c,{name:"eye"}),e[9]||(e[9]=h(" Voir toutes les offres d'emploi "))],8,ru),e[10]||(e[10]=h("  "))])}const lu=P(zo,[["render",iu]]),au=Object.freeze(Object.defineProperty({__proto__:null,default:lu},Symbol.toStringTag,{value:"Module"})),ou={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let n=this.offre.description.substr(0,200);return this.offre.description.length>200&&(n+="..."),n},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let n="auth/connexion?redirect="+window.location.href;return unicaenVue.url(n)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(n){modAjax(n.target,e=>{this.refresh()})},urlVoir:function(n){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+n.intervenant.code})},urlVoirCandidature:function(n){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+n.intervenant.code})},urlAccepterCandidature:function(n){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:n.id})},urlRefuserCandidature:function(n){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:n.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(n=>{this.$emit("refresh",n.data)})},supprimer(n){popConfirm(n.currentTarget,e=>{this.$emit("supprimer",this.offre)})},postuler(n){popConfirm(n.currentTarget,e=>{this.$emit("postuler",this.offre)})},valider(n){popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})},devalider(n){popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})},validerCandidature(n){popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})},refuserCandidature(n){popConfirm(n.currentTarget,e=>{this.$emit("refresh",e.data)})}}},uu={key:0,class:"col"},du={class:"card h-100"},cu={class:"card-header"},mu={class:"badge rounded-pill bg-info"},pu={key:0,class:"badge rounded-pill bg-success"},fu={key:1,class:"badge rounded-pill bg-warning"},hu={class:"card-body"},vu={class:"bg-light",style:{padding:"5px"}},bu={class:"card-footer"},_u={class:"d-grid gap-2 d-md-flex justify-content-md-end"},gu=["href"],yu={key:1},xu={class:"page-header"},Cu={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},Vu={class:"ms-2"},ku=["href"],Su={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},Pu={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},Au={class:"bg-light",style:{padding:"10px"}},Du=["innerHTML"],Tu={key:3,class:"alert alert-info"},Mu=["innerHTML"],Eu={key:4},Fu={class:"table table-bordered"},Uu={key:0},wu={key:0},Iu={key:0,colspan:"4",style:{"text-align":"center"}},Ru={key:1,colspan:"3",style:{"text-align":"center"}},ju=["href"],Hu={key:0,class:"badge rounded-pill bg-success"},Lu={key:1,class:"badge rounded-pill bg-danger"},Nu={key:2,class:"badge rounded-pill bg-warning"},Ou={key:0},qu=["href"],zu={class:"mt-5"},$u=["href"],Bu=["href"],Ju=["href"],Gu=["href"],Wu=["href"],Qu=["href"];function Yu(n,e,s,v,l,a){const u=z,c=O;return r(),i(g,null,[this.extended?m("",!0):(r(),i("div",uu,[t("div",du,[t("div",cu,[t("h4",null,d(s.offre.titre),1),t("span",mu,d(s.offre.nombreHeures)+" heure(s)",1),e[6]||(e[6]=h("   ")),s.offre.validation?(r(),i("span",pu,[e[5]||(e[5]=h("Validée le ")),b(u,{value:s.offre.validation.histoCreation},null,8,["value"]),h(" par "+d(s.offre.validation.histoCreateur.displayName),1)])):m("",!0),s.offre.validation?m("",!0):(r(),i("span",fu," En attente de validation par la DRH")),e[7]||(e[7]=h("  "))]),t("div",hu,[t("p",vu,[e[8]||(e[8]=t("b",null,"Créée le : ",-1)),b(u,{value:s.offre.histoCreation},null,8,["value"]),h(" par "+d(s.offre.histoCreateur.displayName),1),e[9]||(e[9]=t("br",null,null,-1)),e[10]||(e[10]=t("b",null,"Période à pourvoir : ",-1)),e[11]||(e[11]=h("du ")),b(u,{value:s.offre.dateDebut},null,8,["value"]),e[12]||(e[12]=h(" au ")),b(u,{value:s.offre.dateFin},null,8,["value"]),e[13]||(e[13]=t("br",null,null,-1)),e[14]||(e[14]=t("b",null,"Demandée par la composante :",-1)),h(" "+d(s.offre.structure.libelleCourt)+" ",1),e[15]||(e[15]=t("br",null,null,-1)),e[16]||(e[16]=t("b",null,"Type de mission :",-1)),h(" "+d(s.offre.typeMission.libelle),1)]),h(" "+d(a.shortDesc),1)]),t("div",bu,[t("div",_u,[t("a",{href:l.consulterUrl,class:"btn btn-primary",title:"Consulter "},[b(c,{name:"eye"}),e[17]||(e[17]=h(" Voir "))],8,gu)])])])])),this.extended?(r(),i("div",yu,[t("h1",xu,d(s.offre.titre),1),this.utilisateur?m("",!0):(r(),i("div",Cu,[e[20]||(e[20]=t("i",{class:"fa-solid fa-user"},null,-1)),t("div",Vu,[e[18]||(e[18]=h(" Vous devez ")),t("a",{href:a.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,ku),e[19]||(e[19]=h(" pour pouvoir postuler. "))])])),!s.offre.canPostuler&&this.utilisateur?(r(),i("div",Su,e[21]||(e[21]=[t("i",{class:"fa-solid fa-circle-xmark"},null,-1),t("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1)]))):m("",!0),a.isCandidat&&this.utilisateur?(r(),i("div",Pu,e[22]||(e[22]=[t("i",{class:"fa-solid fa-circle-xmark"},null,-1),t("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1)]))):m("",!0),t("p",Au,[e[23]||(e[23]=t("b",null,"Créée le : ",-1)),b(u,{value:s.offre.histoCreation},null,8,["value"]),h(" par "+d(s.offre.histoCreateur.displayName),1),e[24]||(e[24]=t("br",null,null,-1)),e[25]||(e[25]=t("b",null,"Période à pourvoir : ",-1)),e[26]||(e[26]=h("du ")),b(u,{value:s.offre.dateDebut},null,8,["value"]),e[27]||(e[27]=h(" au ")),b(u,{value:s.offre.dateFin},null,8,["value"]),e[28]||(e[28]=t("br",null,null,-1)),e[29]||(e[29]=t("b",null,"Date limite de candidature :",-1)),b(u,{value:s.offre.dateLimite},null,8,["value"]),e[30]||(e[30]=t("br",null,null,-1)),e[31]||(e[31]=t("b",null,"Demandé par la composante :",-1)),h(" "+d(s.offre.structure.libelleCourt)+" ",1),e[32]||(e[32]=t("br",null,null,-1)),e[33]||(e[33]=t("b",null,"Type de mission :",-1)),h(" "+d(s.offre.typeMission.libelle)+" ",1),e[34]||(e[34]=t("br",null,null,-1)),e[35]||(e[35]=t("b",null,"Nombre d'heures pour la mission :",-1)),h(" "+d(s.offre.nombreHeures)+" heure(s) ",1),e[36]||(e[36]=t("br",null,null,-1)),e[37]||(e[37]=t("b",null,"Nombre de postes à pourvoir :",-1)),h(" "+d(s.offre.nombrePostes)+" poste(s) ",1),e[38]||(e[38]=t("br",null,null,-1))]),t("p",{innerHTML:this.descriptionHtml},null,8,Du),this.decretText?(r(),i("p",Tu,[_(t("input",{id:"decret","onUpdate:modelValue":e[0]||(e[0]=p=>l.decret=p),name:"decret",type:"checkbox"},null,512),[[Y,l.decret]]),e[39]||(e[39]=h("  ")),t("span",{innerHTML:this.decretText},null,8,Mu)])):m("",!0),e[54]||(e[54]=t("br",null,null,-1)),this.canVoirCandidature?(r(),i("div",Eu,[e[44]||(e[44]=t("h5",null,[t("strong",null,"Liste des candidats :")],-1)),t("table",Fu,[t("thead",null,[t("tr",null,[e[40]||(e[40]=t("th",null,"Intervenant",-1)),e[41]||(e[41]=t("th",null,"Etat",-1)),s.canValiderCandidature?(r(),i("th",Uu,"Action")):m("",!0)])]),t("tbody",null,[s.offre.candidatures.length==0?(r(),i("tr",wu,[s.canValiderCandidature?(r(),i("td",Iu,"Aucune candidature")):m("",!0),s.canValiderCandidature?m("",!0):(r(),i("td",Ru,"Aucune candidature"))])):m("",!0),(r(!0),i(g,null,C(s.offre.candidatures,p=>(r(),i("tr",null,[t("td",null,[t("a",{href:a.urlVoir(p)},d(p.intervenant.prenom+" "+p.intervenant.nomUsuel),9,ju)]),t("td",null,[p.validation?(r(),i("span",Hu,[e[42]||(e[42]=h("Acceptée le ")),b(u,{value:p.validation.histoCreation},null,8,["value"]),h(" par "+d(p.validation.histoCreateur.displayName),1)])):m("",!0),!p.validation&&p.motif!==null?(r(),i("span",Lu,d(p.motif),1)):m("",!0),!p.validation&&p.motif===null?(r(),i("span",Nu,"En attente d'acceptation")):m("",!0)]),this.canValiderCandidature?(r(),i("td",Ou,[t("a",{href:a.urlVoirCandidature(p),class:"btn btn-primary",title:"Consulter "},[b(c,{name:"eye"}),e[43]||(e[43]=h(" Voir "))],8,qu)])):m("",!0)]))),256))])])])):m("",!0),t("div",zu,[t("a",{href:l.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,$u),e[49]||(e[49]=h("  ")),this.canPostuler?(r(),i("a",{key:0,class:M([l.decret?"":"disabled","btn btn-primary"]),href:l.postulerUrl,"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,Bu)):m("",!0),e[50]||(e[50]=h("  ")),s.offre.canModifier?(r(),i("a",{key:1,href:l.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:e[1]||(e[1]=D((...p)=>a.saisir&&a.saisir(...p),["prevent"]))},[b(c,{name:"pen-to-square"}),e[45]||(e[45]=h(" Modifier "))],8,Ju)):m("",!0),e[51]||(e[51]=h("  ")),s.offre.validation&&s.offre.canValider?(r(),i("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:e[2]||(e[2]=D((...p)=>a.devalider&&a.devalider(...p),["prevent"]))},[b(c,{name:"thumbs-down"}),e[46]||(e[46]=h(" Devalider "))],8,Gu)):m("",!0),e[52]||(e[52]=h("  ")),!s.offre.validation&&s.offre.canValider?(r(),i("a",{key:3,href:l.validerUrl,class:"btn btn-success",title:"Valider",onClick:e[3]||(e[3]=D((...p)=>a.valider&&a.valider(...p),["prevent"]))},[b(c,{name:"thumbs-up"}),e[47]||(e[47]=h(" Valider "))],8,Wu)):m("",!0),e[53]||(e[53]=h("  ")),s.offre.canSupprimer?(r(),i("a",{key:4,href:l.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:e[4]||(e[4]=D((...p)=>a.supprimer&&a.supprimer(...p),["prevent"]))},[b(c,{name:"trash"}),e[48]||(e[48]=h(" Supprimer "))],8,Qu)):m("",!0)])])):m("",!0)],64)}const Ue=P(ou,[["render",Yu]]),Xu=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"})),Ku={components:{offreEmploi:Ue},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(n){modAjax(n.target,e=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(n){let e=Util.json.indexById(this.offres,n.id);this.offres[e]=n},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(n=>{this.offres=[n.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(n=>{this.offres=n.data})}}},Zu={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},ed={key:1},td=["href"],nd={key:2};function sd(n,e,s,v,l,a){const u=I("offreEmploi");return r(),i(g,null,[a.extended?m("",!0):(r(),i("div",Zu,[(r(!0),i(g,null,C(l.offres,c=>(r(),R(u,{key:c.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:c,decretText:c.decretText,onRefresh:a.refresh,onSupprimer:a.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),a.extended?m("",!0):(r(),i("div",ed,[this.canModifier?(r(),i("a",{key:0,href:l.ajoutUrl,class:"btn btn-primary",onClick:e[0]||(e[0]=D((...c)=>a.ajout&&a.ajout(...c),["prevent"]))},"Ajouter une nouvelle offre",8,td)):m("",!0)])),a.extended?(r(),i("div",nd,[(r(!0),i(g,null,C(l.offres,c=>(r(),R(u,{key:c.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:c.decretText,extended:a.extended,offre:c,utilisateur:this.utilisateur,onRefresh:a.refresh,onSupprimer:a.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):m("",!0)],64)}const rd=P(Ku,[["render",sd]]),id=Object.freeze(Object.defineProperty({__proto__:null,default:rd},Symbol.toStringTag,{value:"Module"})),ld={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(n){popConfirm(n.currentTarget,e=>{this.$emit("reload")})},valider(n){popConfirm(n.currentTarget,e=>{this.$emit("reload")})},devalider(n){popConfirm(n.currentTarget,e=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(n=>{this.$emit("reload")})},modifierPrime(n){modAjax(n.currentTarget,e=>{this.$emit("reload")})},supprimerPrime(n){popConfirm(n.currentTarget,e=>{this.$emit("reload")})}}},ad={key:0},od={key:0},ud=["action"],dd={class:"card-body"},cd={class:"row"},md={key:0,class:"col-md-6"},pd={class:"card text-dark bg-light"},fd={class:"card-body"},hd=["disabled"],vd={class:"card-footer d-grid gap-2"},bd=["disabled"],_d={key:1,class:"col-md-6"},gd={class:"card text-dark bg-light"},yd={class:"card-body"},xd=["href"],Cd={class:"card-footer",style:{"text-align":"right"}},Vd=["href"],kd=["href"],Sd=["href"],Pd={class:"col-md-6"},Ad={key:0},Dd=["checked","disabled"],Td={key:0},Md={key:1},Ed={key:2},Fd={key:3},Ud={key:4},wd={key:5},Id={key:6},Rd={class:"row"},jd={class:"col-md-12"},Hd={class:"float-end"},Ld=["href"],Nd=["href"];function Od(n,e,s,v,l,a){const u=z,c=O;return r(),i("div",{class:M([{"bg-success":s.prime.validation,"bg-default":!s.prime.validation&&!s.prime.dateRefus,"bg-danger":s.prime.dateRefus},"card"])},[t("div",{class:M([{"text-white":s.prime.dateRefus},"card-header card-header-h3"])},[s.prime.id?(r(),i("h5",ad,[h(" Indemnité de fin de contrat N°"+d(s.numero+1),1),e[6]||(e[6]=t("br",null,null,-1))])):m("",!0),t("div",null,[e[9]||(e[9]=t("u",null,"Mission(s) concernée(s)",-1)),e[10]||(e[10]=h(" : ")),(r(!0),i(g,null,C(s.prime.missions,(p,o)=>(r(),i("span",null,[h(d(p.typeMission.libelle)+" (Pour "+d(p.structure.libelleCourt)+" du ",1),b(u,{value:p.dateDebut},null,8,["value"]),e[7]||(e[7]=h(" au ")),b(u,{value:p.dateFin},null,8,["value"]),e[8]||(e[8]=h(") ")),o!=s.prime.missions.length-1?(r(),i("span",od,", ")):m("",!0)]))),256))])],2),t("form",{action:l.declarationUrl,enctype:"multipart/form-data",method:"post"},[t("div",dd,[t("div",cd,[s.prime.declaration?m("",!0):(r(),i("div",md,[t("div",pd,[e[12]||(e[12]=t("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1)),t("div",fd,[e[11]||(e[11]=t("p",{class:"card-text"},[h(" Pour "),t("b",null,"bénéficier de votre indemnité de fin de contrat"),h(", vous devez déposer une déclaration sur l'honneur ("),t("a",{href:""},"exemple"),h(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1)),t("input",{ref:"file",disabled:!!s.prime.dateRefus,name:"files[]",type:"file"},null,8,hd)]),t("div",vd,[t("input",{disabled:!!s.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,bd)])])])),s.prime.declaration?(r(),i("div",_d,[t("div",gd,[e[17]||(e[17]=t("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1)),t("div",yd,[e[13]||(e[13]=t("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1)),t("a",{href:l.telechargerUrl},d(s.prime.declaration.nom),9,xd)]),t("div",Cd,[s.prime.declaration&&!s.prime.validation&&!s.prime.dateRefus?(r(),i("a",{key:0,href:l.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:e[0]||(e[0]=D((...p)=>a.supprimer&&a.supprimer(...p),["prevent"]))}," Supprimer ",8,Vd)):m("",!0),e[14]||(e[14]=h("  ")),s.prime.declaration&&!s.prime.validation&&this.canGerer&&!s.prime.dateRefus?(r(),i("a",{key:1,href:l.validerUrl,class:"btn btn-success",title:"Valider",onClick:e[1]||(e[1]=D((...p)=>a.valider&&a.valider(...p),["prevent"]))}," Valider ",8,kd)):m("",!0),e[15]||(e[15]=h("  ")),s.prime.declaration&&s.prime.validation&&this.canGerer&&!s.prime.dateRefus?(r(),i("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:e[2]||(e[2]=D((...p)=>a.devalider&&a.devalider(...p),["prevent"]))}," Dévalider ",8,Sd)):m("",!0),e[16]||(e[16]=h("  "))])])])):m("",!0),t("div",Pd,[s.prime.validation?m("",!0):(r(),i("div",Ad,[t("input",{checked:s.prime.dateRefus,disabled:s.prime.validation,name:"prime",type:"checkbox",onChange:e[3]||(e[3]=(...p)=>a.refuser&&a.refuser(...p))},null,40,Dd),e[18]||(e[18]=h("  Ou en cochant cette case, ")),e[19]||(e[19]=t("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1)),e[20]||(e[20]=h(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. ")),e[21]||(e[21]=t("br",null,null,-1)),e[22]||(e[22]=t("br",null,null,-1))])),t("div",null,[e[30]||(e[30]=t("div",null,[t("label",{class:"form-label"},"Suivi de la déclaration : ")],-1)),s.prime.dateRefus?(r(),i("div",Td,[b(c,{name:"thumbs-down",variant:"danger"}),e[23]||(e[23]=h(" Indemnité refusée le ")),b(u,{value:s.prime.dateRefus},null,8,["value"])])):m("",!0),s.prime.declaration&&!s.prime.dateRefus?(r(),i("div",Md,[b(c,{name:"thumbs-up",variant:"success"}),e[24]||(e[24]=h(" Déclaration déposée le ")),b(u,{value:s.prime.declaration.histoCreation},null,8,["value"]),h(" par "+d(s.prime.declaration.histoCreateur.displayName),1)])):m("",!0),!s.prime.declaration&&!s.prime.dateRefus?(r(),i("div",Ed,[b(c,{name:"thumbs-down",variant:"info"}),e[25]||(e[25]=h(" Aucune déclaration déposée "))])):m("",!0),s.prime.validation&&!s.prime.dateRefus?(r(),i("div",Fd,[b(c,{name:"thumbs-up",variant:"success"}),e[26]||(e[26]=h(" Déclaration validée le ")),b(u,{value:s.prime.validation.histoCreation},null,8,["value"]),h(" par "+d(s.prime.validation.histoCreateur.displayName),1)])):m("",!0),!s.prime.validation&&!s.prime.dateRefus?(r(),i("div",Ud,[b(c,{name:"thumbs-down",variant:"info"}),e[27]||(e[27]=h(" Aucune déclaration validée "))])):m("",!0),s.prime.validation&&!s.prime.dateRefus?(r(),i("div",wd,[b(c,{name:"euro-sign",variant:"success"}),e[28]||(e[28]=h(" Intervenant éligible à une indemnité de fin de contrat "))])):m("",!0),s.prime.dateRefus?(r(),i("div",Id,[b(c,{name:"euro-sign",variant:"info"}),e[29]||(e[29]=h(" Intervenant non éligible à une indemnité de fin de contrat "))])):m("",!0)])])]),t("div",Rd,[t("div",jd,[t("span",Hd,[!s.prime.validation&&!s.prime.dateRefus&&this.canGerer?(r(),i("a",{key:0,href:l.modifierPrimeUrl,class:"btn btn-primary",onClick:e[4]||(e[4]=D((...p)=>a.modifierPrime&&a.modifierPrime(...p),["prevent"]))},"Modifier",8,Ld)):m("",!0),e[31]||(e[31]=h("   ")),!s.prime.validation&&!s.prime.dateRefus&&this.canGerer?(r(),i("a",{key:1,href:l.supprimerPrimeUrl,class:"btn btn-danger",onClick:e[5]||(e[5]=D((...p)=>a.supprimerPrime&&a.supprimerPrime(...p),["prevent"]))},"Supprimer",8,Nd)):m("",!0)])])])])],8,ud)],2)}const we=P(ld,[["render",Od]]),qd=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),zd={components:{prime:we},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(n){modAjax(n.currentTarget,e=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(n=>{this.primes=n.data,this.load=!0})}}},$d={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Bd={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Jd={key:2},Gd=["href"];function Wd(n,e,s,v,l,a){const u=I("prime");return r(),i(g,null,[(r(!0),i(g,null,C(l.primes,(c,p)=>(r(),R(u,{canGerer:s.canGerer,intervenant:this.intervenant,numero:p,prime:c,onReload:a.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),l.load?m("",!0):(r(),i("div",$d,e[1]||(e[1]=[h(" Chargement en cours..."),t("br",null,null,-1),t("br",null,null,-1)]))),l.primes.length==0&&l.load?(r(),i("div",Bd,e[2]||(e[2]=[h(" Aucune indemnité de fin de contrat actuellement..."),t("br",null,null,-1),t("br",null,null,-1)]))):m("",!0),this.missionsWithoutPrime>0&&this.canGerer?(r(),i("div",Jd,[t("a",{href:l.ajoutUrl,class:"btn btn-primary",onClick:e[0]||(e[0]=D((...c)=>a.ajout&&a.ajout(...c),["prevent"]))},"Créer une nouvelle indemnité",8,Gd)])):m("",!0)],64)}const Qd=P(zd,[["render",Wd]]),Yd=Object.freeze(Object.defineProperty({__proto__:null,default:Qd},Symbol.toStringTag,{value:"Module"})),Xd={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const n=new Date(this.date);return{mois:n.getMonth()+1,annee:n.getFullYear()}},computed:{listeJours(){const n=new Date(this.date);n.setDate(1),n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1);let e=n.getDate();return Array.from({length:e},(s,v)=>v+1)}},watch:{date:function(n,e){const s=new Date(this.date);this.mois=s.getMonth()+1,this.annee=s.getFullYear()},mois:function(n,e){const s=new Date(this.date);s.setMonth(n-1),this.$emit("changeDate",s)},annee:function(n,e){const s=new Date(this.date);s.setFullYear(n),this.$emit("changeDate",s)}},methods:{nomJour(n){const e=new Date(this.date);return e.setDate(n),e.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let n=[];const e=new Date(2e3,0,1);for(let s=1;s<=12;s++){e.setMonth(s-1);let v=e.toLocaleString("fr-FR",{month:"long"});n.push({id:s,libelle:v})}return n},listeAnnees(){const e=new Date().getFullYear(),s=1;let v=[];for(let l=e-s;l<=e+s;l++)v.push(l);return v},canAdd(n){if(!this.canAddEvent)return!1;let e=this.addDateDebut;e===void 0?e=new Date("2000-01-01"):e==="now"?e=new Date:e=new Date(e);let s=this.addDateFin;s===void 0?s=new Date("2500-01-01"):s==="now"?s=new Date:s=new Date(s);let v=new Date(this.date);return v.setDate(n),e=this.isoDateOnly(e),s=this.isoDateOnly(s),v=this.isoDateOnly(v),!(v<e||v>s)},addEvent(n){const e=new Date(this.date);e.setDate(n.currentTarget.dataset.jour),this.$emit("addEvent",e,n)},prevMois(){const n=new Date(this.date);n.setMonth(n.getMonth()-1),this.$emit("changeDate",n)},nextMois(){const n=new Date(this.date);n.setMonth(n.getMonth()+1),this.$emit("changeDate",n)},eventsByJour(n){const e=new Date(this.date);let s={};for(let v in this.events){let l=this.events[v];l.date.getFullYear()===e.getFullYear()&&l.date.getMonth()+1===e.getMonth()+1&&l.date.getDate()===n&&(s[v]=l)}return s},isoDateOnly(n){const e=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),v=String(n.getDate()).padStart(2,"0");return`${e}-${s}-${v}`}}},Kd={class:"calendar"},Zd={class:"recherche"},ec={class:"recherche btn-group"},tc=["value"],nc=["value"],sc={class:"table table-bordered table-hover table-sm"},rc=["data-jour"],ic={class:"nom-jour"},lc={class:"numero-jour"},ac={class:"num-jour badge bg-secondary rounded-circle"},oc={key:0},uc=["data-jour"];function dc(n,e,s,v,l,a){const u=O;return r(),i("div",Kd,[t("div",Zd,[t("div",ec,[t("button",{class:"btn btn-light",id:"prevMois",onClick:e[0]||(e[0]=(...c)=>a.prevMois&&a.prevMois(...c)),title:"Mois précédant"},[b(u,{name:"chevron-left"})]),_(t("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":e[1]||(e[1]=c=>l.mois=c)},[(r(!0),i(g,null,C(a.listeMois(),c=>(r(),i("option",{value:c.id},d(c.libelle),9,tc))),256))],512),[[H,l.mois]]),_(t("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":e[2]||(e[2]=c=>l.annee=c)},[(r(!0),i(g,null,C(a.listeAnnees(),c=>(r(),i("option",{value:c},d(c),9,nc))),256))],512),[[H,l.annee]]),t("button",{class:"btn btn-light",id:"nextMois",onClick:e[3]||(e[3]=(...c)=>a.nextMois&&a.nextMois(...c)),title:"Mois suivant"},[b(u,{name:"chevron-right"})])])]),t("table",sc,[(r(!0),i(g,null,C(a.listeJours,c=>(r(),i("tr",{"data-jour":c},[t("th",ic,d(a.nomJour(c)),1),t("th",lc,[t("div",ac,d(c<10?"0"+c.toString():c),1)]),t("td",null,[(r(!0),i(g,null,C(a.eventsByJour(c),(p,o)=>(r(),i("div",{class:"event",style:Ve("border-color:"+p.color+";background-color:"+p.bgcolor),key:o},[(r(),R(ze(p.component),{event:p},null,8,["event"]))],4))),128)),a.canAdd(c)?(r(),i("div",oc,[t("button",{onClick:e[4]||(e[4]=(...p)=>a.addEvent&&a.addEvent(...p)),"data-jour":c,class:"btn btn-light btn-sm"},[b(u,{name:"plus"}),e[5]||(e[5]=h(" Nouvel événement "))],8,uc)])):m("",!0)])],8,rc))),256))])])}const cc=P(Xd,[["render",dc],["__scopeId","data-v-b803dde7"]]),mc={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(n){modAjax(n.currentTarget,e=>{this.suivi.refresh()})},supprimer(n){popConfirm(n.currentTarget,e=>{this.suivi.refresh()})},valider(n){unicaenVue.axios.get(this.validerUrl).then(e=>{this.suivi.refresh()})},devalider(n){popConfirm(n.currentTarget,e=>{this.suivi.refresh()})}}},pc={class:"event-content"},fc={class:"mission"},hc={key:0,class:"badge bg-success"},vc={class:"horaires"},bc={key:0,class:"badge bg-secondary"},_c={key:0,class:"description"},gc={class:"event-actions"},yc={class:"btn-group btn-group-sm"},xc=["data-url"],Cc=["data-url"],Vc=["data-url"],kc=["data-url"];function Sc(n,e,s,v,l,a){const u=O;return r(),i(g,null,[t("div",pc,[t("p",fc,[h(d(s.event.mission.libelleMission||s.event.mission.libelleCourt)+" ",1),s.event.valide?(r(),i("span",hc,"Validé")):m("",!0)]),t("p",vc,[h(" de "+d(a.heureDebut)+" à "+d(a.heureFin)+", soit "+d(a.heures)+" heure"+d(a.heures<2?"":"s")+" ",1),s.event.formation?(r(),i("span",bc,"En formation")):m("",!0)]),s.event.description?(r(),i("p",_c,d(s.event.description),1)):m("",!0)]),t("div",gc,[t("div",yc,[s.event.canEdit?(r(),i("button",{key:0,class:"btn btn-light",onClick:e[0]||(e[0]=(...c)=>a.modifier&&a.modifier(...c)),title:"Modifier le suivi","data-url":l.modifierUrl},[b(u,{name:"pen-to-square"})],8,xc)):m("",!0),s.event.canValider?(r(),i("button",{key:1,class:"btn btn-light",onClick:e[1]||(e[1]=(...c)=>a.valider&&a.valider(...c)),title:"Valider le suivi","data-url":l.validerUrl},[b(u,{name:"check",class:"text-success"})],8,Cc)):m("",!0),s.event.canDevalider?(r(),i("button",{key:2,class:"btn btn-light",onClick:e[2]||(e[2]=(...c)=>a.devalider&&a.devalider(...c)),title:"Dévalider le suivi","data-url":l.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[b(u,{name:"xmark",class:"text-danger"})],8,Vc)):m("",!0),s.event.canSupprimer?(r(),i("button",{key:3,class:"btn btn-light",onClick:e[3]||(e[3]=(...c)=>a.supprimer&&a.supprimer(...c)),title:"Supprimer le suivi","data-url":l.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[b(u,{name:"trash-can",class:"text-danger"})],8,kc)):m("",!0)])])],64)}const Ie=P(mc,[["render",Sc],["__scopeId","data-v-facdf778"]]),Pc=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"})),Ac={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(n){this.date=n},ajouter(n,e){const s={intervenant:this.intervenant,date:n.toISOString().slice(0,10)};e.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",s),modAjax(e.currentTarget,v=>{this.refresh()})},refresh(){const n=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let e=0,s=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(v=>{let l=[];for(let a in v.data){let u=v.data[a];s[u.mission.id]===void 0&&(s[u.mission.id]=n[e],e++),u.valide&&(u.bgcolor="#d0eddb"),u.color=s[u.mission.id],u.component=$e(Ie),u.date=new Date(u.date),u.intervenant=this.intervenant,l.push(u)}this.suivi=l,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function Dc(n,e,s,v,l,a){const u=cc;return r(),R(u,{date:l.date,onChangeDate:a.changeDate,onAddEvent:a.ajouter,"can-add-event":s.canAddMission,addDateFin:"now",events:l.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const Tc=P(Ac,[["render",Dc]]),Mc=Object.freeze(Object.defineProperty({__proto__:null,default:Tc},Symbol.toStringTag,{value:"Module"})),Ec={name:"DemandeMiseEnPaiementStructure",props:{datas:{required:!0},intervenant:{required:!0}},computed:{datasBudget(){let n={};return Object.entries(this.datas.budget.dotation).forEach(([e,s])=>{e!="total"&&(n[e]={},n[e].libelle=s.libelle,n[e].dotation=s.heures,n[e].consommation=1001)}),Object.entries(this.datas.budget.consommation).forEach(([e,s])=>{e!="total"&&e in n&&(n[e].consommation=s.heures)}),n}},methods:{heuresStatutToString(n){if(n.heuresAPayer==n.heuresPayees&&n.heuresAPayer>0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-success">Paiement effectué</span>';if(n.heuresAPayer==n.heuresDemandees)return'<span style="font-size:12px;line-height:20px;" class="badge bg-secondary text-dark">Paiement demandé</span>';if(n.heuresDemandees==0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-light text-dark">A payer</span>';if(Number(n.heuresPayees)>Number(n.heuresAPayer)){let e=n.heuresPayees-n.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement effectué - '+parseFloat(e.toFixed(2))+" hetd(s) payées en trop. </span>"}if(Number(n.heuresDemandees)>Number(n.heuresAPayer)){let e=n.heuresDemandees-n.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement demandé - '+parseFloat(e.toFixed(2))+" hetd(s) demandées en trop. </span></span>"}return"indetermine"},supprimerDemandeMiseEnPaiement(n){this.btnState("remove-"+n,"disabled"),unicaenVue.axios.get(unicaenVue.url("paiement/:intervenant/supprimer-demande/:dmep",{intervenant:this.intervenant,dmep:n})).then(e=>{this.$emit("refresh")}).catch(e=>{this.$emit("refresh")})},disabledPaiement(n){return n.missionId!=""||n.formuleResServiceRefId!=""?!(n.centreCoutId&&n.domaineFonctionnel):!1},enabledPaiement(n,e){if(e=="mission"){let s=document.getElementById("add-"+n),v=document.getElementById("centreCout-"+n).value,l=document.getElementById("domaineFonctionnel-"+n).value;v!=""&&l!=""?s.disabled=!1:s.disabled=!0}},ajouterDemandeMiseEnPaiement(n){this.btnState("add-"+n,"disabled");let e={animation:!0,delay:15e3,autohide:!0},s=document.getElementById("heures-"+n),v=document.getElementById("centreCout-"+n),l=document.getElementById("domaineFonctionnel-"+n),a=Number(s.value),u=Number(s.getAttribute("max")),c=l?l.value:"",p=s.hasAttribute("data-type-heures-id")?s.getAttribute("data-type-heures-id"):"",o=s.hasAttribute("data-service-id")?s.getAttribute("data-service-id"):"",y=s.hasAttribute("data-service-referentiel-id")?s.getAttribute("data-service-referentiel-id"):"",f=s.hasAttribute("data-mission-id")?s.getAttribute("data-mission-id"):"",V=v.value;if(V=="")return unicaenVue.flashMessenger.toast("Vous devez sélectionner un centre de coût pour demander la mise en paiement de ces heures","error",e),this.$emit("refresh-btn-state"),!1;if(a>0&&a>u)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible, vous demandez "+a+" hetd(s) alors que vous pouvez demander maximum "+u+" hetd(s)","error",e),this.$emit("refresh-btn-state"),!1;var S=[];let T={heures:a,centreCoutId:V,typeHeuresId:p,serviceId:o,serviceReferentielId:y,domaineFonctionnelId:c,missionId:f,structureId:this.datas.id};S.push(T),unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),S).then(F=>{this.$emit("refresh")}).catch(F=>{this.$emit("refresh"),console.error(F)})},demanderToutesLesHeuresEnPaiement(n,e){this.btnState("add-all-"+n,"disabled");let s=[],l=document.getElementById("demande-mise-en-paiement-"+n).getElementsByTagName("tr");for(var a=0;a<l.length;a++)if(l[a].getElementsByTagName("input").length>0&&l[a].classList.contains("detailHeure")){let u=l[a].getElementsByTagName("input")[0],c=l[a].getElementsByTagName("select")[0],p=l[a].getElementsByTagName("select")[1],o=Number(u.value),y=Number(u.getAttribute("max"));if(o<=0||o>y)console.warn("Le nombre d'heures demandées en paiement n'est pas situé entre le max et min possible.");else{let f=c.value,V=u.hasAttribute("data-type-heures-id")?u.getAttribute("data-type-heures-id"):"",S=u.hasAttribute("data-mission-id")?u.getAttribute("data-mission-id"):"",T=u.hasAttribute("data-service-id")?u.getAttribute("data-service-id"):"",F=u.hasAttribute("data-service-referentiel-id")?u.getAttribute("data-service-referentiel-id"):"",U=p?p.value:"",q={heures:o,centreCoutId:f,typeHeuresId:V,serviceId:T,serviceReferentielId:F,domaineFonctionnelId:U,missionId:S,structureId:this.datas.id};s.push(q)}}unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),s).then(u=>{this.$emit("refresh")}).catch(u=>{this.$emit("refresh")})},filtrerCentresCouts(n,e){let s=[];for(var v in n){let l=v,a=[];n[v].forEach(function(u,c){u[e]==1&&a.push(u)}),a.length!=0&&s.push({group:l,child:a})}return s},notValueCentreCoutValue(n,e){return this.filtrerCentresCouts(n,e).length!=0?"Choisir un centre de coûts":"Aucun centre de coûts disponible: demande de paiement impossible"},totalHeure(n){let e=0;for(var s in n)e+=Number(n[s].heuresAPayer);return parseFloat(e.toFixed(2))},shorten(n,e=20){if(n===null)return n;if(n.length>e){var s='<span title="'+n+'"';return s+='data-bs-placement="top" data-bs-toggle="tooltip">',s+=n.substring(0,e)+"...",s+="</span>",s}else return n},substr(n,e=20){if(n===null)return n;if(n.length>e){var s=n.substring(0,e)+"...";return s}else return n},btnState(n,e){let s=document.getElementById(n);return s?(e=="enabled"&&(s.disabled=!1,s.querySelector("#waiting").style.display="none",s.querySelector("#action").style.display="inline-block"),e=="disabled"&&(s.disabled=!0,s.querySelector("#waiting").style.display="inline-block",s.querySelector("#action").style.display="none"),!0):!1},formatDate(n,e){return Util.dateToString(n)},pourcentageBudget(n){return Math.round(n.consommation/n.dotation*100)},bgBudget(n){return Math.round(n.consommation/n.dotation*100)>100?"bg-danger":"bg-success"}}},Fc=["id"],Uc=["id"],wc=["aria-controls","data-bs-target"],Ic=["id","aria-labelledby"],Rc={class:"accordion-body"},jc={key:0},Hc={class:"container"},Lc={class:"table table-bordered caption-top",style:{"table-layout":"fixed",width:"100%"}},Nc={class:"table-light"},Oc={key:0,class:"text-center progress position-relative bg-secondary",style:{height:"30px"}},qc={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},zc=["aria-valuemax","aria-valuenow","title"],$c={key:1,class:"text-center"},Bc={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},Jc={key:0},Gc={key:1},Wc=["innerHTML"],Qc={class:"container"},Yc={class:"row"},Xc={class:"col-12"},Kc={class:"table mt-3 table-bordered"},Zc={class:"table-light"},em={colspan:"2"},tm={colspan:"2"},nm={class:"table table-sm"},sm={class:"detailHeure"},rm={key:0,style:{width:"20%"}},im=["title"],lm={class:"number number-positif"},am=["title"],om={class:"number number-positif"},um={key:1,style:{width:"20%"}},dm={class:"input-group col-1"},cm=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],mm={key:2},pm=["id"],fm={value:""},hm=["label"],vm=["selected","value"],bm=["innerHTML"],_m=["innerHTML"],gm={style:{"font-size":"12px"}},ym={key:0},xm=["id","onClick"],Cm={key:1},Vm=["id","onClick"],km={class:"table-light"},Sm={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},Pm={class:"container"},Am={class:"row"},Dm={class:"col-12"},Tm={class:"table mt-3 table-bordered"},Mm={colspan:"2"},Em={class:"table table-sm"},Fm={class:"detailHeure"},Um={key:0,style:{width:"20%"}},wm=["title"],Im={class:"number number-positif"},Rm=["title"],jm={class:"number number-positif"},Hm={key:1,style:{width:"20%"}},Lm={class:"input-group col-1"},Nm=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],Om={key:2},qm=["id"],zm={value:""},$m=["label"],Bm=["selected","value"],Jm=["innerHTML"],Gm={key:4},Wm=["id"],Qm=["selected","value"],Ym={key:5},Xm=["innerHTML"],Km={style:{"font-size":"12px"}},Zm={key:0},ep=["id","onClick"],tp={key:1},np=["id","onClick"],sp={class:"table-light"},rp={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},ip={class:"container"},lp={class:"row"},ap={class:"col-12"},op={class:"table mt-3 table-bordered"},up={colspan:"2"},dp={class:"table table-sm"},cp={class:"detailHeure"},mp={key:0,style:{width:"20%"}},pp=["title"],fp={class:"number number-positif"},hp=["title"],vp={class:"number number-positif"},bp={key:1,style:{width:"20%"}},_p={class:"input-group col-1"},gp=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],yp={key:2},xp=["id","onChange"],Cp={value:""},Vp=["label"],kp=["selected","value"],Sp=["innerHTML"],Pp={key:4},Ap=["id","onChange"],Dp=["selected","value"],Tp={key:5},Mp=["innerHTML"],Ep={style:{"font-size":"12px"}},Fp={key:0},Up=["id","onClick"],wp={key:1},Ip=["id","onClick"],Rp={class:"table-light"},jp={style:{"background-color":"#fbfbfb",padding:"10px","padding-right":"40px","text-align":"right"}},Hp=["id"];function Lp(n,e,s,v,l,a){const u=O;return r(),i("div",{id:"demande-mise-en-paiement-"+s.datas.code,class:"accordion-item"},[t("h2",{id:"dmep-heading-"+s.datas.code,class:"accordion-header"},[t("button",{"aria-controls":"dmep-collapse-"+s.datas.code,"data-bs-target":"#dmep-collapse-"+s.datas.code,"aria-expanded":"true",class:"accordion-button bg-light","data-bs-toggle":"collapse",type:"button"},d(s.datas.code+" - "+s.datas.libelle),9,wc)],8,Uc),t("div",{id:"dmep-collapse-"+s.datas.code,"aria-labelledby":"dmep-heading-"+s.datas.code,class:"accordion-collapse collapse show"},[t("div",Rc,[this.datas.budget.dotation.total>0?(r(),i("div",jc,[e[1]||(e[1]=t("div",{class:"cartridge gray bordered",style:{"padding-bottom":"5px","margin-bottom":"20px"}},[t("span",null,"Budget")],-1)),t("div",Hc,[t("table",Lc,[t("thead",Nc,[t("tr",null,[(r(!0),i(g,null,C(a.datasBudget,(c,p)=>(r(),i("th",{key:p,class:"fw-bold",scope:"col"},d(c.libelle),1))),128))])]),t("tbody",null,[t("tr",null,[(r(!0),i(g,null,C(a.datasBudget,(c,p)=>(r(),i("td",null,[c.dotation>0?(r(),i("div",Oc,[t("span",qc,d(c.consommation+" sur "+c.dotation)+" HETD",1),t("div",{"aria-valuemax":c.dotation,"aria-valuenow":c.consommation,class:M("progress-bar progress-bar-striped "+a.bgBudget(c)),style:Ve("width:"+a.pourcentageBudget(c)+"%;"),title:this.pourcentageBudget(c)+"%","aria-valuemin":"0",role:"progressbar"},null,14,zc)])):m("",!0),c.dotation==0?(r(),i("div",$c," Aucune dotation "+d(c.libelle),1)):m("",!0)]))),256))])])])])])):m("",!0),(r(!0),i(g,null,C(s.datas.etapes,(c,p)=>(r(),i("div",null,[(r(!0),i(g,null,C(c.enseignements,(o,y)=>(r(),i("div",null,[t("div",Bc,[c.exterieur==0?(r(),i("span",Jc,"Enseignement")):m("",!0),c.exterieur==1?(r(),i("span",Gc,"Enseignement hors établissement")):m("",!0),t("span",{innerHTML:p+" - "+a.shorten(c.libelle,40)},null,8,Wc),t("span",null,d(y+" - "+o.libelle),1)]),t("div",Qc,[t("div",Yc,[(r(!0),i(g,null,C(o.typeHeure,(f,V)=>(r(),i("div",Xc,[t("table",Kc,[t("thead",Zc,[t("tr",null,[t("th",em,d(f.libelle),1)])]),t("tbody",null,[t("tr",null,[t("td",tm,[t("table",nm,[e[3]||(e[3]=t("thead",null,[t("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"Heures"),t("th",{scope:"col",style:{width:"40%","font-size":"12px"}},"Centre de coûts"),t("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"État"),t("th",{style:{width:"15%","font-size":"12px"}})],-1)),t("tbody",null,[(r(!0),i(g,null,C(f.heures,(S,T)=>(r(),i("tr",sm,[S.heuresDemandees!=0?(r(),i("td",rm,[S.datePaiement?(r(),i("abbr",{key:0,title:"Payé en "+S.periodeLibelle+" le "+a.formatDate(S.datePaiement)},[t("span",lm,d(Number(S.heuresPayees))+" hetd(s)",1)],8,im)):m("",!0),S.datePaiement?m("",!0):(r(),i("abbr",{key:1,title:"Demandé le "+a.formatDate(S.dateDemande)},[t("span",om,d(Number(S.heuresDemandees))+" hetd(s)",1)],8,am))])):m("",!0),S.heuresDemandees==0?(r(),i("td",um,[t("div",dm,[t("input",{id:"heures-"+p+"-"+y+"-"+V,"data-domaine-fonctionnel-id":S.domaineFonctionnelId,"data-mission-id":S.missionId,"data-service-id":S.serviceId,"data-service-referentiel-id":S.serviceReferentielId,"data-type-heures-id":S.typeHeureId,max:S.heuresAPayer,value:S.heuresAPayer,class:"form-control form-control-sm",min:"0",type:"number"},null,8,cm),e[2]||(e[2]=t("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1))])])):m("",!0),S.heuresDemandees==0?(r(),i("td",mm,[t("select",{id:"centreCout-"+p+"-"+y+"-"+V,class:"selectpicker","data-live-search":"true",name:"centreCout"},[t("option",fm,d(a.notValueCentreCoutValue(s.datas.centreCoutPaiement,S.typeHeureCode)),1),(r(!0),i(g,null,C(a.filtrerCentresCouts(s.datas.centreCoutPaiement,S.typeHeureCode),F=>(r(),i("optgroup",{key:F.group,label:F.group},[(r(!0),i(g,null,C(F.child,U=>(r(),i("option",{key:U.value,selected:U.centreCoutId==S.centreCout.centreCoutId,value:U.centreCoutId},d(U.centreCoutCode+" - "+U.centreCoutLibelle),9,vm))),128))],8,hm))),128))],8,pm)])):m("",!0),S.heuresDemandees!=0?(r(),i("td",{key:3,innerHTML:a.shorten(S.centreCout.code+" - "+S.centreCout.libelle,30)},null,8,bm)):m("",!0),t("td",{innerHTML:a.heuresStatutToString(S)},null,8,_m),t("td",gm,[S.heuresPayees==0&&S.heuresDemandees>0?(r(),i("span",ym,[t("button",{id:"remove-"+S.mepId,class:"btn btn-danger",type:"button",onClick:F=>this.supprimerDemandeMiseEnPaiement(S.mepId)},[b(u,{id:"action",name:"trash",style:{color:"white"}}),b(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,xm)])):m("",!0),S.heuresDemandees==0?(r(),i("span",Cm,[t("button",{id:"add-"+p+"-"+y+"-"+V,class:"btn btn-primary",type:"button",onClick:F=>this.ajouterDemandeMiseEnPaiement(p+"-"+y+"-"+V)},[b(u,{id:"action",name:"plus"}),b(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Vm)])):m("",!0)])]))),256))])])])])]),t("tfoot",null,[t("tr",km,[e[4]||(e[4]=t("th",{scope:"row"},"Total heures à payer",-1)),t("td",null,d(a.totalHeure(f.heures))+" hetd(s)",1)])])])]))),256))])])]))),256))]))),256)),(r(!0),i(g,null,C(s.datas.fonctionsReferentiels,(c,p)=>(r(),i("div",null,[t("div",Sm,[e[5]||(e[5]=t("span",null,"Référentiel",-1)),t("span",null,d(c.libelle),1),t("span",null,d(this.substr(c.commentaires,40)),1)]),t("div",Pm,[t("div",Am,[t("div",Dm,[t("table",Tm,[t("tbody",null,[t("tr",null,[t("td",Mm,[t("table",Em,[e[8]||(e[8]=t("thead",null,[t("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),t("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),t("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),t("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),t("th",{style:{width:"15%","font-size":"12px"}})],-1)),t("tbody",null,[(r(!0),i(g,null,C(c.heures,(o,y)=>(r(),i("tr",Fm,[o.heuresDemandees!=0?(r(),i("td",Um,[o.datePaiement?(r(),i("abbr",{key:0,title:"Payé en "+o.periodeLibelle+" le "+a.formatDate(o.datePaiement)},[t("span",Im,d(Number(o.heuresPayees))+" hetd(s)",1)],8,wm)):m("",!0),o.datePaiement?m("",!0):(r(),i("abbr",{key:1,title:"Demandé le "+a.formatDate(o.dateDemande)},[t("span",jm,d(Number(o.heuresDemandees))+" hetd(s)",1)],8,Rm))])):m("",!0),o.heuresDemandees==0?(r(),i("td",Hm,[t("div",Lm,[t("input",{id:"heures-"+p,"data-domaine-fonctionnel-id":o.domaineFonctionnelId,"data-mission-id":o.missionId,"data-service-id":o.serviceId,"data-service-referentiel-id":o.serviceReferentielId,"data-type-heures-id":o.typeHeureId,max:o.heuresAPayer,value:o.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,Nm),e[6]||(e[6]=t("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1))])])):m("",!0),o.heuresDemandees==0?(r(),i("td",Om,[t("select",{id:"centreCout-"+p,class:"selectpicker","data-live-search":"true",name:"centreCout"},[t("option",zm,d(a.notValueCentreCoutValue(s.datas.centreCoutPaiement,o.typeHeureCode)),1),(r(!0),i(g,null,C(a.filtrerCentresCouts(s.datas.centreCoutPaiement,"referentiel"),f=>(r(),i("optgroup",{key:f.group,label:f.group},[(r(!0),i(g,null,C(f.child,V=>(r(),i("option",{key:V.value,selected:V.centreCoutId==o.centreCout.centreCoutId,value:V.centreCoutId},d(V.centreCoutCode+" - "+V.centreCoutLibelle),9,Bm))),128))],8,$m))),128))],8,qm)])):m("",!0),o.heuresDemandees!=0?(r(),i("td",{key:3,innerHTML:a.shorten(o.centreCout.code+" - "+o.centreCout.libelle,20)},null,8,Jm)):m("",!0),o.heuresDemandees==0?(r(),i("td",Gm,[t("select",{id:"domaineFonctionnel-"+p,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e[7]||(e[7]=t("option",{value:""},"Aucun domaine fonctionnel",-1)),(r(!0),i(g,null,C(s.datas.domaineFonctionnelPaiement,f=>(r(),i("option",{selected:f.domaineFonctionnelId==o.domaineFonctionnel.domaineFonctionnelId,value:f.domaineFonctionnelId},d(f.domaineFonctionnelCode+" - "+f.domaineFonctionnelLibelle),9,Qm))),256))],8,Wm)])):m("",!0),o.heuresDemandees!=0?(r(),i("td",Ym,d(o.domaineFonctionnel.libelle),1)):m("",!0),t("td",{innerHTML:a.heuresStatutToString(o)},null,8,Xm),t("td",Km,[o.heuresPayees==0&&o.heuresDemandees>0?(r(),i("span",Zm,[t("button",{id:"remove-"+o.mepId,class:"btn btn-danger",type:"button",onClick:f=>this.supprimerDemandeMiseEnPaiement(o.mepId)},[b(u,{id:"action",name:"trash",style:{color:"white"}}),b(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,ep)])):m("",!0),o.heuresDemandees==0?(r(),i("span",tp,[t("button",{id:"add-"+p,class:"btn btn-primary",type:"button",onClick:f=>this.ajouterDemandeMiseEnPaiement(p)},[b(u,{id:"action",name:"plus"}),b(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,np)])):m("",!0)])]))),256))])])])])]),t("tfoot",null,[t("tr",sp,[e[9]||(e[9]=t("th",{scope:"row"},"Total",-1)),t("td",null,d(a.totalHeure(c.heures))+" hetd(s)",1)])])])])])])]))),256)),(r(!0),i(g,null,C(s.datas.missions,c=>(r(),i("div",null,[t("div",rp,[e[10]||(e[10]=t("span",null,"Mission",-1)),t("span",null,d(c.libelle),1)]),t("div",ip,[t("div",lp,[t("div",ap,[t("table",op,[t("tbody",null,[t("tr",null,[t("td",up,[t("table",dp,[e[13]||(e[13]=t("thead",null,[t("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),t("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),t("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),t("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),t("th",{style:{width:"15%","font-size":"12px"}})],-1)),t("tbody",null,[(r(!0),i(g,null,C(c.heures,(p,o)=>(r(),i("tr",cp,[p.heuresDemandees!=0?(r(),i("td",mp,[p.datePaiement?(r(),i("abbr",{key:0,title:"Payé en "+p.periodeLibelle+" le "+a.formatDate(p.datePaiement)},[t("span",fp,d(Number(p.heuresPayees))+" heure(s)",1)],8,pp)):m("",!0),p.datePaiement?m("",!0):(r(),i("abbr",{key:1,title:"Demandé le "+a.formatDate(p.dateDemande)},[t("span",vp,d(Number(p.heuresDemandees))+" heure(s)",1)],8,hp))])):m("",!0),p.heuresDemandees==0?(r(),i("td",bp,[t("div",_p,[t("input",{id:"heures-"+c.missionId,"data-domaine-fonctionnel-id":p.domaineFonctionnelId,"data-mission-id":p.missionId,"data-service-id":p.serviceId,"data-service-referentiel-id":p.serviceReferentielId,"data-type-heures-id":p.typeHeureId,max:p.heuresAPayer,value:p.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,gp),e[11]||(e[11]=t("span",{class:"input-group-text",style:{"font-size":"12px"}},"heure(s)",-1))])])):m("",!0),p.heuresDemandees==0?(r(),i("td",yp,[t("select",{id:"centreCout-"+c.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:y=>a.enabledPaiement(c.missionId,"mission")},[t("option",Cp,d(a.notValueCentreCoutValue(s.datas.centreCoutPaiement,p.typeHeureCode)),1),(r(!0),i(g,null,C(a.filtrerCentresCouts(s.datas.centreCoutPaiement,"mission"),y=>(r(),i("optgroup",{key:y.group,label:y.group},[(r(!0),i(g,null,C(y.child,f=>(r(),i("option",{key:f.value,selected:f.centreCoutId==p.centreCout.centreCoutId,value:f.centreCoutId},d(f.centreCoutCode+" - "+f.centreCoutLibelle),9,kp))),128))],8,Vp))),128))],40,xp)])):m("",!0),p.heuresDemandees!=0?(r(),i("td",{key:3,innerHTML:a.shorten(p.centreCout.code+" - "+p.centreCout.libelle,20)},null,8,Sp)):m("",!0),p.heuresDemandees==0?(r(),i("td",Pp,[t("select",{id:"domaineFonctionnel-"+c.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:y=>a.enabledPaiement(c.missionId,"mission")},[e[12]||(e[12]=t("option",{value:""},"Aucun domaine fonctionnel",-1)),(r(!0),i(g,null,C(s.datas.domaineFonctionnelPaiement,y=>(r(),i("option",{selected:y.domaineFonctionnelId==p.domaineFonctionnel.domaineFonctionnelId,value:y.domaineFonctionnelId},d(y.domaineFonctionnelCode+" - "+y.domaineFonctionnelLibelle),9,Dp))),256))],40,Ap)])):m("",!0),p.heuresDemandees!=0?(r(),i("td",Tp,d(p.domaineFonctionnel.code+" - "+p.domaineFonctionnel.libelle),1)):m("",!0),t("td",{innerHTML:a.heuresStatutToString(p)},null,8,Mp),t("td",Ep,[p.heuresPayees==0&&p.heuresDemandees>0?(r(),i("span",Fp,[t("button",{id:"remove-"+p.mepId,class:"btn btn-danger",type:"button",onClick:y=>this.supprimerDemandeMiseEnPaiement(p.mepId)},[b(u,{id:"action",name:"trash",style:{color:"white"}}),b(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Up)])):m("",!0),p.heuresDemandees==0?(r(),i("span",wp,[t("button",{id:"add-"+c.missionId,class:"btn btn-primary",type:"button",onClick:y=>this.ajouterDemandeMiseEnPaiement(c.missionId)},[b(u,{id:"action",name:"plus"}),b(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Ip)])):m("",!0)])]))),256))])])])])]),t("tfoot",null,[t("tr",Rp,[e[14]||(e[14]=t("th",{scope:"row"},"Total",-1)),t("td",null,d(a.totalHeure(c.heures))+" heure(s)",1)])])])])])])]))),256))]),t("div",jp,[t("button",{id:"add-all-"+s.datas.code,class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=c=>a.demanderToutesLesHeuresEnPaiement(s.datas.code,s.datas.libelle))},[b(u,{id:"action",name:"square-plus",style:{color:"white"}}),b(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}}),h(" DEMANDER TOUS LES PAIEMENTS POUR "+d(s.datas.libelleCourt),1)],8,Hp)])],8,Ic)],8,Fc)}const Re=P(Ec,[["render",Lp]]),Np=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),Op={name:"DemandeMiseEnPaiement",components:{DemandeMiseEnPaiementStructure:Re},props:{intervenant:{required:!1},intervenantStructure:{required:!1}},data(){return{datasDemandesMiseEnPaiement:null,urlGetDemandesMiseEnPaiement:unicaenVue.url("intervenant/:intervenant/mise-en-paiement/get-demandes-mise-en-paiement",{intervenant:this.intervenant})}},methods:{getDemandesMiseEnPaiement(){unicaenVue.axios.get(this.urlGetDemandesMiseEnPaiement).then(n=>{this.datasDemandesMiseEnPaiement=n.data}).then(n=>{this.btnResetState()}).catch(n=>{this.btnResetState(),console.error(n)})},btnResetState(){Array.from(document.querySelectorAll('[id^="remove-"]')).forEach(v=>{v.disabled=!1,v.querySelector("#waiting").style.display="none",v.querySelector("#action").style.display="inline-block"}),Array.from(document.querySelectorAll('[id^="add-"]')).forEach(v=>{v.disabled=!1,v.querySelector("#waiting").style.display="none",v.querySelector("#action").style.display="inline-block"}),Array.from(document.querySelectorAll('[id^="add-all"]')).forEach(v=>{v.disabled=!1,v.querySelector("#waiting").style.display="none",v.querySelector("#action").style.display="inline-block"})}},computed:{haveDemandeMiseEnPaiement:function(){return this.datasDemandesMiseEnPaiement?Object.keys(this.datasDemandesMiseEnPaiement).length>0:!1}},mounted(){this.getDemandesMiseEnPaiement()},updated(){$(".selectpicker").selectpicker("render");var n=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));n.map(function(e){return new bootstrap.Tooltip(e)})}},qp={key:0,class:"text-center"},zp={key:1,id:"accordionPanelsStayOpenExample",class:"accordion"},$p={key:2,class:"text-center alert alert-secondary",role:"alert"};function Bp(n,e,s,v,l,a){const u=I("demande-mise-en-paiement-structure");return r(),i(g,null,[this.datasDemandesMiseEnPaiement?m("",!0):(r(),i("div",qp,e[0]||(e[0]=[t("div",{class:"mt-5 spinner-border spinner-border-sm",role:"status"},[t("span",{class:"visually-hidden"},"Chargement des demandes de mise en paiement en cours...")],-1),h(" Chargement des demandes de mise en paiement en cours... ")]))),this.datasDemandesMiseEnPaiement?(r(),i("div",zp,[(r(!0),i(g,null,C(l.datasDemandesMiseEnPaiement,(c,p)=>(r(),R(u,{onRefreshBtnState:a.btnResetState,datas:c,intervenant:s.intervenant,onRefresh:a.getDemandesMiseEnPaiement},null,8,["onRefreshBtnState","datas","intervenant","onRefresh"]))),256))])):m("",!0),!a.haveDemandeMiseEnPaiement&&this.datasDemandesMiseEnPaiement?(r(),i("div",$p," Les demandes de mises en paiement sont effectuées par la composante : "+d(this.intervenantStructure),1)):m("",!0)],64)}const Jp=P(Op,[["render",Bp]]),Gp=Object.freeze(Object.defineProperty({__proto__:null,default:Jp},Symbol.toStringTag,{value:"Module"}));function Wp(n){for(let e in n)for(let s in n[e])je(n[e][s],e)}function Qp(){let n=document.getElementById("unicaen-vue-toast-container");return n||(n=document.createElement("div"),n.id="unicaen-vue-toast-container",n.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(n)),n}function Yp(n){return n=Xp(n),n=Kp(n),n}function Xp(n){const e=document.createElement("div");e.innerHTML=n;const s=e.querySelector(".alert");return s?s.innerHTML:e.innerHTML}function Kp(n){const e=document.createElement("div");return e.innerHTML=n,e.querySelectorAll("i.fas").forEach(v=>v.style.display="none"),e.innerHTML}function je(n,e,s=null){const v={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},l={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},a=document.createElement("button");a.classList.add("btn-close","btn-close-white","h5"),a.style.float="right",a.setAttribute("data-bs-dismiss","toast"),a.setAttribute("aria-label","Close");const u=document.createElement("i");u.classList.add("icon","fas",`fa-${l[e]}`),u.style.float="left",u.style.fontSize="26pt",u.style.paddingLeft=".4rem",u.style.marginTop=".4rem",u.style.paddingRight="1rem";const c=document.createElement("div");c.classList.add("toast-body"),c.innerHTML=Yp(n);const p=document.createElement("div");p.appendChild(a),p.appendChild(u),p.appendChild(c);const o=document.createElement("div");o.classList.add("toast","text-white",v[e]?v[e]:"bg-secondary"),o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),e==="error"&&n.length>500&&o.setAttribute("style","width:700px"),o.appendChild(p),Qp().appendChild(o),s==null&&(s={animation:!0,delay:e==="warning"?15e3:5e3,autohide:e!=="error"}),new bootstrap.Toast(o,s).show()}const te={toast:je,toasts:Wp};let K={...Be};K.interceptors.request.use(n=>{if(n.submitter){let e=n.msg?n.msg:"Action en cours";n.popover!=null&&n.popover.dispose(),n.popover=new bootstrap.Popover(n.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+e,html:!0,trigger:"focus"}),n.popover.show()}return n});K.interceptors.response.use(n=>{if(n.messages=n.data.messages,n.data=n.data.data,n.hasErrors=!!(n.messages&&n.messages.error&&n.messages.error.length>0),n.config.popover){var e=n.config.popover;let s="";for(ns in n.messages)for(mid in n.messages[ns])s+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+n.messages[ns][mid]+"</div>";s?(e._config.content=s,e.setContent(),setTimeout(()=>{e.dispose()},5e3)):e.dispose()}return n.messages&&te.toasts(n.messages),n},n=>{let e=n.response.data;n.response.status==403?e="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":e=n.response.data,te.toast(e,"error")});K.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Zp={uvAxios:K},ne={axios:Zp.uvAxios,flashMessenger:te,url:(n,e,s)=>{let v=window.__unicaenVueBaseUrl;if(e)for(let a in e)n=n.replace(`:${a}`,e[a]);let l=s?ne.encodeUrlQueryParam(s):null;return v+n+(l?`?${l}`:"")},encodeUrlQueryParam:(n,e)=>{var s=[];for(var v in n)if(n.hasOwnProperty(v)){var l=n[v],a=e?e+"["+encodeURIComponent(v)+"]":encodeURIComponent(v);if(typeof l=="object"&&l!==null)s.push(ne.encodeUrlQueryParam(l,a));else{var u=encodeURIComponent(l);s.push(a+"="+u)}}return s.join("&")}};window.unicaenVue=ne;const ef={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{type:Array,required:!0},canMiseEnPaiement:{type:Boolean,required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),urlMiseEnPaiement:unicaenVue.url("paiement/etat-demande-paiement"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:!1,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(n){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let e=document.getElementById("formRechercheDemandeMiseEnPaiement"),s=new FormData(e),v=document.getElementById("btn-rdmep"),l=document.getElementById("btn-rdmep-inprogress");l.classList.remove("d-none"),v.classList.add("d-none"),v.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,s,{}).then(a=>{this.dispatchDatas(a.data),v.disabled=!1,l.classList.add("d-none"),v.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(c,p){c.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(c=>{let p=c.data;this.dotation=p.dotation,this.liquidation=p.liquidation,this.refreshTotalConsommation()})}).catch(a=>{console.error(a)})},processDemandeMiseEnPaiement(n){let e=document.getElementById("formProcessDemandeMiseEnPaiement"),s=new FormData(e);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>=this.totalConsommationRessourcePropre||!this.haveDotation){let v=document.getElementById("btn-pdmep"),l=document.getElementById("btn-pdmep-inprogress");l.classList.remove("d-none"),v.classList.add("d-none"),v.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,s,{}).then(a=>{this.findDemandeMiseEnPaiement(),v.disabled=!1,l.classList.add("d-none"),v.classList.remove("d-none")}).catch(a=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let n=0,e=0,s=0;n=parseFloat(this.liquidation.paieEtat),e=parseFloat(this.liquidation.ressourcePropre),s+=parseFloat(this.liquidation.ressourcePropre),s+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(l,a){l.hasAttribute("data-paie-etat")&&l.checked&&(n+=parseFloat(l.getAttribute("data-paie-etat")),s+=parseFloat(l.getAttribute("data-paie-etat"))),l.hasAttribute("data-ressource-propre")&&l.checked&&(e+=parseFloat(l.getAttribute("data-ressource-propre")),s+=parseFloat(l.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=n.toFixed(2),this.totalConsommationRessourcePropre=e.toFixed(2),this.totalConsommation=s.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(n){var s;if(!n||!n.datasIntervenant)return 0;let e=0;return(s=n==null?void 0:n.datasIntervenant)!=null&&s.incoherencePaiement?n.datasIntervenant.totalHeures.toLocaleString("fr-FR",{maximumFractionDigits:2}):(n.heures.forEach((v,l)=>{v.centreCout.code!=""&&(v.missionId!=""||v.serviceRefId!=""?v.domaineFonctionnel.code!=""&&(e+=v.heuresAPayer):e+=v.heuresAPayer)}),e.toLocaleString("fr-FR",{maximumFractionDigits:2}))},totalNonPayable(n){var s;if(!n||!n.datasIntervenant)return 0;let e=0;return(s=n==null?void 0:n.datasIntervenant)!=null&&s.incoherencePaiement?e.toLocaleString("fr-FR",{maximumFractionDigits:2}):(n.heures.forEach((v,l)=>{(v.centreCout.code==""||(v.missionId!=""||v.serviceRefId!="")&&v.domaineFonctionnel.code=="")&&(e+=v.heuresAPayer)}),e.toLocaleString("fr-FR",{maximumFractionDigits:2}))},totalRessourcePaieEtat(n){let e=0;return n.forEach((s,v)=>{s.centreCout.typeRessourceCode=="paie-etat"&&(e+=s.heuresAPayer)}),e.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(n){let e=0;return n.forEach((s,v)=>{s.centreCout.typeRessourceCode=="ressources-propres"&&(e+=s.heuresAPayer)}),e.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(n){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[];for(const[e,s]of Object.entries(n))switch(s.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(s),this.intervenants.push(s);break;case"Intervenant permanent":this.permanents.push(s),this.intervenants.push(s);break;case"Étudiant":this.etudiants.push(s),this.intervenants.push(s);break;default:this.autres.push(s),this.intervenants.push(s)}},toggleCheckbox(n){let e=Array.from(document.getElementsByClassName(n.target.className));n.target.checked?e.forEach(function(s,v){s.checked=!0}):e.forEach(function(s,v){s.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(n){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:n.datasIntervenant.code})},formattedHETD(n){return Util.formattedHeures(n,!1)}}},tf={class:"card text-dark bg-light"},nf={class:"card-body"},sf={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},rf={class:"mb-3"},lf=["value"],af={class:"mb-3"},of=["disabled"],uf={key:0},df={key:0,class:"alert alert-danger",role:"alert"},cf={class:"table table-bordered caption-top"},mf={class:"fw-bold"},pf={class:"fw-bold"},ff={id:"dmep",class:"accordion"},hf={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},vf={key:0,class:"accordion-item"},bf={id:"dmep-permanents-heading",class:"accordion-header"},_f={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},gf={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},yf={class:"accordion-body"},xf={class:"table"},Cf={scope:"col"},Vf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],kf={key:0,title:"La fiche intervenant contient des incohérences de paiement (trop payé, etc...), une revue manuelle des paiements est nécessaire.",class:"fas fa-triangle-exclamation",style:{color:"#a40000",cursor:"help"}},Sf=["href"],Pf=["title"],Af={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Df={key:1,class:"accordion-item"},Tf={id:"dmep-vacataires-heading",class:"accordion-header"},Mf={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},Ef={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},Ff={class:"accordion-body"},Uf={class:"table"},wf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],If={key:0,title:"La fiche intervenant contient des incohérences de paiement (trop payé, etc...), une revue manuelle des paiements est nécessaire.",class:"fas fa-triangle-exclamation",style:{color:"#a40000",cursor:"help"}},Rf=["href"],jf=["title"],Hf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Lf={key:2,class:"accordion-item"},Nf={id:"dmep-etudiants-heading",class:"accordion-header"},Of={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},qf={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},zf={class:"accordion-body"},$f={class:"table"},Bf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Jf={key:0,title:"La fiche intervenant contient des incohérences de paiement (trop payé, etc...), une revue manuelle des paiements est nécessaire.",class:"fas fa-triangle-exclamation",style:{color:"#a40000",cursor:"help"}},Gf=["href"],Wf=["title"],Qf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Yf={key:3,class:"accordion-item"},Xf={id:"dmep-autres-heading",class:"accordion-header"},Kf={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},Zf={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},eh={class:"accordion-body"},th={class:"table"},nh=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],sh={key:0,title:"La fiche intervenant contient des incohérences de paiement (trop payé, etc...), une revue manuelle des paiements est nécessaire.",class:"fas fa-triangle-exclamation",style:{color:"#a40000",cursor:"help"}},rh=["href"],ih=["title"],lh={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},ah=["value"],oh={key:4,class:"mt-3"},uh=["disabled"],dh=["href"];function ch(n,e,s,v,l,a){return r(),i(g,null,[e[35]||(e[35]=t("h1",null,"Demande de mise en paiement par lots",-1)),t("div",tf,[e[14]||(e[14]=t("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1)),t("div",nf,[t("form",sf,[t("div",rf,[e[11]||(e[11]=t("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1)),e[12]||(e[12]=h("  ")),_(t("select",{"onUpdate:modelValue":e[0]||(e[0]=u=>l.selectedStructure=u),class:"form-select",name:"structure"},[(r(!0),i(g,null,C(s.structures,u=>(r(),i("option",{value:u.id},d(u.libelle),9,lf))),256))],512),[[H,l.selectedStructure]])]),t("div",af,[e[13]||(e[13]=t("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[t("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),h("  Veuillez patienter... ")],-1)),t("button",{id:"btn-rdmep",disabled:!l.selectedStructure,class:"btn btn-primary",type:"button",onClick:e[1]||(e[1]=(...u)=>a.findDemandeMiseEnPaiement&&a.findDemandeMiseEnPaiement(...u))}," Lancer la recherche ",8,of)])])])]),e[36]||(e[36]=t("div",{class:"alert alert-info",role:"alert"},[h(" Seules les HETD "),t("strong",null,"(hors référentiel)"),h(" avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisée. Pour les autres, il faudra passer sur chaque fiche intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ")],-1)),a.haveDotation?(r(),i("div",uf,[l.alertDotation?(r(),i("div",df," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):m("",!0),t("table",cf,[e[17]||(e[17]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{class:"fw-bold",scope:"col"},"Budget"),t("th",{class:"fw-bold",scope:"col"},"Paie etat"),t("th",{class:"fw-bold",scope:"col"},"Ressource propre"),t("th",{class:"fw-bold",scope:"col"},"Total")])],-1)),t("tbody",null,[t("tr",null,[e[15]||(e[15]=t("td",null,"Dotation",-1)),t("td",null,d(a.formattedHETD(this.dotation.paieEtat))+" HETD",1),t("td",null,d(a.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),t("td",mf,d(a.formattedHETD(this.dotation.total))+" HETD",1)]),t("tr",null,[e[16]||(e[16]=t("td",null,"Consommation",-1)),t("td",null,[t("span",{class:M(a.alertPaieEtat)},d(a.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),t("td",null,[t("span",{class:M(a.alertRessourcePropre)},d(a.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),t("td",pf,d(a.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):m("",!0),t("div",ff,[t("form",hf,[this.permanents.length>0?(r(),i("div",vf,[t("h2",bf,[t("button",_f,d(this.permanents.length)+" Permanent(s) ",1)]),t("div",gf,[t("div",yf,[t("table",xf,[t("thead",null,[t("tr",null,[t("th",Cf,[t("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:e[2]||(e[2]=(...u)=>a.toggleCheckbox&&a.toggleCheckbox(...u))})]),e[18]||(e[18]=t("th",{scope:"col"},"Intervenant",-1)),e[19]||(e[19]=t("th",null,"HETD payables en lot",-1)),e[20]||(e[20]=t("th",null,"HETD sans centre de coût",-1))])]),t("tbody",null,[(r(!0),i(g,null,C(this.permanents,u=>(r(),i("tr",null,[t("td",null,[t("input",{id:"permanent-"+u.datasIntervenant.id,"data-paie-etat":a.totalRessourcePaieEtat(u.heures),"data-ressource-propre":a.totalRessourcePropre(u.heures),disabled:a.totalPayable(u)==0||u.datasIntervenant.incoherencePaiement,name:"intervenant["+u.datasIntervenant.id+"]",title:a.totalPayable(u)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:e[3]||(e[3]=c=>a.refreshTotalConsommation())},null,40,Vf)]),t("td",null,[u.datasIntervenant.incoherencePaiement?(r(),i("i",kf)):m("",!0),e[21]||(e[21]=h("  ")),t("a",{href:a.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,Sf)]),t("td",null,[t("span",{title:a.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+a.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(a.totalPayable(u))+" h",9,Pf)]),t("td",null,[t("span",Af,d(a.totalNonPayable(u))+" h",1)])]))),256))])])])])])):m("",!0),this.vacataires.length>0?(r(),i("div",Df,[t("h2",Tf,[t("button",Mf,d(this.vacataires.length)+" Vacataire(s) ",1)]),t("div",Ef,[t("div",Ff,[t("table",Uf,[t("thead",null,[t("tr",null,[t("th",null,[t("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:e[4]||(e[4]=(...u)=>a.toggleCheckbox&&a.toggleCheckbox(...u))})]),e[22]||(e[22]=t("th",null,"Intervenant",-1)),e[23]||(e[23]=t("th",null,"HETD payables en lot",-1)),e[24]||(e[24]=t("th",null,"HETD sans centre de coût",-1))])]),t("tbody",null,[(r(!0),i(g,null,C(this.vacataires,u=>(r(),i("tr",null,[t("td",null,[t("input",{id:"vacataire-"+u.datasIntervenant.id,"data-paie-etat":a.totalRessourcePaieEtat(u.heures),"data-ressource-propre":a.totalRessourcePropre(u.heures),disabled:a.totalPayable(u)==0||u.datasIntervenant.incoherencePaiement,name:"intervenant["+u.datasIntervenant.id+"]",title:a.totalPayable(u)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:e[5]||(e[5]=c=>a.refreshTotalConsommation())},null,40,wf)]),t("td",null,[u.datasIntervenant.incoherencePaiement?(r(),i("i",If)):m("",!0),e[25]||(e[25]=h("  ")),t("a",{href:a.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,Rf)]),t("td",null,[t("span",{title:a.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+a.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(a.totalPayable(u))+" h",9,jf)]),t("td",null,[t("span",Hf,d(a.totalNonPayable(u))+" h",1)])]))),256))])])])])])):m("",!0),this.etudiants.length>0?(r(),i("div",Lf,[t("h2",Nf,[t("button",Of,d(this.etudiants.length)+" Etudiant(s) ",1)]),t("div",qf,[t("div",zf,[t("table",$f,[t("thead",null,[t("tr",null,[t("th",null,[t("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:e[6]||(e[6]=(...u)=>a.toggleCheckbox&&a.toggleCheckbox(...u))})]),e[26]||(e[26]=t("th",null,"Intervenant",-1)),e[27]||(e[27]=t("th",null,"HETD payables en lot",-1)),e[28]||(e[28]=t("th",null,"HETD sans centre de coût",-1))])]),t("tbody",null,[(r(!0),i(g,null,C(this.etudiants,u=>(r(),i("tr",null,[t("td",null,[t("input",{id:"etudiant-"+u.datasIntervenant.id,"data-paie-etat":a.totalRessourcePaieEtat(u.heures),"data-ressource-propre":a.totalRessourcePropre(u.heures),disabled:a.totalPayable(u)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:a.totalPayable(u)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:e[7]||(e[7]=c=>a.refreshTotalConsommation())},null,40,Bf)]),t("td",null,[u.datasIntervenant.incoherencePaiement?(r(),i("i",Jf)):m("",!0),e[29]||(e[29]=h("  ")),t("a",{href:a.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,Gf)]),t("td",null,[t("span",{title:a.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+a.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(a.totalPayable(u))+" h",9,Wf)]),t("td",null,[t("span",Qf,d(a.totalNonPayable(u))+" h",1)])]))),256))])])])])])):m("",!0),this.autres.length>0?(r(),i("div",Yf,[t("h2",Xf,[t("button",Kf,d(this.autres.length)+" Autre(s) ",1)]),t("div",Zf,[t("div",eh,[t("table",th,[t("thead",null,[t("tr",null,[t("th",null,[t("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:e[8]||(e[8]=(...u)=>a.toggleCheckbox&&a.toggleCheckbox(...u))})]),e[30]||(e[30]=t("th",null,"Intervenant",-1)),e[31]||(e[31]=t("th",null,"HETD payables en lot",-1)),e[32]||(e[32]=t("th",null,"HETD sans centre de coût",-1))])]),t("tbody",null,[(r(!0),i(g,null,C(this.etudiants,u=>(r(),i("tr",null,[t("td",null,[t("input",{id:"autre-"+u.datasIntervenant.id,"data-paie-etat":a.totalRessourcePaieEtat(u.heures),"data-ressource-propre":a.totalRessourcePropre(u.heures),disabled:a.totalPayable(u)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:a.totalPayable(u)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:e[9]||(e[9]=c=>a.refreshTotalConsommation())},null,40,nh)]),t("td",null,[u.datasIntervenant.incoherencePaiement?(r(),i("i",sh)):m("",!0),e[33]||(e[33]=h("  ")),t("a",{href:a.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,rh)]),t("td",null,[t("span",{title:a.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+a.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(a.totalPayable(u))+" h",9,ih)]),t("td",null,[t("span",lh,d(a.totalNonPayable(u))+" h",1)])]))),256))])])])])])):m("",!0),t("input",{value:l.selectedStructure,name:"selectedStructure",type:"hidden"},null,8,ah),this.intervenants.length>0?(r(),i("div",oh,[e[34]||(e[34]=t("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[t("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),h("  Veuillez patienter... ")],-1)),t("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:e[10]||(e[10]=(...u)=>a.processDemandeMiseEnPaiement&&a.processDemandeMiseEnPaiement(...u))}," Enregistrer les demandes de paiement ",8,uh),this.canMiseEnPaiement?(r(),i("a",{key:0,id:"btn-mep",href:this.urlMiseEnPaiement,class:"ms-2 btn btn-secondary"}," Aller aux mises en paiement ",8,dh)):m("",!0)])):m("",!0)])])],64)}const mh=P(ef,[["render",ch]]),ph=Object.freeze(Object.defineProperty({__proto__:null,default:mh},Symbol.toStringTag,{value:"Module"})),fh={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},hh={class:"table table-bordered table-condensed table-extra-condensed"},vh={class:"card"},bh={class:"card-header"},_h={class:"badge bg-primary"},gh={class:"card-body"},yh={class:"row lap"},xh={class:"col-md-6"},Ch={class:"table table-bordered table-xs"},Vh={key:0,rowspan:"2"},kh={key:1,rowspan:"2"},Sh=["title"],Ph={class:"col-md-6"},Ah={class:"table table-bordered table-xs"},Dh=["title"],Th=["title"],Mh={key:0},Eh={class:"badge bg-info"},Fh={key:0,class:"row"},Uh={class:"col-md-6"},wh={class:"table table-bordered table-xs"},Ih=["title"],Rh=["title"];function jh(n,e,s,v,l,a){return r(),i(g,null,[e[10]||(e[10]=t("h2",null,"Paramètres généraux ou bien selon le statut",-1)),t("table",hh,[e[0]||(e[0]=t("tr",null,[t("th",null,"Paramètre général"),t("th",null,"Valeur")],-1)),(r(!0),i(g,null,C(s.parametres,(u,c)=>(r(),i("tr",{key:c},[t("th",null,d(c),1),t("td",null,d(u),1)]))),128))]),e[11]||(e[11]=t("h2",null,"Services à payer",-1)),(r(!0),i(g,null,C(s.servicesAPayer,(u,c)=>(r(),i("div",{key:c},[t("div",vh,[t("div",bh,[t("span",_h,d(u.type),1),h(" "+d(u.libelle),1)]),t("div",gh,[t("ul",null,[(r(!0),i(g,null,C(u.parametres,(p,o)=>(r(),i("li",{key:o},d(o)+" : "+d(p),1))),128))]),(r(!0),i(g,null,C(u.laps,p=>(r(),i("div",yh,[t("div",xh,[e[4]||(e[4]=t("h6",null,"Heures à payer",-1)),t("table",Ch,[t("thead",null,[t("tr",null,[u.type!="Référentiel"?(r(),i("th",Vh,"Volume horaire")):(r(),i("th",kh,"Volumes horaires")),e[1]||(e[1]=t("th",{colspan:"2"},"Taux de rému.",-1)),e[2]||(e[2]=t("th",{colspan:"3"},"Heures",-1))]),e[3]||(e[3]=t("tr",null,[t("th",null,"Nom"),t("th",null,"Valeur"),t("th",null,"Total"),t("th",null,"AA"),t("th",null,"AC")],-1))]),t("tbody",null,[t("tr",null,[t("td",null,[t("abbr",{class:"badge bg-secondary",title:p.volumeHoraireHisto},d(p.volumeHoraireId),9,Sh),h(" "+d(p.volumeHoraire),1)]),t("td",null,d(p.tauxRemu),1),t("td",null,d(p.tauxValeur)+"€",1),t("td",null,d(p.heures),1),t("td",null,d(p.heuresAA),1),t("td",null,d(p.heuresAC),1)])])])]),t("div",Ph,[e[6]||(e[6]=t("h6",null,[t("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),h(" correspondantes")],-1)),t("table",Ah,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",{rowspan:"2"},"Id"),t("th",{rowspan:"2"},"Centre de coûts"),t("th",{colspan:"2"},"Période"),t("th",{colspan:"3"},"Heures")]),t("tr",null,[t("th",null,"Mois"),t("th",null,"Date"),t("th",null,"Total"),t("th",null,"AA"),t("th",null,"AC")])],-1)),t("tbody",null,[(r(!0),i(g,null,C(p.misesEnPaiement,o=>(r(),i("tr",{key:o.id},[t("td",null,[t("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+o.heuresTotal+`
Domaine fonctionnel : `+o.domaineFonctionnel+`
`+o.historique},d(o.id),9,Dh)]),t("td",null,[t("abbr",{title:o.centreCoutLibelle},d(o.centreCoutCode),9,Th)]),t("td",null,d(o.periodePaiement),1),t("td",null,d(o.date),1),t("td",null,d(o.heures),1),t("td",null,d(o.heuresAA),1),t("td",null,d(o.heuresAC),1)]))),128))])]),p.heuresRestantes!="0,00"?(r(),i("div",Mh,[t("span",Eh,d(p.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):m("",!0)])]))),256)),u.misesEnPaiement&&u.misesEnPaiement.length>0?(r(),i("div",Fh,[e[9]||(e[9]=t("div",{class:"col-md-6"},null,-1)),t("div",Uh,[e[8]||(e[8]=t("h6",null,[t("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),h(" en trop")],-1)),t("table",wh,[e[7]||(e[7]=t("thead",{class:"bg-danger"},[t("tr",null,[t("th",{rowspan:"2"},"Id"),t("th",{rowspan:"2"},"Centre de coûts"),t("th",{colspan:"2"},"Période"),t("th",{rowspan:"2"},"Heures")]),t("tr",null,[t("th",null,"Mois"),t("th",null,"Date")])],-1)),t("tbody",null,[(r(!0),i(g,null,C(u.misesEnPaiement,p=>(r(),i("tr",{key:p.id},[t("td",null,[t("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+p.domaineFonctionnel+`
`+p.historique},d(p.id),9,Ih)]),t("td",null,[t("abbr",{title:p.centreCoutLibelle},d(p.centreCoutCode),9,Rh)]),t("td",null,d(p.periodePaiement),1),t("td",null,d(p.date),1),t("td",null,d(p.heures),1)]))),128))])])])])):m("",!0)])])]))),128))],64)}const Hh=P(fh,[["render",jh],["__scopeId","data-v-6001d54b"]]),Lh=Object.freeze(Object.defineProperty({__proto__:null,default:Hh},Symbol.toStringTag,{value:"Module"})),Nh={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(n){this.selectedFile=n.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(n){n.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let e=document.getElementById("btn-import"),s=document.getElementById("btn-import-inprogress");s.classList.remove("d-none"),e.classList.add("d-none"),e.disabled=!0;let v=document.getElementById("formImport"),l=new FormData(v);unicaenVue.axios.post(this.importUrl,l,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{let u=a.data;this.fileErrors=u.file,this.intervenantMissing=u.intervenant,u.message.length!=0?this.messageErrors=u.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",e.disabled=!1,s.classList.add("d-none"),e.classList.remove("d-none")}).catch(a=>{console.error("Error uploading")})}}},Oh={class:"card text-dark bg-light"},qh={class:"card-body"},zh={key:0,class:"alert alert-danger",role:"alert"},$h={key:1,class:"alert alert-success",role:"alert"},Bh={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},Jh={class:"mb-3"},Gh={class:"mb-3"},Wh={key:0,id:"fileErrors",class:"card text-dark bg-light"},Qh={class:"card-body"},Yh={key:0},Xh={key:1};function Kh(n,e,s,v,l,a){return r(),i(g,null,[t("div",Oh,[e[7]||(e[7]=t("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1)),t("div",qh,[this.messageErrors?(r(),i("div",zh,d(this.messageErrors),1)):m("",!0),this.messageConfirm?(r(),i("div",$h,d(this.messageConfirm),1)):m("",!0),t("form",Bh,[e[5]||(e[5]=t("p",{class:"fs-9 text"},[h(" Vous pouvez utiliser le modèle directement extrait de winpaie "),t("strong",null,"(format .xlsx ou .ods)"),h(" ou créer votre modèle générique de classeur "),t("strong",null,"(format .xlsx ou .ods)"),h(" incluant 3 colonnes : insee,numero pec, nom. ")],-1)),t("div",Jh,[e[2]||(e[2]=t("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1)),e[3]||(e[3]=h("  ")),t("input",{class:"form-control",name:"importFile",type:"file",onChange:e[0]||(e[0]=(...u)=>a.handleFileUpload&&a.handleFileUpload(...u))},null,32)]),e[6]||(e[6]=ie('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1)),t("div",Gh,[e[4]||(e[4]=t("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[t("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),h("  Veuillez patienter... ")],-1)),t("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:e[1]||(e[1]=(...u)=>a.importFile&&a.importFile(...u))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(r(),i("div",Wh,[e[10]||(e[10]=t("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1)),t("div",Qh,[this.fileErrors.length!=0?(r(),i("div",Yh,[e[8]||(e[8]=t("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1)),t("ul",null,[(r(!0),i(g,null,C(this.fileErrors,u=>(r(),i("li",null,d(),1))),256))])])):m("",!0),this.intervenantMissing.length!=0?(r(),i("div",Xh,[e[9]||(e[9]=t("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1)),t("ul",null,[(r(!0),i(g,null,C(this.intervenantMissing,u=>(r(),i("li",null,d(u),1))),256))])])):m("",!0)])])):m("",!0)],64)}const Zh=P(Nh,[["render",Kh]]),e1=Object.freeze(Object.defineProperty({__proto__:null,default:Zh},Symbol.toStringTag,{value:"Module"})),t1={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(n){modAjax(n.target,e=>{this.$emit("refreshListe")})},ajoutValeur(n){modAjax(n.target,e=>{this.$emit("refreshListe")})},saisieValeur(n){n.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:n.currentTarget.dataset.id}),modAjax(n.currentTarget,e=>{this.$emit("refreshListe")})},refreshListe(n){this.$emit("refreshListe")},supprimer(n){popConfirm(n.currentTarget,e=>{this.$emit("refreshListe")})},supprimerValeur(n){n.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:n.currentTarget.dataset.id}),popConfirm(n.currentTarget,e=>{this.$emit("refreshListe")})},refresh(n){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:n.id})).then(e=>{this.$emit("refresh",e.data)})}}},n1={class:"card-header"},s1={style:{display:"inline"}},r1={class:"float-end"},i1=["href"],l1=["href"],a1={class:"card-body"},o1={key:0},u1={class:""},d1={class:"row align-items-start"},c1={class:"col-md-6"},m1={class:"col"},p1=["data-id"],f1=["data-id"],h1=["href"],v1={key:1,class:"row"},b1={class:"col-md-7"},_1={class:"row align-items-start"},g1={class:"col-md-8"},y1={class:"col-md-auto"},x1=["data-id"],C1=["data-id"],V1=["href"],k1={class:"col"},S1={key:0},P1={key:0};function A1(n,e,s,v,l,a){const u=O,c=I("u-heures"),p=z,o=I("taux",!0);return r(),i(g,null,[t("div",{class:M(["card",{"ms-5":s.taux.tauxRemu}])},[t("div",n1,[t("h3",s1,d(s.taux.libelle)+" ("+d(s.taux.code)+")",1),t("div",r1,[s.taux.canEdit?(r(),i("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:e[0]||(e[0]=D((...y)=>a.saisie&&a.saisie(...y),["prevent"]))},[b(u,{name:"pen-to-square"}),e[8]||(e[8]=h(" Modifier"))],8,i1)):m("",!0),e[10]||(e[10]=h("   ")),s.taux.canDelete?(r(),i("a",{key:1,href:l.supprimerUrl,class:"btn btn-danger",onClick:e[1]||(e[1]=D((...y)=>a.supprimer&&a.supprimer(...y),["prevent"]))},[b(u,{name:"trash-can"}),e[9]||(e[9]=h(" Supprimer"))],8,l1)):m("",!0)])]),t("div",a1,[s.taux.tauxRemu?m("",!0):(r(),i("div",o1,[e[14]||(e[14]=h(" Modification :")),e[15]||(e[15]=t("br",null,null,-1)),t("ul",null,[(r(!0),i(g,null,C(s.taux.tauxRemuValeurs,y=>(r(),i("div",{key:y.id},[t("li",u1,[t("div",d1,[t("div",c1,[b(c,{valeur:y.valeur},null,8,["valeur"]),e[11]||(e[11]=h("€/h à partir du ")),b(p,{value:y.dateEffet},null,8,["value"])]),t("div",m1,[s.taux.canEdit?(r(),i("a",{key:0,class:"text-primary",onClick:e[2]||(e[2]=D((...f)=>a.saisieValeur&&a.saisieValeur(...f),["prevent"])),"data-id":y.id},[b(u,{name:"pen-to-square"})],8,p1)):m("",!0),e[12]||(e[12]=h("   ")),s.taux.canEdit?(r(),i("a",{key:1,class:"text-primary",onClick:e[3]||(e[3]=D((...f)=>a.supprimerValeur&&a.supprimerValeur(...f),["prevent"])),"data-id":y.id},[b(u,{name:"trash-can"})],8,f1)):m("",!0)])])])]))),128))]),s.taux.canEdit?(r(),i("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:e[4]||(e[4]=D((...y)=>a.ajoutValeur&&a.ajoutValeur(...y),["prevent"]))},[b(u,{name:"plus"}),e[13]||(e[13]=h(" Ajouter une valeur "))],8,h1)):m("",!0)])),s.taux.tauxRemu?(r(),i("div",v1,[t("div",b1,[e[19]||(e[19]=h(" Modification :")),e[20]||(e[20]=t("br",null,null,-1)),t("ul",null,[(r(!0),i(g,null,C(s.taux.tauxRemuValeurs,y=>(r(),i("div",null,[t("li",null,[t("div",_1,[t("div",g1,[e[16]||(e[16]=h(" Coéfficient de ")),b(c,{valeur:y.valeur},null,8,["valeur"]),e[17]||(e[17]=h(" à partir du ")),b(p,{value:y.dateEffet},null,8,["value"])]),t("div",y1,[s.taux.canEdit?(r(),i("a",{key:0,class:"text-primary",onClick:e[5]||(e[5]=D((...f)=>a.saisieValeur&&a.saisieValeur(...f),["prevent"])),"data-id":y.id},[b(u,{name:"pen-to-square"})],8,x1)):m("",!0),e[18]||(e[18]=h("   ")),s.taux.canEdit?(r(),i("a",{key:1,class:"text-primary",onClick:e[6]||(e[6]=D((...f)=>a.supprimerValeur&&a.supprimerValeur(...f),["prevent"])),"data-id":y.id},[b(u,{name:"trash-can"})],8,C1)):m("",!0)])])])]))),256))]),s.taux.canEdit?(r(),i("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:e[7]||(e[7]=D((...y)=>a.ajoutValeur&&a.ajoutValeur(...y),["prevent"]))},[b(u,{name:"plus"})],8,V1)):m("",!0)]),t("div",k1,[h(" Valeurs calculées (indexées sur le taux "+d(s.taux.tauxRemu.libelle)+") : ",1),t("ul",null,[(r(!0),i(g,null,C(s.taux.tauxRemuValeursIndex,y=>(r(),i("div",null,[t("li",null,[b(c,{valeur:y.valeur},null,8,["valeur"]),e[21]||(e[21]=h("€/h à partir du ")),b(p,{value:y.date},null,8,["value"])])]))),256))]),e[22]||(e[22]=t("br",null,null,-1))])])):m("",!0)])],2),s.taux.tauxRemu?m("",!0):(r(),i("div",S1,[(r(!0),i(g,null,C(s.listeTaux,y=>(r(),i("div",{key:y},[y.tauxRemu&&y.tauxRemu.id===s.taux.id?(r(),i("div",P1,[(r(),R(o,{onSupprimer:a.supprimer,onRefreshListe:a.refreshListe,key:s.taux.id,taux:y,listeTaux:s.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):m("",!0)]))),128))]))],64)}const He=P(t1,[["render",A1]]),D1=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"})),T1={components:{taux:He},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(n){modAjax(n.currentTarget,e=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(n){let e=Util.json.indexById(this.listeTaux,n.id);this.listeTaux[e]=n},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(n=>{this.listeTaux=n.data})}}},M1=["href"];function E1(n,e,s,v,l,a){const u=I("taux");return r(),i(g,null,[(r(!0),i(g,null,C(l.listeTaux,c=>(r(),i("div",null,[c.tauxRemu?m("",!0):(r(),R(u,{onSupprimer:a.supprimer,onRefreshListe:a.refreshListe,key:c.id,taux:c,listeTaux:l.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),s.canEditTaux?(r(),i("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:e[0]||(e[0]=D((...c)=>a.ajout&&a.ajout(...c),["prevent"]))},"Ajout d'un nouveau taux",8,M1)):m("",!0)],64)}const F1=P(T1,[["render",E1]]),U1=Object.freeze(Object.defineProperty({__proto__:null,default:F1},Symbol.toStringTag,{value:"Module"})),w1={class:"card-header card-header-h3"},I1={class:"validation-bar float-end","data-url":""},R1={key:0},j1=["id","title","data-url"],H1=["id","title","data-url"],L1=["id","title","data-url"],N1={key:0,style:{"font-size":"0.6em"}},O1={class:"card-body"},q1={class:"row"},z1={class:"col-md-6"},$1={key:0},B1=["href"],J1={key:1},G1={class:"uploaded-files-div",id:"uploaded-files-div-6851831280ff7"},W1={class:"fichier-pj"},Q1={class:"d-flex"},Y1=["href","title"],X1=["title"],K1=["title"],Z1=["title"],ev={class:"d-block small upload-date"},tv={key:2,class:"d-block small"},nv=["id","title","data-url"],sv=["id","title","data-url"],rv={key:0,class:"col-md-6"},iv={class:"row"},lv={class:"col-md-8"},av=["id"],ov={class:"form-label small",for:"importFile"},uv={class:"col-md-4 d-flex align-items-end"},dv=["id","data-url"],se={__name:"PieceJointe",props:["intervenant","datas","privileges"],emits:["refresh"],setup(n,{emit:e}){const s=n,v=e,l=B(null),a=L(()=>{var A;return unicaenVue.url("piece-jointe/intervenant/:intervenant/valider/:pieceJointe",{intervenant:s.intervenant,pieceJointe:((A=s.datas.pieceJointe)==null?void 0:A.id)??0})}),u=L(()=>{var A;return unicaenVue.url("piece-jointe/intervenant/:intervenant/devalider/:pieceJointe",{intervenant:s.intervenant,pieceJointe:((A=s.datas.pieceJointe)==null?void 0:A.id)??0})}),c=L(()=>{var A;return unicaenVue.url("piece-jointe/intervenant/:intervenant/refuser/:pieceJointe",{intervenant:s.intervenant,pieceJointe:((A=s.datas.pieceJointe)==null?void 0:A.id)??0})}),p=L(()=>{var A;return unicaenVue.url("piece-jointe/intervenant/:intervenant/fichier/televerser/:typePieceJointe",{intervenant:s.intervenant,typePieceJointe:((A=s.datas.typePieceJointe)==null?void 0:A.id)??0})}),o=L(()=>{var k;return`form-import-${((k=s.datas.typePieceJointe)==null?void 0:k.id)??"unknown"}`}),y=L(()=>{var k;return`btn-import-${((k=s.datas.typePieceJointe)==null?void 0:k.id)??"unknown"}`}),f=L(()=>{var N;const A=((N=s.datas.typePieceJointe)==null?void 0:N.urlModeleDoc)??null,k=s.datas.annee??"0000";return A?A.replace(":annee",k):null}),V=L(()=>{var k;const A=((k=s.datas.typePieceJointe)==null?void 0:k.urlModeleDoc)??null;return A?A.split("/").pop():null}),S=L(()=>{var A,k;return(A=s.datas.pieceJointe)!=null&&A.validation&&s.datas.annee!=((k=s.datas.pieceJointe)==null?void 0:k.anneeOrigine)?"Déposez un document pour le mettre à jour :":"Déposez un document : "});function T(A){console.log(y.value),l.value=A.target.files;const k=document.getElementById(y.value);k&&(k.disabled=!1)}function F(A){A.preventDefault();const k=document.getElementById(y.value);document.getElementById("btn-import-inprogress"),k.disabled=!0;const N=document.getElementById(o.value),G=new FormData(N),W=A.currentTarget.dataset.url;unicaenVue.axios.post(W,G,{headers:{"Content-Type":"multipart/form-data"}}).then(Q=>{v("refresh")}).catch(Q=>{console.error("Error uploading")})}function U(A,k=!1){if(k)modAjax(A.currentTarget,()=>{v("refresh")});else{const N=A.currentTarget.dataset.url;unicaenVue.axios.get(N).then(()=>v("refresh")).catch(()=>v("refresh"))}}function q(A,k){return A?A.length>k?A.slice(0,k)+"…":A:""}function ae(A){return A.demandeApresRecrutement?s.privileges.canValiderComp:s.privileges.canValider}function oe(A){return A.demandeApresRecrutement?s.privileges.canEditerComp:s.privileges.canEditer}function Le(A){return A.demandeApresRecrutement?s.privileges.canDevaliderComp:s.privileges.canDevalider}return(A,k)=>{var G,W,Q,ue,de,ce,me,pe,fe;const N=O;return r(),i("div",{class:M(["tpj","card","upload-container",(G=n.datas.pieceJointe)!=null&&G.validation?"bg-success":"bg-default",(W=n.datas.pieceJointe)!=null&&W.id?"tpj-"+n.datas.pieceJointe.id:""])},[t("div",w1,[t("h5",null,[t("div",I1,[n.datas.pieceJointe?(r(),i("div",R1,[!n.datas.pieceJointe.validation&&ae(n.datas)?(r(),i("button",{key:0,id:"valider-"+((Q=n.datas.pieceJointe)==null?void 0:Q.id),class:"btn btn-success me-2",type:"button",title:"Valider la pièce justificative '"+n.datas.typePieceJointe.libelle+"'",onClick:k[0]||(k[0]=E=>U(E)),"data-url":a.value},[b(N,{id:"action",name:"thumbs-up",style:{color:"black"}}),k[6]||(k[6]=h(" VALIDER "))],8,j1)):m("",!0),!n.datas.pieceJointe.validation&&n.privileges.canRefuser?(r(),i("button",{key:1,id:"refuser-"+((ue=n.datas.pieceJointe)==null?void 0:ue.id),class:"btn btn-danger",type:"button",title:"Refuser la pièce justificative '"+n.datas.typePieceJointe.libelle+"'",onClick:k[1]||(k[1]=E=>U(E,!0)),"data-url":c.value},[b(N,{id:"action",name:"trash",style:{color:"black"}}),k[7]||(k[7]=h(" REFUSER "))],8,H1)):m("",!0),n.datas.pieceJointe.validation&&n.datas.annee==(((de=n.datas.pieceJointe)==null?void 0:de.anneeOrigine)??!1)&&Le(n.datas)?(r(),i("button",{key:2,id:"devalider-"+((ce=n.datas.pieceJointe)==null?void 0:ce.id),class:"btn btn-danger",type:"button",title:"Dévalider la pièce justificative '"+n.datas.typePieceJointe.libelle+"'",onClick:k[2]||(k[2]=E=>U(E)),"data-url":u.value},[b(N,{id:"action",name:"thumbs-up",style:{color:"black"}}),k[8]||(k[8]=h(" DÉVALIDER "))],8,L1)):m("",!0)])):m("",!0)]),h(" "+d(n.datas.typePieceJointe.libelle)+" ",1),n.datas.annee!=(((me=n.datas.pieceJointe)==null?void 0:me.anneeOrigine)??n.datas.annee)?(r(),i("span",N1,"Fourni(e) en "+d((pe=n.datas.pieceJointe)==null?void 0:pe.anneeOrigine),1)):m("",!0),k[9]||(k[9]=t("br",null,null,-1))])]),t("div",O1,[t("div",q1,[t("div",z1,[n.datas.typePieceJointe.urlModeleDoc?(r(),i("div",$1,[k[11]||(k[11]=t("label",null,"Documents à télécharger et à remplir :",-1)),k[12]||(k[12]=t("br",null,null,-1)),t("ul",null,[t("li",null,[t("a",{class:"modele-doc",title:"Cliquez pour télécharger le document à remplir",href:f.value},[k[10]||(k[10]=t("span",{class:"fas fa-file"},null,-1)),h(" "+d(V.value),1)],8,B1)])])])):m("",!0),k[17]||(k[17]=t("label",null,"Fichier(s) déposé(s) :",-1)),n.datas.pieceJointe?m("",!0):(r(),i("p",J1,"Aucun")),t("div",G1,[t("ul",null,[(r(!0),i(g,null,C((fe=n.datas.pieceJointe)==null?void 0:fe.fichier,(E,Ab)=>{var he,ve,be,_e,ge;return r(),i("li",W1,[t("div",Q1,[t("div",null,[n.privileges.canTelecharger?(r(),i("a",{key:0,class:"download-file",href:"/piece-jointe/intervenant/"+n.intervenant+"/fichier/telecharger/"+E.id+"/"+E.nom,title:"Télécharger le fichier déposé '"+E.nom+"'"},[k[13]||(k[13]=t("span",{class:"icon icon-file"},null,-1)),h(" "+d(q(E.nom,15))+" (",1),t("abbr",{title:E.poids},d(E.poids),9,X1),k[14]||(k[14]=h(")"))],8,Y1)):m("",!0),n.privileges.canTelecharger?m("",!0):(r(),i("a",{key:1,class:"disabled download-file",tabindex:"-1","aria-disabled":"true",onclick:"return false;",title:"Vous n'avez pas les droits pour télécharge le fichier déposé '"+E.nom+"'"},[k[15]||(k[15]=t("span",{class:"icon icon-file"},null,-1)),h(" "+d(q(E.nom,15))+" (",1),t("abbr",{title:E.poids},d(E.poids),9,Z1),k[16]||(k[16]=h(")"))],8,K1)),t("span",ev,[t("i",null,"Déposé le "+d(E.date),1),h(" par "+d(E.utilisateur),1)]),E.validation?(r(),i("span",tv,[t("i",null,"Validé le "+d((he=E.validation)==null?void 0:he.date),1),h(" par "+d((ve=E.validation)==null?void 0:ve.utilisateur),1)])):m("",!0)]),t("div",null,[!E.validation&&oe(n.datas)&&n.datas.annee==(((be=n.datas.pieceJointe)==null?void 0:be.anneeOrigine)??!1)?(r(),i("button",{key:0,id:"supprimer-fichier-"+E.id,class:"delete-file btn btn-sm btn-danger ms-2 p-1 py-0",type:"button",title:"Supprimer le fichier déposé '"+E.nom+"'",onClick:k[3]||(k[3]=Z=>U(Z)),"data-url":"/piece-jointe/intervenant/"+n.intervenant+"/fichier/supprimer/"+n.datas.pieceJointe.id+"/"+E.id},[b(N,{id:"action",name:"trash",style:{color:"black"}})],8,nv)):m("",!0),!E.validation&&((_e=n.datas.pieceJointe)!=null&&_e.validation)&&ae(n.datas)&&n.datas.annee==(((ge=n.datas.pieceJointe)==null?void 0:ge.anneeOrigine)??!1)?(r(),i("button",{key:1,id:"valider-fichier-"+E.id,class:"validate-file btn btn-sm btn-success ms-2 p-1 py-0",type:"button",title:"Valider le fichier déposé '"+E.nom+"'",onClick:k[4]||(k[4]=Z=>U(Z)),"data-url":"/piece-jointe/intervenant/"+n.intervenant+"/fichier/valider/"+n.datas.pieceJointe.id+"/"+E.id},[b(N,{id:"action",name:"thumbs-up",style:{color:"black"}})],8,sv)):m("",!0)])])])}),256))])])]),oe(n.datas)?(r(),i("div",rv,[t("div",iv,[t("div",lv,[t("form",{id:o.value,action:"",enctype:"multipart/form-data",method:"post"},[t("div",null,[t("label",ov,d(S.value),1),t("input",{class:"form-control form-control-sm",name:"importFile",type:"file",onChange:T,multiple:""},null,32)])],8,av)]),t("div",uv,[t("button",{id:y.value,class:"btn btn-primary btn-sm w-100",disabled:"",type:"button",onClick:k[5]||(k[5]=E=>F(E)),onChange:T,"data-url":p.value},[b(N,{id:"action",name:"upload"}),k[18]||(k[18]=h(" Déposer "))],40,dv)])])])):m("",!0)])])],2)}}},cv=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),mv={key:0,class:"tab-pane fade show active",id:"avantRecrutement",role:"tabpanel","aria-labelledby":"avantRecrutement-tab"},pv={class:"card"},fv={class:"card-body"},hv={key:1,class:"tab-pane fade show",id:"apresRecrutement",role:"tabpanel","aria-labelledby":"apresRecrutement-tab"},vv={class:"card"},bv={class:"card-body"},_v={__name:"ListePiecesJointes",props:["intervenant"],setup(n){const e=n,s=B(null),v=L(()=>unicaenVue.url("piece-jointe/intervenant/:intervenant/get-pieces-jointes",{intervenant:e.intervenant})),l=L(()=>{var f,V;return((V=(f=s.value)==null?void 0:f.piecesJointes)==null?void 0:V.filter(S=>!S.demandeApresRecrutement))||[]}),a=L(()=>{var f,V;return((V=(f=s.value)==null?void 0:f.messagesPiecesJointes)==null?void 0:V.filter(S=>S.avantRecrutement))||[]}),u=L(()=>l.value.length>0),c=L(()=>{var f,V;return((V=(f=s.value)==null?void 0:f.piecesJointes)==null?void 0:V.filter(S=>S.demandeApresRecrutement))||[]}),p=L(()=>{var f,V;return((V=(f=s.value)==null?void 0:f.messagesPiecesJointes)==null?void 0:V.filter(S=>!S.avantRecrutement))||[]}),o=L(()=>c.value.length>0);function y(){unicaenVue.axios.get(v.value).then(f=>{s.value=f.data}).catch(f=>{console.error(f)})}return X(()=>{y()}),(f,V)=>{var S,T,F;return r(),i(g,null,[u.value&&((S=s.value)!=null&&S.privileges)?(r(),i("div",mv,[(r(!0),i(g,null,C(a.value||[],(U,q)=>(r(),i("div",{key:"msg-"+q,class:M("mt-3 messenger alert alert-dismissible alert-"+U.type)},[V[0]||(V[0]=t("span",{class:"fas fa-info-circle"},null,-1)),h(" "+d(U.text)+" ",1),V[1]||(V[1]=t("button",{type:"button",class:"btn-close alert-dismissible",title:"Fermer cette alerte","data-bs-dismiss":"alert"},null,-1))],2))),128)),t("div",pv,[V[2]||(V[2]=t("div",{class:"card-header text-light bg-success"},[t("h3",null,"Pièces justificatives")],-1)),t("div",fv,[(r(!0),i(g,null,C(l.value,U=>(r(),R(se,{key:U.id,datas:U,privileges:s.value.privileges,intervenant:n.intervenant,onRefresh:y},null,8,["datas","privileges","intervenant"]))),128))])])])):m("",!0),o.value&&((F=(T=s.value)==null?void 0:T.privileges)!=null&&F.canVisualiserComp)?(r(),i("div",hv,[(r(!0),i(g,null,C(p.value||[],(U,q)=>(r(),i("div",{key:"msg-"+q,class:M("mt-3 messenger alert alert-dismissible alert-"+U.type)},[V[3]||(V[3]=t("span",{class:"fas fa-info-circle"},null,-1)),h(" "+d(U.text)+" ",1),V[4]||(V[4]=t("button",{type:"button",class:"btn-close alert-dismissible",title:"Fermer cette alerte","data-bs-dismiss":"alert"},null,-1))],2))),128)),t("div",vv,[V[5]||(V[5]=t("div",{class:"card-header text-light bg-success"},[t("h3",null,"Pièces justificatives complémentaires")],-1)),t("div",bv,[(r(!0),i(g,null,C(c.value,U=>(r(),R(se,{key:U.id,datas:U,privileges:s.value.privileges,intervenant:n.intervenant,onRefresh:y},null,8,["datas","privileges","intervenant"]))),128))])])])):m("",!0)],64)}}},gv=Object.freeze(Object.defineProperty({__proto__:null,default:_v},Symbol.toStringTag,{value:"Module"})),yv={name:"listeContrat",data(){return{dataUrl:unicaenVue.url("signature/data-contrat"),lines:[]}},methods:{contratUrl(n){return unicaenVue.url("intervenant/:intervenant/contrat",{intervenant:n})},getDocumentUrl(n){return unicaenVue.url("signature/:signature/get-document",{signature:n})},updateSignatureUrl(n){return unicaenVue.url("signature/:signature/update-signature",{signature:n})}}},xv=["href"],Cv=["href"],Vv=["href"];function kv(n,e,s,v,l,a){const u=z,c=le;return r(),i(g,null,[e[7]||(e[7]=t("h1",{class:"page-header"},"Liste des signatures électroniques de contrat",-1)),b(c,{ref:"signatures",modelValue:l.lines,"onUpdate:modelValue":e[0]||(e[0]=p=>l.lines=p),"data-url":this.dataUrl},{default:w(()=>[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",{column:"ID_SIGNATURE"},"Id"),t("th",{column:"NOM"},"Nom"),t("th",{column:"PRENOM"},"Prénom"),t("th",{column:"DATE_CREATION_SIGNATURE_ELECTRONIQUE"},"Date signature électronique"),t("th",{column:"STATUT_SIGNATURE_ELECTRONIQUE"},"Statut"),t("th",null," ")])],-1)),t("tbody",null,[(r(!0),i(g,null,C(l.lines,(p,o)=>(r(),i("tr",{key:o},[t("td",null,d(p.ID_SIGNATURE),1),t("td",null,d(p.NOM),1),t("td",null,d(p.PRENOM),1),t("td",null,[b(u,{value:p.DATE_CREATION_SIGNATURE_ELECTRONIQUE},null,8,["value"])]),t("td",null,d(p.STATUT_SIGNATURE_ELECTRONIQUE),1),t("td",null,[t("a",{href:a.getDocumentUrl(p.ID_SIGNATURE),class:"btn btn-info"},e[1]||(e[1]=[t("i",{class:"fas fa-download"},null,-1)]),8,xv),e[4]||(e[4]=h("   ")),t("a",{href:a.contratUrl(p.ID_INTERVENANT),class:"btn btn-info"},e[2]||(e[2]=[t("i",{class:"fas fa-eye"},null,-1)]),8,Cv),e[5]||(e[5]=h("   ")),t("a",{href:a.updateSignatureUrl(p.ID_SIGNATURE),class:"btn btn-info"},e[3]||(e[3]=[t("i",{class:"fas fa-rotate"},null,-1)]),8,Vv)])]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const Sv=P(yv,[["render",kv]]),Pv=Object.freeze(Object.defineProperty({__proto__:null,default:Sv},Symbol.toStringTag,{value:"Module"})),Av={key:0,class:"drag-handle",href:"#",title:"Vous pouvez ordonnancer les étapes du workflow, sous condition qu'il n'y ai pas de blocage ou de dépendance bloquante"},Dv=["href"],Tv={class:"dependances"},Mv={key:0,class:"table table-bordered"},Ev={style:{width:"45%"}},Fv=["href"],Uv=["href"],wv={class:"attrib"},Iv=["title"],Rv={key:0,class:"attrib"},jv={key:1,class:"attrib"},Hv={key:1,class:"alert alert-warning"},Lv=["href"],Nv={__name:"Administration",props:{canEdit:{type:Boolean}},setup(n){const e=B([]),s=()=>{unicaenVue.axios.get(unicaenVue.url("workflow/administration/data")).then(y=>{e.value=y.data})},v=unicaenVue.url("workflow/administration/saisie-dependance"),l=unicaenVue.url("workflow/administration/suppression-dependance"),a=unicaenVue.url("workflow/administration/modification-etape"),u=y=>{modAjax(y.currentTarget,f=>{s()})},c=y=>{popConfirm(y.currentTarget,f=>{s()})},p=y=>{let f=[];for(const V in e.value)f.push(e.value[V].code);unicaenVue.axios.post(unicaenVue.url("workflow/administration/tri"),{etapes:f}).then(V=>{e.value=V.data})},o=y=>{switch(y){case"composante":return"La règle de franchissement est limitée à la composante courante, le franchissement dans les autres structures n'est pas pris en compte";case"etablissement":return"La règle s'applique quelle que soit la structure des données servant de base de calcul"}};return X(()=>{s()}),(y,f)=>(r(),i(g,null,[f[11]||(f[11]=t("h1",{class:"page-header"},"Workflow",-1)),b(J(Je),{ref:"el",modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=V=>e.value=V),direction:"vertical",animation:150,handle:".drag-handle",scroll:!0,onEnd:p},{default:w(()=>[(r(!0),i(g,null,C(e.value,(V,S)=>(r(),i("div",null,[t("h3",null,[n.canEdit?(r(),i("a",Av,f[1]||(f[1]=[t("i",{class:"fas fa-arrows-up-down ui-sortable-handle"},null,-1)]))):m("",!0),n.canEdit?(r(),i("a",{key:1,class:"perso-btn",title:"Personnalisation des libellés & messages",href:J(a)+"/"+V.id,onClick:D(u,["prevent"])},f[2]||(f[2]=[t("i",{class:"fas fa-pen-to-square"},null,-1)]),8,Dv)):m("",!0),h(" "+d(V.libelleAutres),1)]),t("div",Tv,[V.dependances.length?(r(),i("table",Mv,[t("thead",null,[t("tr",null,[t("th",Ev,"Étape"+d(V.dependances.length>1?"s":"")+" antérieure"+d(V.dependances.length>1?"s":""),1),f[3]||(f[3]=t("th",{style:{width:"15%"}},[t("abbr",{title:`Périmètre de franchissement à l'échelle d'une composante ou bien de l'établissement
    Si composante, on se fiche de ce qui se passe chez les autres
    Si établissement, tout compte`},"Périmètre")],-1)),f[4]||(f[4]=t("th",{style:{width:"45%"}},"Règle de franchissement",-1)),f[5]||(f[5]=t("th",{style:{width:"15%"}},[t("abbr",{title:"Filtrage éventuel par type d'intervenant"},"Intervenant")],-1))])]),t("tbody",null,[(r(!0),i(g,null,C(V.dependances,T=>(r(),i("tr",{class:M({inactive:!T.active})},[t("td",null,[n.canEdit?(r(),i("a",{key:0,href:J(v)+"/"+V.id+"/"+T.id,title:"Modification de la dépendance",onClick:D(u,["prevent"])},f[6]||(f[6]=[t("i",{class:"fas fa-pen-to-square"},null,-1)]),8,Fv)):m("",!0),n.canEdit?(r(),i("a",{key:1,href:J(l)+"/"+T.id,"data-content":"Êtes-vous sur de vouloir supprimer la règle de dépendance ?","data-title":"Suppression de la dépendance",title:"Suppression de la dépendance",onClick:D(c,["prevent"])},f[7]||(f[7]=[t("i",{class:"fas fa-trash-can"},null,-1)]),8,Uv)):m("",!0),h(" "+d(T.etapePrecedante.libelleAutres),1)]),t("td",wv,[t("abbr",{title:o(T.perimetre.code)},d(T.perimetre.libelle),9,Iv)]),t("td",null,d(T.avancementLibelle),1),T.typeIntervenant?(r(),i("td",Rv,d(T.typeIntervenant.libelle),1)):(r(),i("td",jv,f[8]||(f[8]=[t("abbr",{title:"Aucun filtre par type d'intervenant",class:"type_intervenant_tous"},"Tous",-1)])))],2))),256))])])):(r(),i("div",Hv,"Pas de dépendance")),n.canEdit&&S>0?(r(),i("a",{key:2,href:J(v)+"/"+V.id,class:"btn btn-primary btn-sm",onClick:D(u,["prevent"])},f[9]||(f[9]=[t("i",{class:"fas fa-plus"},null,-1),h(" Ajouter une dépendance")]),8,Lv)):m("",!0)]),f[10]||(f[10]=t("br",null,null,-1))]))),256))]),_:1},8,["modelValue"])],64))}},Ov=P(Nv,[["__scopeId","data-v-7dbf6c79"]]),qv=Object.freeze(Object.defineProperty({__proto__:null,default:Ov},Symbol.toStringTag,{value:"Module"})),zv={class:"feuille-de-route row"},$v={class:"col-md-9"},Bv={key:0,class:"list-group"},Jv=["title"],Gv={class:"label label-primary"},Wv=["href"],Qv=["title"],Yv={key:1},Xv={key:1},Kv=["title"],Zv={key:1},eb={class:"float-end"},tb=["href"],nb={key:1,class:"number number-positif text-danger",title:"À faire"},sb={key:2,class:"number number-positif text-danger fas fa-xmark",title:"Non fait"},rb={key:3,class:"number number-positif text-warning",title:"En cours"},ib={key:4,class:"number number-positif text-success fas fa-check",title:"Fait"},lb=["id"],ab={class:"col-md-4 col-md-offset-8"},ob={class:"list-group"},ub={class:"list-group-item"},db={class:"float-end"},cb={key:0,class:"number number-positif text-danger",title:"À faire"},mb={key:1,class:"number number-positif text-danger fas fa-xmark",title:"Non fait"},pb={key:2,class:"number number-positif text-warning",title:"En cours"},fb={key:3,class:"number number-positif text-success fas fa-check",title:"Fait"},hb={key:1,class:"alert alert-info"},vb={__name:"FeuilleDeRoute",props:{intervenant:{type:Number}},setup(n){const e=n,s=B([]),v=()=>{unicaenVue.axios.get(unicaenVue.url("workflow/feuille-de-route-data/:intervenant",{intervenant:e.intervenant})).then(c=>{s.value=c.data})},l=()=>{unicaenVue.axios.get(unicaenVue.url("workflow/feuille-de-route-refresh/:intervenant",{intervenant:e.intervenant})).then(c=>{s.value=c.data})},a=c=>{if(c.atteignable||c.whyNonAtteignable.length==0)return"";let p="Non atteignable :";for(const o in c.whyNonAtteignable)p+=`
    - `+c.whyNonAtteignable[o];return p},u=c=>{let p=0;for(const o in c.structures)if(p++,p>1)return!0;return!1};return X(()=>{v()}),(c,p)=>(r(),i(g,null,[t("h2",null,[p[1]||(p[1]=h("Feuille de route ")),t("a",{href:"#",onClick:D(l,["prevent"]),style:{"font-size":"12pt"},title:"Mettre à jour la feuille de route"},p[0]||(p[0]=[t("i",{class:"fas fa-arrows-rotate"},null,-1)]))]),t("div",zv,[t("div",$v,[s.value?(r(),i("ul",Bv,[(r(!0),i(g,null,C(s.value,o=>(r(),i("li",{class:M({"list-group-item":!0,"after-courante":!o.atteignable,"list-group-item-warning":o.courante}),title:a(o)},[t("span",Gv,d(o.numero),1),o.url&&o.navigable?(r(),i("a",{key:0,title:"Cliquez sur ce lien pour accéder à la page correspondant à cette étape",href:o.url},[o.whyNonAtteignable.length>0?(r(),i("abbr",{key:0,title:a(o)},d(o.libelle),9,Qv)):(r(),i("span",Yv,d(o.libelle),1))],8,Wv)):(r(),i("span",Xv,[o.whyNonAtteignable.length>0?(r(),i("abbr",{key:0,title:a(o)},d(o.libelle),9,Kv)):(r(),i("span",Zv,d(o.libelle),1))])),t("span",eb,[u(o)?(r(),i("a",{key:0,"data-bs-toggle":"collapse",href:"#fdr-structures-"+o.code,title:"Afficher le détail par composantes"},p[2]||(p[2]=[h("      "),t("span",{class:"fas fa-eye"},null,-1),h("  ")]),8,tb)):m("",!0),o.realisationPourc==0&&o.atteignable?(r(),i("span",nb,"0%")):m("",!0),o.realisationPourc==0&&!o.atteignable?(r(),i("span",sb)):m("",!0),o.realisationPourc>0&&o.realisationPourc<100?(r(),i("span",rb,d(o.realisationPourc)+"%",1)):m("",!0),o.realisationPourc==100?(r(),i("span",ib)):m("",!0)]),u(o)?(r(),i("div",{key:2,class:"row collapse",id:"fdr-structures-"+o.code},[t("div",ab,[t("ul",ob,[(r(!0),i(g,null,C(o.structures,y=>(r(),i("li",ub,[t("span",null,d(y.libelle),1),t("span",db,[y.realisationPourc==0&&o.atteignable?(r(),i("span",cb,"0%")):m("",!0),y.realisationPourc==0&&!o.atteignable?(r(),i("span",mb)):m("",!0),y.realisationPourc>0&&y.realisationPourc<100?(r(),i("span",pb,d(y.realisationPourc)+"%",1)):m("",!0),y.realisationPourc==100?(r(),i("span",fb)):m("",!0)])]))),256))])])],8,lb)):m("",!0)],10,Jv))),256))])):(r(),i("div",hb," La feuille de route ne comporte aucune étape "))])])],64))}},bb=P(vb,[["__scopeId","data-v-e0747cab"]]),_b=Object.freeze(Object.defineProperty({__proto__:null,default:bb},Symbol.toStringTag,{value:"Module"})),gb=["href"],yb={__name:"Nav",props:{intervenant:{type:Number},etape:{type:String}},setup(n){const e=n,s=B(""),v=B(""),l=()=>{unicaenVue.axios.post(unicaenVue.url("workflow/feuille-de-route-nav/:intervenant",{intervenant:e.intervenant}),{etape:e.etape}).then(a=>{a.data&&(v.value=a.data.libelle,s.value=a.data.url)})};return X(()=>{l(),window.addEventListener("Workflow/Nav.refresh",a=>{l()})}),(a,u)=>(r(),i("div",null,[v.value?(r(),i("a",{key:0,class:"btn btn-primary",title:"Cliquez sur ce bouton pour accéder à la page correspondant à cette étape de la feuille de route",href:s.value},d(v.value),9,gb)):m("",!0)]))}},xb=Object.freeze(Object.defineProperty({__proto__:null,default:yb},Symbol.toStringTag,{value:"Module"})),Cb={UHeures:"Application/UI/UHeures",UInputFloat:"Application/UI/UInputFloat",Utilisateur:"Application/Utilisateur"};function Vb(n,e){const s={};e===void 0&&(e={});for(const a in n){let c=a.slice(2,-4).replaceAll("/","");s[c]=n[a].default}function v(a){let u=Ge({template:a.innerHTML,components:s});if(e.beforeMount!==void 0&&e.beforeMount(u),e.autoloads!==void 0)for(const c in e.autoloads){let p=e.autoloads[c].replaceAll("/","");u.component(c,s[p])}u.use(We({components:!0,directives:!0})),u.mount(a),e.afterMount!==void 0&&e.afterMount(u)}for(const a of document.getElementsByClassName("vue-app"))v(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList"){for(const c of u.addedNodes)if(c.nodeType===Node.ELEMENT_NODE){const p=c.querySelectorAll?c.querySelectorAll(".vue-app"):[];for(const o of p)v(o);c.classList.contains("vue-app")&&v(c)}}}).observe(document.body,{childList:!0,subtree:!0})}const kb={init:Vb},Sb=Object.assign({"./Application/Connexion.vue":mt,"./Application/Navbar.vue":Pt,"./Application/UI/UHeures.vue":Et,"./Application/UI/UInputFloat.vue":Rt,"./Application/Utilisateur.vue":Ot,"./Employeur/ListeEmployeur.vue":nn,"./Formule/Administration/Details.vue":dn,"./Formule/Administration/Formulator.vue":Cn,"./Formule/Administration/Index.vue":Bn,"./Formule/Details.vue":Dr,"./Formule/DetailsHetd.vue":Ls,"./Formule/DetailsHetds.vue":qs,"./Formule/DetailsServiceEnseignement.vue":ts,"./Formule/DetailsServiceReferentiel.vue":as,"./Formule/DetailsVolumeHoraireEnseignement.vue":Cs,"./Formule/DetailsVolumeHoraireReferentiel.vue":Is,"./Formule/Test/Index.vue":Hr,"./Formule/Test/Test.vue":Ul,"./Formule/TotauxHetd.vue":Ll,"./Intervenant/Recherche.vue":Zl,"./Lieu/Structure.vue":Sa,"./Lieu/StructuresAdmin.vue":Ea,"./Mission/Liste.vue":qo,"./Mission/ListeCandidatures.vue":au,"./Mission/ListeOffreEmploi.vue":id,"./Mission/ListePrime.vue":Yd,"./Mission/Mission.vue":jo,"./Mission/OffreEmploi.vue":Xu,"./Mission/Prime.vue":qd,"./Mission/Suivi.vue":Mc,"./Mission/SuiviEvent.vue":Pc,"./Paiement/DemandeMiseEnPaiement.vue":Gp,"./Paiement/DemandeMiseEnPaiementLot.vue":ph,"./Paiement/DemandeMiseEnPaiementStructure.vue":Np,"./Paiement/DetailsCalculs.vue":Lh,"./Paiement/ImportNumeroPec.vue":e1,"./Paiement/ListeTaux.vue":U1,"./Paiement/Taux.vue":D1,"./PieceJointe/ListePiecesJointes.vue":gv,"./PieceJointe/PieceJointe.vue":cv,"./Signature/ListeContrat.vue":Pv,"./Workflow/Administration.vue":qv,"./Workflow/FeuilleDeRoute.vue":_b,"./Workflow/Nav.vue":xb}),Pb={autoloads:Cb};kb.init(Sb,Pb);
