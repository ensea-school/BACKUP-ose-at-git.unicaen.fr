import{c as l,o as a,w as v,v as E,n as D,t as d,a as _,b as T,d as b,e,F as y,r as x,f as U,g as Q,U as se,h as ne,i as he,j as S,k as h,p as z,l as B,m as K,B as re,q as F,s as g,u as R,x as J,y as W,z as _e,A as pe,C as fe,D as be,_ as ve}from"./vendor-DWyVorzg.js";const P=(t,s)=>{const n=t.__vccOpts||t;for(const[p,r]of s)n[p]=r;return n},ge={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},ye=["innerHTML"];function xe(t,s,n,p,r,i){return a(),l("span",{class:"heures",innerHTML:i.affichage},null,8,ye)}const Ce=P(ge,[["render",xe]]),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"})),Se={name:"UInputFloat",props:{modelValue:{},isPourc:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},class:{type:String,required:!1,default:""},fraction:{type:Boolean,required:!1,default:!1},maximumDigits:{required:!1,default:8}},data(){return{fractions:{.333333:"1/3",.166667:"1/6",.142857:"1/7",.111111:"1/9",.666667:"2/3",.285714:"2/7",.222222:"2/9",.428571:"3/7",1.333333:"4/3",.571429:"4/7",.444444:"4/9",1.666667:"5/3",.833333:"5/6",.714286:"5/7",.555556:"5/9",.857143:"6/7",2.333333:"7/3",1.166667:"7/6",.777778:"7/9",2.666667:"8/3",1.142857:"8/7",.888889:"8/9",1.285714:"9/7"},inError:!1}},emits:["update:modelValue"],computed:{value:{get(){let t=this.modelValue;return this.isPourc&&(t*=100),this.floatToString(t)},set(t){const s=/^-?\d*\.?\d+$/;if(this.inError=t!==void 0&&t!==""&&!s.test(t.replace("/","").replace(",","").replace(".","")),!this.inError){let n=this.stringToFloat(t);this.isPourc&&(n/=100),(n===void 0||!isNaN(n)&&isFinite(n))&&this.$emit("update:modelValue",n)}}},cclass(){let t=this.class;return this.inError&&(t+=" is-invalid"),t}},methods:{floatToString(t){if(t==null)return;const s=Math.round(t*1e6)/1e6;if(this.fraction&&this.fractions[s]!==void 0)return this.fractions[s];var n="fr",p={minimumFractionDigits:0,maximumFractionDigits:this.maximumDigits,useGrouping:!1},r=new Intl.NumberFormat(n,p);return r.format(t)},stringToFloat(t){if(!(t===null||t===""||t===void 0))return t.indexOf("/")!==-1?(t=t.split("/"),t=Util.stringToFloat(t[0])/Util.stringToFloat(t[1])):t=parseFloat(t.replace(",",".")),t}},mounted(){}},Pe=["disabled"];function ke(t,s,n,p,r,i){return v((a(),l("input",{"onUpdate:modelValue":s[0]||(s[0]=u=>i.value=u),disabled:n.disabled,ref:"inputFloat",class:D(i.cclass)},null,10,Pe)),[[E,i.value]])}const Ae=P(Se,[["render",ke],["__scopeId","data-v-29c90e6d"]]),Me=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"})),De={name:"Utilisateur",props:{nom:String,mail:String}},Ee=["href"];function Te(t,s,n,p,r,i){return a(),l("a",{href:`mailto:${n.mail}`},d(n.nom),9,Ee)}const Ue=P(De,[["render",Te]]),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"})),Re={name:"UTableAjax",emits:["update:modelValue"],props:{modelValue:{required:!0},id:{required:!1,type:String},size:{required:!1,default:10},count:{required:!1},search:{required:!1},dataUrl:{required:!0,type:String}},data(){return{page:1,pageSizes:[10,25,50,100,"Tous"],defaultSize:10,dSize:this.size,dCount:this.count,dSearch:this.search,searchTimer:null,columns:{},loading:!1,orderCol:void 0,orderDir:"asc"}},computed:{cSize(){return isNaN(this.dSize)?9999999999999:this.dSize},storageIdentifier(){return"UTableAjax-"+this.id+"-"+window.location.href},elStart(){return isNaN(this.dSize)?1:(this.page-1)*this.dSize+1},elEnd(){return isNaN(this.dCount)?(this.page-1)*this.dSize+this.dSize:isNaN(this.dSize)?this.dCount:Math.min(this.dCount,(this.page-1)*this.dSize+this.dSize)}},watch:{dSize(t){localStorage.setItem(this.storageIdentifier,t),this.getData()},dSearch(t){const s=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.page>1?this.page=1:s.getData()},500)},page(t){this.getData()}},methods:{getData(){unicaenVue.axios.post(this.dataUrl,{page:this.page,size:this.dSize,elStart:this.elStart,elEnd:this.elEnd,search:this.dSearch,orderCol:this.orderCol,orderDir:this.orderDir}).then(t=>{let s=t.data;this.dCount=s.count,this.$emit("update:modelValue",s.data)})},orderBy(t){const s=this.columns[t];for(let p in this.columns)p!=t&&(this.columns[p].classList.contains("sorting_asc")&&this.columns[p].classList.remove("sorting_asc"),this.columns[p].classList.contains("sorting_desc")&&this.columns[p].classList.remove("sorting_desc"),console.log(p));let n="asc";s.classList.contains("sorting_asc")?(n="desc",s.classList.remove("sorting_asc"),s.classList.add("sorting_desc")):(s.classList.contains("sorting_desc")&&s.classList.remove("sorting_desc"),s.classList.add("sorting_asc")),this.orderCol=t,this.orderDir=n,this.getData()}},mounted(){this.dSize=parseInt(localStorage.getItem(this.storageIdentifier))||this.defaultSize,this.page=1,this.dSize=this.size,this.dCount=this.count;const t=this.$refs.tableRef,s=this;t&&t.querySelectorAll("th[column]").forEach(p=>{Array.from(p.attributes).forEach(r=>{r.name=="column"&&(this.columns[r.value]=p,p.dataset.column=r.value,p.onclick=function(){s.orderBy(this.dataset.column)},p.removeAttribute(r.name),p.classList.add("sorting"))})}),this.getData()}},Ie={class:"dt-bootstrap5"},we=["value"],$e={class:"float-end"},He={class:"table table-bordered dataTable mb-2",ref:"tableRef"},Le={class:"dataTables_paginate paging_simple_numbers"};function Ne(t,s,n,p,r,i){const u=se,m=ne,c=he;return a(),l("div",Ie,[_(m,null,{default:T(()=>[_(u,null,{default:T(()=>[b(" Afficher "),e("label",null,[v(e("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>r.dSize=o),class:"form-select form-select-sm"},[(a(!0),l(y,null,x(r.pageSizes,o=>(a(),l("option",{key:o,value:o},d(o),9,we))),128))],512),[[U,r.dSize]])]),b(" éléments ")]),_:1}),_(u,null,{default:T(()=>[e("div",$e,[b(" Rechercher : "),e("label",null,[v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>r.dSearch=o),class:"form-control form-inline form-control-sm"},null,512),[[E,r.dSearch]])])])]),_:1})]),_:1}),e("table",He,[Q(t.$slots,"default")],512),_(m,null,{default:T(()=>[_(u,null,{default:T(()=>[b("Affichage de l'élément "+d(i.elStart)+" à "+d(i.elEnd)+" sur "+d(r.dCount)+" éléments",1)]),_:1}),_(u,null,{default:T(()=>[e("div",Le,[_(c,{align:"end",page:r.page,modelValue:r.page,"onUpdate:modelValue":s[2]||(s[2]=o=>r.page=o),"total-rows":r.dCount,"per-page":i.cSize,"last-number":"true",firstNumber:"true","prev-text":"Précédent","next-text":"Suivant"},null,8,["page","modelValue","total-rows","per-page"])])]),_:1})]),_:1})])}const ee=P(Re,[["render",Ne]]),je={name:"listeEmployeur",data(){return{dataUrl:unicaenVue.url("employeur/get-data"),lines:[]}},methods:{saisie(t){modAjax(t.currentTarget,s=>{this.$refs.employeurs.getData()})},editUrl(t){return unicaenVue.url("employeur/saisie/:id",{id:t})}}},Oe=e("h1",{class:"page-header"},"Gestion des employeurs",-1),qe=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"RAISON_SOCIALE"},"Raison sociale"),e("th",{column:"NOM_COMMERCIAL"},"Nom commercial"),e("th",null,"Siren"),e("th",null," ")])],-1),ze={key:0},Be=["href"],Ge={key:1};function Je(t,s,n,p,r,i){const u=ee;return a(),l(y,null,[Oe,_(u,{ref:"employeurs",modelValue:r.lines,"onUpdate:modelValue":s[1]||(s[1]=m=>r.lines=m),"data-url":this.dataUrl},{default:T(()=>[qe,e("tbody",null,[(a(!0),l(y,null,x(r.lines,(m,c)=>(a(),l("tr",{key:c},[e("td",null,d(m.ID),1),e("td",null,d(m.RAISON_SOCIALE),1),e("td",null,d(m.NOM_COMMERCIAL),1),e("td",null,d(m.SIREN),1),m.IMPORTABLE==0?(a(),l("td",ze,[m.IMPORTABLE==0?(a(),l("a",{key:0,href:i.editUrl(m.ID),onClick:s[0]||(s[0]=S((...o)=>i.saisie&&i.saisie(...o),["prevent"]))},"Modifier",8,Be)):h("",!0)])):h("",!0),m.IMPORTABLE==1?(a(),l("td",Ge," NON MODIFIABLE ")):h("",!0)]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const Ye=P(je,[["render",Je]]),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Ye},Symbol.toStringTag,{value:"Module"})),We={name:"Details",components:{},props:{formule:{type:Object},phpClass:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},Xe=["innerHTML"],Ze={class:"mb-2"},Ke=["href"],et=e("i",{class:"fas fa-rotate-left"},null,-1);function tt(t,s,n,p,r,i){return a(),l(y,null,[e("h1",null,"Code source de "+d(n.formule.code),1),e("div",{innerHTML:n.phpClass,class:"code"},null,8,Xe),e("div",Ze,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[et,b(" Retour à l'administration des formules")],8,Ke)])],64)}const st=P(We,[["render",tt]]),nt=Object.freeze(Object.defineProperty({__proto__:null,default:st},Symbol.toStringTag,{value:"Module"})),rt={name:"Formulator",components:{},props:{phpClass:{type:String},error:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},it=e("h1",null,"Formulator",-1),at={class:"mb-2"},lt=["href"],ot=e("i",{class:"fas fa-rotate-left"},null,-1),ut={key:0},dt={class:"alert alert-danger"},ct={key:1},mt=e("div",{class:"alert alert-success"},"Formule bien intégrée",-1),ht=[mt],_t={key:2},pt=e("h3",null,"Code généré :",-1),ft=["innerHTML"];function bt(t,s,n,p,r,i){return a(),l(y,null,[it,e("div",at,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[ot,b(" Retour à l'administration des formules")],8,lt)]),n.error?(a(),l("div",ut,[e("div",dt,d(n.error),1)])):(a(),l("div",ct,ht)),n.phpClass?(a(),l("div",_t,[pt,e("div",{innerHTML:n.phpClass},null,8,ft)])):h("",!0),b(" "+d(n.error),1)],64)}const vt=P(rt,[["render",bt]]),gt=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"})),yt={name:"Index",components:{},props:{formules:{required:!0,type:Array},canEdit:{required:!0,type:Boolean}},methods:{telechargementUrl(t){return unicaenVue.url("formule/administration/telecharger-tableur/"+t)},televersementUrl(){return unicaenVue.url("formule/administration/televerser-tableur")},detailsUrl(t){return unicaenVue.url("formule/administration/details/"+t)}}},M=t=>(z("data-v-ba77464f"),t=t(),B(),t),xt=M(()=>e("h1",null,"Formules de calcul",-1)),Ct={class:"table table-bordered table-hover table-sort"},Vt=M(()=>e("thead",null,[e("tr",null,[e("th",null,"Libellé"),e("th",null,"Paramètres"),e("th",null,"Règle de délégation"),e("th",null,"Ressources")])],-1)),St=["title"],Pt=M(()=>e("br",null,null,-1)),kt={key:0,class:"cartridge"},At=M(()=>e("span",null,"intervenant",-1)),Mt=M(()=>e("span",null,"param1",-1)),Dt={key:1,class:"cartridge"},Et=M(()=>e("span",null,"intervenant",-1)),Tt=M(()=>e("span",null,"param2",-1)),Ut={key:2,class:"cartridge"},Ft=M(()=>e("span",null,"intervenant",-1)),Rt=M(()=>e("span",null,"param3",-1)),It={key:3,class:"cartridge"},wt=M(()=>e("span",null,"intervenant",-1)),$t=M(()=>e("span",null,"param4",-1)),Ht={key:4,class:"cartridge"},Lt=M(()=>e("span",null,"intervenant",-1)),Nt=M(()=>e("span",null,"param5",-1)),jt={key:5,class:"cartridge"},Ot=M(()=>e("span",null,"volume horaire",-1)),qt=M(()=>e("span",null,"param1",-1)),zt={key:6,class:"cartridge"},Bt=M(()=>e("span",null,"volume horaire",-1)),Gt=M(()=>e("span",null,"param2",-1)),Jt={key:7,class:"cartridge"},Yt=M(()=>e("span",null,"volume horaire",-1)),Qt=M(()=>e("span",null,"param3",-1)),Wt={key:8,class:"cartridge"},Xt=M(()=>e("span",null,"volume horaire",-1)),Zt=M(()=>e("span",null,"param4",-1)),Kt={key:9,class:"cartridge"},es=M(()=>e("span",null,"volume horaire",-1)),ts=M(()=>e("span",null,"param5",-1)),ss={key:0},rs={key:1},is=["href"],as=M(()=>e("i",{class:"fas fa-table-cells"},null,-1)),ls=M(()=>e("br",null,null,-1)),os=["href"],us=M(()=>e("i",{class:"fas fa-table-cells"},null,-1)),ds=M(()=>e("br",null,null,-1)),cs={key:0,class:"card bg-warning"},ms=M(()=>e("div",{class:"card-header"},[e("h3",null,"Création/Modification d'une formule à partir d'un tableur")],-1)),hs={class:"card-body"},_s=M(()=>e("div",{class:"alert alert-warning"},[e("span",{class:"icon iconly icon-attention"}),e("strong",null,"Attention :"),b(" cette opération peut avoir un impact déterminant sur le calcul de vos heures complémentaires et par extension sur tous vos paiements. En outre, le fichier doit être bâti selon un modèle bien précis. Vous êtes invités à ne téléverser que des tableurs préparés ou validés par l'équipe OSE. ")],-1)),ps=["action"],fs=K('<div class="form-group mb-3" data-v-ba77464f><label for="formule-name" data-v-ba77464f>Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier" data-v-ba77464f></div><div class="form-group" data-v-ba77464f><button type="submit" class="btn btn-primary" data-v-ba77464f>Ajout/Modification à partir d&#39;un tableur</button></div>',2),bs=[fs];function vs(t,s,n,p,r,i){return a(),l(y,null,[xt,e("table",Ct,[Vt,e("tbody",null,[(a(!0),l(y,null,x(n.formules,u=>(a(),l("tr",{key:t.id,class:D({desactivee:!u.active}),title:u.active?"":"Cette formule est désactivée"},[e("td",null,[b(d(u.libelle),1),Pt,e("i",null,d(u.code),1)]),e("td",null,[u.iParam1Libelle?(a(),l("div",kt,[At,Mt,b(" "+d(u.iParam1Libelle),1)])):h("",!0),u.iParam2Libelle?(a(),l("div",Dt,[Et,Tt,b(" "+d(u.iParam2Libelle),1)])):h("",!0),u.iParam3Libelle?(a(),l("div",Ut,[Ft,Rt,b(" "+d(u.iParam3Libelle),1)])):h("",!0),u.iParam4Libelle?(a(),l("div",It,[wt,$t,b(" "+d(u.iParam4Libelle),1)])):h("",!0),u.iParam5Libelle?(a(),l("div",Ht,[Lt,Nt,b(" "+d(u.iParam5Libelle),1)])):h("",!0),u.vhParam1Libelle?(a(),l("div",jt,[Ot,qt,b(" "+d(u.vhParam1Libelle),1)])):h("",!0),u.vhParam2Libelle?(a(),l("div",zt,[Bt,Gt,b(" "+d(u.vhParam2Libelle),1)])):h("",!0),u.vhParam3Libelle?(a(),l("div",Jt,[Yt,Qt,b(" "+d(u.vhParam3Libelle),1)])):h("",!0),u.vhParam4Libelle?(a(),l("div",Wt,[Xt,Zt,b(" "+d(u.vhParam4Libelle),1)])):h("",!0),u.vhParam5Libelle?(a(),l("div",Kt,[es,ts,b(" "+d(u.vhParam5Libelle),1)])):h("",!0)]),u.delegationAnnee?(a(),l("td",ss,[b("Avant "+d(u.delegationAnnee)+"/"+d(u.delegationAnnee+1)+", utilise ",1),e("i",null,d(u.delegationFormule),1)])):(a(),l("td",rs)),e("td",null,[e("a",{href:this.telechargementUrl(u.id)},[as,b(" tableur")],8,is),ls,this.canEdit?(a(),l("a",{key:0,href:this.detailsUrl(u.id)},[us,b(" code PHP")],8,os)):h("",!0)])],10,St))),128))])]),ds,this.canEdit?(a(),l("div",cs,[ms,e("div",hs,[_s,e("form",{method:"post",enctype:"multipart/form-data",action:this.televersementUrl()},bs,8,ps)])])):h("",!0)],64)}const gs=P(yt,[["render",vs],["__scopeId","data-v-ba77464f"]]),ys=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"})),xs={name:"Details",components:{},props:{intervenant:{type:Number},typesVolumesHoraires:{type:Object}},data(){return{data:{},typeVolumeHoraire:null,etatVolumeHoraire:null}},mounted(){if(this.countChoix()==1){for(let t in this.typesVolumesHoraires){this.typeVolumeHoraire=t;for(let s in this.typesVolumesHoraires[t].etats)this.etatVolumeHoraire=s}this.load(this.typeVolumeHoraire,this.etatVolumeHoraire)}},methods:{load(t,s){this.typeVolumeHoraire=t,this.etatVolumeHoraire=s;const n={intervenant:this.intervenant,typeVolumeHoraire:this.typeVolumeHoraire,etatVolumeHoraire:this.etatVolumeHoraire};unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/formule/details-data/:typeVolumeHoraire/:etatVolumeHoraire",n)).then(p=>{this.data=p.data})},dataUrl(){},countChoix(){let t=0;for(let s in this.typesVolumesHoraires)for(let n in this.typesVolumesHoraires[s].etats)t++;return t}},computed:{listeTypes(){let t={};for(let s in this.typesVolumesHoraires)t[s]=this.typesVolumesHoraires[s].libelle;return t},listeEtats(){let t={};for(let n in this.typesVolumesHoraires)for(let p in this.typesVolumesHoraires[n].etats)t[p]=this.typesVolumesHoraires[n].etats[p];return Object.keys(t).sort((n,p)=>n-p).reduce((n,p)=>(n[p]=t[p],n),{})}}},Cs={key:0},Vs={class:"d-flex justify-content-center align-items-center"},Ss={class:"table table-borderless table-xs"},Ps={key:0},ks=["onClick"],As={key:0,class:"alert alert-info"},Ms={key:1},Ds={key:2};function Es(t,s,n,p,r,i){return a(),l(y,null,[i.countChoix()>1?(a(),l("div",Cs,[e("div",Vs,[e("div",null,[e("table",Ss,[(a(!0),l(y,null,x(i.listeTypes,(u,m)=>(a(),l("tr",{key:m},[(a(!0),l(y,null,x(i.listeEtats,(c,o)=>(a(),l("td",{key:o},[n.typesVolumesHoraires[m].etats[o]?(a(),l("div",Ps,[e("a",{class:D({"btn btn-outline-secondary btn-choixtevh":!0,active:!(m==r.typeVolumeHoraire&&o==r.etatVolumeHoraire)}),onClick:V=>i.load(m,o)},d(u)+" "+d(c),11,ks)])):h("",!0)]))),128))]))),128))])])]),r.typeVolumeHoraire?h("",!0):(a(),l("div",As,"Veuillez cliquer sur un des boutons ci-dessus pour afficher de détail de calcul des HETD"))])):(a(),l("div",Ms,[e("h2",null,d(i.listeTypes[r.typeVolumeHoraire])+" "+d(i.listeEtats[r.etatVolumeHoraire]),1)])),Object.keys(this.data).length>0?(a(),l("div",Ds,d(r.data),1)):h("",!0)],64)}const Ts=P(xs,[["render",Es],["__scopeId","data-v-bacb100d"]]),Us=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"})),Fs={data(){return{dataUrl:unicaenVue.url("formule-test/data"),lines:[]}},methods:{addUrl(){return unicaenVue.url("formule-test/saisir")},editUrl(t){return unicaenVue.url("formule-test/saisir/:id",{id:t})},deleteUrl(t){return unicaenVue.url("formule-test/supprimer/:id",{id:t})},importUrl(){return unicaenVue.url("formule-test/import")},supprimerTest(t){return popConfirm(t.currentTarget,s=>{this.$refs.testsFormules.getData()}),!1}}},Rs=e("h1",{class:"page-header"},"Page de tests de formule de calcul des HETD",-1),Is=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"LIBELLE"},"Libellé"),e("th",{column:"FORMULE"},"Formule"),e("th",{column:"ANNEE"},"Année"),e("th",null," ")])],-1),ws={style:{width:"1%","white-space":"nowrap"}},$s=["href"],Hs=e("i",{class:"fas fa-pencil"},null,-1),Ls=[Hs],Ns=["href"],js=e("i",{class:"fas fa-trash-can"},null,-1),Os=[js],qs=e("br",null,null,-1),zs=e("br",null,null,-1),Bs={class:"card bg-warning"},Gs=e("div",{class:"card-header"},[e("h3",null,"Import d'un nouveau test à partir d'un tableur")],-1),Js={class:"card-body"},Ys=["action"],Qs=K('<div class="form-group mb-3"><label for="formule-name">Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier"></div><div class="form-group"><button type="submit" class="btn btn-primary">Import d&#39;un test à partir d&#39;un tableur</button></div>',2),Ws=[Qs];function Xs(t,s,n,p,r,i){const u=ee,m=re;return a(),l(y,null,[Rs,_(u,{"data-url":this.dataUrl,modelValue:r.lines,"onUpdate:modelValue":s[1]||(s[1]=c=>r.lines=c),ref:"testsFormules"},{default:T(()=>[Is,e("tbody",null,[(a(!0),l(y,null,x(r.lines,(c,o)=>(a(),l("tr",{key:o},[e("td",null,d(c.ID),1),e("td",null,d(c.LIBELLE),1),e("td",null,d(c.FORMULE),1),e("td",null,d(c.ANNEE),1),e("td",ws,[e("a",{href:i.editUrl(c.ID),title:"Modification du test de formule"},Ls,8,$s),b("   "),e("a",{href:i.deleteUrl(c.ID),title:"Suppression du test de formule","data-content":"Êtes-vous sur de vouloir supprimer ce test ?","data-title":"Suppression du test de formule",onClick:s[0]||(s[0]=S((...V)=>i.supprimerTest&&i.supprimerTest(...V),["prevent"]))},Os,8,Ns)])]))),128))])]),_:1},8,["data-url","modelValue"]),_(m,{variant:"primary",href:i.addUrl()},{default:T(()=>[b("Ajout d'un nouveau test")]),_:1},8,["href"]),qs,zs,e("div",Bs,[Gs,e("div",Js,[e("form",{method:"post",enctype:"multipart/form-data",action:this.importUrl()},Ws,8,Ys)])])],64)}const Zs=P(Fs,[["render",Xs]]),Ks=Object.freeze(Object.defineProperty({__proto__:null,default:Zs},Symbol.toStringTag,{value:"Module"})),en={props:{id:{type:Number},formules:{type:Object},annees:{type:Object},typesIntervenants:{type:Object},typesVolumesHoraires:{type:Object},etatsVolumesHoraires:{type:Object},defaultFormule:{type:Number}},data(){return{indexUrl:unicaenVue.url("formule-test"),dataUrl:unicaenVue.url("formule-test/data"),tauxAutre1Visibility:!0,tauxAutre2Visibility:!1,tauxAutre3Visibility:!1,tauxAutre4Visibility:!1,tauxAutre5Visibility:!1,resMode:"hetd",debug:{},intervenant:{formule:void 0,tauxCmServiceDu:1.5,tauxCmServiceCompl:1.5,tauxTpServiceDu:1,tauxTpServiceCompl:.6666666666667},volumesHoraires:[],formule:{iParam1Libelle:void 0,iParam2Libelle:void 0,iParam3Libelle:void 0,iParam4Libelle:void 0,iParam5Libelle:void 0,vhParam1Libelle:void 0,vhParam2Libelle:void 0,vhParam3Libelle:void 0,vhParam4Libelle:void 0,vhParam5Libelle:void 0},structures:{},typesIntervention:["CM","TD","TP",void 0,void 0,void 0,void 0,void 0,"Référentiel"]}},watch:{"intervenant.tauxAutre1Code"(t){this.tauxAutre2Visibility=t||this.intervenant.tauxAutre1Code||this.intervenant.tauxAutre2ServiceDu||this.intervenant.tauxAutre2ServiceCompl,this.typesIntervention[3]=t},"intervenant.tauxAutre2Code"(t){this.tauxAutre3Visibility=t||this.intervenant.tauxAutre2Code||this.intervenant.tauxAutre3ServiceDu||this.intervenant.tauxAutre3ServiceCompl,this.typesIntervention[4]=t},"intervenant.tauxAutre3Code"(t){this.tauxAutre4Visibility=t||this.intervenant.tauxAutre3Code||this.intervenant.tauxAutre4ServiceDu||this.intervenant.tauxAutre4ServiceCompl,this.typesIntervention[5]=t},"intervenant.tauxAutre4Code"(t){this.tauxAutre5Visibility=t||this.intervenant.tauxAutre4Code||this.intervenant.tauxAutre5ServiceDu||this.intervenant.tauxAutre5ServiceCompl,this.typesIntervention[6]=t},"intervenant.tauxAutre5Code"(t){this.typesIntervention[7]=t},"intervenant.formule"(t){t&&(this.formule=this.formules[t])}},computed:{filteredTypesIntervention(){let t=Object.values(this.typesIntervention).filter(s=>s);return t.unshift(""),t},vhParamCount(){let t=0;for(let s=1;s<6;s++)this.formule["vhParam"+s+"Libelle"]&&t++;return t}},methods:{charger(){unicaenVue.axios.get(unicaenVue.url("formule-test/saisir-data/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0})).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,this.debug={},this.addVolumeHoraire(),this.updateStructures()})},enregistrer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,t.data.debug?this.debug=t.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},calculer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires,simpleCalcul:!0}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,t.data.debug?this.debug=t.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},exporter:function(){const t={intervenant:this.intervenant,volumesHoraires:this.volumesHoraires},s=this.intervenant.libelle;var n=document.createElement("a"),p=new Blob([JSON.stringify(t)],{type:"text/json"});n.href=window.URL.createObjectURL(p),n.download="Test de formule "+s+".json",n.click()},exporterCsv:function(){let t=`Structure;Compte dans le service statutaire;Heures non payables;Type d’intervention;Taux FI;Taux FA;Taux FC;Modulation service dû;Modulation service compl.;Param 1;Param 2;Param 3;Param 4;Param 5;Heures;Service FI;Service FA;Service FC;Service Référentiel;HC FI;HC FA;HC FC;HC Référentiel;Primes;Non payable FI;Non payable FA;Non payable FC;Non payable Référentiel
`;for(const r in this.volumesHoraires){const i=this.volumesHoraires[r];t+=(i.structureCode?i.structureCode:"")+";"+(i.serviceStatutaire?"Oui":"Non")+";"+(i.nonPayable?"Oui":"Non")+";"+(i.referentiel?"Référentiel":i.typeInterventionCode?i.typeInterventionCode:"")+";"+(i.tauxFi?i.tauxFi.toLocaleString("fr-FR"):"")+";"+(i.tauxFa?i.tauxFa.toLocaleString("fr-FR"):"")+";"+(i.tauxFc?i.tauxFc.toLocaleString("fr-FR"):"")+";"+(i.ponderationServiceDu?i.ponderationServiceDu.toLocaleString("fr-FR"):"")+";"+(i.ponderationServiceCompl?i.ponderationServiceCompl.toLocaleString("fr-FR"):"")+";"+(i.param1?i.param1:"")+";"+(i.param2?i.param2:"")+";"+(i.param3?i.param3:"")+";"+(i.param4?i.param4:"")+";"+(i.param5?i.param5:"")+";"+(i.heures?i.heures.toLocaleString("fr-FR"):"")+";"+(i.heuresServiceFi?i.heuresServiceFi.toLocaleString("fr-FR"):"")+";"+(i.heuresServiceFa?i.heuresServiceFa.toLocaleString("fr-FR"):"")+";"+(i.heuresServiceFc?i.heuresServiceFc.toLocaleString("fr-FR"):"")+";"+(i.heuresServiceReferentiel?i.heuresServiceReferentiel.toLocaleString("fr-FR"):"")+";"+(i.heuresComplFi?i.heuresComplFi.toLocaleString("fr-FR"):"")+";"+(i.heuresComplFa?i.heuresComplFa.toLocaleString("fr-FR"):"")+";"+(i.heuresComplFc?i.heuresComplFc.toLocaleString("fr-FR"):"")+";"+(i.heuresComplReferentiel?i.heuresComplReferentiel.toLocaleString("fr-FR"):"")+";"+(i.heuresPrimes?i.heuresPrimes.toLocaleString("fr-FR"):"")+";"+(i.heuresNonPayableFi?i.heuresNonPayableFi.toLocaleString("fr-FR"):"")+";"+(i.heuresNonPayableFa?i.heuresNonPayableFa.toLocaleString("fr-FR"):"")+";"+(i.heuresNonPayableFc?i.heuresNonPayableFc.toLocaleString("fr-FR"):"")+";"+(i.heuresNonPayableReferentiel?i.heuresNonPayableReferentiel.toLocaleString("fr-FR"):"")+`;
`}const s=this.intervenant.libelle;var n=document.createElement("a"),p=new Blob([t],{type:"text/csv"});n.href=window.URL.createObjectURL(p),n.download="Test de formule "+s+".csv",n.click()},importer:function(t){const s=t.target.files[0];if(!s.type.match("application/json")){console.error("Le fichier n'est pas de type JSON.");return}const n=new FileReader;n.onload=p=>{try{const r=JSON.parse(p.target.result);this.intervenant=r.intervenant,this.volumesHoraires=r.volumesHoraires,this.updateStructures()}catch(r){console.error("Erreur lors de l'analyse du contenu JSON :",r)}},n.readAsText(s)},dropTauxNonUtilises(t){return t.tauxAutre1Code||(t.tauxAutre1ServiceDu=void 0,t.tauxAutre1ServiceCompl=void 0),t.tauxAutre2Code||(t.tauxAutre2ServiceDu=void 0,t.tauxAutre2ServiceCompl=void 0),t.tauxAutre3Code||(t.tauxAutre3ServiceDu=void 0,t.tauxAutre3ServiceCompl=void 0),t.tauxAutre4Code||(t.tauxAutre4ServiceDu=void 0,t.tauxAutre4ServiceCompl=void 0),t.tauxAutre5Code||(t.tauxAutre5ServiceDu=void 0,t.tauxAutre5ServiceCompl=void 0),t},updateStructures(){let t={"":""};this.intervenant.structureCode&&(t[this.intervenant.structureCode]=this.intervenant.structureCode);for(let s in this.volumesHoraires){const n=this.volumesHoraires[s].structureCode;n&&(t[n]=n)}t.__UNIV__="Université (établissement)",t.__EXTERIEUR__="Extérieur (autre établissement)",t.__new_structure__="- Ajout d'une nouvelle structure -",this.structures=t},selectStructure(t){if(t.target.value=="__new_structure__"&&this.addStructure(t.target),t.target.dataset.variable!="intervenant"){const s=parseInt(t.target.dataset.variable);s==this.lastVolumeHoraireIndex()&&this.volumesHoraires[s].structureCode&&this.addVolumeHoraire()}},majTauxFi(t){const s=t.target.dataset.variable;this.volumesHoraires[s].tauxFi=1-this.volumesHoraires[s].tauxFa-this.volumesHoraires[s].tauxFc},lastVolumeHoraireIndex(){return this.volumesHoraires.length==0?-1:parseInt(Object.keys(this.volumesHoraires).pop())},addVolumeHoraire(){this.volumesHoraires.push({structureCode:null,typeInterventionCode:null,tauxFi:1,tauxFa:0,tauxFc:0,ponderationServiceDu:1,ponderationServiceCompl:1,serviceStatutaire:!0,heures:null})},addStructure(t){const s=prompt("Ajout d'une nouvelle structure");this.structures[s]=s,setTimeout(()=>{const n=t.dataset.variable;n=="intervenant"?this.intervenant.structureCode=s:this.volumesHoraires[n].structureCode=s},200)}},mounted(){this.charger()}},C=t=>(z("data-v-3894f4a0"),t=t(),B(),t),tn=C(()=>e("h1",{class:"page-header"},"Modification d'un test de formule",-1)),sn={class:"row"},nn={class:"col-md-6"},rn=C(()=>e("h2",null,"Intervenant",-1)),an={class:"table table-xs table-bordered fti"},ln=C(()=>e("th",null,"Libellé",-1)),on={class:"saisie"},un=C(()=>e("th",null,"Formule",-1)),dn={class:"saisie"},cn=["value"],mn=C(()=>e("th",null,"Année",-1)),hn={class:"saisie"},_n=["value"],pn=C(()=>e("th",null,"Type",-1)),fn={class:"saisie"},bn=["value"],vn=C(()=>e("th",null,"Structure",-1)),gn={class:"saisie"},yn=["value"],xn=C(()=>e("th",null,"Type de volume horaire",-1)),Cn={class:"saisie"},Vn=["value"],Sn=C(()=>e("th",null,"État de volume horaire",-1)),Pn={class:"saisie"},kn=["value"],An=C(()=>e("th",null,"Heures de service statutaire",-1)),Mn={class:"saisie"},Dn=C(()=>e("th",null,"Heures de service modifié",-1)),En={class:"saisie"},Tn=C(()=>e("th",null,"Dépassement de service dû sans HC",-1)),Un={class:"saisie"},Fn=C(()=>e("option",{value:!0},"Oui",-1)),Rn=C(()=>e("option",{value:!1},"Non",-1)),In=[Fn,Rn],wn={class:"i-param i-param-1"},$n={class:"i-param"},Hn={class:"saisie"},Ln={class:"i-param i-param-2"},Nn={class:"i-param"},jn={class:"saisie"},On={class:"i-param i-param-3"},qn={class:"i-param"},zn={class:"saisie"},Bn={class:"i-param i-param-4"},Gn={class:"i-param"},Jn={class:"saisie"},Yn={class:"i-param i-param-5"},Qn={class:"i-param"},Wn={class:"saisie"},Xn={class:"actions"},Zn={class:"row mb-4"},Kn={class:"col-md-6"},er={class:"col-md-6"},tr={class:"row mb-4"},sr={class:"col-md-6"},nr={class:"col-md-6"},rr={for:"importbtn"},ir=C(()=>e("span",{class:"btn btn-secondary"},"Téléverser un jeu de données",-1)),ar={class:"row"},lr={class:"col-md-6"},or={class:"col-md-5"},ur=C(()=>e("h2",null,"Types d'intervention (HETD)",-1)),dr={class:"types-interventions"},cr={class:"table table-bordered table-xs"},mr=C(()=>e("tr",null,[e("th"),e("th",{colspan:"3"},"Standards"),e("th",{colspan:"5"},"Personnalisés")],-1)),hr=C(()=>e("th",{style:{width:"20%"}},null,-1)),_r=C(()=>e("th",{style:{width:"5%"}},"CM",-1)),pr=C(()=>e("th",{style:{width:"5%"}},"TD",-1)),fr=C(()=>e("th",{style:{width:"5%"}},"TP",-1)),br={style:{width:"10%"}},vr={style:{width:"10%"}},gr={style:{width:"10%"}},yr={style:{width:"10%"}},xr={style:{width:"10%"}},Cr=C(()=>e("th",null,"En service",-1)),Vr={class:"saisie"},Sr=C(()=>e("td",null,"1",-1)),Pr={class:"saisie"},kr={class:"saisie"},Ar={class:"saisie"},Mr={class:"saisie"},Dr={class:"saisie"},Er={class:"saisie"},Tr=C(()=>e("th",null,"Au-delà du service",-1)),Ur={class:"saisie"},Fr=C(()=>e("td",null,"1",-1)),Rr={class:"saisie"},Ir={class:"saisie"},wr={class:"saisie"},$r={class:"saisie"},Hr={class:"saisie"},Lr={class:"saisie"},Nr=C(()=>e("h2",null,"Résultat",-1)),jr={class:"table table-xs table-bordered resultats"},Or=C(()=>e("th",{colspan:"2"},"Service dû",-1)),qr=C(()=>e("th",{rowspan:"4"},"Service",-1)),zr=C(()=>e("th",null,"FI",-1)),Br=C(()=>e("th",null,"FA",-1)),Gr=C(()=>e("th",null,"FC",-1)),Jr=C(()=>e("th",null,"Référentiel",-1)),Yr=C(()=>e("th",{colspan:"2"},"Total service dû assuré",-1)),Qr=C(()=>e("th",{rowspan:"4"},"Heures compl.",-1)),Wr=C(()=>e("th",null,"FI",-1)),Xr=C(()=>e("th",null,"FA",-1)),Zr=C(()=>e("th",null,"FC",-1)),Kr=C(()=>e("th",null,"Référentiel",-1)),ei=C(()=>e("th",{colspan:"2"},"Total heures compl. à payer",-1)),ti=C(()=>e("th",{colspan:"2"},"Primes",-1)),si=C(()=>e("th",{rowspan:"4"},"Heures non payables",-1)),ni=C(()=>e("th",null,"FI",-1)),ri=C(()=>e("th",null,"FA",-1)),ii=C(()=>e("th",null,"FC",-1)),ai=C(()=>e("th",null,"Référentiel",-1)),li=C(()=>e("th",{colspan:"2"},"Total heures non payables",-1)),oi=C(()=>e("h2",null,"Heures effectuées (A saisir de manière chronologique)",-1)),ui={class:"table table-bordered table-xs table-hover fvh"},di=C(()=>e("th",{rowspan:"3"},null,-1)),ci=["colspan"],mi=C(()=>e("th",{rowspan:"3",class:"spacer"}," ",-1)),hi={colspan:"13"},_i=C(()=>e("option",{value:"attendu"},"Résultats attendus (en HETD)",-1)),pi=C(()=>e("option",{value:"hetd",selected:"selected"},"Résultats calculés (en HETD)",-1)),fi=C(()=>e("option",{value:"debug"},"Informations de débogage",-1)),bi=[_i,pi,fi],vi=C(()=>e("th",{rowspan:"2",style:{"min-width":"10em"}},"Structure",-1)),gi=C(()=>e("th",{rowspan:"2"},"Compte dans le service statutaire",-1)),yi=C(()=>e("th",{rowspan:"2",style:{"min-width":"5em"}},"Type d'intervention",-1)),xi=C(()=>e("th",{colspan:"3"},"Répartition",-1)),Ci=C(()=>e("th",{colspan:"2"},"Modulation",-1)),Vi=["colspan"],Si=C(()=>e("th",{rowspan:"2"},"Heures",-1)),Pi={colspan:"4"},ki={colspan:"4"},Ai={rowspan:"2"},Mi={colspan:"4"},Di={colspan:"4"},Ei={colspan:"4"},Ti={rowspan:"2"},Ui={colspan:"4"},Fi={rowspan:"2"},Ri=C(()=>e("th",null,"Fi",-1)),Ii=C(()=>e("th",null,"Fa",-1)),wi=C(()=>e("th",null,"Fc",-1)),$i=C(()=>e("th",null,"Service dû",-1)),Hi=C(()=>e("th",null,"Service compl.",-1)),Li=["onUpdate:modelValue","data-variable"],Ni=["value"],ji=["onUpdate:modelValue"],Oi=C(()=>e("option",{value:!0},"Oui",-1)),qi=C(()=>e("option",{value:!1},"Non",-1)),zi=[Oi,qi],Bi=["onUpdate:modelValue"],Gi=["value"],Ji=C(()=>e("span",{class:"pourc"},"%",-1)),Yi=C(()=>e("span",{class:"pourc"},"%",-1)),Qi=C(()=>e("span",{class:"pourc"},"%",-1)),Wi=C(()=>e("span",{class:"pourc"},"%",-1)),Xi=C(()=>e("span",{class:"pourc"},"%",-1)),Zi=["onUpdate:modelValue"],Ki=["onUpdate:modelValue"],ea=["onUpdate:modelValue"],ta=["onUpdate:modelValue"],sa=["onUpdate:modelValue"],na=C(()=>e("td",{class:"spacer"},null,-1)),ra={class:"debug-td"},ia={key:0},aa={class:"debug-cell"},la={class:"debug-val"},oa={key:0},ua=C(()=>e("h4",null,"Débogage : calculs globaux",-1)),da={class:"debug-cell"},ca={class:"debug-val"},ma=["href"],ha=C(()=>e("i",{class:"fas fa-rotate-left","aria-hidden":"true"},null,-1));function _a(t,s,n,p,r,i){const u=F("u-input-float"),m=re,c=F("u-heures");return a(),l(y,null,[tn,e("div",sn,[e("div",nn,[rn,e("table",an,[e("tr",null,[ln,e("td",on,[v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>r.intervenant.libelle=o),class:"dinput"},null,512),[[E,r.intervenant.libelle]])])]),e("tr",null,[un,e("td",dn,[v(e("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>r.intervenant.formule=o),class:"dinput"},[(a(!0),l(y,null,x(n.formules,o=>(a(),l("option",{value:o.id},d(o.libelle),9,cn))),256))],512),[[U,r.intervenant.formule]])])]),e("tr",null,[mn,e("td",hn,[v(e("select",{"onUpdate:modelValue":s[2]||(s[2]=o=>r.intervenant.annee=o),class:"dinput"},[(a(!0),l(y,null,x(n.annees,o=>(a(),l("option",{value:o.id},d(o.libelle),9,_n))),256))],512),[[U,r.intervenant.annee]])])]),e("tr",null,[pn,e("td",fn,[v(e("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>r.intervenant.typeIntervenant=o),class:"dinput"},[(a(!0),l(y,null,x(n.typesIntervenants,o=>(a(),l("option",{value:o.id},d(o.libelle),9,bn))),256))],512),[[U,r.intervenant.typeIntervenant]])])]),e("tr",null,[vn,e("td",gn,[v(e("select",{"onUpdate:modelValue":s[4]||(s[4]=o=>r.intervenant.structureCode=o),"data-variable":"intervenant",class:"dinput",onChange:s[5]||(s[5]=(...o)=>i.selectStructure&&i.selectStructure(...o))},[(a(!0),l(y,null,x(r.structures,(o,V)=>(a(),l("option",{value:V,key:V},d(o),9,yn))),128))],544),[[U,r.intervenant.structureCode]])])]),e("tr",null,[xn,e("td",Cn,[v(e("select",{"onUpdate:modelValue":s[6]||(s[6]=o=>r.intervenant.typeVolumeHoraire=o),class:"dinput"},[(a(!0),l(y,null,x(n.typesVolumesHoraires,o=>(a(),l("option",{value:o.id},d(o.libelle),9,Vn))),256))],512),[[U,r.intervenant.typeVolumeHoraire]])])]),e("tr",null,[Sn,e("td",Pn,[v(e("select",{"onUpdate:modelValue":s[7]||(s[7]=o=>r.intervenant.etatVolumeHoraire=o),class:"dinput"},[(a(!0),l(y,null,x(n.etatsVolumesHoraires,o=>(a(),l("option",{value:o.id},d(o.libelle),9,kn))),256))],512),[[U,r.intervenant.etatVolumeHoraire]])])]),e("tr",null,[An,e("td",Mn,[_(u,{modelValue:r.intervenant.heuresServiceStatutaire,"onUpdate:modelValue":s[8]||(s[8]=o=>r.intervenant.heuresServiceStatutaire=o),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[Dn,e("td",En,[_(u,{modelValue:r.intervenant.heuresServiceModifie,"onUpdate:modelValue":s[9]||(s[9]=o=>r.intervenant.heuresServiceModifie=o),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[Tn,e("td",Un,[v(e("select",{"onUpdate:modelValue":s[10]||(s[10]=o=>r.intervenant.depassementServiceDuSansHC=o),class:"dinput"},In,512),[[U,r.intervenant.depassementServiceDuSansHC]])])]),v(e("tr",wn,[e("th",$n,d(r.formule.iParam1Libelle),1),e("td",Hn,[v(e("input",{"onUpdate:modelValue":s[11]||(s[11]=o=>r.intervenant.param1=o),class:"dinput"},null,512),[[E,r.intervenant.param1]])])],512),[[g,r.formule.iParam1Libelle]]),v(e("tr",Ln,[e("th",Nn,d(r.formule.iParam2Libelle),1),e("td",jn,[v(e("input",{"onUpdate:modelValue":s[12]||(s[12]=o=>r.intervenant.param2=o),class:"dinput"},null,512),[[E,r.intervenant.param2]])])],512),[[g,r.formule.iParam2Libelle]]),v(e("tr",On,[e("th",qn,d(r.formule.iParam3Libelle),1),e("td",zn,[v(e("input",{"onUpdate:modelValue":s[13]||(s[13]=o=>r.intervenant.param3=o),class:"dinput"},null,512),[[E,r.intervenant.param3]])])],512),[[g,r.formule.iParam3Libelle]]),v(e("tr",Bn,[e("th",Gn,d(r.formule.iParam4Libelle),1),e("td",Jn,[v(e("input",{"onUpdate:modelValue":s[14]||(s[14]=o=>r.intervenant.param4=o),class:"dinput"},null,512),[[E,r.intervenant.param4]])])],512),[[g,r.formule.iParam4Libelle]]),v(e("tr",Yn,[e("th",Qn,d(r.formule.iParam5Libelle),1),e("td",Wn,[v(e("input",{"onUpdate:modelValue":s[15]||(s[15]=o=>r.intervenant.param5=o),class:"dinput"},null,512),[[E,r.intervenant.param5]])])],512),[[g,r.formule.iParam5Libelle]])]),e("div",Xn,[e("div",Zn,[e("div",Kn,[_(m,{variant:"primary",onClick:i.enregistrer},{default:T(()=>[b("Enregistrer les données")]),_:1},8,["onClick"])]),e("div",er,[_(m,{variant:"secondary",onClick:i.calculer},{default:T(()=>[b("Calculer les HETD")]),_:1},8,["onClick"])])]),e("div",tr,[e("div",sr,[e("button",{class:"exporter btn btn-secondary",onClick:s[16]||(s[16]=(...o)=>i.exporter&&i.exporter(...o))},"Télécharger les données")]),e("div",nr,[e("label",rr,[ir,e("input",{type:"file",id:"importbtn",class:"importer",onChange:s[17]||(s[17]=(...o)=>i.importer&&i.importer(...o))},null,32)])])]),e("div",ar,[e("div",lr,[e("button",{class:"exporter btn btn-secondary",onClick:s[18]||(s[18]=(...o)=>i.exporterCsv&&i.exporterCsv(...o))},"Télécharger les données en CSV ")])])])]),e("div",or,[ur,e("div",dr,[e("table",cr,[mr,e("tr",null,[hr,_r,pr,fr,v(e("th",br,[v(e("input",{"onUpdate:modelValue":s[19]||(s[19]=o=>r.intervenant.tauxAutre1Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre1Code]])],512),[[g,r.tauxAutre1Visibility]]),v(e("th",vr,[v(e("input",{"onUpdate:modelValue":s[20]||(s[20]=o=>r.intervenant.tauxAutre2Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre2Code]])],512),[[g,r.tauxAutre2Visibility]]),v(e("th",gr,[v(e("input",{"onUpdate:modelValue":s[21]||(s[21]=o=>r.intervenant.tauxAutre3Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre3Code]])],512),[[g,r.tauxAutre3Visibility]]),v(e("th",yr,[v(e("input",{"onUpdate:modelValue":s[22]||(s[22]=o=>r.intervenant.tauxAutre4Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre4Code]])],512),[[g,r.tauxAutre4Visibility]]),v(e("th",xr,[v(e("input",{"onUpdate:modelValue":s[23]||(s[23]=o=>r.intervenant.tauxAutre5Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre5Code]])],512),[[g,r.tauxAutre5Visibility]])]),e("tr",null,[Cr,e("td",Vr,[_(u,{modelValue:r.intervenant.tauxCmServiceDu,"onUpdate:modelValue":s[24]||(s[24]=o=>r.intervenant.tauxCmServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),Sr,e("td",Pr,[_(u,{modelValue:r.intervenant.tauxTpServiceDu,"onUpdate:modelValue":s[25]||(s[25]=o=>r.intervenant.tauxTpServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),v(e("td",kr,[_(u,{modelValue:r.intervenant.tauxAutre1ServiceDu,"onUpdate:modelValue":s[26]||(s[26]=o=>r.intervenant.tauxAutre1ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre1Visibility]]),v(e("td",Ar,[_(u,{modelValue:r.intervenant.tauxAutre2ServiceDu,"onUpdate:modelValue":s[27]||(s[27]=o=>r.intervenant.tauxAutre2ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre2Visibility]]),v(e("td",Mr,[_(u,{modelValue:r.intervenant.tauxAutre3ServiceDu,"onUpdate:modelValue":s[28]||(s[28]=o=>r.intervenant.tauxAutre3ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre3Visibility]]),v(e("td",Dr,[_(u,{modelValue:r.intervenant.tauxAutre4ServiceDu,"onUpdate:modelValue":s[29]||(s[29]=o=>r.intervenant.tauxAutre4ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre4Visibility]]),v(e("td",Er,[_(u,{modelValue:r.intervenant.tauxAutre5ServiceDu,"onUpdate:modelValue":s[30]||(s[30]=o=>r.intervenant.tauxAutre5ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre5Visibility]])]),e("tr",null,[Tr,e("td",Ur,[_(u,{modelValue:r.intervenant.tauxCmServiceCompl,"onUpdate:modelValue":s[31]||(s[31]=o=>r.intervenant.tauxCmServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),Fr,e("td",Rr,[_(u,{modelValue:r.intervenant.tauxTpServiceCompl,"onUpdate:modelValue":s[32]||(s[32]=o=>r.intervenant.tauxTpServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),v(e("td",Ir,[_(u,{modelValue:r.intervenant.tauxAutre1ServiceCompl,"onUpdate:modelValue":s[33]||(s[33]=o=>r.intervenant.tauxAutre1ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre1Visibility]]),v(e("td",wr,[_(u,{modelValue:r.intervenant.tauxAutre2ServiceCompl,"onUpdate:modelValue":s[34]||(s[34]=o=>r.intervenant.tauxAutre2ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre2Visibility]]),v(e("td",$r,[_(u,{modelValue:r.intervenant.tauxAutre3ServiceCompl,"onUpdate:modelValue":s[35]||(s[35]=o=>r.intervenant.tauxAutre3ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre3Visibility]]),v(e("td",Hr,[_(u,{modelValue:r.intervenant.tauxAutre4ServiceCompl,"onUpdate:modelValue":s[36]||(s[36]=o=>r.intervenant.tauxAutre4ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre4Visibility]]),v(e("td",Lr,[_(u,{modelValue:r.intervenant.tauxAutre5ServiceCompl,"onUpdate:modelValue":s[37]||(s[37]=o=>r.intervenant.tauxAutre5ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre5Visibility]])])])]),Nr,e("table",jr,[e("tr",null,[Or,e("td",null,[_(c,{valeur:r.intervenant.serviceDu??NaN},null,8,["valeur"])])]),e("tr",null,[qr,zr,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFi??NaN},null,8,["valeur"])])]),e("tr",null,[Br,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFa??NaN},null,8,["valeur"])])]),e("tr",null,[Gr,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFc??NaN},null,8,["valeur"])])]),e("tr",null,[Jr,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[Yr,e("td",null,[_(c,{valeur:r.intervenant.heuresService??NaN},null,8,["valeur"])])]),e("tr",null,[Qr,Wr,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFi??NaN},null,8,["valeur"])])]),e("tr",null,[Xr,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFa??NaN},null,8,["valeur"])])]),e("tr",null,[Zr,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFc??NaN},null,8,["valeur"])])]),e("tr",null,[Kr,e("td",null,[_(c,{valeur:r.intervenant.heuresComplReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[ei,e("td",null,[_(c,{valeur:r.intervenant.heuresCompl??NaN},null,8,["valeur"])])]),e("tr",null,[ti,e("td",null,[_(c,{valeur:r.intervenant.heuresPrimes??NaN},null,8,["valeur"])])]),e("tr",null,[si,ni,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFi??NaN},null,8,["valeur"])])]),e("tr",null,[ri,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFa??NaN},null,8,["valeur"])])]),e("tr",null,[ii,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFc??NaN},null,8,["valeur"])])]),e("tr",null,[ai,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[li,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayable??NaN},null,8,["valeur"])])])])]),oi,e("table",ui,[e("thead",null,[e("tr",null,[di,e("th",{colspan:9+i.vhParamCount,class:"vh-donnees"},"Données",8,ci),mi,e("th",hi,[v(e("select",{"onUpdate:modelValue":s[38]||(s[38]=o=>r.resMode=o),class:"form-select res-mode"},bi,512),[[U,r.resMode]])])]),e("tr",null,[vi,gi,yi,xi,Ci,v(e("th",{colspan:i.vhParamCount},"Paramètres",8,Vi),[[g,i.vhParamCount>0]]),Si,v(e("th",Pi,"Service",512),[[g,r.resMode=="attendu"]]),v(e("th",ki,"Heures compl.",512),[[g,r.resMode=="attendu"]]),v(e("th",Ai,"Primes",512),[[g,r.resMode=="attendu"]]),v(e("th",Mi,"Heures non payables",512),[[g,r.resMode=="attendu"]]),v(e("th",Di,"Service",512),[[g,r.resMode=="hetd"]]),v(e("th",Ei,"Heures compl.",512),[[g,r.resMode=="hetd"]]),v(e("th",Ti,"Primes",512),[[g,r.resMode=="hetd"]]),v(e("th",Ui,"Heures non payables",512),[[g,r.resMode=="hetd"]]),v(e("th",Fi,"Informations de débogage",512),[[g,r.resMode=="debug"]])]),e("tr",null,[Ri,Ii,wi,$i,Hi,(a(),l(y,null,x([1,2,3,4,5],o=>v(e("th",{key:o},d(r.formule["vhParam"+o+"Libelle"]),1),[[g,r.formule["vhParam"+o+"Libelle"]]])),64)),v(e("th",null,"Fi",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="hetd"]])])]),e("tbody",null,[(a(!0),l(y,null,x(r.volumesHoraires,(o,V)=>(a(),l("tr",{key:V},[e("th",null,d(V+1),1),e("td",null,[v(e("select",{"onUpdate:modelValue":f=>o.structureCode=f,"data-variable":V,class:"dinput",onChange:s[39]||(s[39]=(...f)=>i.selectStructure&&i.selectStructure(...f))},[(a(!0),l(y,null,x(r.structures,(f,A)=>(a(),l("option",{value:A,key:A},d(f),9,Ni))),128))],40,Li),[[U,o.structureCode]])]),e("td",null,[v(e("select",{"onUpdate:modelValue":f=>o.serviceStatutaire=f,class:"dinput"},zi,8,ji),[[U,o.serviceStatutaire],[g,o.structureCode]])]),e("td",null,[v(e("select",{"onUpdate:modelValue":f=>o.typeInterventionCode=f,class:"dinput"},[(a(!0),l(y,null,x(i.filteredTypesIntervention,f=>(a(),l("option",{value:f,key:f},d(f),9,Gi))),128))],8,Bi),[[U,o.typeInterventionCode],[g,o.structureCode]])]),e("td",null,[v(e("div",null,[_(u,{modelValue:o.tauxFi,"onUpdate:modelValue":f=>o.tauxFi=f,"is-pourc":"",class:"doutput",readonly:"",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),Ji],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(u,{modelValue:o.tauxFa,"onUpdate:modelValue":f=>o.tauxFa=f,"is-pourc":"",class:"dinput","data-variable":V,onChange:i.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange"]),Yi],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(u,{modelValue:o.tauxFc,"onUpdate:modelValue":f=>o.tauxFc=f,"is-pourc":"",class:"dinput","data-variable":V,onChange:i.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange"]),Qi],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(u,{modelValue:o.ponderationServiceDu,"onUpdate:modelValue":f=>o.ponderationServiceDu=f,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),Wi],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(u,{modelValue:o.ponderationServiceCompl,"onUpdate:modelValue":f=>o.ponderationServiceCompl=f,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),Xi],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>o.param1=f,class:"dinput"},null,8,Zi),[[E,o.param1],[g,o.structureCode]])],512),[[g,r.formule.vhParam1Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>o.param2=f,class:"dinput"},null,8,Ki),[[E,o.param2],[g,o.structureCode]])],512),[[g,r.formule.vhParam2Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>o.param3=f,class:"dinput"},null,8,ea),[[E,o.param3],[g,o.structureCode]])],512),[[g,r.formule.vhParam3Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>o.param4=f,class:"dinput"},null,8,ta),[[E,o.param4],[g,o.structureCode]])],512),[[g,r.formule.vhParam4Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>o.param5=f,class:"dinput"},null,8,sa),[[E,o.param5],[g,o.structureCode]])],512),[[g,r.formule.vhParam5Libelle]]),e("td",null,[v(_(u,{modelValue:o.heures,"onUpdate:modelValue":f=>o.heures=f,class:"dinput",onChange:i.calculer},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[g,!["",null].includes(o.typeInterventionCode)]])]),na,v(e("td",null,[_(u,{modelValue:o.heuresAttenduesServiceFi,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesServiceFa,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesServiceFc,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesServiceReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesServiceReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesComplFi,"onUpdate:modelValue":f=>o.heuresAttenduesComplFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesComplFa,"onUpdate:modelValue":f=>o.heuresAttenduesComplFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesComplFc,"onUpdate:modelValue":f=>o.heuresAttenduesComplFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesComplReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesComplReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesPrimes,"onUpdate:modelValue":f=>o.heuresAttenduesPrimes=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesNonPayableFi,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesNonPayableFa,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesNonPayableFc,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresAttenduesNonPayableReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(u,{modelValue:o.heuresServiceFi,"onUpdate:modelValue":f=>o.heuresServiceFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesServiceFi!=null&&Math.round(o.heuresAttenduesServiceFi*100)!=Math.round(o.heuresServiceFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresServiceFa,"onUpdate:modelValue":f=>o.heuresServiceFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesServiceFa!=null&&Math.round(o.heuresAttenduesServiceFa*100)!=Math.round(o.heuresServiceFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresServiceFc,"onUpdate:modelValue":f=>o.heuresServiceFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesServiceFc!=null&&Math.round(o.heuresAttenduesServiceFc*100)!=Math.round(o.heuresServiceFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresServiceReferentiel,"onUpdate:modelValue":f=>o.heuresServiceReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesServiceReferentiel!=null&&Math.round(o.heuresAttenduesServiceReferentiel*100)!=Math.round(o.heuresServiceReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresComplFi,"onUpdate:modelValue":f=>o.heuresComplFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesComplFi!=null&&Math.round(o.heuresAttenduesComplFi*100)!=Math.round(o.heuresComplFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresComplFa,"onUpdate:modelValue":f=>o.heuresComplFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesComplFa!=null&&Math.round(o.heuresAttenduesComplFa*100)!=Math.round(o.heuresComplFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresComplFc,"onUpdate:modelValue":f=>o.heuresComplFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesComplFc!=null&&Math.round(o.heuresAttenduesComplFc*100)!=Math.round(o.heuresComplFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresComplReferentiel,"onUpdate:modelValue":f=>o.heuresComplReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesComplReferentiel!=null&&Math.round(o.heuresAttenduesComplReferentiel*100)!=Math.round(o.heuresComplReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresPrimes,"onUpdate:modelValue":f=>o.heuresPrimes=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesPrimes!=null&&Math.round(o.heuresAttenduesPrimes*100)!=Math.round(o.heuresPrimes*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresNonPayableFi,"onUpdate:modelValue":f=>o.heuresNonPayableFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFi!=null&&Math.round(o.heuresAttenduesNonPayableFi*100)!=Math.round(o.heuresNonPayableFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresNonPayableFa,"onUpdate:modelValue":f=>o.heuresNonPayableFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFa!=null&&Math.round(o.heuresAttenduesNonPayableFa*100)!=Math.round(o.heuresNonPayableFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresNonPayableFc,"onUpdate:modelValue":f=>o.heuresNonPayableFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFc!=null&&Math.round(o.heuresAttenduesNonPayableFc*100)!=Math.round(o.heuresNonPayableFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(u,{modelValue:o.heuresNonPayableReferentiel,"onUpdate:modelValue":f=>o.heuresNonPayableReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableReferentiel!=null&&Math.round(o.heuresAttenduesNonPayableReferentiel*100)!=Math.round(o.heuresNonPayableReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",ra,[r.debug.vh&&r.debug.vh[V]?(a(),l("div",ia,[(a(!0),l(y,null,x(r.debug.vh[V],(f,A)=>(a(),l("span",aa,[b(d(A)+" ",1),e("span",la,d(Math.round(f*100)/100),1)]))),256)),b("  ")])):h("",!0)],512),[[g,r.resMode=="debug"]])]))),128))])]),r.resMode=="debug"&&r.debug.global?(a(),l("div",oa,[ua,(a(!0),l(y,null,x(r.debug.global,(o,V)=>(a(),l("span",da,[b(d(V)+" ",1),e("span",ca,d(Math.round(o*100)/100),1)]))),256)),b("  ")])):h("",!0),e("div",null,[e("a",{class:"btn btn-secondary",href:r.indexUrl},[ha,b(" Retour à la liste des formules")],8,ma)])])],64)}const pa=P(en,[["render",_a],["__scopeId","data-v-3894f4a0"]]),fa=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"})),ba={name:"TotauxHetd",props:{intervenant:{type:Number},typeVolumeHoraire:{type:Number}},data(){return{data:{types:[]},serviceLigne:""}},mounted(){this.load(),window.addEventListener("Formule/TotauxHetd.refresh",t=>{this.load()})},methods:{load(){unicaenVue.axios.get(unicaenVue.url("intervenant/formule-totaux-hetd/:intervenant/:typeVolumeHoraire",{intervenant:this.intervenant,typeVolumeHoraire:this.typeVolumeHoraire})).then(t=>{this.data=t.data.data,this.data.serviceStatutaire>0&&(this.data.serviceDu!=this.data.serviceStatutaire?this.serviceLigne="* "+this.data.serviceDu+"h de service dû en tenant compte des modifications de service":this.serviceLigne="* "+this.data.serviceStatutaire+"h de service statutaire")})},tradType(t){switch(t){case"fi":return"FI";case"fa":return"FA";case"fc":return"FC";case"enseignement":return"Enseignement";case"referentiel":return"Référentiel";case"total":return"Total";default:return t}},tradCategorie(t){switch(t){case"service":return"Service*";case"compl":return"Heures complémentaires";case"payable":return"Heures";case"non-payable":return"Non payable";case"primes":return"Primes";case"total":return"Total";default:return t}}}},te=t=>(z("data-v-f852d328"),t=t(),B(),t),va=te(()=>e("h2",null,"Totaux en heures équivalent TD",-1)),ga={class:"table table-bordered"},ya=te(()=>e("th",null," ",-1)),xa=["colspan"],Ca=te(()=>e("br",null,null,-1));function Va(t,s,n,p,r,i){const u=F("u-heures"),m=se,c=ne;return a(),l(y,null,[r.data.types.length>0?(a(),R(c,{key:0},{default:T(()=>[_(m,{cols:"6"},{default:T(()=>[va,e("table",ga,[e("tr",null,[ya,(a(!0),l(y,null,x(r.data.types,o=>(a(),l("th",{key:o},d(i.tradType(o)),1))),128))]),(a(!0),l(y,null,x(r.data.heures,(o,V)=>(a(),l("tr",{key:V},[e("th",null,d(i.tradCategorie(V)),1),V!=="primes"?(a(!0),l(y,{key:0},x(o,(f,A)=>(a(),l("td",{class:"nombre",key:A},[_(u,{valeur:f},null,8,["valeur"])]))),128)):(a(),l("td",{key:1,class:"nombre",colspan:o.length},[_(u,{valeur:r.data.heures.primes.total},null,8,["valeur"])],8,xa))]))),128))]),b(" "+d(r.serviceLigne),1)]),_:1})]),_:1})):h("",!0),Ca],64)}const Sa=P(ba,[["render",Va],["__scopeId","data-v-f852d328"]]),Pa=Object.freeze(Object.defineProperty({__proto__:null,default:Sa},Symbol.toStringTag,{value:"Module"})),ka={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(t){this.formatted=this.formatage(t)}},methods:{formatage(t){if(t===void 0)return;let s=new Date(t);const n=s.getFullYear(),p=(s.getMonth()+1).toString().padStart(2,"0"),r=s.getDate().toString().padStart(2,"0"),i=s.getHours().toString().padStart(2,"0"),u=s.getMinutes().toString().padStart(2,"0"),m=s.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${r}/${p}/${n} à ${i}:${u}`;case"time":return`${i}:${u}:${m}`}return`${r}/${p}/${n}`}}};function Aa(t,s,n,p,r,i){return d(r.formatted)}const O=P(ka,[["render",Aa]]),Ma={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(t){this.searchTerm=t.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(t){return unicaenVue.url("intervenant/code:"+t+"/voir")},reload(){var t=document.getElementById("term");t.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(s=>{let n=s.data,p=[];for(const r in n){if(n[r].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){p.push(n[r]);continue}if(n[r].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){p.push(n[r]);continue}if(n[r].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){p.push(n[r]);continue}}this.intervenants=p,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(s=>{console.log(s.message)})},800)}}},Da=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),Ea={class:"intervenant-recherche"},Ta={class:"critere"},Ua=e("br",null,null,-1),Fa=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),Ra=e("br",null,null,-1),Ia={key:0,class:"table table-bordered table-hover"},wa=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),$a=["title"],Ha={style:{}},La=["href"],Na=e("i",{class:"fas fa-eye"},null,-1),ja={key:1,class:"table table-bordered table-hover"},Oa=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),qa=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),za=[Oa,qa];function Ba(t,s,n,p,r,i){const u=O;return a(),l(y,null,[Da,e("div",Ea,[e("div",Ta,[e("div",null,[e("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:s[0]||(s[0]=(...m)=>i.rechercher&&i.rechercher(...m))},null,32),Ua]),e("div",null,[Fa,v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=m=>r.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:s[2]||(s[2]=m=>i.reload())},null,544),[[J,r.checkedTypes]]),b(" Permanent "),v(e("input",{"onUpdate:modelValue":s[3]||(s[3]=m=>r.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:s[4]||(s[4]=m=>i.reload())},null,544),[[J,r.checkedTypes]]),b(" Vacataire "),v(e("input",{"onUpdate:modelValue":s[5]||(s[5]=m=>r.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:s[6]||(s[6]=m=>i.reload())},null,544),[[J,r.checkedTypes]]),b(" Etudiant ")]),Ra])]),r.intervenants.length>0?(a(),l("table",Ia,[wa,e("tbody",null,[(a(!0),l(y,null,x(r.intervenants,(m,c)=>(a(),l("tr",{class:D({"bg-danger":m.destruction!==null}),title:m.destruction!==null?"Fiche historisé":""},[e("td",Ha,[e("a",{href:i.urlFiche(m.code)},[Na,b(" Fiche")],8,La)]),e("td",null,d(m.civilite),1),e("td",null,d(m.nom),1),e("td",null,d(m.prenom),1),e("td",null,d(m.structure),1),e("td",null,d(m.statut),1),e("td",null,[_(u,{value:m["date-naissance"]},null,8,["value"])]),e("td",null,d(m["numero-personnel"]),1)],10,$a))),256))])])):h("",!0),r.intervenants.length==0&&r.noResult==1?(a(),l("table",ja,za)):h("",!0)],64)}const Ga=P(Ma,[["render",Ba]]),Ja=Object.freeze(Object.defineProperty({__proto__:null,default:Ga},Symbol.toStringTag,{value:"Module"})),Ya={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return Object.keys(this.structure.structures).length>0}},methods:{saisie(t){modAjax(t.currentTarget,s=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.refresh()})},refresh(){this.liste.reload()}}},N=t=>(z("data-v-046af32d"),t=t(),B(),t),Qa={class:"accordion-item"},Wa={class:"accordion-header"},Xa=["aria-controls","data-bs-target"],Za=["href"],Ka=N(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),el=[Ka],tl=["href"],sl=N(()=>e("i",{class:"fas fa-trash-can"},null,-1)),nl=[sl],rl=["id"],il={class:"accordion-body"},al={class:"row"},ll=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),b(" :")],-1)),ol={class:"col-md-5"},ul={class:"row"},dl=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),b(" :")],-1)),cl={class:"col-md-5"},ml={class:"row"},hl=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),b(" :")],-1)),_l={class:"col-md-5"},pl={key:0,class:"fas fa-check text-success"},fl={key:1,class:"fas fa-xmark text-danger"},bl={class:"row"},vl=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),b(" :")],-1)),gl={class:"col-md-5"},yl={key:0,class:"fas fa-check text-success"},xl={key:1,class:"fas fa-xmark text-danger"},Cl={class:"row"},Vl=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),b(" :")],-1)),Sl={class:"col-md-5"},Pl={key:0,class:"sous-structures"},kl=N(()=>e("h4",null,"Sous-structures",-1)),Al={class:"accordion"};function Ml(t,s,n,p,r,i){const u=F("structure",!0);return a(),l("div",Qa,[e("h2",Wa,[e("button",{"aria-controls":n.structure.id,"data-bs-target":`#str${n.structure.id}`,"aria-expanded":"true",class:"accordion-button","data-bs-toggle":"collapse",type:"button"},[n.structure.canEdit?(a(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary btn-sm",title:"Modifier la structure",onClick:s[0]||(s[0]=S((...m)=>i.saisie&&i.saisie(...m),["prevent"]))},el,8,Za)):h("",!0),n.structure.canDelete?(a(),l("a",{key:1,href:r.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",title:"Supprimer la structure",onClick:s[1]||(s[1]=S((...m)=>i.supprimer&&i.supprimer(...m),["prevent"]))},nl,8,tl)):h("",!0),b("   "+d(n.structure.libelleLong)+" ("+d(n.structure.libelleCourt)+") ",1)],8,Xa)]),e("div",{id:`str${n.structure.id}`,class:"accordion-collapse collapse show"},[e("div",il,[e("div",al,[ll,e("div",ol,d(n.structure.code),1)]),e("div",ul,[dl,e("div",cl,d(n.structure.source.libelle),1)]),e("div",ml,[hl,e("div",_l,[n.structure.enseignement?(a(),l("i",pl)):n.structure.enseignement?h("",!0):(a(),l("i",fl))])]),e("div",bl,[vl,e("div",gl,[n.structure.affAdresseContrat?(a(),l("i",yl)):n.structure.affAdresseContrat?h("",!0):(a(),l("i",xl))])]),e("div",Cl,[Vl,e("div",Sl,[e("pre",null,d(n.structure.adresse),1)])]),i.hasSousStructures?(a(),l("div",Pl,[kl,e("div",Al,[(a(!0),l(y,null,x(n.structure.structures,m=>(a(),R(u,{key:m.id,structure:m,onRefresh:i.refresh},null,8,["structure","onRefresh"]))),128))])])):h("",!0)])],8,rl)])}const ie=P(Ya,[["render",Ml],["__scopeId","data-v-046af32d"]]),Dl=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),El={components:{structure:ie},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{console.log("coucou"),this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(t=>{this.structures=t.data})}}},Tl=e("h1",null,"Administration des structures",-1),Ul={class:"accordion"},Fl=["href"],Rl=e("i",{class:"fas fa-pen-to-square"},null,-1);function Il(t,s,n,p,r,i){const u=F("structure");return a(),l(y,null,[Tl,e("div",Ul,[(a(!0),l(y,null,x(r.structures,m=>(a(),R(u,{key:m.id,structure:m},null,8,["structure"]))),128))]),n.canAdd?(a(),l("a",{key:0,class:"btn btn-primary",href:r.ajoutUrl,onClick:s[0]||(s[0]=S((...m)=>i.ajout&&i.ajout(...m),["prevent"])),title:"Ajouter une structure"},[Rl,b(" Ajouter une structure ")],8,Fl)):h("",!0)],64)}const wl=P(El,[["render",Il]]),$l=Object.freeze(Object.defineProperty({__proto__:null,default:wl},Symbol.toStringTag,{value:"Module"})),Hl={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},Ll=["id"],Nl={class:"modal-dialog"},jl={class:"modal-content"},Ol={class:"modal-header"},ql={class:"modal-title"},zl=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Bl={class:"modal-body"},Gl={class:"modal-footer"},Jl=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function Yl(t,s,n,p,r,i){return a(),l("div",{class:"modal fade",id:n.id,tabindex:"-1","aria-hidden":"true"},[e("div",Nl,[e("div",jl,[e("div",Ol,[e("h5",ql,d(n.title),1),zl]),e("div",Bl,[Q(t.$slots,"body")]),e("div",Gl,[Q(t.$slots,"footer"),Jl])])])],8,Ll)}const Ql=P(Hl,[["render",Yl]]),Wl={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},Xl=["id"];function Zl(t,s,n,p,r,i){return a(),l("i",{class:D(`fas fa-${n.name} text-${n.variant} fa-rotate-${n.rotate}`),id:`${n.id}`},null,10,Xl)}const j=P(Wl,[["render",Zl]]),Kl={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(t){this.validationText=this.calcValidation(t)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(t){return t===null?"A valider":t.id===null?"Autovalidée":"Validation du "+Util.dateToString(t.histoCreation)+" par "},saisie(t){modAjax(t.currentTarget,s=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.$emit("supprimer",this.mission)})},valider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},devalider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireSupprimer(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireValider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireDevalider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(t=>{this.$emit("refresh",t.data)})}}},H=t=>(z("data-v-1735108d"),t=t(),B(),t),eo=["id"],to={class:"card-header card-header-h3"},so={key:0},no={class:"float-end"},ro={key:1},io={key:2},ao={class:"float-end"},lo={class:"card-body"},oo={class:"row"},uo={class:"col-md-8"},co={class:"row"},mo={class:"col-md-12"},ho=H(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),_o={class:"form-control"},po={class:"row"},fo={class:"col-md-6"},bo=H(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),vo={class:"form-control"},go={class:"col-md-6"},yo=H(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),xo={class:"form-control"},Co={class:"col-md-7"},Vo=H(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),So={class:"input-group mb-3"},Po=["innerHTML"],ko=["data-bs-target"],Ao={key:0,class:"col-md-5"},Mo=H(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),Do={class:"form-control"},Eo={class:"row"},To={class:"col-md-12"},Uo=H(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),Fo={class:"form-control"},Ro={key:0,class:"row"},Io={class:"col-md-12"},wo=H(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),$o={class:"form-control"},Ho=H(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),Lo={class:"row"},No={class:"col-md-12"},jo=["href"],Oo=["href"],qo=["href"],zo=["href"],Bo={class:"col-md-4"},Go=H(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),Jo={class:"table table-bordered table-condensed"},Yo=H(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),Qo={style:{"text-align":"right"}},Wo=H(()=>e("br",null,null,-1)),Xo={key:0},Zo=["data-id"],Ko=["data-id"],eu=["data-id"];function tu(t,s,n,p,r,i){const u=O,m=j,c=F("utilisateur"),o=F("u-heures"),V=Ql;return a(),l(y,null,[e("div",{id:n.mission.id,class:D([{"bg-success":n.mission.valide,"bg-default":!n.mission.valide},"card"])},[e("form",{onSubmit:s[4]||(s[4]=S((...f)=>t.submitForm&&t.submitForm(...f),["prevent"]))},[e("div",to,[n.mission.libelleMission?(a(),l("h5",so,[b(d(n.mission.libelleMission)+" ",1),e("span",no,[b("Du "),_(u,{value:n.mission.dateDebut},null,8,["value"]),b(" au "),_(u,{value:n.mission.dateFin},null,8,["value"])])])):h("",!0),n.mission.libelleMission?(a(),l("h6",ro,d(n.mission.typeMission.libelle),1)):h("",!0),n.mission.libelleMission?h("",!0):(a(),l("h5",io,[b(d(n.mission.typeMission.libelle)+" ",1),e("span",ao,[b("Du "),_(u,{value:n.mission.dateDebut},null,8,["value"]),b(" au "),_(u,{value:n.mission.dateFin},null,8,["value"])])]))]),e("div",lo,[e("div",oo,[e("div",uo,[e("div",co,[e("div",mo,[ho,e("div",_o,d(n.mission.structure.libelle),1)])]),e("div",po,[e("div",fo,[bo,e("div",vo,d(n.mission.tauxRemu?n.mission.tauxRemu.libelle:null),1)]),e("div",go,[yo,e("div",xo,d(n.mission.tauxRemuMajore?n.mission.tauxRemuMajore.libelle:n.mission.tauxRemu?"Idem ("+n.mission.tauxRemu.libelle+")":null),1)]),e("div",Co,[Vo,e("div",So,[e("div",{class:"form-control",innerHTML:i.heuresLib},null,8,Po),e("button",{"data-bs-target":`#details-${n.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,ko)])]),n.mission.typeMission.besoinFormation?(a(),l("div",Ao,[Mo,e("div",Do,d(n.mission.heuresFormation),1)])):h("",!0)]),e("div",Eo,[e("div",To,[Uo,e("div",Fo,d(n.mission.description),1)])]),n.mission.typeMission.accompagnementEtudiants?(a(),l("div",Ro,[e("div",Io,[wo,e("div",$o,[e("pre",null,d(n.mission.etudiantsSuivis),1)])])])):h("",!0),Ho,e("div",Lo,[e("div",No,[n.mission.canSaisie?(a(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=S((...f)=>i.saisie&&i.saisie(...f),["prevent"]))},"Modifier",8,jo)):h("",!0),n.mission.canValider?(a(),l("a",{key:1,href:r.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:s[1]||(s[1]=S((...f)=>i.valider&&i.valider(...f),["prevent"]))},"Valider",8,Oo)):h("",!0),n.mission.canDevalider?(a(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:s[2]||(s[2]=S((...f)=>i.devalider&&i.devalider(...f),["prevent"]))},"Dévalider",8,qo)):h("",!0),n.mission.canSupprimer?(a(),l("a",{key:3,href:r.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:s[3]||(s[3]=S((...f)=>i.supprimer&&i.supprimer(...f),["prevent"]))},"Supprimer",8,zo)):h("",!0)])])]),e("div",Bo,[Go,e("div",null,[_(m,{name:"thumbs-up",variant:"success"}),b(" Créé le "),_(u,{value:n.mission.histoCreation},null,8,["value"]),b(" par "),_(c,{mail:n.mission.histoCreateur.email,nom:n.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[_(m,{name:n.mission.valide?"thumbs-up":"thumbs-down",variant:n.mission.valide?"success":"info"},null,8,["name","variant"]),b(" "+d(r.validationText)+" ",1),n.mission.validation&&n.mission.validation.histoCreateur?(a(),R(c,{key:0,mail:n.mission.validation.histoCreateur.email,nom:n.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):h("",!0)]),e("div",null,[_(m,{name:n.mission.contrat?"thumbs-up":"thumbs-down",variant:n.mission.contrat?"success":"info"},null,8,["name","variant"]),b(" "+d(n.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,d(n.mission.heuresRealisees)+" heure"+d(n.mission.heuresRealisees<2?"":"s")+" réalisée"+d(n.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,eo),_(V,{id:`details-${n.mission.id}`,title:"Détail des heures prévisionnelles"},{body:T(()=>[e("table",Jo,[Yo,e("tbody",null,[(a(!0),l(y,null,x(n.mission.volumesHorairesPrevus,f=>(a(),l("tr",{key:f.id},[e("td",Qo,[_(o,{valeur:f.heures},null,8,["valeur"])]),e("td",null,[_(m,{name:"thumbs-up",variant:"success"}),b(" Saisi par "),_(c,{mail:f.histoCreateur.email,nom:f.histoCreateur.displayName},null,8,["mail","nom"]),b(" le "),_(u,{value:f.histoCreation},null,8,["value"]),Wo,_(m,{name:f.valide?"thumbs-up":"thumbs-down",variant:f.valide?"success":"info"},null,8,["name","variant"]),b(" "+d(f.validation&&f.validation.id==null?"Autovalidé":f.validation?"":"à valider")+" ",1),f.validation&&f.validation.histoCreateur?(a(),l("span",Xo,[b(" Validé par "),_(c,{mail:f.validation.histoCreateur.email,nom:f.validation.histoCreateur.displayName},null,8,["mail","nom"]),b(" le "),_(u,{value:f.validation.histoCreation},null,8,["value"])])):h("",!0)]),e("td",null,[f.canValider?(a(),l("a",{key:0,"data-id":f.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:s[5]||(s[5]=S((...A)=>i.volumeHoraireValider&&i.volumeHoraireValider(...A),["prevent"]))},"Valider",8,Zo)):h("",!0),f.canDevalider?(a(),l("a",{key:1,"data-id":f.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:s[6]||(s[6]=S((...A)=>i.volumeHoraireDevalider&&i.volumeHoraireDevalider(...A),["prevent"]))},"Dévalider",8,Ko)):h("",!0),f.canSupprimer?(a(),l("a",{key:2,"data-id":f.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:s[7]||(s[7]=S((...A)=>i.volumeHoraireSupprimer&&i.volumeHoraireSupprimer(...A),["prevent"]))},"Supprimer",8,eu)):h("",!0)])]))),128))])])]),footer:T(()=>[]),_:1},8,["id"])],64)}const ae=P(Kl,[["render",tu],["__scopeId","data-v-1735108d"]]),su=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"})),nu={components:{mission:ae},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},supprimer(t){this.reload()},refresh(t){let s=Util.json.indexById(this.missions,t.id);this.missions[s]=t,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(t=>{this.missions=t.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},ru=["href"];function iu(t,s,n,p,r,i){const u=F("mission");return a(),l(y,null,[(a(!0),l(y,null,x(r.missions,m=>(a(),R(u,{onSupprimer:i.supprimer,onRefresh:i.refresh,key:m.id,mission:m},null,8,["onSupprimer","onRefresh","mission"]))),128)),n.canAddMission?(a(),l("a",{key:0,class:"btn btn-primary",href:r.ajoutUrl,onClick:s[0]||(s[0]=S((...m)=>i.ajout&&i.ajout(...m),["prevent"]))},"Ajout d'une nouvelle mission",8,ru)):h("",!0)],64)}const au=P(nu,[["render",iu]]),lu=Object.freeze(Object.defineProperty({__proto__:null,default:au},Symbol.toStringTag,{value:"Module"})),ou={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},canValiderCandidature:{type:Boolean,required:!1},canRefuserCandidature:{type:Boolean,required:!1},renseignerDonneesPersonnelles:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},computed:{urlDonneesPersonnelles:function(){return unicaenVue.url("intervenant/:intervenant/dossier",{intervenant:this.intervenant})}},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(t=>{this.candidatures=t.data})},validerCandidature(t){modAjax(t.currentTarget,s=>{this.reload()})},refuserCandidature(t){popConfirm(t.target,s=>{this.reload()})},urlOffre(t){return unicaenVue.url("offre-emploi/detail/:offre",{offre:t.offre.id})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})}}},uu={key:0,class:"alert alert-primary",role:"alert"},du=["href"],cu={class:"table table-bordered"},mu=e("th",null,"Offre d'emploi",-1),hu=e("th",null,"Composante",-1),_u=e("th",null,"Etat",-1),pu=e("th",null,"Date commission",-1),fu={key:0},bu={key:0},vu={key:0,colspan:"5",style:{"text-align":"center"}},gu={style:{"text-align":"center"}},yu=["href"],xu={style:{"text-align":"center"}},Cu={style:{"text-align":"center"}},Vu={key:0,class:"badge rounded-pill bg-success"},Su={key:1,class:"badge rounded-pill bg-danger"},Pu={key:2,class:"badge rounded-pill bg-warning"},ku={key:0,style:{"text-align":"center"}},Au=["href"],Mu=e("i",{class:"fa-solid fa-check"},null,-1),Du=[Mu],Eu=["href"],Tu=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),Uu=[Tu],Fu=["href"];function Ru(t,s,n,p,r,i){const u=O,m=j;return a(),l("div",null,[this.renseignerDonneesPersonnelles?(a(),l("div",uu,[b(" Afin que vos candidatures soient étudiées, veuillez compléter "),e("a",{href:this.urlDonneesPersonnelles},"vos données personnelles",8,du),b(" et fournir les pièces justificatives qui vous seront demandées. ")])):h("",!0),e("table",cu,[e("thead",null,[e("tr",null,[mu,hu,_u,pu,n.canValiderCandidature||n.canRefuserCandidature?(a(),l("th",fu,"Action")):h("",!0)])]),e("tbody",null,[r.candidatures.length==0?(a(),l("tr",bu,[n.canValiderCandidature?(a(),l("td",vu,"Aucune candidature")):h("",!0)])):h("",!0),(a(!0),l(y,null,x(r.candidatures,c=>(a(),l("tr",{key:c.id},[e("td",gu,[e("a",{href:i.urlOffre(c)},d(c.offre.titre),9,yu)]),e("td",xu,d(c.offre.structure.libelleCourt),1),e("td",Cu,[c.validation?(a(),l("span",Vu,"Acceptée par "+d(c.validation.histoCreateur.displayName),1)):h("",!0),!c.validation&&c.motif!==null?(a(),l("span",Su,d(c.motif),1)):h("",!0),!c.validation&&c.motif===null?(a(),l("span",Pu,"En attente d'acceptation")):h("",!0)]),e("td",null,[c.dateCommission?(a(),R(u,{key:0,value:c.dateCommission},null,8,["value"])):h("",!0)]),this.canValiderCandidature||this.canRefuserCandidature?(a(),l("td",ku,[!c.validation&&this.canValiderCandidature?(a(),l("a",{key:0,href:i.urlAccepterCandidature(c),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:s[0]||(s[0]=S((...o)=>i.validerCandidature&&i.validerCandidature(...o),["prevent"]))},Du,8,Au)):h("",!0),b("  "),this.canRefuserCandidature?(a(),l("a",{key:1,href:i.urlRefuserCandidature(c),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:s[1]||(s[1]=S((...o)=>i.refuserCandidature&&i.refuserCandidature(...o),["prevent"]))},Uu,8,Eu)):h("",!0)])):h("",!0)]))),128))])]),e("a",{href:r.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[_(m,{name:"eye"}),b(" Voir toutes les offres d'emploi ")],8,Fu),b("  ")])}const Iu=P(ou,[["render",Ru]]),wu=Object.freeze(Object.defineProperty({__proto__:null,default:Iu},Symbol.toStringTag,{value:"Module"})),$u={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let t=this.offre.description.substr(0,200);return this.offre.description.length>200&&(t+="..."),t},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let t="auth/connexion?redirect="+window.location.href;return unicaenVue.url(t)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(t){modAjax(t.target,s=>{this.refresh()})},urlVoir:function(t){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+t.intervenant.code})},urlVoirCandidature:function(t){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+t.intervenant.code})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(t=>{this.$emit("refresh",t.data)})},supprimer(t){popConfirm(t.target,s=>{this.$emit("supprimer",this.offre)})},postuler(t){popConfirm(t.target,s=>{this.$emit("postuler",this.offre)})},valider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},devalider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},validerCandidature(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},refuserCandidature(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})}}},Hu={key:0,class:"col"},Lu={class:"card h-100"},Nu={class:"card-header"},ju={class:"badge rounded-pill bg-info"},Ou={key:0,class:"badge rounded-pill bg-success"},qu={key:1,class:"badge rounded-pill bg-warning"},zu={class:"card-body"},Bu={class:"bg-light",style:{padding:"5px"}},Gu=e("b",null,"Créée le : ",-1),Ju=e("br",null,null,-1),Yu=e("b",null,"Période à pourvoir : ",-1),Qu=e("br",null,null,-1),Wu=e("b",null,"Demandée par la composante :",-1),Xu=e("br",null,null,-1),Zu=e("b",null,"Type de mission :",-1),Ku={class:"card-footer"},ed={class:"d-grid gap-2 d-md-flex justify-content-md-end"},td=["href"],sd={key:1},nd={class:"page-header"},rd={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},id=e("i",{class:"fa-solid fa-user"},null,-1),ad={class:"ms-2"},ld=["href"],od={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},ud=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),dd=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),cd=[ud,dd],md={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},hd=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),_d=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),pd=[hd,_d],fd={class:"bg-light",style:{padding:"10px"}},bd=e("b",null,"Créée le : ",-1),vd=e("br",null,null,-1),gd=e("b",null,"Période à pourvoir : ",-1),yd=e("br",null,null,-1),xd=e("b",null,"Date limite de candidature :",-1),Cd=e("br",null,null,-1),Vd=e("b",null,"Demandé par la composante :",-1),Sd=e("br",null,null,-1),Pd=e("b",null,"Type de mission :",-1),kd=e("br",null,null,-1),Ad=e("b",null,"Nombre d'heures pour la mission :",-1),Md=e("br",null,null,-1),Dd=e("b",null,"Nombre de postes à pourvoir :",-1),Ed=e("br",null,null,-1),Td=["innerHTML"],Ud={key:3,class:"alert alert-info"},Fd=["innerHTML"],Rd=e("br",null,null,-1),Id={key:4},wd=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),$d={class:"table table-bordered"},Hd=e("th",null,"Intervenant",-1),Ld=e("th",null,"Etat",-1),Nd={key:0},jd={key:0},Od={key:0,colspan:"4",style:{"text-align":"center"}},qd={key:1,colspan:"3",style:{"text-align":"center"}},zd=["href"],Bd={key:0,class:"badge rounded-pill bg-success"},Gd={key:1,class:"badge rounded-pill bg-danger"},Jd={key:2,class:"badge rounded-pill bg-warning"},Yd={key:0},Qd=["href"],Wd={class:"mt-5"},Xd=["href"],Zd=["href"],Kd=["href"],ec=["href"],tc=["href"],sc=["href"];function nc(t,s,n,p,r,i){const u=O,m=j;return a(),l(y,null,[this.extended?h("",!0):(a(),l("div",Hu,[e("div",Lu,[e("div",Nu,[e("h4",null,d(n.offre.titre),1),e("span",ju,d(n.offre.nombreHeures)+" heure(s)",1),b("   "),n.offre.validation?(a(),l("span",Ou,[b("Validée le "),_(u,{value:n.offre.validation.histoCreation},null,8,["value"]),b(" par "+d(n.offre.validation.histoCreateur.displayName),1)])):h("",!0),n.offre.validation?h("",!0):(a(),l("span",qu," En attente de validation par la DRH")),b("  ")]),e("div",zu,[e("p",Bu,[Gu,_(u,{value:n.offre.histoCreation},null,8,["value"]),b(" par "+d(n.offre.histoCreateur.displayName),1),Ju,Yu,b("du "),_(u,{value:n.offre.dateDebut},null,8,["value"]),b(" au "),_(u,{value:n.offre.dateFin},null,8,["value"]),Qu,Wu,b(" "+d(n.offre.structure.libelleCourt)+" ",1),Xu,Zu,b(" "+d(n.offre.typeMission.libelle),1)]),b(" "+d(i.shortDesc),1)]),e("div",Ku,[e("div",ed,[e("a",{href:r.consulterUrl,class:"btn btn-primary",title:"Consulter "},[_(m,{name:"eye"}),b(" Voir ")],8,td)])])])])),this.extended?(a(),l("div",sd,[e("h1",nd,d(n.offre.titre),1),this.utilisateur?h("",!0):(a(),l("div",rd,[id,e("div",ad,[b(" Vous devez "),e("a",{href:i.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,ld),b(" pour pouvoir postuler. ")])])),!n.offre.canPostuler&&this.utilisateur?(a(),l("div",od,cd)):h("",!0),i.isCandidat&&this.utilisateur?(a(),l("div",md,pd)):h("",!0),e("p",fd,[bd,_(u,{value:n.offre.histoCreation},null,8,["value"]),b(" par "+d(n.offre.histoCreateur.displayName),1),vd,gd,b("du "),_(u,{value:n.offre.dateDebut},null,8,["value"]),b(" au "),_(u,{value:n.offre.dateFin},null,8,["value"]),yd,xd,_(u,{value:n.offre.dateLimite},null,8,["value"]),Cd,Vd,b(" "+d(n.offre.structure.libelleCourt)+" ",1),Sd,Pd,b(" "+d(n.offre.typeMission.libelle)+" ",1),kd,Ad,b(" "+d(n.offre.nombreHeures)+" heure(s) ",1),Md,Dd,b(" "+d(n.offre.nombrePostes)+" poste(s) ",1),Ed]),e("p",{innerHTML:this.descriptionHtml},null,8,Td),this.decretText?(a(),l("p",Ud,[v(e("input",{id:"decret","onUpdate:modelValue":s[0]||(s[0]=c=>r.decret=c),name:"decret",type:"checkbox"},null,512),[[J,r.decret]]),b("  "),e("span",{innerHTML:this.decretText},null,8,Fd)])):h("",!0),Rd,this.canVoirCandidature?(a(),l("div",Id,[wd,e("table",$d,[e("thead",null,[e("tr",null,[Hd,Ld,n.canValiderCandidature?(a(),l("th",Nd,"Action")):h("",!0)])]),e("tbody",null,[n.offre.candidatures.length==0?(a(),l("tr",jd,[n.canValiderCandidature?(a(),l("td",Od,"Aucune candidature")):h("",!0),n.canValiderCandidature?h("",!0):(a(),l("td",qd,"Aucune candidature"))])):h("",!0),(a(!0),l(y,null,x(n.offre.candidatures,c=>(a(),l("tr",null,[e("td",null,[e("a",{href:i.urlVoir(c)},d(c.intervenant.prenom+" "+c.intervenant.nomUsuel),9,zd)]),e("td",null,[c.validation?(a(),l("span",Bd,[b("Acceptée le "),_(u,{value:c.validation.histoCreation},null,8,["value"]),b(" par "+d(c.validation.histoCreateur.displayName),1)])):h("",!0),!c.validation&&c.motif!==null?(a(),l("span",Gd,d(c.motif),1)):h("",!0),!c.validation&&c.motif===null?(a(),l("span",Jd,"En attente d'acceptation")):h("",!0)]),this.canValiderCandidature?(a(),l("td",Yd,[e("a",{href:i.urlVoirCandidature(c),class:"btn btn-primary",title:"Consulter "},[_(m,{name:"eye"}),b(" Voir ")],8,Qd)])):h("",!0)]))),256))])])])):h("",!0),e("div",Wd,[e("a",{href:r.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,Xd),b("  "),this.canPostuler?(a(),l("a",{key:0,class:D([r.decret?"":"disabled","btn btn-primary"]),href:r.postulerUrl,"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,Zd)):h("",!0),b("  "),n.offre.canModifier?(a(),l("a",{key:1,href:r.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:s[1]||(s[1]=S((...c)=>i.saisir&&i.saisir(...c),["prevent"]))},[_(m,{name:"pen-to-square"}),b(" Modifier ")],8,Kd)):h("",!0),b("  "),n.offre.validation&&n.offre.canValider?(a(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:s[2]||(s[2]=S((...c)=>i.devalider&&i.devalider(...c),["prevent"]))},[_(m,{name:"thumbs-down"}),b(" Devalider ")],8,ec)):h("",!0),b("  "),!n.offre.validation&&n.offre.canValider?(a(),l("a",{key:3,href:r.validerUrl,class:"btn btn-success",title:"Valider",onClick:s[3]||(s[3]=S((...c)=>i.valider&&i.valider(...c),["prevent"]))},[_(m,{name:"thumbs-up"}),b(" Valider ")],8,tc)):h("",!0),b("  "),n.offre.canSupprimer?(a(),l("a",{key:4,href:r.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:s[4]||(s[4]=S((...c)=>i.supprimer&&i.supprimer(...c),["prevent"]))},[_(m,{name:"trash"}),b(" Supprimer ")],8,sc)):h("",!0)])])):h("",!0)],64)}const le=P($u,[["render",nc]]),rc=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),ic={components:{offreEmploi:le},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(t){modAjax(t.target,s=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(t){let s=Util.json.indexById(this.offres,t.id);this.offres[s]=t},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(t=>{this.offres=[t.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(t=>{this.offres=t.data})}}},ac={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},lc={key:1},oc=["href"],uc={key:2};function dc(t,s,n,p,r,i){const u=F("offreEmploi");return a(),l(y,null,[i.extended?h("",!0):(a(),l("div",ac,[(a(!0),l(y,null,x(r.offres,m=>(a(),R(u,{key:m.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:m,decretText:m.decretText,onRefresh:i.refresh,onSupprimer:i.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),i.extended?h("",!0):(a(),l("div",lc,[this.canModifier?(a(),l("a",{key:0,href:r.ajoutUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=S((...m)=>i.ajout&&i.ajout(...m),["prevent"]))},"Ajouter une nouvelle offre",8,oc)):h("",!0)])),i.extended?(a(),l("div",uc,[(a(!0),l(y,null,x(r.offres,m=>(a(),R(u,{key:m.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:m.decretText,extended:i.extended,offre:m,utilisateur:this.utilisateur,onRefresh:i.refresh,onSupprimer:i.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):h("",!0)],64)}const cc=P(ic,[["render",dc]]),mc=Object.freeze(Object.defineProperty({__proto__:null,default:cc},Symbol.toStringTag,{value:"Module"})),hc={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(t){popConfirm(t.target,s=>{this.$emit("reload")})},valider(t){popConfirm(t.target,s=>{this.$emit("reload")})},devalider(t){popConfirm(t.target,s=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(t=>{this.$emit("reload")})},modifierPrime(t){modAjax(t.currentTarget,s=>{this.$emit("reload")})},supprimerPrime(t){popConfirm(t.target,s=>{this.$emit("reload")})}}},_c={key:0},pc=e("br",null,null,-1),fc=e("u",null,"Mission(s) concernée(s)",-1),bc={key:0},vc=["action"],gc={class:"card-body"},yc={class:"row"},xc={key:0,class:"col-md-6"},Cc={class:"card text-dark bg-light"},Vc=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),Sc={class:"card-body"},Pc=e("p",{class:"card-text"},[b(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),b(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),b(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),kc=["disabled"],Ac={class:"card-footer d-grid gap-2"},Mc=["disabled"],Dc={key:1,class:"col-md-6"},Ec={class:"card text-dark bg-light"},Tc=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),Uc={class:"card-body"},Fc=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),Rc=["href"],Ic={class:"card-footer",style:{"text-align":"right"}},wc=["href"],$c=["href"],Hc=["href"],Lc={class:"col-md-6"},Nc={key:0},jc=["checked","disabled"],Oc=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),qc=e("br",null,null,-1),zc=e("br",null,null,-1),Bc=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),Gc={key:0},Jc={key:1},Yc={key:2},Qc={key:3},Wc={key:4},Xc={key:5},Zc={key:6},Kc={class:"row"},em={class:"col-md-12"},tm={class:"float-end"},sm=["href"],nm=["href"];function rm(t,s,n,p,r,i){const u=O,m=j;return a(),l("div",{class:D([{"bg-success":n.prime.validation,"bg-default":!n.prime.validation&&!n.prime.dateRefus,"bg-danger":n.prime.dateRefus},"card"])},[e("div",{class:D([{"text-white":n.prime.dateRefus},"card-header card-header-h3"])},[n.prime.id?(a(),l("h5",_c,[b(" Indemnité de fin de contrat N°"+d(n.numero+1),1),pc])):h("",!0),e("div",null,[fc,b(" : "),(a(!0),l(y,null,x(n.prime.missions,(c,o)=>(a(),l("span",null,[b(d(c.typeMission.libelle)+" (Pour "+d(c.structure.libelleCourt)+" du ",1),_(u,{value:c.dateDebut},null,8,["value"]),b(" au "),_(u,{value:c.dateFin},null,8,["value"]),b(") "),o!=n.prime.missions.length-1?(a(),l("span",bc,", ")):h("",!0)]))),256))])],2),e("form",{action:r.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",gc,[e("div",yc,[n.prime.declaration?h("",!0):(a(),l("div",xc,[e("div",Cc,[Vc,e("div",Sc,[Pc,e("input",{ref:"file",disabled:!!n.prime.dateRefus,name:"files[]",type:"file"},null,8,kc)]),e("div",Ac,[e("input",{disabled:!!n.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,Mc)])])])),n.prime.declaration?(a(),l("div",Dc,[e("div",Ec,[Tc,e("div",Uc,[Fc,e("a",{href:r.telechargerUrl},d(n.prime.declaration.nom),9,Rc)]),e("div",Ic,[n.prime.declaration&&!n.prime.validation&&!n.prime.dateRefus?(a(),l("a",{key:0,href:r.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:s[0]||(s[0]=S((...c)=>i.supprimer&&i.supprimer(...c),["prevent"]))}," Supprimer ",8,wc)):h("",!0),b("  "),n.prime.declaration&&!n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(a(),l("a",{key:1,href:r.validerUrl,class:"btn btn-success",title:"Valider",onClick:s[1]||(s[1]=S((...c)=>i.valider&&i.valider(...c),["prevent"]))}," Valider ",8,$c)):h("",!0),b("  "),n.prime.declaration&&n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(a(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:s[2]||(s[2]=S((...c)=>i.devalider&&i.devalider(...c),["prevent"]))}," Dévalider ",8,Hc)):h("",!0),b("  ")])])])):h("",!0),e("div",Lc,[n.prime.validation?h("",!0):(a(),l("div",Nc,[e("input",{checked:n.prime.dateRefus,disabled:n.prime.validation,name:"prime",type:"checkbox",onChange:s[3]||(s[3]=(...c)=>i.refuser&&i.refuser(...c))},null,40,jc),b("  Ou en cochant cette case, "),Oc,b(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),qc,zc])),e("div",null,[Bc,n.prime.dateRefus?(a(),l("div",Gc,[_(m,{name:"thumbs-down",variant:"danger"}),b(" Indemnité refusée le "),_(u,{value:n.prime.dateRefus},null,8,["value"])])):h("",!0),n.prime.declaration&&!n.prime.dateRefus?(a(),l("div",Jc,[_(m,{name:"thumbs-up",variant:"success"}),b(" Déclaration déposée le "),_(u,{value:n.prime.declaration.histoCreation},null,8,["value"]),b(" par "+d(n.prime.declaration.histoCreateur.displayName),1)])):h("",!0),!n.prime.declaration&&!n.prime.dateRefus?(a(),l("div",Yc,[_(m,{name:"thumbs-down",variant:"info"}),b(" Aucune déclaration déposée ")])):h("",!0),n.prime.validation&&!n.prime.dateRefus?(a(),l("div",Qc,[_(m,{name:"thumbs-up",variant:"success"}),b(" Déclaration validée le "),_(u,{value:n.prime.validation.histoCreation},null,8,["value"]),b(" par "+d(n.prime.validation.histoCreateur.displayName),1)])):h("",!0),!n.prime.validation&&!n.prime.dateRefus?(a(),l("div",Wc,[_(m,{name:"thumbs-down",variant:"info"}),b(" Aucune déclaration validée ")])):h("",!0),n.prime.validation&&!n.prime.dateRefus?(a(),l("div",Xc,[_(m,{name:"euro-sign",variant:"success"}),b(" Intervenant éligible à une indemnité de fin de contrat ")])):h("",!0),n.prime.dateRefus?(a(),l("div",Zc,[_(m,{name:"euro-sign",variant:"info"}),b(" Intervenant non éligible à une indemnité de fin de contrat ")])):h("",!0)])])]),e("div",Kc,[e("div",em,[e("span",tm,[!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(a(),l("a",{key:0,href:r.modifierPrimeUrl,class:"btn btn-primary",onClick:s[4]||(s[4]=S((...c)=>i.modifierPrime&&i.modifierPrime(...c),["prevent"]))},"Modifier",8,sm)):h("",!0),b("   "),!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(a(),l("a",{key:1,href:r.supprimerPrimeUrl,class:"btn btn-danger",onClick:s[5]||(s[5]=S((...c)=>i.supprimerPrime&&i.supprimerPrime(...c),["prevent"]))},"Supprimer",8,nm)):h("",!0)])])])])],8,vc)],2)}const oe=P(hc,[["render",rm]]),im=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"})),am={components:{prime:oe},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(t=>{this.primes=t.data,this.load=!0})}}},lm={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},om=e("br",null,null,-1),um=e("br",null,null,-1),dm={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},cm=e("br",null,null,-1),mm=e("br",null,null,-1),hm={key:2},_m=["href"];function pm(t,s,n,p,r,i){const u=F("prime");return a(),l(y,null,[(a(!0),l(y,null,x(r.primes,(m,c)=>(a(),R(u,{canGerer:n.canGerer,intervenant:this.intervenant,numero:c,prime:m,onReload:i.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),r.load?h("",!0):(a(),l("div",lm,[b(" Chargement en cours..."),om,um])),r.primes.length==0&&r.load?(a(),l("div",dm,[b(" Aucune indemnité de fin de contrat actuellement..."),cm,mm])):h("",!0),this.missionsWithoutPrime>0&&this.canGerer?(a(),l("div",hm,[e("a",{href:r.ajoutUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=S((...m)=>i.ajout&&i.ajout(...m),["prevent"]))},"Créer une nouvelle indemnité",8,_m)])):h("",!0)],64)}const fm=P(am,[["render",pm]]),bm=Object.freeze(Object.defineProperty({__proto__:null,default:fm},Symbol.toStringTag,{value:"Module"})),vm={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const t=new Date(this.date);return{mois:t.getMonth()+1,annee:t.getFullYear()}},computed:{listeJours(){const t=new Date(this.date);t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1);let s=t.getDate();return Array.from({length:s},(n,p)=>p+1)}},watch:{date:function(t,s){const n=new Date(this.date);this.mois=n.getMonth()+1,this.annee=n.getFullYear()},mois:function(t,s){const n=new Date(this.date);n.setMonth(t-1),this.$emit("changeDate",n)},annee:function(t,s){const n=new Date(this.date);n.setFullYear(t),this.$emit("changeDate",n)}},methods:{nomJour(t){const s=new Date(this.date);return s.setDate(t),s.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let t=[];const s=new Date;for(let n=1;n<=12;n++){s.setMonth(n-1);let p=s.toLocaleString("fr-FR",{month:"long"});t.push({id:n,libelle:p})}return t},listeAnnees(){const s=new Date().getFullYear(),n=1;let p=[];for(let r=s-n;r<=s+n;r++)p.push(r);return p},canAdd(t){if(!this.canAddEvent)return!1;let s=this.addDateDebut;s===void 0?s=new Date("2000-01-01"):s==="now"?s=new Date:s=new Date(s);let n=this.addDateFin;n===void 0?n=new Date("2500-01-01"):n==="now"?n=new Date:n=new Date(n);let p=new Date(this.date);return p.setDate(t),s=this.isoDateOnly(s),n=this.isoDateOnly(n),p=this.isoDateOnly(p),!(p<s||p>n)},addEvent(t){const s=new Date(this.date);s.setDate(t.currentTarget.dataset.jour),this.$emit("addEvent",s,t)},prevMois(){const t=new Date(this.date);t.setMonth(t.getMonth()-1),this.$emit("changeDate",t)},nextMois(){const t=new Date(this.date);t.setMonth(t.getMonth()+1),this.$emit("changeDate",t)},eventsByJour(t){const s=new Date(this.date);let n={};for(let p in this.events){let r=this.events[p];r.date.getFullYear()===s.getFullYear()&&r.date.getMonth()+1===s.getMonth()+1&&r.date.getDate()===t&&(n[p]=r)}return n},isoDateOnly(t){const s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),p=String(t.getDate()).padStart(2,"0");return`${s}-${n}-${p}`}}},gm={class:"calendar"},ym={class:"recherche"},xm={class:"recherche btn-group"},Cm=["value"],Vm=["value"],Sm={class:"table table-bordered table-hover table-sm"},Pm=["data-jour"],km={class:"nom-jour"},Am={class:"numero-jour"},Mm={class:"num-jour badge bg-secondary rounded-circle"},Dm={key:0},Em=["data-jour"];function Tm(t,s,n,p,r,i){const u=j;return a(),l("div",gm,[e("div",ym,[e("div",xm,[e("button",{class:"btn btn-light",id:"prevMois",onClick:s[0]||(s[0]=(...m)=>i.prevMois&&i.prevMois(...m)),title:"Mois précédant"},[_(u,{name:"chevron-left"})]),v(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":s[1]||(s[1]=m=>r.mois=m)},[(a(!0),l(y,null,x(i.listeMois(),m=>(a(),l("option",{value:m.id},d(m.libelle),9,Cm))),256))],512),[[U,r.mois]]),v(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":s[2]||(s[2]=m=>r.annee=m)},[(a(!0),l(y,null,x(i.listeAnnees(),m=>(a(),l("option",{value:m},d(m),9,Vm))),256))],512),[[U,r.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:s[3]||(s[3]=(...m)=>i.nextMois&&i.nextMois(...m)),title:"Mois suivant"},[_(u,{name:"chevron-right"})])])]),e("table",Sm,[(a(!0),l(y,null,x(i.listeJours,m=>(a(),l("tr",{"data-jour":m},[e("th",km,d(i.nomJour(m)),1),e("th",Am,[e("div",Mm,d(m<10?"0"+m.toString():m),1)]),e("td",null,[(a(!0),l(y,null,x(i.eventsByJour(m),(c,o)=>(a(),l("div",{class:"event",style:W("border-color:"+c.color+";background-color:"+c.bgcolor),key:o},[(a(),R(_e(c.component),{event:c},null,8,["event"]))],4))),128)),i.canAdd(m)?(a(),l("div",Dm,[e("button",{onClick:s[4]||(s[4]=(...c)=>i.addEvent&&i.addEvent(...c)),"data-jour":m,class:"btn btn-light btn-sm"},[_(u,{name:"plus"}),b(" Nouvel événement ")],8,Em)])):h("",!0)])],8,Pm))),256))])])}const Um=P(vm,[["render",Tm],["__scopeId","data-v-51bbc42d"]]),Fm={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(t){modAjax(t.currentTarget,s=>{this.suivi.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.suivi.refresh()})},valider(t){unicaenVue.axios.get(this.validerUrl).then(s=>{this.suivi.refresh()})},devalider(t){popConfirm(t.currentTarget,s=>{this.suivi.refresh()})}}},Rm={class:"event-content"},Im={class:"mission"},wm={key:0,class:"badge bg-success"},$m={class:"horaires"},Hm={key:0,class:"badge bg-secondary"},Lm={key:0,class:"description"},Nm={class:"event-actions"},jm={class:"btn-group btn-group-sm"},Om=["data-url"],qm=["data-url"],zm=["data-url"],Bm=["data-url"];function Gm(t,s,n,p,r,i){const u=j;return a(),l(y,null,[e("div",Rm,[e("p",Im,[b(d(n.event.mission.libelleCourt)+" ",1),n.event.valide?(a(),l("span",wm,"Validé")):h("",!0)]),e("p",$m,[b(" de "+d(i.heureDebut)+" à "+d(i.heureFin)+", soit "+d(i.heures)+" heure"+d(i.heures<2?"":"s")+" ",1),n.event.formation?(a(),l("span",Hm,"En formation")):h("",!0)]),n.event.description?(a(),l("p",Lm,d(n.event.description),1)):h("",!0)]),e("div",Nm,[e("div",jm,[n.event.canEdit?(a(),l("button",{key:0,class:"btn btn-light",onClick:s[0]||(s[0]=(...m)=>i.modifier&&i.modifier(...m)),title:"Modifier le suivi","data-url":r.modifierUrl},[_(u,{name:"pen-to-square"})],8,Om)):h("",!0),n.event.canValider?(a(),l("button",{key:1,class:"btn btn-light",onClick:s[1]||(s[1]=(...m)=>i.valider&&i.valider(...m)),title:"Valider le suivi","data-url":r.validerUrl},[_(u,{name:"check",class:"text-success"})],8,qm)):h("",!0),n.event.canDevalider?(a(),l("button",{key:2,class:"btn btn-light",onClick:s[2]||(s[2]=(...m)=>i.devalider&&i.devalider(...m)),title:"Dévalider le suivi","data-url":r.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[_(u,{name:"xmark",class:"text-danger"})],8,zm)):h("",!0),n.event.canSupprimer?(a(),l("button",{key:3,class:"btn btn-light",onClick:s[3]||(s[3]=(...m)=>i.supprimer&&i.supprimer(...m)),title:"Supprimer le suivi","data-url":r.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[_(u,{name:"trash-can",class:"text-danger"})],8,Bm)):h("",!0)])])],64)}const ue=P(Fm,[["render",Gm],["__scopeId","data-v-17cb1f29"]]),Jm=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"})),Ym={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(t){this.date=t},ajouter(t,s){const n={intervenant:this.intervenant,date:t.toISOString().slice(0,10)};s.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",n),modAjax(s.currentTarget,p=>{this.refresh()})},refresh(){const t=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let s=0,n=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(p=>{let r=[];for(let i in p.data){let u=p.data[i];n[u.mission.id]===void 0&&(n[u.mission.id]=t[s],s++),u.valide&&(u.bgcolor="#d0eddb"),u.color=n[u.mission.id],u.component=pe(ue),u.date=new Date(u.date),u.intervenant=this.intervenant,r.push(u)}this.suivi=r,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function Qm(t,s,n,p,r,i){const u=Um;return a(),R(u,{date:r.date,onChangeDate:i.changeDate,onAddEvent:i.ajouter,"can-add-event":n.canAddMission,addDateFin:"now",events:r.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const Wm=P(Ym,[["render",Qm]]),Xm=Object.freeze(Object.defineProperty({__proto__:null,default:Wm},Symbol.toStringTag,{value:"Module"})),Zm={name:"DemandeMiseEnPaiementStructure",props:{datas:{required:!0},intervenant:{required:!0}},data(){return{dotationPaieEtat:this.datas.budget.dotation.paieEtat,dotationRessourcesPropres:this.datas.budget.dotation.ressourcePropre,consommationPaieEtat:this.datas.budget.liquidation.paieEtat,consommationRessourcesPropres:this.datas.budget.liquidation.ressourcePropre}},watch:{datas:function(){this.dotationPaieEtat=this.datas.budget.dotation.paieEtat,this.dotationRessourcesPropres=this.datas.budget.dotation.ressourcePropre,this.consommationPaieEtat=this.datas.budget.liquidation.paieEtat,this.consommationRessourcesPropres=this.datas.budget.liquidation.ressourcePropre}},computed:{pourcentagePaieEtat(){return Math.round(this.consommationPaieEtat/this.dotationPaieEtat*100)},pourcentageRessourcePropre(){return Math.round(this.consommationRessourcesPropres/this.dotationRessourcesPropres*100)},bgPaieEtat(){return Math.round(this.consommationPaieEtat/this.dotationPaieEtat*100)>100?"bg-warning":"bg-success"},bgRessourcesPropres(){return Math.round(this.consommationRessourcesPropres/this.dotationRessourcesPropres*100)>100?"bg-warning":"bg-success"}},methods:{heuresStatutToString(t){if(t.heuresAPayer==t.heuresPayees&&t.heuresAPayer>0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-success">Paiement effectué</span>';if(t.heuresAPayer==t.heuresDemandees)return'<span style="font-size:12px;line-height:20px;" class="badge bg-secondary text-dark">Paiement demandé</span>';if(t.heuresDemandees==0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-light text-dark">A payer</span>';if(Number(t.heuresPayees)>Number(t.heuresAPayer)){let s=t.heuresPayees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement effectué - '+parseFloat(s.toFixed(2))+" hetd(s) payées en trop. </span>"}if(Number(t.heuresDemandees)>Number(t.heuresAPayer)){let s=t.heuresDemandees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement demandé - '+parseFloat(s.toFixed(2))+" hetd(s) demandées en trop. </span></span>"}return"indetermine"},supprimerDemandeMiseEnPaiement(t){this.btnState("remove-"+t,"disabled"),unicaenVue.axios.get(unicaenVue.url("paiement/:intervenant/supprimer-demande/:dmep",{intervenant:this.intervenant,dmep:t})).then(s=>{this.$emit("refresh")}).catch(s=>{this.$emit("refresh")})},disabledPaiement(t){return t.missionId!=""||t.formuleResServiceRefId!=""?!(t.centreCoutId&&t.domaineFonctionnel):!1},enabledPaiement(t,s){if(s=="mission"){let n=document.getElementById("add-"+t),p=document.getElementById("centreCout-"+t).value,r=document.getElementById("domaineFonctionnel-"+t).value;p!=""&&r!=""?n.disabled=!1:n.disabled=!0}},ajouterDemandeMiseEnPaiement(t){this.btnState("add-"+t,"disabled");let s={animation:!0,delay:15e3,autohide:!0},n=document.getElementById("heures-"+t),p=document.getElementById("centreCout-"+t),r=document.getElementById("domaineFonctionnel-"+t),i=Number(n.value),u=Number(n.getAttribute("max")),m=r?r.value:"",c=n.hasAttribute("data-type-heures-id")?n.getAttribute("data-type-heures-id"):"",o=n.hasAttribute("data-service-id")?n.getAttribute("data-service-id"):"",V=n.hasAttribute("data-service-referentiel-id")?n.getAttribute("data-service-referentiel-id"):"",f=n.hasAttribute("data-mission-id")?n.getAttribute("data-mission-id"):"",A=p.value,k=p.options[p.selectedIndex].getAttribute("data-ressources-propres"),G=p.options[p.selectedIndex].getAttribute("data-paie-etat");if(A=="")return unicaenVue.flashMessenger.toast("Vous devez sélectionner un centre de coût pour demander la mise en paiement de ces heures","error",s),this.btnResetState(),!1;if(i>0&&i>u)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible, vous demandez "+i+" hetd(s) alors que vous pouvez demander maximum "+u+" hetd(s)","error",s),this.btnResetState(),!1;if(G==1&&this.dotationPaieEtat>0&&this.dotationPaieEtat-(this.consommationPaieEtat+i)<=0)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible manque de dotation 'paie etat' pour ces heures","error",s),this.btnResetState(),!1;if(k==1&&this.dotationRessourcesPropres>0&&this.dotationRessourcesPropres-(this.consommationRessourcesPropres+i)<=0)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible manque de dotation 'ressources propres' pour ces heures","error",s),this.btnResetState(),!1;var L=[];let w={heures:i,centreCoutId:A,typeHeuresId:c,serviceId:o,serviceReferentielId:V,domaineFonctionnelId:m,missionId:f,structureId:this.datas.id};L.push(w),unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),L).then(q=>{this.$emit("refresh")}).catch(q=>{this.$emit("refresh"),console.error(q)})},demanderToutesLesHeuresEnPaiement(t,s){this.btnState("add-all-"+t,"disabled");let n=[],r=document.getElementById("demande-mise-en-paiement-"+t).getElementsByTagName("tr");for(var i=0;i<r.length;i++)if(r[i].getElementsByTagName("input").length>0&&r[i].classList.contains("detailHeure")){let u=r[i].getElementsByTagName("input")[0],m=r[i].getElementsByTagName("select")[0],c=r[i].getElementsByTagName("select")[1],o=Number(u.value),V=Number(u.getAttribute("max"));if(o<=0||o>V)console.warn("Le nombre d'heures demandées en paiement n'est pas situé entre le max et min possible.");else{let f=m.value,A=u.hasAttribute("data-type-heures-id")?u.getAttribute("data-type-heures-id"):"",k=u.hasAttribute("data-mission-id")?u.getAttribute("data-mission-id"):"",G=u.hasAttribute("data-service-id")?u.getAttribute("data-service-id"):"",L=u.hasAttribute("data-service-referentiel-id")?u.getAttribute("data-service-referentiel-id"):"",w=c?c.value:"",q={heures:o,centreCoutId:f,typeHeuresId:A,serviceId:G,serviceReferentielId:L,domaineFonctionnelId:w,missionId:k,structureId:this.datas.id};n.push(q)}}unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),n).then(u=>{this.$emit("refresh")}).catch(u=>{this.$emit("refresh")})},filtrerCentresCouts(t,s){let n=[];for(var p in t){let r=p,i=[];t[p].forEach(function(u,m){u[s]==1&&i.push(u)}),i.length!=0&&n.push({group:r,child:i})}return n},notValueCentreCoutValue(t,s){return this.filtrerCentresCouts(t,s).length!=0?"Choisir un centre de coût":"Aucun centre de coût disponible demande de paiement impossible"},totalHeure(t){let s=0;for(var n in t)s+=Number(t[n].heuresAPayer);return parseFloat(s.toFixed(2))},shorten(t,s=20){if(t.length>s){var n='<span title="'+t+'"';return n+='data-bs-placement="top" data-bs-toggle="tooltip">',n+=t.substring(0,s)+"...",n+="</span>",n}else return t},btnState(t,s){let n=document.getElementById(t);return n?(s=="enabled"&&(n.disabled=!1,n.querySelector("#waiting").style.display="none",n.querySelector("#action").style.display="inline-block"),s=="disabled"&&(n.disabled=!0,n.querySelector("#waiting").style.display="inline-block",n.querySelector("#action").style.display="none"),!0):!1},formatDate(t,s){return Util.dateToString(t)}}},Km=["id"],eh=["id"],th=["aria-controls","data-bs-target"],sh=["id","aria-labelledby"],nh={class:"accordion-body"},rh={key:0},ih=e("div",{class:"cartridge gray bordered",style:{"padding-bottom":"5px","margin-bottom":"20px"}},[e("span",null,"Budget")],-1),ah={class:"container"},lh={class:"table table-bordered caption-top"},oh=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Paie état"),e("th",{class:"fw-bold",scope:"col"},"Ressources propres")])],-1),uh={style:{width:"50%"}},dh={key:0,class:"text-center progress position-relative bg-secondary",style:{height:"30px"}},ch={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},mh=["aria-valuemax","aria-valuenow","title"],hh={key:1,class:"text-center"},_h={style:{width:"50%"}},ph={key:0,class:"progress position-relative bg-secondary",style:{height:"30px"}},fh={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},bh=["aria-valuemax","aria-valuenow","title"],vh={key:1,class:"text-center"},gh={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},yh=e("span",null,"Enseignement",-1),xh=["innerHTML"],Ch={class:"container"},Vh={class:"row"},Sh={class:"col-12"},Ph={class:"table mt-3 table-bordered"},kh={class:"table-light"},Ah={colspan:"2"},Mh={colspan:"2"},Dh={class:"table table-sm"},Eh=e("thead",null,[e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"40%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),Th={class:"detailHeure"},Uh={key:0,style:{width:"20%"}},Fh=["title"],Rh={class:"number number-positif"},Ih=["title"],wh={class:"number number-positif"},$h={key:1,style:{width:"20%"}},Hh={class:"input-group col-1"},Lh=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],Nh=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),jh={key:2},Oh=["id"],qh={value:""},zh=["label"],Bh=["data-paie-etat","data-ressources-propres","selected","value"],Gh=["innerHTML"],Jh=["innerHTML"],Yh={style:{"font-size":"12px"}},Qh={key:0},Wh=["id","onClick"],Xh={key:1},Zh=["id","onClick"],Kh={class:"table-light"},e_=e("th",{scope:"row"},"Total heures à payer",-1),t_={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},s_=e("span",null,"Référentiel",-1),n_={class:"container"},r_={class:"row"},i_={class:"col-12"},a_={class:"table mt-3 table-bordered"},l_={colspan:"2"},o_={class:"table table-sm"},u_=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),d_={class:"detailHeure"},c_={key:0,style:{width:"20%"}},m_=["title"],h_={class:"number number-positif"},__=["title"],p_={class:"number number-positif"},f_={key:1,style:{width:"20%"}},b_={class:"input-group col-1"},v_=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],g_=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),y_={key:2},x_=["id"],C_={value:""},V_=["label"],S_=["data-paie-etat","data-ressources-propres","selected","value"],P_=["innerHTML"],k_={key:4},A_=["id"],M_=e("option",{value:""},"Aucun domaine fonctionnel",-1),D_=["selected","value"],E_={key:5},T_=["innerHTML"],U_={style:{"font-size":"12px"}},F_={key:0},R_=["id","onClick"],I_={key:1},w_=["id","onClick"],$_={class:"table-light"},H_=e("th",{scope:"row"},"Total",-1),L_={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},N_=e("span",null,"Mission",-1),j_={class:"container"},O_={class:"row"},q_={class:"col-12"},z_={class:"table mt-3 table-bordered"},B_={colspan:"2"},G_={class:"table table-sm"},J_=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),Y_={class:"detailHeure"},Q_={key:0,style:{width:"20%"}},W_=["title"],X_={class:"number number-positif"},Z_=["title"],K_={class:"number number-positif"},ep={key:1,style:{width:"20%"}},tp={class:"input-group col-1"},sp=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],np=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"heure(s)",-1),rp={key:2},ip=["id","onChange"],ap={value:""},lp=["label"],op=["data-paie-etat","data-ressources-propres","selected","value"],up=["innerHTML"],dp={key:4},cp=["id","onChange"],mp=e("option",{value:""},"Aucun domaine fonctionnel",-1),hp=["selected","value"],_p={key:5},pp=["innerHTML"],fp={style:{"font-size":"12px"}},bp={key:0},vp=["id","onClick"],gp={key:1},yp=["id","onClick"],xp={class:"table-light"},Cp=e("th",{scope:"row"},"Total",-1),Vp={style:{"background-color":"#fbfbfb",padding:"10px","padding-right":"40px","text-align":"right"}},Sp=["id"];function Pp(t,s,n,p,r,i){const u=j;return a(),l("div",{id:"demande-mise-en-paiement-"+n.datas.code,class:"accordion-item"},[e("h2",{id:"dmep-heading-"+n.datas.code,class:"accordion-header"},[e("button",{"aria-controls":"dmep-collapse-"+n.datas.code,"data-bs-target":"#dmep-collapse-"+n.datas.code,"aria-expanded":"true",class:"accordion-button bg-light","data-bs-toggle":"collapse",type:"button"},d(n.datas.code+" - "+n.datas.libelle),9,th)],8,eh),e("div",{id:"dmep-collapse-"+n.datas.code,"aria-labelledby":"dmep-heading-"+n.datas.code,class:"accordion-collapse collapse show"},[e("div",nh,[this.dotationPaieEtat+r.dotationRessourcesPropres>0?(a(),l("div",rh,[ih,e("div",ah,[e("table",lh,[oh,e("tbody",null,[e("tr",null,[e("td",uh,[this.dotationPaieEtat>0?(a(),l("div",dh,[e("span",ch,d(this.consommationPaieEtat+" sur "+this.dotationPaieEtat)+" HETD",1),e("div",{"aria-valuemax":this.dotationPaieEtat,"aria-valuenow":this.consommationPaieEtat,class:D("progress-bar progress-bar-striped "+this.bgPaieEtat),style:W("width:"+this.pourcentagePaieEtat+"%;"),title:this.pourcentagePaieEtat+"%","aria-valuemin":"0",role:"progressbar"},null,14,mh)])):h("",!0),this.dotationPaieEtat==0?(a(),l("div",hh," Aucune dotation paie état ")):h("",!0)]),e("td",_h,[this.dotationRessourcesPropres>0?(a(),l("div",ph,[e("span",fh,d(this.consommationRessourcesPropres+" sur "+this.dotationRessourcesPropres)+" HETD",1),e("div",{"aria-valuemax":this.dotationRessourcesPropres,"aria-valuenow":this.consommationRessourcesPropres,class:D("progress-bar progress-bar-striped "+this.bgRessourcesPropres),style:W("width:"+this.pourcentageRessourcePropre+"%;"),title:this.pourcentageRessourcePropre+"%","aria-valuemin":"0",role:"progressbar"},null,14,bh)])):h("",!0),this.dotationRessourcesPropres==0?(a(),l("div",vh," Aucune dotation ressources propres ")):h("",!0)])])])])])])):h("",!0),(a(!0),l(y,null,x(n.datas.etapes,(m,c)=>(a(),l("div",null,[(a(!0),l(y,null,x(m.enseignements,(o,V)=>(a(),l("div",null,[e("div",gh,[yh,e("span",{innerHTML:i.shorten(m.libelle,50)},null,8,xh),e("span",null,d(o.libelle),1)]),e("div",Ch,[e("div",Vh,[(a(!0),l(y,null,x(o.typeHeure,(f,A)=>(a(),l("div",Sh,[e("table",Ph,[e("thead",kh,[e("tr",null,[e("th",Ah,d(f.libelle),1)])]),e("tbody",null,[e("tr",null,[e("td",Mh,[e("table",Dh,[Eh,e("tbody",null,[(a(!0),l(y,null,x(f.heures,(k,G)=>(a(),l("tr",Th,[k.heuresDemandees!=0?(a(),l("td",Uh,[k.datePaiement?(a(),l("abbr",{key:0,title:"Payé en "+k.periodeLibelle+" le "+i.formatDate(k.datePaiement)},[e("span",Rh,d(Number(k.heuresPayees))+" hetd(s)",1)],8,Fh)):h("",!0),k.datePaiement?h("",!0):(a(),l("abbr",{key:1,title:"Demandé le "+i.formatDate(k.dateDemande)},[e("span",wh,d(Number(k.heuresDemandees))+" hetd(s)",1)],8,Ih))])):h("",!0),k.heuresDemandees==0?(a(),l("td",$h,[e("div",Hh,[e("input",{id:"heures-"+c+"-"+V+"-"+A,"data-domaine-fonctionnel-id":k.domaineFonctionnelId,"data-mission-id":k.missionId,"data-service-id":k.serviceId,"data-service-referentiel-id":k.serviceReferentielId,"data-type-heures-id":k.typeHeureId,max:k.heuresAPayer,value:k.heuresAPayer,class:"form-control form-control-sm",min:"0",type:"number"},null,8,Lh),Nh])])):h("",!0),k.heuresDemandees==0?(a(),l("td",jh,[e("select",{id:"centreCout-"+c+"-"+V+"-"+A,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",qh,d(i.notValueCentreCoutValue(n.datas.centreCoutPaiement,k.typeHeureCode)),1),(a(!0),l(y,null,x(i.filtrerCentresCouts(n.datas.centreCoutPaiement,k.typeHeureCode),L=>(a(),l("optgroup",{key:L.group,label:L.group},[(a(!0),l(y,null,x(L.child,w=>(a(),l("option",{key:w.value,"data-paie-etat":w.paieEtat,"data-ressources-propres":w.ressourcesPropres,selected:w.centreCoutId==k.centreCout.centreCoutId,value:w.centreCoutId},d(w.centreCoutCode+" - "+w.centreCoutLibelle),9,Bh))),128))],8,zh))),128))],8,Oh)])):h("",!0),k.heuresDemandees!=0?(a(),l("td",{key:3,innerHTML:i.shorten(k.centreCout.code+" - "+k.centreCout.libelle,30)},null,8,Gh)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(k)},null,8,Jh),e("td",Yh,[k.heuresPayees==0&&k.heuresDemandees>0?(a(),l("span",Qh,[e("button",{id:"remove-"+k.mepId,class:"btn btn-danger",type:"button",onClick:L=>this.supprimerDemandeMiseEnPaiement(k.mepId)},[_(u,{id:"action",name:"trash",style:{color:"white"}}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Wh)])):h("",!0),k.heuresDemandees==0?(a(),l("span",Xh,[e("button",{id:"add-"+c+"-"+V+"-"+A,class:"btn btn-primary",type:"button",onClick:L=>this.ajouterDemandeMiseEnPaiement(c+"-"+V+"-"+A)},[_(u,{id:"action",name:"plus"}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Zh)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",Kh,[e_,e("td",null,d(i.totalHeure(f.heures))+" hetd(s)",1)])])])]))),256))])])]))),256))]))),256)),(a(!0),l(y,null,x(n.datas.fonctionsReferentiels,(m,c)=>(a(),l("div",null,[e("div",t_,[s_,e("span",null,d(m.libelle),1)]),e("div",n_,[e("div",r_,[e("div",i_,[e("table",a_,[e("tbody",null,[e("tr",null,[e("td",l_,[e("table",o_,[u_,e("tbody",null,[(a(!0),l(y,null,x(m.heures,(o,V)=>(a(),l("tr",d_,[o.heuresDemandees!=0?(a(),l("td",c_,[o.datePaiement?(a(),l("abbr",{key:0,title:"Payé en "+o.periodeLibelle+" le "+i.formatDate(o.datePaiement)},[e("span",h_,d(Number(o.heuresPayees))+" hetd(s)",1)],8,m_)):h("",!0),o.datePaiement?h("",!0):(a(),l("abbr",{key:1,title:"Demandé le "+i.formatDate(o.dateDemande)},[e("span",p_,d(Number(o.heuresDemandees))+" hetd(s)",1)],8,__))])):h("",!0),o.heuresDemandees==0?(a(),l("td",f_,[e("div",b_,[e("input",{id:"heures-"+c,"data-domaine-fonctionnel-id":o.domaineFonctionnelId,"data-mission-id":o.missionId,"data-service-id":o.serviceId,"data-service-referentiel-id":o.serviceReferentielId,"data-type-heures-id":o.typeHeureId,max:o.heuresAPayer,value:o.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,v_),g_])])):h("",!0),o.heuresDemandees==0?(a(),l("td",y_,[e("select",{id:"centreCout-"+c,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",C_,d(i.notValueCentreCoutValue(n.datas.centreCoutPaiement,o.typeHeureCode)),1),(a(!0),l(y,null,x(i.filtrerCentresCouts(n.datas.centreCoutPaiement,"referentiel"),f=>(a(),l("optgroup",{key:f.group,label:f.group},[(a(!0),l(y,null,x(f.child,A=>(a(),l("option",{key:A.value,"data-paie-etat":A.paieEtat,"data-ressources-propres":A.ressourcesPropres,selected:A.centreCoutId==o.centreCout.centreCoutId,value:A.centreCoutId},d(A.centreCoutCode+" - "+A.centreCoutLibelle),9,S_))),128))],8,V_))),128))],8,x_)])):h("",!0),o.heuresDemandees!=0?(a(),l("td",{key:3,innerHTML:i.shorten(o.centreCout.code+" - "+o.centreCout.libelle,20)},null,8,P_)):h("",!0),o.heuresDemandees==0?(a(),l("td",k_,[e("select",{id:"domaineFonctionnel-"+c,class:"selectpicker","data-live-search":"true",name:"centreCout"},[M_,(a(!0),l(y,null,x(n.datas.domaineFonctionnelPaiement,f=>(a(),l("option",{selected:f.domaineFonctionnelId==o.domaineFonctionnel.domaineFonctionnelId,value:f.domaineFonctionnelId},d(f.domaineFonctionnelLibelle),9,D_))),256))],8,A_)])):h("",!0),o.heuresDemandees!=0?(a(),l("td",E_,d(o.domaineFonctionnel.libelle),1)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(o)},null,8,T_),e("td",U_,[o.heuresPayees==0&&o.heuresDemandees>0?(a(),l("span",F_,[e("button",{id:"remove-"+o.mepId,class:"btn btn-danger",type:"button",onClick:f=>this.supprimerDemandeMiseEnPaiement(o.mepId)},[_(u,{id:"action",name:"trash",style:{color:"white"}}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,R_)])):h("",!0),o.heuresDemandees==0?(a(),l("span",I_,[e("button",{id:"add-"+c,class:"btn btn-primary",type:"button",onClick:f=>this.ajouterDemandeMiseEnPaiement(c)},[_(u,{id:"action",name:"plus"}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,w_)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",$_,[H_,e("td",null,d(i.totalHeure(m.heures))+" hetd(s)",1)])])])])])])]))),256)),(a(!0),l(y,null,x(n.datas.missions,m=>(a(),l("div",null,[e("div",L_,[N_,e("span",null,d(m.libelle),1)]),e("div",j_,[e("div",O_,[e("div",q_,[e("table",z_,[e("tbody",null,[e("tr",null,[e("td",B_,[e("table",G_,[J_,e("tbody",null,[(a(!0),l(y,null,x(m.heures,(c,o)=>(a(),l("tr",Y_,[c.heuresDemandees!=0?(a(),l("td",Q_,[c.datePaiement?(a(),l("abbr",{key:0,title:"Payé en "+c.periodeLibelle+" le "+i.formatDate(c.datePaiement)},[e("span",X_,d(Number(c.heuresPayees))+" heure(s)",1)],8,W_)):h("",!0),c.datePaiement?h("",!0):(a(),l("abbr",{key:1,title:"Demandé le "+i.formatDate(c.dateDemande)},[e("span",K_,d(Number(c.heuresDemandees))+" heure(s)",1)],8,Z_))])):h("",!0),c.heuresDemandees==0?(a(),l("td",ep,[e("div",tp,[e("input",{id:"heures-"+m.missionId,"data-domaine-fonctionnel-id":c.domaineFonctionnelId,"data-mission-id":c.missionId,"data-service-id":c.serviceId,"data-service-referentiel-id":c.serviceReferentielId,"data-type-heures-id":c.typeHeureId,max:c.heuresAPayer,value:c.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,sp),np])])):h("",!0),c.heuresDemandees==0?(a(),l("td",rp,[e("select",{id:"centreCout-"+m.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:V=>i.enabledPaiement(m.missionId,"mission")},[e("option",ap,d(i.notValueCentreCoutValue(n.datas.centreCoutPaiement,c.typeHeureCode)),1),(a(!0),l(y,null,x(i.filtrerCentresCouts(n.datas.centreCoutPaiement,"mission"),V=>(a(),l("optgroup",{key:V.group,label:V.group},[(a(!0),l(y,null,x(V.child,f=>(a(),l("option",{key:f.value,"data-paie-etat":f.paieEtat,"data-ressources-propres":f.ressourcesPropres,selected:f.centreCoutId==c.centreCout.centreCoutId,value:f.centreCoutId},d(f.centreCoutCode+" - "+f.centreCoutLibelle),9,op))),128))],8,lp))),128))],40,ip)])):h("",!0),c.heuresDemandees!=0?(a(),l("td",{key:3,innerHTML:i.shorten(c.centreCout.code+" - "+c.centreCout.libelle,20)},null,8,up)):h("",!0),c.heuresDemandees==0?(a(),l("td",dp,[e("select",{id:"domaineFonctionnel-"+m.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:V=>i.enabledPaiement(m.missionId,"mission")},[mp,(a(!0),l(y,null,x(n.datas.domaineFonctionnelPaiement,V=>(a(),l("option",{selected:V.domaineFonctionnelId==c.domaineFonctionnel.domaineFonctionnelId,value:V.domaineFonctionnelId},d(V.domaineFonctionnelLibelle),9,hp))),256))],40,cp)])):h("",!0),c.heuresDemandees!=0?(a(),l("td",_p,d(c.domaineFonctionnel.libelle),1)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(c)},null,8,pp),e("td",fp,[c.heuresPayees==0&&c.heuresDemandees>0?(a(),l("span",bp,[e("button",{id:"remove-"+c.mepId,class:"btn btn-danger",type:"button",onClick:V=>this.supprimerDemandeMiseEnPaiement(c.mepId)},[_(u,{id:"action",name:"trash",style:{color:"white"}}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,vp)])):h("",!0),c.heuresDemandees==0?(a(),l("span",gp,[e("button",{id:"add-"+m.missionId,class:"btn btn-primary",type:"button",onClick:V=>this.ajouterDemandeMiseEnPaiement(m.missionId)},[_(u,{id:"action",name:"plus"}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,yp)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",xp,[Cp,e("td",null,d(i.totalHeure(m.heures))+" heure(s)",1)])])])])])])]))),256))]),e("div",Vp,[e("button",{id:"add-all-"+n.datas.code,class:"btn btn-primary",type:"button",onClick:s[0]||(s[0]=m=>i.demanderToutesLesHeuresEnPaiement(n.datas.code,n.datas.libelle))},[_(u,{id:"action",name:"square-plus",style:{color:"white"}}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}}),b(" DEMANDER TOUS LES PAIEMENTS POUR "+d(n.datas.libelleCourt),1)],8,Sp)])],8,sh)],8,Km)}const de=P(Zm,[["render",Pp]]),kp=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),Ap={name:"DemandeMiseEnPaiement",components:{DemandeMiseEnPaiementStructure:de},props:{intervenant:{required:!1}},data(){return{datasDemandesMiseEnPaiement:null,urlGetDemandesMiseEnPaiement:unicaenVue.url("intervenant/:intervenant/mise-en-paiement/get-demandes-mise-en-paiement",{intervenant:this.intervenant})}},methods:{getDemandesMiseEnPaiement(){unicaenVue.axios.get(this.urlGetDemandesMiseEnPaiement).then(t=>{this.datasDemandesMiseEnPaiement=t.data}).then(t=>{this.btnResetState()}).catch(t=>{this.btnResetState(),console.error(t)})},btnResetState(){Array.from(document.querySelectorAll('[id^="remove-"]')).forEach(p=>{p.disabled=!1,p.querySelector("#waiting").style.display="none",p.querySelector("#action").style.display="inline-block"}),Array.from(document.querySelectorAll('[id^="add-"]')).forEach(p=>{p.disabled=!1,p.querySelector("#waiting").style.display="none",p.querySelector("#action").style.display="inline-block"}),Array.from(document.querySelectorAll('[id^="add-all"]')).forEach(p=>{p.disabled=!1,p.querySelector("#waiting").style.display="none",p.querySelector("#action").style.display="inline-block"})}},mounted(){this.getDemandesMiseEnPaiement()},updated(){$(".selectpicker").selectpicker("render");var t=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));t.map(function(s){return new bootstrap.Tooltip(s)})}},Mp={key:0,class:"text-center"},Dp=e("div",{class:"mt-5 spinner-border spinner-border-sm",role:"status"},[e("span",{class:"visually-hidden"},"Chargement des demandes de mise en paiement en cours...")],-1),Ep={id:"accordionPanelsStayOpenExample",class:"accordion"};function Tp(t,s,n,p,r,i){const u=F("demande-mise-en-paiement-structure");return a(),l(y,null,[this.datasDemandesMiseEnPaiement?h("",!0):(a(),l("div",Mp,[Dp,b(" Chargement des demandes de mise en paiement en cours... ")])),e("div",Ep,[(a(!0),l(y,null,x(r.datasDemandesMiseEnPaiement,(m,c)=>(a(),R(u,{datas:m,intervenant:n.intervenant,onRefresh:i.getDemandesMiseEnPaiement},null,8,["datas","intervenant","onRefresh"]))),256))])],64)}const Up=P(Ap,[["render",Tp]]),Fp=Object.freeze(Object.defineProperty({__proto__:null,default:Up},Symbol.toStringTag,{value:"Module"}));function Rp(t){for(let s in t)for(let n in t[s])ce(t[s][n],s)}function Ip(){let t=document.getElementById("unicaen-vue-toast-container");return t||(t=document.createElement("div"),t.id="unicaen-vue-toast-container",t.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(t)),t}function wp(t){return t=$p(t),t=Hp(t),t}function $p(t){const s=document.createElement("div");s.innerHTML=t;const n=s.querySelector(".alert");return n?n.innerHTML:s.innerHTML}function Hp(t){const s=document.createElement("div");return s.innerHTML=t,s.querySelectorAll("i.fas").forEach(p=>p.style.display="none"),s.innerHTML}function ce(t,s,n=null){const p={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},r={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},i=document.createElement("button");i.classList.add("btn-close","btn-close-white","h5"),i.style.float="right",i.setAttribute("data-bs-dismiss","toast"),i.setAttribute("aria-label","Close");const u=document.createElement("i");u.classList.add("icon","fas",`fa-${r[s]}`),u.style.float="left",u.style.fontSize="26pt",u.style.paddingLeft=".4rem",u.style.marginTop=".4rem",u.style.paddingRight="1rem";const m=document.createElement("div");m.classList.add("toast-body"),m.innerHTML=wp(t);const c=document.createElement("div");c.appendChild(i),c.appendChild(u),c.appendChild(m);const o=document.createElement("div");o.classList.add("toast","text-white",p[s]?p[s]:"bg-secondary"),o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),s==="error"&&t.length>500&&o.setAttribute("style","width:700px"),o.appendChild(c),Ip().appendChild(o),n==null&&(n={animation:!0,delay:s==="warning"?15e3:5e3,autohide:s!=="error"}),new bootstrap.Toast(o,n).show()}const X={toast:ce,toasts:Rp};let Y={...fe};Y.interceptors.request.use(t=>{if(t.submitter){let s=t.msg?t.msg:"Action en cours";t.popover!=null&&t.popover.dispose(),t.popover=new bootstrap.Popover(t.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+s,html:!0,trigger:"focus"}),t.popover.show()}return t});Y.interceptors.response.use(t=>{if(t.messages=t.data.messages,t.data=t.data.data,t.hasErrors=!!(t.messages&&t.messages.error&&t.messages.error.length>0),t.config.popover){var s=t.config.popover;let n="";for(ns in t.messages)for(mid in t.messages[ns])n+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+t.messages[ns][mid]+"</div>";n?(s._config.content=n,s.setContent(),setTimeout(()=>{s.dispose()},5e3)):s.dispose()}return t.messages&&X.toasts(t.messages),t},t=>{let s=t.response.data;t.response.status==403?s="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":s=t.response.data,X.toast(s,"error")});Y.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Lp={uvAxios:Y},Z={axios:Lp.uvAxios,flashMessenger:X,url:(t,s,n)=>{let p=window.__unicaenVueBaseUrl;if(s)for(let i in s)t=t.replace(`:${i}`,s[i]);let r=n?Z.encodeUrlQueryParam(n):null;return p+t+(r?`?${r}`:"")},encodeUrlQueryParam:(t,s)=>{var n=[];for(var p in t)if(t.hasOwnProperty(p)){var r=t[p],i=s?s+"["+encodeURIComponent(p)+"]":encodeURIComponent(p);if(typeof r=="object"&&r!==null)n.push(Z.encodeUrlQueryParam(r,i));else{var u=encodeURIComponent(r);n.push(i+"="+u)}}return n.join("&")}};window.unicaenVue=Z;const Np={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{type:Array,required:!0},canMiseEnPaiement:{type:Boolean,required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),urlMiseEnPaiement:unicaenVue.url("paiement/etat-demande-paiement"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:!1,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(t){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let s=document.getElementById("formRechercheDemandeMiseEnPaiement"),n=new FormData(s),p=document.getElementById("btn-rdmep"),r=document.getElementById("btn-rdmep-inprogress");r.classList.remove("d-none"),p.classList.add("d-none"),p.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,n,{}).then(i=>{this.dispatchDatas(i.data),p.disabled=!1,r.classList.add("d-none"),p.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(m,c){m.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(m=>{let c=m.data;this.dotation=c.dotation,this.liquidation=c.liquidation,this.refreshTotalConsommation()})}).catch(i=>{console.error(i)})},processDemandeMiseEnPaiement(t){let s=document.getElementById("formProcessDemandeMiseEnPaiement"),n=new FormData(s);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>=this.totalConsommationRessourcePropre||!this.haveDotation){let p=document.getElementById("btn-pdmep"),r=document.getElementById("btn-pdmep-inprogress");r.classList.remove("d-none"),p.classList.add("d-none"),p.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,n,{}).then(i=>{this.findDemandeMiseEnPaiement(),p.disabled=!1,r.classList.add("d-none"),p.classList.remove("d-none")}).catch(i=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let t=0,s=0,n=0;t=parseFloat(this.liquidation.paieEtat),s=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(r,i){r.hasAttribute("data-paie-etat")&&r.checked&&(t+=parseFloat(r.getAttribute("data-paie-etat")),n+=parseFloat(r.getAttribute("data-paie-etat"))),r.hasAttribute("data-ressource-propre")&&r.checked&&(s+=parseFloat(r.getAttribute("data-ressource-propre")),n+=parseFloat(r.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=t.toFixed(2),this.totalConsommationRessourcePropre=s.toFixed(2),this.totalConsommation=n.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(t){let s=0;return t.forEach((n,p)=>{n.centreCout.code!=""&&(n.missionId!=""||n.serviceRefId!=""?n.domaineFonctionnel.code!=""&&(s+=n.heuresAPayer):s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalNonPayable(t){let s=0;return t.forEach((n,p)=>{(n.centreCout.code==""||(n.missionId!=""||n.serviceRefId!="")&&n.domaineFonctionnel.code=="")&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePaieEtat(t){let s=0;return t.forEach((n,p)=>{n.centreCout.typeRessourceCode=="paie-etat"&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(t){let s=0;return t.forEach((n,p)=>{n.centreCout.typeRessourceCode=="ressources-propres"&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(t){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[],console.log(t);for(const[s,n]of Object.entries(t))switch(n.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(n),this.intervenants.push(n);break;case"Intervenant permanent":this.permanents.push(n),this.intervenants.push(n);break;case"Étudiant":this.etudiants.push(n),this.intervenants.push(n);break;default:this.autres.push(n),this.intervenants.push(n)}},toggleCheckbox(t){let s=Array.from(document.getElementsByClassName(t.target.className));t.target.checked?s.forEach(function(n,p){n.checked=!0}):s.forEach(function(n,p){n.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(t){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:t.datasIntervenant.code})},formattedHETD(t){return Util.formattedHeures(t,!1)}}},jp=e("h1",null,"Demande de mise en paiement par lots",-1),Op={class:"card text-dark bg-light"},qp=e("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1),zp={class:"card-body"},Bp={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},Gp={class:"mb-3"},Jp=e("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1),Yp=["value"],Qp={class:"mb-3"},Wp=e("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),b("  Veuillez patienter... ")],-1),Xp=["disabled"],Zp=e("div",{class:"alert alert-info",role:"alert"},[b(" Seules les HETD "),e("strong",null,"(hors référentiel)"),b(" avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisées. Pour les autres, il faudra passer sur chaque fiches intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ")],-1),Kp={key:0},ef={key:0,class:"alert alert-danger",role:"alert"},tf={class:"table table-bordered caption-top"},sf=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Budget"),e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressource propre"),e("th",{class:"fw-bold",scope:"col"},"Total")])],-1),nf=e("td",null,"Dotation",-1),rf={class:"fw-bold"},af=e("td",null,"Consommation",-1),lf={class:"fw-bold"},of={id:"dmep",class:"accordion"},uf={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},df={key:0,class:"accordion-item"},cf={id:"dmep-permanents-heading",class:"accordion-header"},mf={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},hf={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},_f={class:"accordion-body"},pf={class:"table"},ff={scope:"col"},bf=e("th",{scope:"col"},"Intervenant",-1),vf=e("th",null,"HETD payables",-1),gf=e("th",null,"HETD non payables",-1),yf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],xf=["href"],Cf=["title"],Vf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Sf={key:1,class:"accordion-item"},Pf={id:"dmep-vacataires-heading",class:"accordion-header"},kf={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},Af={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},Mf={class:"accordion-body"},Df={class:"table"},Ef=e("th",null,"Intervenant",-1),Tf=e("th",null,"HETD payables",-1),Uf=e("th",null,"HETD non payables",-1),Ff=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Rf=["href"],If=["title"],wf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},$f={key:2,class:"accordion-item"},Hf={id:"dmep-etudiants-heading",class:"accordion-header"},Lf={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},Nf={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},jf={class:"accordion-body"},Of={class:"table"},qf=e("th",null,"Intervenant",-1),zf=e("th",null,"HETD payables",-1),Bf=e("th",null,"HETD non payables",-1),Gf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Jf=["href"],Yf=["title"],Qf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Wf={key:3,class:"accordion-item"},Xf={id:"dmep-autres-heading",class:"accordion-header"},Zf={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},Kf={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},eb={class:"accordion-body"},tb={class:"table"},sb=e("th",null,"Intervenant",-1),nb=e("th",null,"HETD payables",-1),rb=e("th",null,"HETD non payables",-1),ib=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],ab=["href"],lb=["title"],ob={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},ub=["value"],db={key:4,class:"mt-3"},cb=e("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),b("  Veuillez patienter... ")],-1),mb=["disabled"],hb=["href"];function _b(t,s,n,p,r,i){return a(),l(y,null,[jp,e("div",Op,[qp,e("div",zp,[e("form",Bp,[e("div",Gp,[Jp,b("  "),v(e("select",{"onUpdate:modelValue":s[0]||(s[0]=u=>r.selectedStructure=u),class:"form-select",name:"structure"},[(a(!0),l(y,null,x(n.structures,u=>(a(),l("option",{value:u.id},d(u.libelle),9,Yp))),256))],512),[[U,r.selectedStructure]])]),e("div",Qp,[Wp,e("button",{id:"btn-rdmep",disabled:!r.selectedStructure,class:"btn btn-primary",type:"button",onClick:s[1]||(s[1]=(...u)=>i.findDemandeMiseEnPaiement&&i.findDemandeMiseEnPaiement(...u))}," Lancer la recherche ",8,Xp)])])])]),Zp,i.haveDotation?(a(),l("div",Kp,[r.alertDotation?(a(),l("div",ef," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):h("",!0),e("table",tf,[sf,e("tbody",null,[e("tr",null,[nf,e("td",null,d(i.formattedHETD(this.dotation.paieEtat))+" HETD",1),e("td",null,d(i.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),e("td",rf,d(i.formattedHETD(this.dotation.total))+" HETD",1)]),e("tr",null,[af,e("td",null,[e("span",{class:D(i.alertPaieEtat)},d(i.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),e("td",null,[e("span",{class:D(i.alertRessourcePropre)},d(i.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),e("td",lf,d(i.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):h("",!0),e("div",of,[e("form",uf,[this.permanents.length>0?(a(),l("div",df,[e("h2",cf,[e("button",mf,d(this.permanents.length)+" Permanent(s) ",1)]),e("div",hf,[e("div",_f,[e("table",pf,[e("thead",null,[e("tr",null,[e("th",ff,[e("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:s[2]||(s[2]=(...u)=>i.toggleCheckbox&&i.toggleCheckbox(...u))})]),bf,vf,gf])]),e("tbody",null,[(a(!0),l(y,null,x(this.permanents,u=>(a(),l("tr",null,[e("td",null,[e("input",{id:"permanent-"+u.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(u.heures),"data-ressource-propre":i.totalRessourcePropre(u.heures),disabled:i.totalPayable(u.heures)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:i.totalPayable(u.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:s[3]||(s[3]=m=>i.refreshTotalConsommation())},null,40,yf)]),e("td",null,[e("a",{href:i.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,xf)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+i.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(i.totalPayable(u.heures))+" h",9,Cf)]),e("td",null,[e("span",Vf,d(i.totalNonPayable(u.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.vacataires.length>0?(a(),l("div",Sf,[e("h2",Pf,[e("button",kf,d(this.vacataires.length)+" Vacataire(s) ",1)]),e("div",Af,[e("div",Mf,[e("table",Df,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:s[4]||(s[4]=(...u)=>i.toggleCheckbox&&i.toggleCheckbox(...u))})]),Ef,Tf,Uf])]),e("tbody",null,[(a(!0),l(y,null,x(this.vacataires,u=>(a(),l("tr",null,[e("td",null,[e("input",{id:"vacataire-"+u.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(u.heures),"data-ressource-propre":i.totalRessourcePropre(u.heures),disabled:i.totalPayable(u.heures)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:i.totalPayable(u.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:s[5]||(s[5]=m=>i.refreshTotalConsommation())},null,40,Ff)]),e("td",null,[e("a",{href:i.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,Rf)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+i.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(i.totalPayable(u.heures))+" h",9,If)]),e("td",null,[e("span",wf,d(i.totalNonPayable(u.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.etudiants.length>0?(a(),l("div",$f,[e("h2",Hf,[e("button",Lf,d(this.etudiants.length)+" Etudiant(s) ",1)]),e("div",Nf,[e("div",jf,[e("table",Of,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:s[6]||(s[6]=(...u)=>i.toggleCheckbox&&i.toggleCheckbox(...u))})]),qf,zf,Bf])]),e("tbody",null,[(a(!0),l(y,null,x(this.etudiants,u=>(a(),l("tr",null,[e("td",null,[e("input",{id:"etudiant-"+u.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(u.heures),"data-ressource-propre":i.totalRessourcePropre(u.heures),disabled:i.totalPayable(u.heures)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:i.totalPayable(u.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:s[7]||(s[7]=m=>i.refreshTotalConsommation())},null,40,Gf)]),e("td",null,[e("a",{href:i.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,Jf)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+i.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(i.totalPayable(u.heures))+" h",9,Yf)]),e("td",null,[e("span",Qf,d(i.totalNonPayable(u.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.autres.length>0?(a(),l("div",Wf,[e("h2",Xf,[e("button",Zf,d(this.autres.length)+" Autre(s) ",1)]),e("div",Kf,[e("div",eb,[e("table",tb,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:s[8]||(s[8]=(...u)=>i.toggleCheckbox&&i.toggleCheckbox(...u))})]),sb,nb,rb])]),e("tbody",null,[(a(!0),l(y,null,x(this.etudiants,u=>(a(),l("tr",null,[e("td",null,[e("input",{id:"autre-"+u.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(u.heures),"data-ressource-propre":i.totalRessourcePropre(u.heures),disabled:i.totalPayable(u.heures)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:i.totalPayable(u.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:s[9]||(s[9]=m=>i.refreshTotalConsommation())},null,40,ib)]),e("td",null,[e("a",{href:i.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,ab)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+i.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(i.totalPayable(u.heures))+" h",9,lb)]),e("td",null,[e("span",ob,d(i.totalNonPayable(u.heures))+" h",1)])]))),256))])])])])])):h("",!0),e("input",{value:r.selectedStructure,name:"selectedStructure",type:"hidden"},null,8,ub),this.intervenants.length>0?(a(),l("div",db,[cb,e("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:s[10]||(s[10]=(...u)=>i.processDemandeMiseEnPaiement&&i.processDemandeMiseEnPaiement(...u))}," Enregistrer les demandes de paiement ",8,mb),this.canMiseEnPaiement?(a(),l("a",{key:0,id:"btn-mep",href:this.urlMiseEnPaiement,class:"ms-2 btn btn-secondary"}," Aller au mise en paiement ",8,hb)):h("",!0)])):h("",!0)])])],64)}const pb=P(Np,[["render",_b]]),fb=Object.freeze(Object.defineProperty({__proto__:null,default:pb},Symbol.toStringTag,{value:"Module"})),bb={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},I=t=>(z("data-v-d4a24889"),t=t(),B(),t),vb=I(()=>e("h2",null,"Paramètres généraux ou bien selon le statut",-1)),gb={class:"table table-bordered table-condensed table-extra-condensed"},yb=I(()=>e("tr",null,[e("th",null,"Paramètre général"),e("th",null,"Valeur")],-1)),xb=I(()=>e("h2",null,"Services à payer",-1)),Cb={class:"card"},Vb={class:"card-header"},Sb={class:"badge bg-primary"},Pb={class:"card-body"},kb={class:"row lap"},Ab={class:"col-md-6"},Mb=I(()=>e("h6",null,"Heures à payer",-1)),Db={class:"table table-bordered table-xs"},Eb={key:0,rowspan:"2"},Tb={key:1,rowspan:"2"},Ub=I(()=>e("th",{colspan:"2"},"Taux de rému.",-1)),Fb=I(()=>e("th",{colspan:"3"},"Heures",-1)),Rb=I(()=>e("tr",null,[e("th",null,"Nom"),e("th",null,"Valeur"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")],-1)),Ib={key:0},wb=["title"],$b={key:1},Hb=["title"],Lb={class:"col-md-6"},Nb=I(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),b(" correspondantes")],-1)),jb={class:"table table-bordered table-xs"},Ob=I(()=>e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{colspan:"3"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")])],-1)),qb=["title"],zb=["title"],Bb={key:0},Gb={class:"badge bg-info"},Jb={key:0,class:"row"},Yb=I(()=>e("div",{class:"col-md-6"},null,-1)),Qb={class:"col-md-6"},Wb=I(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),b(" en trop")],-1)),Xb={class:"table table-bordered table-xs"},Zb=I(()=>e("thead",{class:"bg-danger"},[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{rowspan:"2"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date")])],-1)),Kb=["title"],e1=["title"];function t1(t,s,n,p,r,i){return a(),l(y,null,[vb,e("table",gb,[yb,(a(!0),l(y,null,x(n.parametres,(u,m)=>(a(),l("tr",{key:m},[e("th",null,d(m),1),e("td",null,d(u),1)]))),128))]),xb,(a(!0),l(y,null,x(n.servicesAPayer,(u,m)=>(a(),l("div",{key:m},[e("div",Cb,[e("div",Vb,[e("span",Sb,d(u.type),1),b(" "+d(u.libelle),1)]),e("div",Pb,[e("ul",null,[(a(!0),l(y,null,x(u.parametres,(c,o)=>(a(),l("li",{key:o},d(o)+" : "+d(c),1))),128))]),(a(!0),l(y,null,x(u.laps,c=>(a(),l("div",kb,[e("div",Ab,[Mb,e("table",Db,[e("thead",null,[e("tr",null,[u.type!="Référentiel"?(a(),l("th",Eb,"Volume horaire")):(a(),l("th",Tb,"Volumes horaires")),Ub,Fb]),Rb]),e("tbody",null,[e("tr",null,[u.type!="Référentiel"?(a(),l("td",Ib,[e("abbr",{class:"badge bg-secondary",title:c.volumeHoraireHisto},d(c.volumeHoraireId),9,wb),b(" "+d(c.volumeHoraire),1)])):(a(),l("td",$b,[(a(!0),l(y,null,x(c.volumeHoraireId,o=>(a(),l("div",null,[e("abbr",{class:"badge bg-secondary",title:o.HISTO},d(o.ID),9,Hb),b(" "+d(o.HEURES)+"h ",1)]))),256))])),e("td",null,d(c.tauxRemu),1),e("td",null,d(c.tauxValeur)+"€",1),e("td",null,d(c.heures),1),e("td",null,d(c.heuresAA),1),e("td",null,d(c.heuresAC),1)])])])]),e("div",Lb,[Nb,e("table",jb,[Ob,e("tbody",null,[(a(!0),l(y,null,x(c.misesEnPaiement,o=>(a(),l("tr",{key:o.id},[e("td",null,[e("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+o.heuresTotal+`
Domaine fonctionnel : `+o.domaineFonctionnel+`
`+o.historique},d(o.id),9,qb)]),e("td",null,[e("abbr",{title:o.centreCoutLibelle},d(o.centreCoutCode),9,zb)]),e("td",null,d(o.periodePaiement),1),e("td",null,d(o.date),1),e("td",null,d(o.heures),1),e("td",null,d(o.heuresAA),1),e("td",null,d(o.heuresAC),1)]))),128))])]),c.heuresRestantes!="0,00"?(a(),l("div",Bb,[e("span",Gb,d(c.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):h("",!0)])]))),256)),u.misesEnPaiement&&u.misesEnPaiement.length>0?(a(),l("div",Jb,[Yb,e("div",Qb,[Wb,e("table",Xb,[Zb,e("tbody",null,[(a(!0),l(y,null,x(u.misesEnPaiement,c=>(a(),l("tr",{key:c.id},[e("td",null,[e("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+c.domaineFonctionnel+`
`+c.historique},d(c.id),9,Kb)]),e("td",null,[e("abbr",{title:c.centreCoutLibelle},d(c.centreCoutCode),9,e1)]),e("td",null,d(c.periodePaiement),1),e("td",null,d(c.date),1),e("td",null,d(c.heures),1)]))),128))])])])])):h("",!0)])])]))),128))],64)}const s1=P(bb,[["render",t1],["__scopeId","data-v-d4a24889"]]),n1=Object.freeze(Object.defineProperty({__proto__:null,default:s1},Symbol.toStringTag,{value:"Module"})),r1={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(t){this.selectedFile=t.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(t){t.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let s=document.getElementById("btn-import"),n=document.getElementById("btn-import-inprogress");n.classList.remove("d-none"),s.classList.add("d-none"),s.disabled=!0;let p=document.getElementById("formImport"),r=new FormData(p);unicaenVue.axios.post(this.importUrl,r,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{let u=i.data;this.fileErrors=u.file,this.intervenantMissing=u.intervenant,u.message.length!=0?this.messageErrors=u.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",s.disabled=!1,n.classList.add("d-none"),s.classList.remove("d-none")}).catch(i=>{console.error("Error uploading")})}}},i1={class:"card text-dark bg-light"},a1=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),l1={class:"card-body"},o1={key:0,class:"alert alert-danger",role:"alert"},u1={key:1,class:"alert alert-success",role:"alert"},d1={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},c1=e("p",{class:"fs-9 text"},[b(" Vous pouvez utiliser le modèle directement extrait de winpaie "),e("strong",null,"(format .xlsx ou .ods)"),b(" ou créer votre modèle générique de classeur "),e("strong",null,"(format .xlsx ou .ods)"),b(" incluant 3 colonnes : insee,numero pec, nom. ")],-1),m1={class:"mb-3"},h1=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),_1=K('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),p1={class:"mb-3"},f1=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),b("  Veuillez patienter... ")],-1),b1={key:0,id:"fileErrors",class:"card text-dark bg-light"},v1=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),g1={class:"card-body"},y1={key:0},x1=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),C1={key:1},V1=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function S1(t,s,n,p,r,i){return a(),l(y,null,[e("div",i1,[a1,e("div",l1,[this.messageErrors?(a(),l("div",o1,d(this.messageErrors),1)):h("",!0),this.messageConfirm?(a(),l("div",u1,d(this.messageConfirm),1)):h("",!0),e("form",d1,[c1,e("div",m1,[h1,b("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:s[0]||(s[0]=(...u)=>i.handleFileUpload&&i.handleFileUpload(...u))},null,32)]),_1,e("div",p1,[f1,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:s[1]||(s[1]=(...u)=>i.importFile&&i.importFile(...u))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(a(),l("div",b1,[v1,e("div",g1,[this.fileErrors.length!=0?(a(),l("div",y1,[x1,e("ul",null,[(a(!0),l(y,null,x(this.fileErrors,u=>(a(),l("li",null,d(),1))),256))])])):h("",!0),this.intervenantMissing.length!=0?(a(),l("div",C1,[V1,e("ul",null,[(a(!0),l(y,null,x(this.intervenantMissing,u=>(a(),l("li",null,d(u),1))),256))])])):h("",!0)])])):h("",!0)],64)}const P1=P(r1,[["render",S1]]),k1=Object.freeze(Object.defineProperty({__proto__:null,default:P1},Symbol.toStringTag,{value:"Module"})),A1={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(t){modAjax(t.target,s=>{this.$emit("refreshListe")})},ajoutValeur(t){modAjax(t.target,s=>{this.$emit("refreshListe")})},saisieValeur(t){t.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:t.currentTarget.dataset.id}),modAjax(t.currentTarget,s=>{this.$emit("refreshListe")})},refreshListe(t){this.$emit("refreshListe")},supprimer(t){popConfirm(t.target,s=>{this.$emit("refreshListe")})},supprimerValeur(t){t.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refreshListe")})},refresh(t){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:t.id})).then(s=>{this.$emit("refresh",s.data)})}}},M1={class:"card-header"},D1={style:{display:"inline"}},E1={class:"float-end"},T1=["href"],U1=["href"],F1={class:"card-body"},R1={key:0},I1=e("br",null,null,-1),w1={class:""},$1={class:"row align-items-start"},H1={class:"col-md-6"},L1={class:"col"},N1=["data-id"],j1=["data-id"],O1=["href"],q1={key:1,class:"row"},z1={class:"col-md-7"},B1=e("br",null,null,-1),G1={class:"row align-items-start"},J1={class:"col-md-8"},Y1={class:"col-md-auto"},Q1=["data-id"],W1=["data-id"],X1=["href"],Z1={class:"col"},K1=e("br",null,null,-1),ev={key:0},tv={key:0};function sv(t,s,n,p,r,i){const u=j,m=F("u-heures"),c=O,o=F("taux",!0);return a(),l(y,null,[e("div",{class:D(["card",{"ms-5":n.taux.tauxRemu}])},[e("div",M1,[e("h3",D1,d(n.taux.libelle)+" ("+d(n.taux.code)+")",1),e("div",E1,[n.taux.canEdit?(a(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=S((...V)=>i.saisie&&i.saisie(...V),["prevent"]))},[_(u,{name:"pen-to-square"}),b(" Modifier")],8,T1)):h("",!0),b("   "),n.taux.canDelete?(a(),l("a",{key:1,href:r.supprimerUrl,class:"btn btn-danger",onClick:s[1]||(s[1]=S((...V)=>i.supprimer&&i.supprimer(...V),["prevent"]))},[_(u,{name:"trash-can"}),b(" Supprimer")],8,U1)):h("",!0)])]),e("div",F1,[n.taux.tauxRemu?h("",!0):(a(),l("div",R1,[b(" Modification :"),I1,e("ul",null,[(a(!0),l(y,null,x(n.taux.tauxRemuValeurs,V=>(a(),l("div",{key:V.id},[e("li",w1,[e("div",$1,[e("div",H1,[_(m,{valeur:V.valeur},null,8,["valeur"]),b("€/h à partir du "),_(c,{value:V.dateEffet},null,8,["value"])]),e("div",L1,[n.taux.canEdit?(a(),l("a",{key:0,class:"text-primary",onClick:s[2]||(s[2]=S((...f)=>i.saisieValeur&&i.saisieValeur(...f),["prevent"])),"data-id":V.id},[_(u,{name:"pen-to-square"})],8,N1)):h("",!0),b("   "),n.taux.canEdit?(a(),l("a",{key:1,class:"text-primary",onClick:s[3]||(s[3]=S((...f)=>i.supprimerValeur&&i.supprimerValeur(...f),["prevent"])),"data-id":V.id},[_(u,{name:"trash-can"})],8,j1)):h("",!0)])])])]))),128))]),n.taux.canEdit?(a(),l("a",{key:0,href:r.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:s[4]||(s[4]=S((...V)=>i.ajoutValeur&&i.ajoutValeur(...V),["prevent"]))},[_(u,{name:"plus"}),b(" Ajouter une valeur ")],8,O1)):h("",!0)])),n.taux.tauxRemu?(a(),l("div",q1,[e("div",z1,[b(" Modification :"),B1,e("ul",null,[(a(!0),l(y,null,x(n.taux.tauxRemuValeurs,V=>(a(),l("div",null,[e("li",null,[e("div",G1,[e("div",J1,[b(" Coéfficient de "),_(m,{valeur:V.valeur},null,8,["valeur"]),b(" à partir du "),_(c,{value:V.dateEffet},null,8,["value"])]),e("div",Y1,[n.taux.canEdit?(a(),l("a",{key:0,class:"text-primary",onClick:s[5]||(s[5]=S((...f)=>i.saisieValeur&&i.saisieValeur(...f),["prevent"])),"data-id":V.id},[_(u,{name:"pen-to-square"})],8,Q1)):h("",!0),b("   "),n.taux.canEdit?(a(),l("a",{key:1,class:"text-primary",onClick:s[6]||(s[6]=S((...f)=>i.supprimerValeur&&i.supprimerValeur(...f),["prevent"])),"data-id":V.id},[_(u,{name:"trash-can"})],8,W1)):h("",!0)])])])]))),256))]),n.taux.canEdit?(a(),l("a",{key:0,href:r.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:s[7]||(s[7]=S((...V)=>i.ajoutValeur&&i.ajoutValeur(...V),["prevent"]))},[_(u,{name:"plus"})],8,X1)):h("",!0)]),e("div",Z1,[b(" Valeurs calculées (indexées sur le taux "+d(n.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(a(!0),l(y,null,x(n.taux.tauxRemuValeursIndex,V=>(a(),l("div",null,[e("li",null,[_(m,{valeur:V.valeur},null,8,["valeur"]),b("€/h à partir du "),_(c,{value:V.date},null,8,["value"])])]))),256))]),K1])])):h("",!0)])],2),n.taux.tauxRemu?h("",!0):(a(),l("div",ev,[(a(!0),l(y,null,x(n.listeTaux,V=>(a(),l("div",{key:V},[V.tauxRemu&&V.tauxRemu.id===n.taux.id?(a(),l("div",tv,[(a(),R(o,{onSupprimer:i.supprimer,onRefreshListe:i.refreshListe,key:n.taux.id,taux:V,listeTaux:n.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):h("",!0)]))),128))]))],64)}const me=P(A1,[["render",sv]]),nv=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"})),rv={components:{taux:me},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(t){let s=Util.json.indexById(this.listeTaux,t.id);this.listeTaux[s]=t},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(t=>{this.listeTaux=t.data})}}},iv=["href"];function av(t,s,n,p,r,i){const u=F("taux");return a(),l(y,null,[(a(!0),l(y,null,x(r.listeTaux,m=>(a(),l("div",null,[m.tauxRemu?h("",!0):(a(),R(u,{onSupprimer:i.supprimer,onRefreshListe:i.refreshListe,key:m.id,taux:m,listeTaux:r.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),n.canEditTaux?(a(),l("a",{key:0,class:"btn btn-primary",href:r.ajoutUrl,onClick:s[0]||(s[0]=S((...m)=>i.ajout&&i.ajout(...m),["prevent"]))},"Ajout d'un nouveau taux",8,iv)):h("",!0)],64)}const lv=P(rv,[["render",av]]),ov=Object.freeze(Object.defineProperty({__proto__:null,default:lv},Symbol.toStringTag,{value:"Module"})),uv={name:"listeContrat",data(){return{dataUrl:unicaenVue.url("signature/data-contrat"),lines:[]}},methods:{contratUrl(t){return unicaenVue.url("intervenant/:intervenant/contrat",{intervenant:t})},getDocumentUrl(t){return unicaenVue.url("signature/:signature/get-document",{signature:t})},updateSignatureUrl(t){return unicaenVue.url("signature/:signature/update-signature",{signature:t})}}},dv=e("h1",{class:"page-header"},"Liste des signatures électroniques de contrat",-1),cv=e("thead",null,[e("tr",null,[e("th",{column:"ID_SIGNATURE"},"Id"),e("th",{column:"NOM"},"Nom"),e("th",{column:"PRENOM"},"Prénom"),e("th",{column:"DATE_CREATION_SIGNATURE_ELECTRONIQUE"},"Date signature électronique"),e("th",{column:"STATUT_SIGNATURE_ELECTRONIQUE"},"Statut"),e("th",null," ")])],-1),mv=["href"],hv=e("i",{class:"fas fa-download"},null,-1),_v=[hv],pv=["href"],fv=e("i",{class:"fas fa-eye"},null,-1),bv=[fv],vv=["href"],gv=e("i",{class:"fas fa-rotate"},null,-1),yv=[gv];function xv(t,s,n,p,r,i){const u=O,m=ee;return a(),l(y,null,[dv,_(m,{ref:"signatures",modelValue:r.lines,"onUpdate:modelValue":s[0]||(s[0]=c=>r.lines=c),"data-url":this.dataUrl},{default:T(()=>[cv,e("tbody",null,[(a(!0),l(y,null,x(r.lines,(c,o)=>(a(),l("tr",{key:o},[e("td",null,d(c.ID_SIGNATURE),1),e("td",null,d(c.NOM),1),e("td",null,d(c.PRENOM),1),e("td",null,[_(u,{value:c.DATE_CREATION_SIGNATURE_ELECTRONIQUE},null,8,["value"])]),e("td",null,d(c.STATUT_SIGNATURE_ELECTRONIQUE),1),e("td",null,[e("a",{href:i.getDocumentUrl(c.ID_SIGNATURE),class:"btn btn-info"},_v,8,mv),b("   "),e("a",{href:i.contratUrl(c.ID_INTERVENANT),class:"btn btn-info"},bv,8,pv),b("   "),e("a",{href:i.updateSignatureUrl(c.ID_SIGNATURE),class:"btn btn-info"},yv,8,vv)])]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const Cv=P(uv,[["render",xv]]),Vv=Object.freeze(Object.defineProperty({__proto__:null,default:Cv},Symbol.toStringTag,{value:"Module"})),Sv={UHeures:"Application/UI/UHeures",UInputFloat:"Application/UI/UInputFloat",Utilisateur:"Application/Utilisateur"};function Pv(t,s){const n={};s===void 0&&(s={});for(const p in t){let i=p.slice(2,-4).replaceAll("/","");n[i]=t[p].default}for(const p of document.getElementsByClassName("vue-app")){let r=be({template:p.innerHTML,components:n});if(s.beforeMount!==void 0&&s.beforeMount(r),s.autoloads!==void 0)for(const i in s.autoloads){let u=s.autoloads[i].replaceAll("/","");r.component(i,n[u])}r.use(ve({components:!0,directives:!0})),r.mount(p),s.afterMount!==void 0&&s.afterMount(r)}}const kv={init:Pv},Av=Object.assign({"./Application/UI/UHeures.vue":Ve,"./Application/UI/UInputFloat.vue":Me,"./Application/Utilisateur.vue":Fe,"./Employeur/ListeEmployeur.vue":Qe,"./Formule/Administration/Details.vue":nt,"./Formule/Administration/Formulator.vue":gt,"./Formule/Administration/Index.vue":ys,"./Formule/Details.vue":Us,"./Formule/Test/Index.vue":Ks,"./Formule/Test/Test.vue":fa,"./Formule/TotauxHetd.vue":Pa,"./Intervenant/Recherche.vue":Ja,"./Lieu/Structure.vue":Dl,"./Lieu/StructuresAdmin.vue":$l,"./Mission/Liste.vue":lu,"./Mission/ListeCandidatures.vue":wu,"./Mission/ListeOffreEmploi.vue":mc,"./Mission/ListePrime.vue":bm,"./Mission/Mission.vue":su,"./Mission/OffreEmploi.vue":rc,"./Mission/Prime.vue":im,"./Mission/Suivi.vue":Xm,"./Mission/SuiviEvent.vue":Jm,"./Paiement/DemandeMiseEnPaiement.vue":Fp,"./Paiement/DemandeMiseEnPaiementLot.vue":fb,"./Paiement/DemandeMiseEnPaiementStructure.vue":kp,"./Paiement/DetailsCalculs.vue":n1,"./Paiement/ImportNumeroPec.vue":k1,"./Paiement/ListeTaux.vue":ov,"./Paiement/Taux.vue":nv,"./Signature/ListeContrat.vue":Vv}),Mv={autoloads:Sv};kv.init(Av,Mv);
