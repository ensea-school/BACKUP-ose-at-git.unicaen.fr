<?php

/**
 * @var $this \Application\View\Renderer\PhpRenderer
 * @var $typeVolumeHoraire Service\Entity\Db\TypeVolumeHoraire
 */

$this->headTitle()->append("Services");

echo $this->messenger()->addCurrentMessagesFromFlashMessenger();

?>
<h1 class="page-header">Services</h1>
<?php

if ($this->isAllowed('Information', 'info-only-structure')){
    echo $this->messenger()->setMessages(['warning' => "Sont visibles ici les référentiels et les enseignements prévisionnels des intervenants affectés "
        . "ou enseignant dans votre structure de responsabilité ou l'une de ses sous-structures."]);
}

echo $this->recherche;

if ('afficher' === $action ) {
    $serviceListe = $this->serviceListe( $services ); /* @var $serviceListe \Application\View\Helper\Service\Liste  */
    $serviceListe->setTypeVolumeHoraire($typeVolumeHoraire)->setAddButtonVisibility($canAddService);
    echo $serviceListe->render();
}else{
    echo $this->messenger()->setMessage('Cliquez sur "Afficher" pour afficher les enseignements.', \UnicaenApp\View\Helper\Messenger::INFO);
}
