<div class="row" id="reconduction-filters">
    <div class="col-md-4">
        <!---------------- Champ de sélection d'une structure --------------->
        <div class="panel panel-default">
            <div class="panel-heading">Structure</div>
            <div class="panel-body">
                <?php
                $selectStructure = new \Zend\Form\Element\Select('structure');
                $selectStructure
                    ->setValueOptions(['' => "(Sélectionnez une structure)"] + \UnicaenApp\Util::collectionAsOptions($structures))
                    ->setValue($structure ? $structure->getId() : null)
                    ->setAttributes(['class' => 'structure',
                                     'style' => 'width:250px;']);
                echo $this->formSelect($selectStructure);
                ?>

            </div>
        </div>
    </div>
    <div class="col-md-4">
        <!---------------- Champ de sélection niveau --------------->
        <div class="panel panel-default">
            <div class="panel-heading">Niveau</div>
            <div class="panel-body">
                <?php
                $selectNiveau = new \Zend\Form\Element\Select('niveau');
                $selectNiveau
                    ->setValueOptions(['' => "(Sélectionnez un niveau)"] + \UnicaenApp\Util::collectionAsOptions($niveaux))
                    ->setValue($niveau ? $niveau->getId() : null)
                    ->setAttributes(['class' => 'niveau',
                                     'style' => 'width:250px;']);
                echo $this->formSelect($selectNiveau);
                ?>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <!---------------- Champ de sélection formation --------------->
        <div class="panel panel-default">
            <div class="panel-heading">Formation</div>
            <div class="panel-body">
                <?php
                $selectEtapes = new \Zend\Form\Element\Select('etape');
                $selectEtapes
                    ->setValueOptions(['' => "(Sélectionnez une formation)"] + \UnicaenApp\Util::collectionAsOptions($etapes))
                    ->setValue($etape ? $etape->getId() : null)
                    ->setAttributes(['class' => 'etape',
                                    'style' => 'width:250px;']);
                echo $this->formSelect($selectEtapes);
                ?>
            </div>
        </div>
    </div>
</div>
<div class="row" style="margin:0 5px 0 5px;">
    <div class="col-11">
        <h3>Offre de formation complémantaire / Année scolaire :  <?php echo $anneeEnCours->getLibelle(); ?></h3>
        <br/>
        <form action="<?php echo $_SERVER['REQUEST_URI']; ?>" method="POST">

            <?php foreach ($etapesComplementaires as $ec): ?>
                <table class="reconduction-offre table table-bordered table-condensed table-hover">
                    <thead>
                        <tr>
                            <th><input type="checkbox" name="etape[]" value="<?= $ec['etape']->getId(); ?>"/></th>
                            <th colspan="6">Formation : <?= $ec['etape']->__toString() . ' (' . $ec['etape']->getAnnee()->getLibelle() . ') -- id / ' . $ec['etape']->getId() . ' / code / ' . $ec['etape']->getCode(); ?></th>
                        </tr>
                        <tr>
                            <th colspan="2">Code</th>
                            <th>Libellé</th>
                            <th>Période</th>
                            <th title="Formation ouverte à distance">FOAD</th>
                            <th title="Régime d'inscription">Rég. d'insc.</th>
                        </tr>
                    </thead>
                    <tbody>
                    <?php
                    if(empty($ec['elements_pedagogique']))
                    {
                    ?>
                    <tr>
                        <td colspan="7" style="text-align: center;">Aucun élément pédagogique</td>
                    </tr>
                    <?php } ?>

                        <?php foreach ($ec['elements_pedagogique'] as $ep): ?>
                            <tr id="<?= $ep->getId() ?>">
                                <td><input class="checkbox-element" type="checkbox" name="element[<?php echo $ec['etape']->getId();?>][]" value="<?= $ep->getId(); ?>"/></td>
                                <td class="element"><?= $ep->getCode() ?></td>
                                <td class="element"><?= $this->elementPedagogique($ep)->renderLink($ep->getLibelle()) ?></td>
                                <td class="periode"><?= $ep->getPeriode() ?: "" ?></td>
                                <td><?= (bool)$ep->getTauxFoad() ? "Oui" : "Non" ?></td>
                                <td><?= $ep->getRegimesInscription(true) ?></td>
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            <?php endforeach; ?>
            <input class="btn btn-primary" type="submit" value="Reconduire l'offre séléctionnée" name="submit"/>
        </form>

    </div>
</div>

<script type="text/javascript">


</script>

