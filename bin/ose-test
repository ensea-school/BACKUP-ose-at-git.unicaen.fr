#!/usr/bin/env php
<?php

require_once dirname(__DIR__) . '/admin/src/OseAdmin.php';

$oa = OseAdmin::getInstance();

$c = $oa->getConsole();

$filter = $c->getArg(1) ?: null;

if ($filter == 'help'){
    $c->println("Précisez un nom de répertoire du dossier tests pour filtrer, ou bien rien du tout pour lancer tous les tests");

    return;
}

if ($filter){
    $filter = '--filter '.$filter;
}
$c->exec(dirname(__DIR__)."/vendor/bin/phpunit tests $filter --color=always");
