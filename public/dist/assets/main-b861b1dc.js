import{o,c as u,a as i,b,w as D,v as O,F as x,r as T,d as S,t as _,n as N,e as M,f as z,g as p,h as f,i as w,j as R,k as E,l as y,m as V,p as B,q as J,D as Y,s as X,u as A,x as K}from"./vendor-bda22cb0.js";const U=(e,t)=>{const n=e.__vccOpts||e;for(const[d,l]of t)n[d]=l;return n},W={name:"MyCustom"};function G(e,t,n,d,l,a){return" ça marche !!! "}const Q=U(W,[["render",G]]),Z=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));const ee={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0}},data(){const e=new Date(this.date);return{mois:e.getMonth()+1,annee:e.getFullYear()}},computed:{listeJours(){const e=new Date(this.date);e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1);let t=e.getDate();return Array.from({length:t},(n,d)=>d+1)}},watch:{date:function(e,t){const n=new Date(this.date);this.mois=n.getMonth()+1,this.annee=n.getFullYear()},mois:function(e,t){const n=new Date(this.date);n.setMonth(e-1),this.$emit("changeDate",n)},annee:function(e,t){const n=new Date(this.date);n.setFullYear(e),this.$emit("changeDate",n)}},methods:{nomJour(e){const t=new Date(this.date);return t.setDate(e),t.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let e=[];const t=new Date;for(let n=1;n<=12;n++){t.setMonth(n-1);let d=t.toLocaleString("fr-FR",{month:"long"});e.push({id:n,libelle:d})}return e},listeAnnees(){const t=new Date().getFullYear(),n=1;let d=[];for(let l=t-n;l<=t+n;l++)d.push(l);return d},addEvent(e){const t=new Date(this.date);t.setDate(e.currentTarget.dataset.jour),this.$emit("addEvent",t,e)},editEvent(e){const t=e.currentTarget.dataset.index;this.$emit("editEvent",this.events[t],e)},deleteEvent(e){const t=e.currentTarget.dataset.index;this.$emit("deleteEvent",this.events[t],e)},prevMois(){const e=new Date(this.date);e.setMonth(e.getMonth()-1),this.$emit("changeDate",e)},nextMois(){const e=new Date(this.date);e.setMonth(e.getMonth()+1),this.$emit("changeDate",e)},eventsByJour(e){const t=new Date(this.date);let n={};for(let d in this.events){let l=this.events[d];l.date.getFullYear()===t.getFullYear()&&l.date.getMonth()+1===t.getMonth()+1&&l.date.getDate()===e&&(n[d]=l)}return n}}},te={class:"calendar"},se={class:"recherche"},ie={class:"recherche btn-group"},ne=["value"],ae=["value"],re={class:"table table-bordered table-hover table-sm"},oe=["data-jour"],le={class:"nom-jour"},ue={class:"numero-jour"},de={class:"num-jour badge bg-secondary rounded-circle"},ce={class:"event-content"},me={class:"event-actions"},he={class:"btn-group btn-group-sm"},_e=["data-index"],ve=["data-index"],fe={key:0},pe=["data-jour"];function be(e,t,n,d,l,a){const c=S("u-icon");return o(),u("div",te,[i("div",se,[i("div",ie,[i("button",{class:"btn btn-light",id:"prevMois",onClick:t[0]||(t[0]=(...r)=>a.prevMois&&a.prevMois(...r)),title:"Mois précédant"},[b(c,{name:"chevron-left"})]),D(i("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":t[1]||(t[1]=r=>l.mois=r)},[(o(!0),u(x,null,T(a.listeMois(),r=>(o(),u("option",{value:r.id},_(r.libelle),9,ne))),256))],512),[[O,l.mois]]),D(i("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":t[2]||(t[2]=r=>l.annee=r)},[(o(!0),u(x,null,T(a.listeAnnees(),r=>(o(),u("option",{value:r},_(r),9,ae))),256))],512),[[O,l.annee]]),i("button",{class:"btn btn-light",id:"nextMois",onClick:t[3]||(t[3]=(...r)=>a.nextMois&&a.nextMois(...r)),title:"Mois suivant"},[b(c,{name:"chevron-right"})])])]),i("table",re,[(o(!0),u(x,null,T(a.listeJours,r=>(o(),u("tr",{"data-jour":r},[i("th",le,_(a.nomJour(r)),1),i("th",ue,[i("div",de,_(r<10?"0"+r.toString():r),1)]),i("td",null,[(o(!0),u(x,null,T(a.eventsByJour(r),(h,g)=>(o(),u("div",{class:"event",style:N("border-color:"+h.color),key:g},[i("div",ce,[(o(),M(z(h.component),{event:h},null,8,["event"]))]),i("div",me,[i("div",he,[i("button",{class:"btn btn-light",onClick:t[4]||(t[4]=(...C)=>a.editEvent&&a.editEvent(...C)),"data-index":g},[b(c,{name:"pen-to-square"})],8,_e),i("button",{class:"btn btn-light",onClick:t[5]||(t[5]=(...C)=>a.deleteEvent&&a.deleteEvent(...C)),"data-index":g},[b(c,{name:"trash-can",class:"text-danger"})],8,ve)])])],4))),128)),n.canAddEvent?(o(),u("div",fe,[i("button",{onClick:t[6]||(t[6]=(...h)=>a.addEvent&&a.addEvent(...h)),"data-jour":r,class:"btn btn-light btn-sm"},[b(c,{name:"plus"}),p(" Nouvel événement ")],8,pe)])):f("",!0)])],8,oe))),256))])])}const ge=U(ee,[["render",be],["__scopeId","data-v-3a57b0ac"]]),ye=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"})),xe={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(e){this.formatted=this.formatage(e)}},methods:{formatage(e){if(e===void 0)return;let t=new Date(e);const n=t.getFullYear(),d=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),a=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0"),r=t.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${l}/${d}/${n} à ${a}:${c}`;case"time":return`${a}:${c}:${r}`}return`${l}/${d}/${n}`}}};function Ue(e,t,n,d,l,a){return _(l.formatted)}const Se=U(xe,[["render",Ue]]),Te=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),ke={name:"UIcon",props:{valeur:{required:!0,type:Float64Array}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},Ce=["innerHTML"];function Me(e,t,n,d,l,a){return o(),u("span",{class:"heures",innerHTML:a.affichage},null,8,Ce)}const je=U(ke,[["render",Me]]),De=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"})),Ve={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String}}};function we(e,t,n,d,l,a){return o(),u("i",{class:w(`fas fa-${n.name} text-${n.variant}`)},null,2)}const L=U(Ve,[["render",we]]),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),Ee={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},Oe=["id"],Re={class:"modal-dialog"},He={class:"modal-content"},Le={class:"modal-header"},$e={class:"modal-title"},Ie=i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),qe={class:"modal-body"},Pe={class:"modal-footer"},Fe=i("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function Ne(e,t,n,d,l,a){return o(),u("div",{class:"modal fade",id:n.id,tabindex:"-1","aria-hidden":"true"},[i("div",Re,[i("div",He,[i("div",Le,[i("h5",$e,_(n.title),1),Ie]),i("div",qe,[R(e.$slots,"body")]),i("div",Pe,[R(e.$slots,"footer"),Fe])])])],8,Oe)}const ze=U(Ee,[["render",Ne]]),Be=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"})),Je={name:"Utilisateur",props:{nom:String,mail:String}},Ye=["href"];function Xe(e,t,n,d,l,a){return o(),u("a",{href:`mailto:${n.mail}`},_(n.nom),9,Ye)}const Ke=U(Je,[["render",Xe]]),We=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"})),Ge={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(e){this.searchTerm=e.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(e){return"/intervenant/code:"+e+"/voir"},reload(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{axios.post(Util.url("intervenant/recherche-json"),{term:this.searchTerm}).then(e=>{let t=e.data,n=[];for(const d in t){if(t[d].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){n.push(t[d]);continue}if(t[d].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){n.push(t[d]);continue}if(t[d].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){n.push(t[d]);continue}}this.intervenants=n,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(e=>{console.log(e.message)})},800)}}},Qe=i("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),Ze={class:"intervenant-recherche"},et={class:"critere"},tt=i("br",null,null,-1),st=i("span",{class:"fw-bold"},"Types d'intervenant : ",-1),it=i("br",null,null,-1),nt={key:0,class:"table table-bordered table-hover"},at=i("thead",null,[i("tr",null,[i("th",{style:{width:"90px"}}),i("th",null,"Civilité"),i("th",null,"Nom"),i("th",null,"Prenom"),i("th",null,"Structure"),i("th",null,"Statut"),i("th",null,"Date de naissance"),i("th",null,"N° Personnel")])],-1),rt=["title"],ot={style:{}},lt=["href"],ut=i("i",{class:"fas fa-eye"},null,-1),dt={key:1,class:"table table-bordered table-hover"},ct=i("thead",null,[i("tr",null,[i("th",{style:{width:"90px"}}),i("th",null,"Civilité"),i("th",null,"Nom"),i("th",null,"Prenom"),i("th",null,"Structure"),i("th",null,"Statut"),i("th",null,"Date de naissance"),i("th",null,"N° Personnel")])],-1),mt=i("tbody",null,[i("tr",null,[i("td",{style:{"text-align":"center"},colspan:"8"},"Aucun intervenant trouvé")])],-1),ht=[ct,mt];function _t(e,t,n,d,l,a){const c=S("u-date");return o(),u(x,null,[Qe,i("div",Ze,[i("div",et,[i("div",null,[i("input",{id:"term",onKeyup:t[0]||(t[0]=(...r)=>a.rechercher&&a.rechercher(...r)),class:"form-control input",type:"text",placeholder:"votre recherche..."},null,32),tt]),i("div",null,[st,D(i("input",{onChange:t[1]||(t[1]=r=>a.reload()),type:"checkbox",name:"type[]",value:"permanent",checked:"checked","onUpdate:modelValue":t[2]||(t[2]=r=>l.checkedTypes=r)},null,544),[[E,l.checkedTypes]]),p(" Permanent "),D(i("input",{onChange:t[3]||(t[3]=r=>a.reload()),type:"checkbox",name:"type[]",value:"vacataire",checked:"checked","onUpdate:modelValue":t[4]||(t[4]=r=>l.checkedTypes=r)},null,544),[[E,l.checkedTypes]]),p(" Vacataire "),D(i("input",{onChange:t[5]||(t[5]=r=>a.reload()),type:"checkbox",name:"type[]",value:"etudiant",checked:"checked","onUpdate:modelValue":t[6]||(t[6]=r=>l.checkedTypes=r)},null,544),[[E,l.checkedTypes]]),p(" Etudiant ")]),it])]),l.intervenants.length>0?(o(),u("table",nt,[at,i("tbody",null,[(o(!0),u(x,null,T(l.intervenants,(r,h)=>(o(),u("tr",{class:w({"bg-danger":r.destruction!==null}),title:r.destruction!==null?"Fiche historisé":""},[i("td",ot,[i("a",{href:a.urlFiche(r.code)},[ut,p(" Fiche")],8,lt)]),i("td",null,_(r.civilite),1),i("td",null,_(r.nom),1),i("td",null,_(r.prenom),1),i("td",null,_(r.structure),1),i("td",null,_(r.statut),1),i("td",null,[b(c,{value:r["date-naissance"]},null,8,["value"])]),i("td",null,_(r["numero-personnel"]),1)],10,rt))),256))])])):f("",!0),l.intervenants.length==0&&l.noResult==1?(o(),u("table",dt,ht)):f("",!0)],64)}const vt=U(Ge,[["render",_t]]),ft=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"}));const pt={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:Util.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:Util.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:Util.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:Util.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(e){this.validationText=this.calcValidation(e)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":Util.formattedHeures(this.mission.heures)+" heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(e){return e===null?"A valider":e.id===null?"Autovalidée":"Validation du "+e.histoCreation+" par "},saisie(e){modAjax(e.currentTarget,t=>{this.refresh()})},supprimer(e){popConfirm(e.currentTarget,t=>{this.$emit("supprimer",this.mission)})},valider(e){popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},devalider(e){popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireSupprimer(e){e.currentTarget.href=Util.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:e.currentTarget.dataset.id}),popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireValider(e){e.currentTarget.href=Util.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:e.currentTarget.dataset.id}),popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireDevalider(e){e.currentTarget.href=Util.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:e.currentTarget.dataset.id}),popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},refresh(){axios.get(Util.url("mission/get/:mission",{mission:this.mission.id})).then(e=>{this.$emit("refresh",e.data)})}}},k=e=>(B("data-v-dc434607"),e=e(),J(),e),bt=["id"],gt={class:"card-header card-header-h3"},yt={class:"float-end"},xt={class:"card-body"},Ut={class:"row"},St={class:"col-md-8"},Tt={class:"row"},kt={class:"col-md-12"},Ct=k(()=>i("label",{class:"form-label"},"Composante en charge du suivi",-1)),Mt={class:"form-control"},jt={class:"row"},Dt={class:"col-md-5"},Vt=k(()=>i("label",{class:"form-label"},"Taux de rémunération",-1)),wt={class:"form-control"},At={class:"col-md-7"},Et=k(()=>i("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),Ot={class:"input-group mb-3"},Rt=["innerHTML"],Ht=["data-bs-target"],Lt={class:"row"},$t={class:"col-md-12"},It=k(()=>i("label",{class:"form-label"},"Descriptif de la mission",-1)),qt={class:"form-control"},Pt=k(()=>i("div",{class:"row"},[i("div",{class:"col-md-12"}," ")],-1)),Ft={class:"row"},Nt={class:"col-md-12"},zt=["href"],Bt=["href"],Jt=["href"],Yt=["href"],Xt={class:"col-md-4"},Kt=k(()=>i("div",null,[i("label",{class:"form-label"},"Suivi")],-1)),Wt=k(()=>i("div",null," Aucune heure réalisée ",-1)),Gt={class:"table table-bordered table-condensed"},Qt=k(()=>i("thead",null,[i("tr",null,[i("th",null,"Heures"),i("th",null,"Statut"),i("th",null,"Actions")])],-1)),Zt={style:{"text-align":"right"}},es=k(()=>i("br",null,null,-1)),ts={key:0},ss=["data-id"],is=["data-id"],as=["data-id"];function rs(e,t,n,d,l,a){const c=S("u-date"),r=S("u-icon"),h=S("utilisateur"),g=S("u-heures"),C=S("u-modal");return o(),u(x,null,[i("div",{id:n.mission.id,class:w(["card",{"bg-success":n.mission.valide,"bg-default":!n.mission.valide}])},[i("form",{onSubmit:t[4]||(t[4]=y((...v)=>e.submitForm&&e.submitForm(...v),["prevent"]))},[i("div",gt,[i("h5",null,[p(_(n.mission.typeMission.libelle)+" ",1),i("span",yt,[p("Du "),b(c,{value:n.mission.dateDebut},null,8,["value"]),p(" au "),b(c,{value:n.mission.dateFin},null,8,["value"])])])]),i("div",xt,[i("div",Ut,[i("div",St,[i("div",Tt,[i("div",kt,[Ct,i("div",Mt,_(n.mission.structure.libelle),1)])]),i("div",jt,[i("div",Dt,[Vt,i("div",wt,_(n.mission.tauxRemu.libelle),1)]),i("div",At,[Et,i("div",Ot,[i("div",{class:"form-control",innerHTML:a.heuresLib},null,8,Rt),i("button",{class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal","data-bs-target":`#details-${n.mission.id}`}," Détails ",8,Ht)])])]),i("div",Lt,[i("div",$t,[It,i("div",qt,_(n.mission.description),1)])]),Pt,i("div",Ft,[i("div",Nt,[n.mission.canSaisie?(o(),u("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...v)=>a.saisie&&a.saisie(...v),["prevent"]))},"Modifier",8,zt)):f("",!0),n.mission.canValider?(o(),u("a",{key:1,href:l.validerUrl,class:"btn btn-secondary","data-title":"Validation de la mission","data-content":"Êtes-vous sur de vouloir valider la mission ?",onClick:t[1]||(t[1]=y((...v)=>a.valider&&a.valider(...v),["prevent"]))},"Valider",8,Bt)):f("",!0),n.mission.canDevalider?(o(),u("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger","data-title":"Dévalidation de la mission","data-content":"Êtes-vous sur de vouloir dévalider la mission ?",onClick:t[2]||(t[2]=y((...v)=>a.devalider&&a.devalider(...v),["prevent"]))},"Dévalider",8,Jt)):f("",!0),n.mission.canSupprimer?(o(),u("a",{key:3,href:l.supprimerUrl,class:"btn btn-danger","data-title":"Suppression de la mission","data-content":"Êtes-vous sur de vouloir supprimer la mission ?",onClick:t[3]||(t[3]=y((...v)=>a.supprimer&&a.supprimer(...v),["prevent"]))},"Supprimer",8,Yt)):f("",!0)])])]),i("div",Xt,[Kt,i("div",null,[b(r,{name:"thumbs-up",variant:"success"}),p(" Créé le "),b(c,{value:"mission.histoCreation"}),p(" par "),b(h,{nom:n.mission.histoCreateur.displayName,mail:n.mission.histoCreateur.email},null,8,["nom","mail"])]),i("div",null,[b(r,{name:n.mission.valide?"thumbs-up":"thumbs-down",variant:n.mission.valide?"success":"info"},null,8,["name","variant"]),p(" "+_(l.validationText)+" ",1),n.mission.validation&&n.mission.validation.histoCreateur?(o(),M(h,{key:0,nom:n.mission.validation.histoCreateur.displayName,mail:n.mission.validation.histoCreateur.email},null,8,["nom","mail"])):f("",!0)]),i("div",null,[b(r,{name:n.mission.contrat?"thumbs-up":"thumbs-down",variant:n.mission.contrat?"success":"info"},null,8,["name","variant"]),p(" "+_(n.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),Wt])])])],32)],10,bt),b(C,{id:`details-${n.mission.id}`,title:"Détail des heures prévisionnelles"},{body:V(()=>[i("table",Gt,[Qt,i("tbody",null,[(o(!0),u(x,null,T(n.mission.volumesHoraires,v=>(o(),u("tr",{key:v.id},[i("td",Zt,[b(g,{valeur:v.heures},null,8,["valeur"])]),i("td",null,[b(r,{name:"thumbs-up",variant:"success"}),p(" Saisi par "),b(h,{nom:v.histoCreateur.displayName,mail:v.histoCreateur.email},null,8,["nom","mail"]),p(" le "+_(v.histoCreation)+" ",1),es,b(r,{name:v.valide?"thumbs-up":"thumbs-down",variant:v.valide?"success":"info"},null,8,["name","variant"]),p(" "+_(v.validation&&v.validation.id==null?"Autovalidé":v.validation?"":"à valider")+" ",1),v.validation&&v.validation.histoCreateur?(o(),u("span",ts,[p(" Validé par "),b(h,{nom:v.validation.histoCreateur.displayName,mail:v.validation.histoCreateur.email},null,8,["nom","mail"]),p(" le "+_(v.validation.histoCreation),1)])):f("",!0)]),i("td",null,[v.canValider?(o(),u("a",{key:0,class:"btn btn-secondary","data-id":v.id,"data-title":"Validation du volume horaire","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?",onClick:t[5]||(t[5]=y((...j)=>a.volumeHoraireValider&&a.volumeHoraireValider(...j),["prevent"]))},"Valider",8,ss)):f("",!0),v.canDevalider?(o(),u("a",{key:1,class:"btn btn-danger","data-id":v.id,"data-title":"Dévalidation du volume horaire","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?",onClick:t[6]||(t[6]=y((...j)=>a.volumeHoraireDevalider&&a.volumeHoraireDevalider(...j),["prevent"]))},"Dévalider",8,is)):f("",!0),v.canSupprimer?(o(),u("a",{key:2,class:"btn btn-danger","data-id":v.id,"data-title":"Suppression du volume horaire","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?",onClick:t[7]||(t[7]=y((...j)=>a.volumeHoraireSupprimer&&a.volumeHoraireSupprimer(...j),["prevent"]))},"Supprimer",8,as)):f("",!0)])]))),128))])])]),footer:V(()=>[]),_:1},8,["id"])],64)}const I=U(pt,[["render",rs],["__scopeId","data-v-dc434607"]]),os=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"})),ls={components:{mission:I},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],ajoutUrl:Util.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(e){modAjax(e.currentTarget,t=>{this.reload()})},supprimer(e){this.reload()},refresh(e){console.log(e);let t=Util.json.indexById(this.missions,e.id);this.missions[t]=e},reload(){axios.get(Util.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(e=>{this.missions=e.data})}}},us=["href"];function ds(e,t,n,d,l,a){const c=S("mission");return o(),u(x,null,[(o(!0),u(x,null,T(l.missions,r=>(o(),M(c,{onSupprimer:a.supprimer,onRefresh:a.refresh,key:r.id,mission:r},null,8,["onSupprimer","onRefresh","mission"]))),128)),n.canAddMission?(o(),u("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:t[0]||(t[0]=y((...r)=>a.ajout&&a.ajout(...r),["prevent"]))},"Ajout d'une nouvelle mission",8,us)):f("",!0)],64)}const cs=U(ls,[["render",ds]]),ms=Object.freeze(Object.defineProperty({__proto__:null,default:cs},Symbol.toStringTag,{value:"Module"})),hs={name:"SuiviEvent",props:{event:{type:Object,required:!0}}},_s={key:0};function vs(e,t,n,d,l,a){const c=Y;return o(),u(x,null,[i("p",null,_(n.event.mission.libelle),1),i("p",null,[p(" de "+_(n.event.heureDebut)+" à "+_(n.event.heureFin)+", "+_(n.event.heures)+" heures ",1),n.event.nocturne?(o(),M(c,{key:0},{default:V(()=>[p("Nocturne")]),_:1})):f("",!0),n.event.formation?(o(),M(c,{key:1},{default:V(()=>[p("En formation")]),_:1})):f("",!0)]),n.event.description?(o(),u("p",_s,_(n.event.description),1)):f("",!0)],64)}const q=U(hs,[["render",vs]]),fs=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"})),ps={name:"Suivi",props:{intervenant:{type:Number,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,suivi:[]}},methods:{changeDate(e){this.date=e},addVolumeHoraire(e,t){t.currentTarget.dataset.url=Util.url("intervenant/:intervenant/missions-suivi-saisie",{intervenant:this.intervenant}),modAjax(t.currentTarget,n=>{this.refresh()})},editVolumeHoraire(e,t){t.currentTarget.dataset.url=Util.url("intervenant/:intervenant/missions-suivi-saisie/:guid",{intervenant:this.intervenant,guid:e.guid}),modAjax(t.currentTarget,n=>{this.refresh()})},saveVolumeHoraire(e){console.log("submit!!!"),e.preventDefault(),this.modal.hide(),this.vhr.date=new Date(this.vhr.date),this.vhrIndex===void 0?this.realise.push(this.vhr):this.realise[this.vhrIndex]=this.vhr},deleteVolumeHoraire(e,t){const n=this.realise.indexOf(e);this.realise.splice(n,1),console.log(n),console.log(this.realise)},refresh(){axios.get(Util.url("intervenant/:intervenant/missions-suivi-data",{intervenant:this.intervenant})).then(e=>{let t=[];for(let n in e.data){let d=e.data[n];d.component=X(q),d.date=new Date(d.date),t.push(d)}this.suivi=t})}}};function bs(e,t,n,d,l,a){const c=S("u-calendar");return o(),M(c,{date:l.date,onChangeDate:a.changeDate,onAddEvent:a.addVolumeHoraire,onEditEvent:a.editVolumeHoraire,onDeleteEvent:a.deleteVolumeHoraire,"can-add-event":!0,events:l.suivi},null,8,["date","onChangeDate","onAddEvent","onEditEvent","onDeleteEvent","events"])}const gs=U(ps,[["render",bs]]),ys=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"})),xs={name:"Taux",components:{UIcon:L},props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:Util.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:Util.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:Util.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(e){modAjax(e.target,t=>{this.$emit("refreshListe")})},ajoutValeur(e){modAjax(e.target,t=>{this.$emit("refreshListe")})},saisieValeur(e){e.currentTarget.href=Util.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:e.currentTarget.dataset.id}),modAjax(e.currentTarget,t=>{this.$emit("refreshListe")})},refreshListe(e){this.$emit("refreshListe")},supprimer(e){popConfirm(e.target,t=>{this.$emit("refreshListe")})},supprimerValeur(e){e.currentTarget.href=Util.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:e.currentTarget.dataset.id}),popConfirm(e.currentTarget,t=>{this.$emit("refreshListe")})},refresh(e){axios.get(Util.url("taux/get/:tauxRemu",{tauxRemu:e.id})).then(t=>{this.$emit("refresh",t.data)})}}},Us={class:"card-header"},Ss={style:{display:"inline"}},Ts={class:"float-end"},ks=["href"],Cs=["href"],Ms={class:"card-body"},js={key:0},Ds=i("br",null,null,-1),Vs={class:""},ws={class:"row align-items-start"},As={class:"col-md-4"},Es={class:"col"},Os=["data-id"],Rs=["data-id"],Hs=["href"],Ls={key:1,class:"row"},$s={class:"col-md-7"},Is=i("br",null,null,-1),qs={class:"row align-items-start"},Ps={class:"col-md-8"},Fs={class:"col-md-auto"},Ns=["data-id"],zs=["data-id"],Bs=["href"],Js={class:"col"},Ys=i("br",null,null,-1),Xs={key:0},Ks={key:0};function Ws(e,t,n,d,l,a){const c=S("u-icon"),r=S("taux",!0);return o(),u(x,null,[i("div",{class:w(["card",{"ms-5":n.taux.tauxRemu}])},[i("div",Us,[i("h3",Ss,_(n.taux.libelle)+" ("+_(n.taux.code)+")",1),i("div",Ts,[n.taux.canEdit?(o(),u("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...h)=>a.saisie&&a.saisie(...h),["prevent"]))},[b(c,{name:"pen-to-square"}),p(" Modifier")],8,ks)):f("",!0),p("   "),n.taux.canDelete?(o(),u("a",{key:1,href:l.supprimerUrl,class:"btn btn-danger",onClick:t[1]||(t[1]=y((...h)=>a.supprimer&&a.supprimer(...h),["prevent"]))},[b(c,{name:"trash-can"}),p(" Supprimer")],8,Cs)):f("",!0)])]),i("div",Ms,[n.taux.tauxRemu?f("",!0):(o(),u("div",js,[p(" Modification :"),Ds,i("ul",null,[(o(!0),u(x,null,T(n.taux.tauxRemuValeurs,h=>(o(),u("div",{key:h.id},[i("li",Vs,[i("div",ws,[i("div",As,_(h.valeur)+"€/h à partir du "+_(h.dateEffet),1),i("div",Es,[n.taux.canEdit?(o(),u("a",{key:0,class:"text-primary",onClick:t[2]||(t[2]=y((...g)=>a.saisieValeur&&a.saisieValeur(...g),["prevent"])),"data-id":h.id},[b(c,{name:"pen-to-square"})],8,Os)):f("",!0),p("   "),n.taux.canEdit?(o(),u("a",{key:1,class:"text-primary",onClick:t[3]||(t[3]=y((...g)=>a.supprimerValeur&&a.supprimerValeur(...g),["prevent"])),"data-id":h.id},[b(c,{name:"trash-can"})],8,Rs)):f("",!0)])])])]))),128))]),n.taux.canEdit?(o(),u("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:t[4]||(t[4]=y((...h)=>a.ajoutValeur&&a.ajoutValeur(...h),["prevent"]))},[b(c,{name:"plus"}),p(" Ajouter une valeur ")],8,Hs)):f("",!0)])),n.taux.tauxRemu?(o(),u("div",Ls,[i("div",$s,[p(" Modification :"),Is,i("ul",null,[(o(!0),u(x,null,T(n.taux.tauxRemuValeurs,h=>(o(),u("div",null,[i("li",null,[i("div",qs,[i("div",Ps," Coéfficient de "+_(h.valeur)+" à partir du "+_(h.dateEffet),1),i("div",Fs,[n.taux.canEdit?(o(),u("a",{key:0,class:"text-primary",onClick:t[5]||(t[5]=y((...g)=>a.saisieValeur&&a.saisieValeur(...g),["prevent"])),"data-id":h.id},[b(c,{name:"pen-to-square"})],8,Ns)):f("",!0),p("   "),n.taux.canEdit?(o(),u("a",{key:1,class:"text-primary",onClick:t[6]||(t[6]=y((...g)=>a.supprimerValeur&&a.supprimerValeur(...g),["prevent"])),"data-id":h.id},[b(c,{name:"trash-can"})],8,zs)):f("",!0)])])])]))),256))]),n.taux.canEdit?(o(),u("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:t[7]||(t[7]=y((...h)=>a.ajoutValeur&&a.ajoutValeur(...h),["prevent"]))},[b(c,{name:"plus"})],8,Bs)):f("",!0)]),i("div",Js,[p(" Valeurs calculées (indexées sur le taux "+_(n.taux.tauxRemu.libelle)+") : ",1),i("ul",null,[(o(!0),u(x,null,T(n.taux.tauxRemuValeursIndex,h=>(o(),u("div",null,[i("li",null,_(h.valeur)+"€/h à partir du "+_(h.date),1)]))),256))]),Ys])])):f("",!0)])],2),n.taux.tauxRemu?f("",!0):(o(),u("div",Xs,[(o(!0),u(x,null,T(n.listeTaux,h=>(o(),u("div",{key:h},[h.tauxRemu&&h.tauxRemu.id===n.taux.id?(o(),u("div",Ks,[(o(),M(r,{onSupprimer:a.supprimer,onRefreshListe:a.refreshListe,key:n.taux.id,taux:h,listeTaux:n.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):f("",!0)]))),128))]))],64)}const P=U(xs,[["render",Ws]]),Gs=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"})),Qs={components:{taux:P},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:Util.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(e){modAjax(e.currentTarget,t=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(e){let t=Util.json.indexById(this.listeTaux,e.id);this.listeTaux[t]=e},reload(){axios.get(Util.url("taux/liste-taux")).then(e=>{this.listeTaux=e.data})}}},Zs=["href"];function ei(e,t,n,d,l,a){const c=S("taux");return o(),u(x,null,[(o(!0),u(x,null,T(l.listeTaux,r=>(o(),u("div",null,[r.tauxRemu?f("",!0):(o(),M(c,{onSupprimer:a.supprimer,onRefreshListe:a.refreshListe,key:r.id,taux:r,listeTaux:l.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),n.canEditTaux?(o(),u("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:t[0]||(t[0]=y((...r)=>a.ajout&&a.ajout(...r),["prevent"]))},"Ajout d'un nouveau taux",8,Zs)):f("",!0)],64)}const ti=U(Qs,[["render",ei]]),si=Object.freeze(Object.defineProperty({__proto__:null,default:ti},Symbol.toStringTag,{value:"Module"})),ii={UIcon:"Application/UI/UIcon",UHeures:"Application/UI/UHeures",UModal:"Application/UI/UModal",UDate:"Application/UI/UDate",UCalendar:"Application/UI/UCalendar",Utilisateur:"Application/Utilisateur"};function ni(e){for(s in e)for(m in e[s])F(e[s][m],s)}function F(e,t){const n={info:"info",success:"success",warning:"warning",error:"danger"},d={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},l="alert-"+n[t],a="alert-div-"+Math.floor(Math.random()*1e5+1),c=document.createElement("div");c.setAttribute("id",a),c.classList.add("alert","navbar-fixed-bottom",l),c.setAttribute("role","alert"),c.style.display="none";const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("btn-close","float-md-end"),r.setAttribute("data-bs-dismiss","alert"),r.setAttribute("aria-label","Close"),c.appendChild(r);const h=document.createElement("div");h.classList.add("container"),c.appendChild(h);const g=document.createElement("p");g.classList.add("text-center"),h.appendChild(g);const C=document.createElement("span");C.classList.add("icon","fas","fa-"+d[t]),g.appendChild(C);const v=document.createElement("span");v.classList.add("message"),v.innerHTML=e,g.appendChild(v),document.body.appendChild(c),c.style.display="block",setTimeout(()=>{c.style.display="none",c.classList.remove(l)},t!=="error"?3e3:0)}const H={alert:F,alerts:ni};A.interceptors.request.use(e=>{if(e.submitter){let t=e.msg?e.msg:"Action en cours";e.popover!=null&&e.popover.dispose(),e.popover=new bootstrap.Popover(e.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+t,html:!0,trigger:"focus"}),e.popover.show()}return e});A.interceptors.response.use(e=>{if(e.messages=e.data.messages,e.data=e.data.data,e.hasErrors=!!(e.messages&&e.messages.error&&e.messages.error.length>0),e.config.popover){var t=e.config.popover;let n="";for(ns in e.messages)for(mid in e.messages[ns])n+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+e.messages[ns][mid]+"</div>";n?(t._config.content=n,t.setContent(),setTimeout(()=>{t.dispose()},3e3)):t.dispose()}return e.messages&&H.alerts(e.messages),e},e=>{var t=$("<div>").html(e.response.data);t.find("i.fas").hide(),H.alert(t.find(".alert").html(),"error")});A.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.axios=A;function ai(e,t){const n={};for(const d in e){let a=d.slice(2,-4).replace("/","");n[a]=e[d].default}for(const d of document.getElementsByClassName("vue-app")){let l=K({template:d.innerHTML,components:n});if(t.beforeMount!==void 0&&t.beforeMount(l),t.autoloads!==void 0)for(const a in t.autoloads){let c=t.autoloads[a].replace("/","");l.component(a,n[c])}l.mount(d),t.afterMount!==void 0&&t.afterMount(l)}}const ri={init:ai},oi=Object.assign({"./Application/MyCustom.vue":Z,"./Application/UI/UCalendar.vue":ye,"./Application/UI/UDate.vue":Te,"./Application/UI/UHeures.vue":De,"./Application/UI/UIcon.vue":Ae,"./Application/UI/UModal.vue":Be,"./Application/Utilisateur.vue":We,"./Intervenant/Recherche.vue":ft,"./Mission/Liste.vue":ms,"./Mission/Mission.vue":os,"./Mission/Suivi.vue":ys,"./Mission/SuiviEvent.vue":fs,"./Paiement/ListeTaux.vue":si,"./Paiement/Taux.vue":Gs}),li={autoloads:ii};ri.init(oi,li);
