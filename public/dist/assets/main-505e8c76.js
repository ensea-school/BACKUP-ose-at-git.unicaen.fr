import{c as a,o as r,t as c,a as e,w as A,v as q,b as m,F as v,r as y,d as h,n as w,e as f,f as x,g as T,h as E,p as Y,i as J,j as W,k as Q,l as z,m as N,q as re,s as ae,u as oe,x as le,y as de}from"./vendor-2e5f87a4.js";const k=(t,s)=>{const n=t.__vccOpts||t;for(const[_,l]of s)n[_]=l;return n},ue={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},ce=["innerHTML"];function he(t,s,n,_,l,i){return r(),a("span",{class:"heures",innerHTML:i.affichage},null,8,ce)}const me=k(ue,[["render",he]]),_e=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"})),fe={name:"Utilisateur",props:{nom:String,mail:String}},pe=["href"];function be(t,s,n,_,l,i){return r(),a("a",{href:`mailto:${n.mail}`},c(n.nom),9,pe)}const ve=k(fe,[["render",be]]),ge=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"})),ye={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(t){this.formatted=this.formatage(t)}},methods:{formatage(t){if(t===void 0)return;let s=new Date(t);const n=s.getFullYear(),_=(s.getMonth()+1).toString().padStart(2,"0"),l=s.getDate().toString().padStart(2,"0"),i=s.getHours().toString().padStart(2,"0"),o=s.getMinutes().toString().padStart(2,"0"),d=s.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${l}/${_}/${n} à ${i}:${o}`;case"time":return`${i}:${o}:${d}`}return`${l}/${_}/${n}`}}};function xe(t,s,n,_,l,i){return c(l.formatted)}const H=k(ye,[["render",xe]]),Ce={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(t){this.searchTerm=t.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(t){return unicaenVue.url("intervenant/code:"+t+"/voir")},reload(){var t=document.getElementById("term");t.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(s=>{let n=s.data,_=[];for(const l in n){if(n[l].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){_.push(n[l]);continue}if(n[l].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){_.push(n[l]);continue}if(n[l].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){_.push(n[l]);continue}}this.intervenants=_,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(s=>{console.log(s.message)})},800)}}},ke=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),Pe={class:"intervenant-recherche"},Ee={class:"critere"},De=e("br",null,null,-1),Ve=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),Te=e("br",null,null,-1),Se={key:0,class:"table table-bordered table-hover"},$e=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),Me=["title"],we={style:{}},Ie=["href"],Re=e("i",{class:"fas fa-eye"},null,-1),Ae={key:1,class:"table table-bordered table-hover"},je=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),He=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),Ue=[je,He];function Le(t,s,n,_,l,i){const o=H;return r(),a(v,null,[ke,e("div",Pe,[e("div",Ee,[e("div",null,[e("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:s[0]||(s[0]=(...d)=>i.rechercher&&i.rechercher(...d))},null,32),De]),e("div",null,[Ve,A(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>l.checkedTypes=d),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:s[2]||(s[2]=d=>i.reload())},null,544),[[q,l.checkedTypes]]),m(" Permanent "),A(e("input",{"onUpdate:modelValue":s[3]||(s[3]=d=>l.checkedTypes=d),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:s[4]||(s[4]=d=>i.reload())},null,544),[[q,l.checkedTypes]]),m(" Vacataire "),A(e("input",{"onUpdate:modelValue":s[5]||(s[5]=d=>l.checkedTypes=d),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:s[6]||(s[6]=d=>i.reload())},null,544),[[q,l.checkedTypes]]),m(" Etudiant ")]),Te])]),l.intervenants.length>0?(r(),a("table",Se,[$e,e("tbody",null,[(r(!0),a(v,null,y(l.intervenants,(d,u)=>(r(),a("tr",{class:w({"bg-danger":d.destruction!==null}),title:d.destruction!==null?"Fiche historisé":""},[e("td",we,[e("a",{href:i.urlFiche(d.code)},[Re,m(" Fiche")],8,Ie)]),e("td",null,c(d.civilite),1),e("td",null,c(d.nom),1),e("td",null,c(d.prenom),1),e("td",null,c(d.structure),1),e("td",null,c(d.statut),1),e("td",null,[f(o,{value:d["date-naissance"]},null,8,["value"])]),e("td",null,c(d["numero-personnel"]),1)],10,Me))),256))])])):h("",!0),l.intervenants.length==0&&l.noResult==1?(r(),a("table",Ae,Ue)):h("",!0)],64)}const qe=k(Ce,[["render",Le]]),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));const Oe={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return this.structure.structures.length>0}},methods:{saisie(t){modAjax(t.currentTarget,s=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.refresh()})},refresh(){this.liste.reload()}}},I=t=>(Y("data-v-a94dbf9e"),t=t(),J(),t),ze={class:"accordion-item"},Ne={class:"accordion-header"},Be=["data-bs-target","aria-controls"],Ge=["href"],Ye=I(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),Je=[Ye],We=["href"],Qe=I(()=>e("i",{class:"fas fa-trash-can"},null,-1)),Xe=[Qe],Ze=["id"],Ke={class:"accordion-body"},et={class:"row"},tt=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),m(" : ")],-1)),st={class:"col-md-5"},nt={class:"row"},it=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),m(" : ")],-1)),rt={class:"col-md-5"},at={class:"row"},ot=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),m(" : ")],-1)),lt={class:"col-md-5"},dt={key:0,class:"fas fa-check text-success"},ut={key:1,class:"fas fa-xmark text-danger"},ct={class:"row"},ht=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),m(" : ")],-1)),mt={class:"col-md-5"},_t={key:0,class:"fas fa-check text-success"},ft={key:1,class:"fas fa-xmark text-danger"},pt={class:"row"},bt=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),m(" : ")],-1)),vt={class:"col-md-5"},gt={key:0,class:"sous-structures"},yt=I(()=>e("h4",null,"Sous-structures",-1)),xt={class:"accordion"};function Ct(t,s,n,_,l,i){const o=T("structure",!0);return r(),a("div",ze,[e("h2",Ne,[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":`#str${n.structure.id}`,"aria-expanded":"true","aria-controls":n.structure.id},[n.structure.canEdit?(r(),a("a",{key:0,title:"Modifier la structure",href:l.saisieUrl,class:"btn btn-primary btn-sm",onClick:s[0]||(s[0]=x((...d)=>i.saisie&&i.saisie(...d),["prevent"]))},Je,8,Ge)):h("",!0),n.structure.canDelete?(r(),a("a",{key:1,title:"Supprimer la structure",href:l.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",onClick:s[1]||(s[1]=x((...d)=>i.supprimer&&i.supprimer(...d),["prevent"]))},Xe,8,We)):h("",!0),m("   "+c(n.structure.libelleLong)+" ("+c(n.structure.libelleCourt)+") ",1)],8,Be)]),e("div",{id:`str${n.structure.id}`,class:"accordion-collapse collapse show"},[e("div",Ke,[e("div",et,[tt,e("div",st,c(n.structure.code),1)]),e("div",nt,[it,e("div",rt,c(n.structure.source.libelle),1)]),e("div",at,[ot,e("div",lt,[n.structure.enseignement?(r(),a("i",dt)):n.structure.enseignement?h("",!0):(r(),a("i",ut))])]),e("div",ct,[ht,e("div",mt,[n.structure.affAdresseContrat?(r(),a("i",_t)):n.structure.affAdresseContrat?h("",!0):(r(),a("i",ft))])]),e("div",pt,[bt,e("div",vt,[e("pre",null,c(n.structure.adresse),1)])]),i.hasSousStructures?(r(),a("div",gt,[yt,e("div",xt,[(r(!0),a(v,null,y(n.structure.structures,d=>(r(),E(o,{onRefresh:i.refresh,key:d.id,structure:d},null,8,["onRefresh","structure"]))),128))])])):h("",!0)])],8,Ze)])}const X=k(Oe,[["render",Ct],["__scopeId","data-v-a94dbf9e"]]),kt=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"})),Pt={components:{structure:X},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{console.log("coucou"),this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(t=>{this.structures=t.data})}}},Et=e("h1",null,"Administration des structures",-1),Dt={class:"accordion"},Vt=["href"],Tt=e("i",{class:"fas fa-pen-to-square"},null,-1);function St(t,s,n,_,l,i){const o=T("structure");return r(),a(v,null,[Et,e("div",Dt,[(r(!0),a(v,null,y(l.structures,d=>(r(),E(o,{key:d.id,structure:d},null,8,["structure"]))),128))]),n.canAdd?(r(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:s[0]||(s[0]=x((...d)=>i.ajout&&i.ajout(...d),["prevent"])),title:"Ajouter une structure"},[Tt,m(" Ajouter une structure ")],8,Vt)):h("",!0)],64)}const $t=k(Pt,[["render",St]]),Mt=Object.freeze(Object.defineProperty({__proto__:null,default:$t},Symbol.toStringTag,{value:"Module"})),wt={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},It=["id"],Rt={class:"modal-dialog"},At={class:"modal-content"},jt={class:"modal-header"},Ht={class:"modal-title"},Ut=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Lt={class:"modal-body"},qt={class:"modal-footer"},Ft=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function Ot(t,s,n,_,l,i){return r(),a("div",{class:"modal fade",id:n.id,tabindex:"-1","aria-hidden":"true"},[e("div",Rt,[e("div",At,[e("div",jt,[e("h5",Ht,c(n.title),1),Ut]),e("div",Lt,[W(t.$slots,"body")]),e("div",qt,[W(t.$slots,"footer"),Ft])])])],8,It)}const zt=k(wt,[["render",Ot]]),Nt={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},Bt=["id"];function Gt(t,s,n,_,l,i){return r(),a("i",{class:w(`fas fa-${n.name} text-${n.variant} fa-rotate-${n.rotate}`),id:`${n.id}`},null,10,Bt)}const R=k(Nt,[["render",Gt]]);const Yt={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(t){this.validationText=this.calcValidation(t)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(t){return t===null?"A valider":t.id===null?"Autovalidée":"Validation du "+Util.dateToString(t.histoCreation)+" par "},saisie(t){modAjax(t.currentTarget,s=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.$emit("supprimer",this.mission)})},valider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},devalider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireSupprimer(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireValider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireDevalider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(t=>{this.$emit("refresh",t.data)})}}},S=t=>(Y("data-v-1735108d"),t=t(),J(),t),Jt=["id"],Wt={class:"card-header card-header-h3"},Qt={key:0},Xt={class:"float-end"},Zt={key:1},Kt={key:2},es={class:"float-end"},ts={class:"card-body"},ss={class:"row"},is={class:"col-md-8"},rs={class:"row"},as={class:"col-md-12"},os=S(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),ls={class:"form-control"},ds={class:"row"},us={class:"col-md-6"},cs=S(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),hs={class:"form-control"},ms={class:"col-md-6"},_s=S(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),fs={class:"form-control"},ps={class:"col-md-7"},bs=S(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),vs={class:"input-group mb-3"},gs=["innerHTML"],ys=["data-bs-target"],xs={key:0,class:"col-md-5"},Cs=S(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),ks={class:"form-control"},Ps={class:"row"},Es={class:"col-md-12"},Ds=S(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),Vs={class:"form-control"},Ts={key:0,class:"row"},Ss={class:"col-md-12"},$s=S(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),Ms={class:"form-control"},ws=S(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),Is={class:"row"},Rs={class:"col-md-12"},As=["href"],js=["href"],Hs=["href"],Us=["href"],Ls={class:"col-md-4"},qs=S(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),Fs={class:"table table-bordered table-condensed"},Os=S(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),zs={style:{"text-align":"right"}},Ns=S(()=>e("br",null,null,-1)),Bs={key:0},Gs=["data-id"],Ys=["data-id"],Js=["data-id"];function Ws(t,s,n,_,l,i){const o=H,d=R,u=T("utilisateur"),p=T("u-heures"),g=zt;return r(),a(v,null,[e("div",{id:n.mission.id,class:w([{"bg-success":n.mission.valide,"bg-default":!n.mission.valide},"card"])},[e("form",{onSubmit:s[4]||(s[4]=x((...b)=>t.submitForm&&t.submitForm(...b),["prevent"]))},[e("div",Wt,[n.mission.libelleMission?(r(),a("h5",Qt,[m(c(n.mission.libelleMission)+" ",1),e("span",Xt,[m("Du "),f(o,{value:n.mission.dateDebut},null,8,["value"]),m(" au "),f(o,{value:n.mission.dateFin},null,8,["value"])])])):h("",!0),n.mission.libelleMission?(r(),a("h6",Zt,c(n.mission.typeMission.libelle),1)):h("",!0),n.mission.libelleMission?h("",!0):(r(),a("h5",Kt,[m(c(n.mission.typeMission.libelle)+" ",1),e("span",es,[m("Du "),f(o,{value:n.mission.dateDebut},null,8,["value"]),m(" au "),f(o,{value:n.mission.dateFin},null,8,["value"])])]))]),e("div",ts,[e("div",ss,[e("div",is,[e("div",rs,[e("div",as,[os,e("div",ls,c(n.mission.structure.libelle),1)])]),e("div",ds,[e("div",us,[cs,e("div",hs,c(n.mission.tauxRemu?n.mission.tauxRemu.libelle:null),1)]),e("div",ms,[_s,e("div",fs,c(n.mission.tauxRemuMajore?n.mission.tauxRemuMajore.libelle:n.mission.tauxRemu?"Idem ("+n.mission.tauxRemu.libelle+")":null),1)]),e("div",ps,[bs,e("div",vs,[e("div",{class:"form-control",innerHTML:i.heuresLib},null,8,gs),e("button",{"data-bs-target":`#details-${n.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,ys)])]),n.mission.typeMission.besoinFormation?(r(),a("div",xs,[Cs,e("div",ks,c(n.mission.heuresFormation),1)])):h("",!0)]),e("div",Ps,[e("div",Es,[Ds,e("div",Vs,c(n.mission.description),1)])]),n.mission.typeMission.accompagnementEtudiants?(r(),a("div",Ts,[e("div",Ss,[$s,e("div",Ms,[e("pre",null,c(n.mission.etudiantsSuivis),1)])])])):h("",!0),ws,e("div",Is,[e("div",Rs,[n.mission.canSaisie?(r(),a("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=x((...b)=>i.saisie&&i.saisie(...b),["prevent"]))},"Modifier",8,As)):h("",!0),n.mission.canValider?(r(),a("a",{key:1,href:l.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:s[1]||(s[1]=x((...b)=>i.valider&&i.valider(...b),["prevent"]))},"Valider",8,js)):h("",!0),n.mission.canDevalider?(r(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:s[2]||(s[2]=x((...b)=>i.devalider&&i.devalider(...b),["prevent"]))},"Dévalider",8,Hs)):h("",!0),n.mission.canSupprimer?(r(),a("a",{key:3,href:l.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:s[3]||(s[3]=x((...b)=>i.supprimer&&i.supprimer(...b),["prevent"]))},"Supprimer",8,Us)):h("",!0)])])]),e("div",Ls,[qs,e("div",null,[f(d,{name:"thumbs-up",variant:"success"}),m(" Créé le "),f(o,{value:n.mission.histoCreation},null,8,["value"]),m(" par "),f(u,{mail:n.mission.histoCreateur.email,nom:n.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[f(d,{name:n.mission.valide?"thumbs-up":"thumbs-down",variant:n.mission.valide?"success":"info"},null,8,["name","variant"]),m(" "+c(l.validationText)+" ",1),n.mission.validation&&n.mission.validation.histoCreateur?(r(),E(u,{key:0,mail:n.mission.validation.histoCreateur.email,nom:n.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):h("",!0)]),e("div",null,[f(d,{name:n.mission.contrat?"thumbs-up":"thumbs-down",variant:n.mission.contrat?"success":"info"},null,8,["name","variant"]),m(" "+c(n.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,c(n.mission.heuresRealisees)+" heure"+c(n.mission.heuresRealisees<2?"":"s")+" réalisée"+c(n.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,Jt),f(g,{id:`details-${n.mission.id}`,title:"Détail des heures prévisionnelles"},{body:Q(()=>[e("table",Fs,[Os,e("tbody",null,[(r(!0),a(v,null,y(n.mission.volumesHorairesPrevus,b=>(r(),a("tr",{key:b.id},[e("td",zs,[f(p,{valeur:b.heures},null,8,["valeur"])]),e("td",null,[f(d,{name:"thumbs-up",variant:"success"}),m(" Saisi par "),f(u,{mail:b.histoCreateur.email,nom:b.histoCreateur.displayName},null,8,["mail","nom"]),m(" le "),f(o,{value:b.histoCreation},null,8,["value"]),Ns,f(d,{name:b.valide?"thumbs-up":"thumbs-down",variant:b.valide?"success":"info"},null,8,["name","variant"]),m(" "+c(b.validation&&b.validation.id==null?"Autovalidé":b.validation?"":"à valider")+" ",1),b.validation&&b.validation.histoCreateur?(r(),a("span",Bs,[m(" Validé par "),f(u,{mail:b.validation.histoCreateur.email,nom:b.validation.histoCreateur.displayName},null,8,["mail","nom"]),m(" le "),f(o,{value:b.validation.histoCreation},null,8,["value"])])):h("",!0)]),e("td",null,[b.canValider?(r(),a("a",{key:0,"data-id":b.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:s[5]||(s[5]=x((...P)=>i.volumeHoraireValider&&i.volumeHoraireValider(...P),["prevent"]))},"Valider",8,Gs)):h("",!0),b.canDevalider?(r(),a("a",{key:1,"data-id":b.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:s[6]||(s[6]=x((...P)=>i.volumeHoraireDevalider&&i.volumeHoraireDevalider(...P),["prevent"]))},"Dévalider",8,Ys)):h("",!0),b.canSupprimer?(r(),a("a",{key:2,"data-id":b.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:s[7]||(s[7]=x((...P)=>i.volumeHoraireSupprimer&&i.volumeHoraireSupprimer(...P),["prevent"]))},"Supprimer",8,Js)):h("",!0)])]))),128))])])]),footer:Q(()=>[]),_:1},8,["id"])],64)}const Z=k(Yt,[["render",Ws],["__scopeId","data-v-1735108d"]]),Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"})),Xs={components:{mission:Z},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},supprimer(t){this.reload()},refresh(t){let s=Util.json.indexById(this.missions,t.id);this.missions[s]=t,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(t=>{this.missions=t.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},Zs=["href"];function Ks(t,s,n,_,l,i){const o=T("mission");return r(),a(v,null,[(r(!0),a(v,null,y(l.missions,d=>(r(),E(o,{onSupprimer:i.supprimer,onRefresh:i.refresh,key:d.id,mission:d},null,8,["onSupprimer","onRefresh","mission"]))),128)),n.canAddMission?(r(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:s[0]||(s[0]=x((...d)=>i.ajout&&i.ajout(...d),["prevent"]))},"Ajout d'une nouvelle mission",8,Zs)):h("",!0)],64)}const en=k(Xs,[["render",Ks]]),tn=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),sn={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},canValiderCandidature:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(t=>{this.candidatures=t.data})},validerCandidature(t){modAjax(t.currentTarget,s=>{this.reload()})},refuserCandidature(t){popConfirm(t.target,s=>{this.reload()})},urlOffre(t){return unicaenVue.url("offre-emploi/detail/:offre",{offre:t.offre.id})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})}}},nn={class:"table table-bordered"},rn=e("th",null,"Offre d'emploi",-1),an=e("th",null,"Composante",-1),on=e("th",null,"Etat",-1),ln=e("th",null,"Date commission",-1),dn={key:0},un={key:0},cn={key:0,colspan:"5",style:{"text-align":"center"}},hn={style:{"text-align":"center"}},mn=["href"],_n={style:{"text-align":"center"}},fn={style:{"text-align":"center"}},pn={key:0,class:"badge rounded-pill bg-success"},bn={key:1,class:"badge rounded-pill bg-danger"},vn={key:2,class:"badge rounded-pill bg-warning"},gn={key:0,style:{"text-align":"center"}},yn=["href"],xn=e("i",{class:"fa-solid fa-check"},null,-1),Cn=[xn],kn=["href"],Pn=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),En=[Pn],Dn=["href"];function Vn(t,s,n,_,l,i){const o=H,d=R;return r(),a("div",null,[e("table",nn,[e("thead",null,[e("tr",null,[rn,an,on,ln,n.canValiderCandidature?(r(),a("th",dn,"Action")):h("",!0)])]),e("tbody",null,[l.candidatures.length==0?(r(),a("tr",un,[n.canValiderCandidature?(r(),a("td",cn,"Aucune candidature")):h("",!0)])):h("",!0),(r(!0),a(v,null,y(l.candidatures,u=>(r(),a("tr",{key:u.id},[e("td",hn,[e("a",{href:i.urlOffre(u)},c(u.offre.titre),9,mn)]),e("td",_n,c(u.offre.structure.libelleCourt),1),e("td",fn,[u.validation?(r(),a("span",pn,"Acceptée par "+c(u.validation.histoCreateur.displayName),1)):h("",!0),!u.validation&&u.motif!==null?(r(),a("span",bn,c(u.motif),1)):h("",!0),!u.validation&&u.motif===null?(r(),a("span",vn,"En attente d'acceptation")):h("",!0)]),e("td",null,[u.dateCommission?(r(),E(o,{key:0,value:u.dateCommission},null,8,["value"])):h("",!0)]),this.canValiderCandidature?(r(),a("td",gn,[u.validation?h("",!0):(r(),a("a",{key:0,href:i.urlAccepterCandidature(u),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:s[0]||(s[0]=x((...p)=>i.validerCandidature&&i.validerCandidature(...p),["prevent"]))},Cn,8,yn)),m("  "),e("a",{href:i.urlRefuserCandidature(u),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:s[1]||(s[1]=x((...p)=>i.refuserCandidature&&i.refuserCandidature(...p),["prevent"]))},En,8,kn)])):h("",!0)]))),128))])]),e("a",{href:l.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[f(d,{name:"eye"}),m(" Voir toutes les offres d'emploi ")],8,Dn),m("  ")])}const Tn=k(sn,[["render",Vn]]),Sn=Object.freeze(Object.defineProperty({__proto__:null,default:Tn},Symbol.toStringTag,{value:"Module"})),$n={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let t=this.offre.description.substr(0,200);return this.offre.description.length>200&&(t+="..."),t},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let t="auth/connexion?redirect="+window.location.href;return unicaenVue.url(t)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(t){modAjax(t.target,s=>{this.refresh()})},urlVoir:function(t){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+t.intervenant.code})},urlVoirCandidature:function(t){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+t.intervenant.code})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(t=>{this.$emit("refresh",t.data)})},supprimer(t){popConfirm(t.target,s=>{this.$emit("supprimer",this.offre)})},postuler(t){popConfirm(t.target,s=>{this.$emit("postuler",this.offre)})},valider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},devalider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},validerCandidature(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},refuserCandidature(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})}}},Mn={key:0,class:"col"},wn={class:"card h-100"},In={class:"card-header"},Rn={class:"badge rounded-pill bg-info"},An={key:0,class:"badge rounded-pill bg-success"},jn={key:1,class:"badge rounded-pill bg-warning"},Hn={class:"card-body"},Un={class:"bg-light",style:{padding:"5px"}},Ln=e("b",null,"Créée le : ",-1),qn=e("br",null,null,-1),Fn=e("b",null,"Période à pourvoir : ",-1),On=e("br",null,null,-1),zn=e("b",null,"Demandée par la composante :",-1),Nn=e("br",null,null,-1),Bn=e("b",null,"Type de mission :",-1),Gn={class:"card-footer"},Yn={class:"d-grid gap-2 d-md-flex justify-content-md-end"},Jn=["href"],Wn={key:1},Qn={class:"page-header"},Xn={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},Zn=e("i",{class:"fa-solid fa-user"},null,-1),Kn={class:"ms-2"},ei=["href"],ti={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},si=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),ni=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),ii=[si,ni],ri={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},ai=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),oi=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),li=[ai,oi],di={class:"bg-light",style:{padding:"10px"}},ui=e("b",null,"Créée le : ",-1),ci=e("br",null,null,-1),hi=e("b",null,"Période à pourvoir : ",-1),mi=e("br",null,null,-1),_i=e("b",null,"Date limite de candidature :",-1),fi=e("br",null,null,-1),pi=e("b",null,"Demandé par la composante :",-1),bi=e("br",null,null,-1),vi=e("b",null,"Type de mission :",-1),gi=e("br",null,null,-1),yi=e("b",null,"Nombre d'heures pour la mission :",-1),xi=e("br",null,null,-1),Ci=e("b",null,"Nombre de postes à pourvoir :",-1),ki=e("br",null,null,-1),Pi={key:3,class:"alert alert-info"},Ei=["innerHTML"],Di=e("br",null,null,-1),Vi={key:4},Ti=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),Si={class:"table table-bordered"},$i=e("th",null,"Intervenant",-1),Mi=e("th",null,"Etat",-1),wi={key:0},Ii={key:0},Ri={key:0,colspan:"4",style:{"text-align":"center"}},Ai={key:1,colspan:"3",style:{"text-align":"center"}},ji=["href"],Hi={key:0,class:"badge rounded-pill bg-success"},Ui={key:1,class:"badge rounded-pill bg-danger"},Li={key:2,class:"badge rounded-pill bg-warning"},qi={key:0},Fi=["href"],Oi={class:"mt-5"},zi=["href"],Ni=["href"],Bi=["href"],Gi=["href"],Yi=["href"],Ji=["href"];function Wi(t,s,n,_,l,i){const o=H,d=R;return r(),a(v,null,[this.extended?h("",!0):(r(),a("div",Mn,[e("div",wn,[e("div",In,[e("h4",null,c(n.offre.titre),1),e("span",Rn,c(n.offre.nombreHeures)+" heure(s)",1),m("   "),n.offre.validation?(r(),a("span",An,[m("Validée le "),f(o,{value:n.offre.validation.histoCreation},null,8,["value"]),m(" par "+c(n.offre.validation.histoCreateur.displayName),1)])):h("",!0),n.offre.validation?h("",!0):(r(),a("span",jn," En attente de validation par la DRH")),m("  ")]),e("div",Hn,[e("p",Un,[Ln,f(o,{value:n.offre.histoCreation},null,8,["value"]),m(" par "+c(n.offre.histoCreateur.displayName),1),qn,Fn,m("du "),f(o,{value:n.offre.dateDebut},null,8,["value"]),m(" au "),f(o,{value:n.offre.dateFin},null,8,["value"]),On,zn,m(" "+c(n.offre.structure.libelleCourt)+" ",1),Nn,Bn,m(" "+c(n.offre.typeMission.libelle),1)]),m(" "+c(i.shortDesc),1)]),e("div",Gn,[e("div",Yn,[e("a",{href:l.consulterUrl,class:"btn btn-primary",title:"Consulter "},[f(d,{name:"eye"}),m(" Voir ")],8,Jn)])])])])),this.extended?(r(),a("div",Wn,[e("h1",Qn,c(n.offre.titre),1),this.utilisateur?h("",!0):(r(),a("div",Xn,[Zn,e("div",Kn,[m(" Vous devez "),e("a",{href:i.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,ei),m(" pour pouvoir postuler. ")])])),!n.offre.canPostuler&&this.utilisateur?(r(),a("div",ti,ii)):h("",!0),i.isCandidat&&this.utilisateur?(r(),a("div",ri,li)):h("",!0),e("p",di,[ui,f(o,{value:n.offre.histoCreation},null,8,["value"]),m(" par "+c(n.offre.histoCreateur.displayName),1),ci,hi,m("du "),f(o,{value:n.offre.dateDebut},null,8,["value"]),m(" au "),f(o,{value:n.offre.dateFin},null,8,["value"]),mi,_i,f(o,{value:n.offre.dateLimite},null,8,["value"]),fi,pi,m(" "+c(n.offre.structure.libelleCourt)+" ",1),bi,vi,m(" "+c(n.offre.typeMission.libelle)+" ",1),gi,yi,m(" "+c(n.offre.nombreHeures)+" heure(s) ",1),xi,Ci,m(" "+c(n.offre.nombrePostes)+" poste(s) ",1),ki]),e("p",null,c(this.descriptionHtml),1),this.decretText?(r(),a("p",Pi,[A(e("input",{id:"decret","onUpdate:modelValue":s[0]||(s[0]=u=>l.decret=u),name:"decret",type:"checkbox"},null,512),[[q,l.decret]]),m("  "),e("span",{innerHTML:this.decretText},null,8,Ei)])):h("",!0),Di,this.canValiderCandidature?(r(),a("div",Vi,[Ti,e("table",Si,[e("thead",null,[e("tr",null,[$i,Mi,n.canValiderCandidature?(r(),a("th",wi,"Action")):h("",!0)])]),e("tbody",null,[n.offre.candidatures.length==0?(r(),a("tr",Ii,[n.canValiderCandidature?(r(),a("td",Ri,"Aucune candidature")):h("",!0),n.canValiderCandidature?h("",!0):(r(),a("td",Ai,"Aucune candidature"))])):h("",!0),(r(!0),a(v,null,y(n.offre.candidatures,u=>(r(),a("tr",null,[e("td",null,[e("a",{href:i.urlVoir(u)},c(u.intervenant.prenom+" "+u.intervenant.nomUsuel),9,ji)]),e("td",null,[u.validation?(r(),a("span",Hi,[m("Acceptée le "),f(o,{value:u.validation.histoCreation},null,8,["value"]),m(" par "+c(u.validation.histoCreateur.displayName),1)])):h("",!0),!u.validation&&u.motif!==null?(r(),a("span",Ui,c(u.motif),1)):h("",!0),!u.validation&&u.motif===null?(r(),a("span",Li,"En attente d'acceptation")):h("",!0)]),this.canValiderCandidature?(r(),a("td",qi,[e("a",{href:i.urlVoirCandidature(u),class:"btn btn-primary",title:"Consulter "},[f(d,{name:"eye"}),m(" Voir ")],8,Fi)])):h("",!0)]))),256))])])])):h("",!0),e("div",Oi,[e("a",{href:l.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,zi),m("  "),this.canPostuler?(r(),a("a",{key:0,href:l.postulerUrl,class:w(["btn btn-primary",l.decret?"":"disabled"]),"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,Ni)):h("",!0),m("  "),n.offre.canModifier?(r(),a("a",{key:1,href:l.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:s[1]||(s[1]=x((...u)=>i.saisir&&i.saisir(...u),["prevent"]))},[f(d,{name:"pen-to-square"}),m(" Modifier ")],8,Bi)):h("",!0),m("  "),n.offre.validation&&n.offre.canValider?(r(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:s[2]||(s[2]=x((...u)=>i.devalider&&i.devalider(...u),["prevent"]))},[f(d,{name:"thumbs-down"}),m(" Devalider ")],8,Gi)):h("",!0),m("  "),!n.offre.validation&&n.offre.canValider?(r(),a("a",{key:3,href:l.validerUrl,class:"btn btn-success",title:"Valider",onClick:s[3]||(s[3]=x((...u)=>i.valider&&i.valider(...u),["prevent"]))},[f(d,{name:"thumbs-up"}),m(" Valider ")],8,Yi)):h("",!0),m("  "),n.offre.canSupprimer?(r(),a("a",{key:4,href:l.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:s[4]||(s[4]=x((...u)=>i.supprimer&&i.supprimer(...u),["prevent"]))},[f(d,{name:"trash"}),m(" Supprimer ")],8,Ji)):h("",!0)])])):h("",!0)],64)}const K=k($n,[["render",Wi]]),Qi=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"})),Xi={components:{offreEmploi:K},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(t){modAjax(t.target,s=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(t){let s=Util.json.indexById(this.offres,t.id);this.offres[s]=t},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(t=>{this.offres=[t.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(t=>{this.offres=t.data})}}},Zi={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},Ki={key:1},er=["href"],tr={key:2};function sr(t,s,n,_,l,i){const o=T("offreEmploi");return r(),a(v,null,[i.extended?h("",!0):(r(),a("div",Zi,[(r(!0),a(v,null,y(l.offres,d=>(r(),E(o,{key:d.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:d,decretText:d.decretText,onRefresh:i.refresh,onSupprimer:i.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),i.extended?h("",!0):(r(),a("div",Ki,[this.canModifier?(r(),a("a",{key:0,href:l.ajoutUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=x((...d)=>i.ajout&&i.ajout(...d),["prevent"]))},"Ajouter une nouvelle offre",8,er)):h("",!0)])),i.extended?(r(),a("div",tr,[(r(!0),a(v,null,y(l.offres,d=>(r(),E(o,{key:d.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:d.decretText,extended:i.extended,offre:d,utilisateur:this.utilisateur,onRefresh:i.refresh,onSupprimer:i.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):h("",!0)],64)}const nr=k(Xi,[["render",sr]]),ir=Object.freeze(Object.defineProperty({__proto__:null,default:nr},Symbol.toStringTag,{value:"Module"})),rr={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(t){popConfirm(t.target,s=>{this.$emit("reload")})},valider(t){popConfirm(t.target,s=>{this.$emit("reload")})},devalider(t){popConfirm(t.target,s=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(t=>{this.$emit("reload")})},modifierPrime(t){modAjax(t.currentTarget,s=>{this.$emit("reload")})},supprimerPrime(t){popConfirm(t.target,s=>{this.$emit("reload")})}}},ar={key:0},or=e("br",null,null,-1),lr=e("u",null,"Mission(s) concernée(s)",-1),dr={key:0},ur=["action"],cr={class:"card-body"},hr={class:"row"},mr={key:0,class:"col-md-6"},_r={class:"card text-dark bg-light"},fr=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),pr={class:"card-body"},br=e("p",{class:"card-text"},[m(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),m(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),m(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),vr=["disabled"],gr={class:"card-footer d-grid gap-2"},yr=["disabled"],xr={key:1,class:"col-md-6"},Cr={class:"card text-dark bg-light"},kr=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),Pr={class:"card-body"},Er=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),Dr=["href"],Vr={class:"card-footer",style:{"text-align":"right"}},Tr=["href"],Sr=["href"],$r=["href"],Mr={class:"col-md-6"},wr={key:0},Ir=["checked","disabled"],Rr=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),Ar=e("br",null,null,-1),jr=e("br",null,null,-1),Hr=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),Ur={key:0},Lr={key:1},qr={key:2},Fr={key:3},Or={key:4},zr={key:5},Nr={key:6},Br={class:"row"},Gr={class:"col-md-12"},Yr={class:"float-end"},Jr=["href"],Wr=["href"];function Qr(t,s,n,_,l,i){const o=H,d=R;return r(),a("div",{class:w([{"bg-success":n.prime.validation,"bg-default":!n.prime.validation&&!n.prime.dateRefus,"bg-danger":n.prime.dateRefus},"card"])},[e("div",{class:w([{"text-white":n.prime.dateRefus},"card-header card-header-h3"])},[n.prime.id?(r(),a("h5",ar,[m(" Indemnité de fin de contrat N°"+c(n.numero+1),1),or])):h("",!0),e("div",null,[lr,m(" : "),(r(!0),a(v,null,y(n.prime.missions,(u,p)=>(r(),a("span",null,[m(c(u.typeMission.libelle)+" (Pour "+c(u.structure.libelleCourt)+" du ",1),f(o,{value:u.dateDebut},null,8,["value"]),m(" au "),f(o,{value:u.dateFin},null,8,["value"]),m(") "),p!=n.prime.missions.length-1?(r(),a("span",dr,", ")):h("",!0)]))),256))])],2),e("form",{action:l.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",cr,[e("div",hr,[n.prime.declaration?h("",!0):(r(),a("div",mr,[e("div",_r,[fr,e("div",pr,[br,e("input",{ref:"file",disabled:!!n.prime.dateRefus,name:"files[]",type:"file"},null,8,vr)]),e("div",gr,[e("input",{disabled:!!n.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,yr)])])])),n.prime.declaration?(r(),a("div",xr,[e("div",Cr,[kr,e("div",Pr,[Er,e("a",{href:l.telechargerUrl},c(n.prime.declaration.nom),9,Dr)]),e("div",Vr,[n.prime.declaration&&!n.prime.validation&&!n.prime.dateRefus?(r(),a("a",{key:0,href:l.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:s[0]||(s[0]=x((...u)=>i.supprimer&&i.supprimer(...u),["prevent"]))}," Supprimer ",8,Tr)):h("",!0),m("  "),n.prime.declaration&&!n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(r(),a("a",{key:1,href:l.validerUrl,class:"btn btn-success",title:"Valider",onClick:s[1]||(s[1]=x((...u)=>i.valider&&i.valider(...u),["prevent"]))}," Valider ",8,Sr)):h("",!0),m("  "),n.prime.declaration&&n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(r(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:s[2]||(s[2]=x((...u)=>i.devalider&&i.devalider(...u),["prevent"]))}," Dévalider ",8,$r)):h("",!0),m("  ")])])])):h("",!0),e("div",Mr,[n.prime.validation?h("",!0):(r(),a("div",wr,[e("input",{checked:n.prime.dateRefus,disabled:n.prime.validation,name:"prime",type:"checkbox",onChange:s[3]||(s[3]=(...u)=>i.refuser&&i.refuser(...u))},null,40,Ir),m("  Ou en cochant cette case, "),Rr,m(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),Ar,jr])),e("div",null,[Hr,n.prime.dateRefus?(r(),a("div",Ur,[f(d,{name:"thumbs-down",variant:"danger"}),m(" Indemnité refusée le "),f(o,{value:n.prime.dateRefus},null,8,["value"])])):h("",!0),n.prime.declaration&&!n.prime.dateRefus?(r(),a("div",Lr,[f(d,{name:"thumbs-up",variant:"success"}),m(" Déclaration déposée le "),f(o,{value:n.prime.declaration.histoCreation},null,8,["value"]),m(" par "+c(n.prime.declaration.histoCreateur.displayName),1)])):h("",!0),!n.prime.declaration&&!n.prime.dateRefus?(r(),a("div",qr,[f(d,{name:"thumbs-down",variant:"info"}),m(" Aucune déclaration déposée ")])):h("",!0),n.prime.validation&&!n.prime.dateRefus?(r(),a("div",Fr,[f(d,{name:"thumbs-up",variant:"success"}),m(" Déclaration validée le "),f(o,{value:n.prime.validation.histoCreation},null,8,["value"]),m(" par "+c(n.prime.validation.histoCreateur.displayName),1)])):h("",!0),!n.prime.validation&&!n.prime.dateRefus?(r(),a("div",Or,[f(d,{name:"thumbs-down",variant:"info"}),m(" Aucune déclaration validée ")])):h("",!0),n.prime.validation&&!n.prime.dateRefus?(r(),a("div",zr,[f(d,{name:"euro-sign",variant:"success"}),m(" Intervenant éligible à une indemnité de fin de contrat ")])):h("",!0),n.prime.dateRefus?(r(),a("div",Nr,[f(d,{name:"euro-sign",variant:"info"}),m(" Intervenant non éligible à une indemnité de fin de contrat ")])):h("",!0)])])]),e("div",Br,[e("div",Gr,[e("span",Yr,[!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(r(),a("a",{key:0,href:l.modifierPrimeUrl,class:"btn btn-primary",onClick:s[4]||(s[4]=x((...u)=>i.modifierPrime&&i.modifierPrime(...u),["prevent"]))},"Modifier",8,Jr)):h("",!0),m("   "),!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(r(),a("a",{key:1,href:l.supprimerPrimeUrl,class:"btn btn-danger",onClick:s[5]||(s[5]=x((...u)=>i.supprimerPrime&&i.supprimerPrime(...u),["prevent"]))},"Supprimer",8,Wr)):h("",!0)])])])])],8,ur)],2)}const ee=k(rr,[["render",Qr]]),Xr=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),Zr={components:{prime:ee},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(t=>{this.primes=t.data,this.load=!0})}}},Kr={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},ea=e("br",null,null,-1),ta=e("br",null,null,-1),sa={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},na=e("br",null,null,-1),ia=e("br",null,null,-1),ra={key:2},aa=["href"];function oa(t,s,n,_,l,i){const o=T("prime");return r(),a(v,null,[(r(!0),a(v,null,y(l.primes,(d,u)=>(r(),E(o,{canGerer:n.canGerer,intervenant:this.intervenant,numero:u,prime:d,onReload:i.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),l.load?h("",!0):(r(),a("div",Kr,[m(" Chargement en cours..."),ea,ta])),l.primes.length==0&&l.load?(r(),a("div",sa,[m(" Aucune indemnité de fin de contrat actuellement..."),na,ia])):h("",!0),this.missionsWithoutPrime>0&&this.canGerer?(r(),a("div",ra,[e("a",{href:l.ajoutUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=x((...d)=>i.ajout&&i.ajout(...d),["prevent"]))},"Créer une nouvelle indemnité",8,aa)])):h("",!0)],64)}const la=k(Zr,[["render",oa]]),da=Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"}));const ua={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const t=new Date(this.date);return{mois:t.getMonth()+1,annee:t.getFullYear()}},computed:{listeJours(){const t=new Date(this.date);t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1);let s=t.getDate();return Array.from({length:s},(n,_)=>_+1)}},watch:{date:function(t,s){const n=new Date(this.date);this.mois=n.getMonth()+1,this.annee=n.getFullYear()},mois:function(t,s){const n=new Date(this.date);n.setMonth(t-1),this.$emit("changeDate",n)},annee:function(t,s){const n=new Date(this.date);n.setFullYear(t),this.$emit("changeDate",n)}},methods:{nomJour(t){const s=new Date(this.date);return s.setDate(t),s.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let t=[];const s=new Date;for(let n=1;n<=12;n++){s.setMonth(n-1);let _=s.toLocaleString("fr-FR",{month:"long"});t.push({id:n,libelle:_})}return t},listeAnnees(){const s=new Date().getFullYear(),n=1;let _=[];for(let l=s-n;l<=s+n;l++)_.push(l);return _},canAdd(t){if(!this.canAddEvent)return!1;let s=this.addDateDebut;s===void 0?s=new Date("2000-01-01"):s==="now"?s=new Date:s=new Date(s);let n=this.addDateFin;n===void 0?n=new Date("2500-01-01"):n==="now"?n=new Date:n=new Date(n);let _=new Date(this.date);return _.setDate(t),s=this.isoDateOnly(s),n=this.isoDateOnly(n),_=this.isoDateOnly(_),!(_<s||_>n)},addEvent(t){const s=new Date(this.date);s.setDate(t.currentTarget.dataset.jour),this.$emit("addEvent",s,t)},prevMois(){const t=new Date(this.date);t.setMonth(t.getMonth()-1),this.$emit("changeDate",t)},nextMois(){const t=new Date(this.date);t.setMonth(t.getMonth()+1),this.$emit("changeDate",t)},eventsByJour(t){const s=new Date(this.date);let n={};for(let _ in this.events){let l=this.events[_];l.date.getFullYear()===s.getFullYear()&&l.date.getMonth()+1===s.getMonth()+1&&l.date.getDate()===t&&(n[_]=l)}return n},isoDateOnly(t){const s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),_=String(t.getDate()).padStart(2,"0");return`${s}-${n}-${_}`}}},ca={class:"calendar"},ha={class:"recherche"},ma={class:"recherche btn-group"},_a=["value"],fa=["value"],pa={class:"table table-bordered table-hover table-sm"},ba=["data-jour"],va={class:"nom-jour"},ga={class:"numero-jour"},ya={class:"num-jour badge bg-secondary rounded-circle"},xa={key:0},Ca=["data-jour"];function ka(t,s,n,_,l,i){const o=R;return r(),a("div",ca,[e("div",ha,[e("div",ma,[e("button",{class:"btn btn-light",id:"prevMois",onClick:s[0]||(s[0]=(...d)=>i.prevMois&&i.prevMois(...d)),title:"Mois précédant"},[f(o,{name:"chevron-left"})]),A(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":s[1]||(s[1]=d=>l.mois=d)},[(r(!0),a(v,null,y(i.listeMois(),d=>(r(),a("option",{value:d.id},c(d.libelle),9,_a))),256))],512),[[z,l.mois]]),A(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":s[2]||(s[2]=d=>l.annee=d)},[(r(!0),a(v,null,y(i.listeAnnees(),d=>(r(),a("option",{value:d},c(d),9,fa))),256))],512),[[z,l.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:s[3]||(s[3]=(...d)=>i.nextMois&&i.nextMois(...d)),title:"Mois suivant"},[f(o,{name:"chevron-right"})])])]),e("table",pa,[(r(!0),a(v,null,y(i.listeJours,d=>(r(),a("tr",{"data-jour":d},[e("th",va,c(i.nomJour(d)),1),e("th",ga,[e("div",ya,c(d<10?"0"+d.toString():d),1)]),e("td",null,[(r(!0),a(v,null,y(i.eventsByJour(d),(u,p)=>(r(),a("div",{class:"event",style:N("border-color:"+u.color+";background-color:"+u.bgcolor),key:p},[(r(),E(re(u.component),{event:u},null,8,["event"]))],4))),128)),i.canAdd(d)?(r(),a("div",xa,[e("button",{onClick:s[4]||(s[4]=(...u)=>i.addEvent&&i.addEvent(...u)),"data-jour":d,class:"btn btn-light btn-sm"},[f(o,{name:"plus"}),m(" Nouvel événement ")],8,Ca)])):h("",!0)])],8,ba))),256))])])}const Pa=k(ua,[["render",ka],["__scopeId","data-v-51bbc42d"]]);const Ea={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(t){modAjax(t.currentTarget,s=>{this.suivi.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.suivi.refresh()})},valider(t){unicaenVue.axios.get(this.validerUrl).then(s=>{this.suivi.refresh()})},devalider(t){popConfirm(t.currentTarget,s=>{this.suivi.refresh()})}}},Da={class:"event-content"},Va={class:"mission"},Ta={key:0,class:"badge bg-success"},Sa={class:"horaires"},$a={key:0,class:"badge bg-secondary"},Ma={key:0,class:"description"},wa={class:"event-actions"},Ia={class:"btn-group btn-group-sm"},Ra=["data-url"],Aa=["data-url"],ja=["data-url"],Ha=["data-url"];function Ua(t,s,n,_,l,i){const o=R;return r(),a(v,null,[e("div",Da,[e("p",Va,[m(c(n.event.mission.libelleCourt)+" ",1),n.event.valide?(r(),a("span",Ta,"Validé")):h("",!0)]),e("p",Sa,[m(" de "+c(i.heureDebut)+" à "+c(i.heureFin)+", soit "+c(i.heures)+" heure"+c(i.heures<2?"":"s")+" ",1),n.event.formation?(r(),a("span",$a,"En formation")):h("",!0)]),n.event.description?(r(),a("p",Ma,c(n.event.description),1)):h("",!0)]),e("div",wa,[e("div",Ia,[n.event.canEdit?(r(),a("button",{key:0,class:"btn btn-light",onClick:s[0]||(s[0]=(...d)=>i.modifier&&i.modifier(...d)),title:"Modifier le suivi","data-url":l.modifierUrl},[f(o,{name:"pen-to-square"})],8,Ra)):h("",!0),n.event.canValider?(r(),a("button",{key:1,class:"btn btn-light",onClick:s[1]||(s[1]=(...d)=>i.valider&&i.valider(...d)),title:"Valider le suivi","data-url":l.validerUrl},[f(o,{name:"check",class:"text-success"})],8,Aa)):h("",!0),n.event.canDevalider?(r(),a("button",{key:2,class:"btn btn-light",onClick:s[2]||(s[2]=(...d)=>i.devalider&&i.devalider(...d)),title:"Dévalider le suivi","data-url":l.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[f(o,{name:"xmark",class:"text-danger"})],8,ja)):h("",!0),n.event.canSupprimer?(r(),a("button",{key:3,class:"btn btn-light",onClick:s[3]||(s[3]=(...d)=>i.supprimer&&i.supprimer(...d)),title:"Supprimer le suivi","data-url":l.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[f(o,{name:"trash-can",class:"text-danger"})],8,Ha)):h("",!0)])])],64)}const te=k(Ea,[["render",Ua],["__scopeId","data-v-17cb1f29"]]),La=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"})),qa={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(t){this.date=t},ajouter(t,s){const n={intervenant:this.intervenant,date:t.toISOString().slice(0,10)};s.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",n),modAjax(s.currentTarget,_=>{this.refresh()})},refresh(){const t=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let s=0,n=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(_=>{let l=[];for(let i in _.data){let o=_.data[i];n[o.mission.id]===void 0&&(n[o.mission.id]=t[s],s++),o.valide&&(o.bgcolor="#d0eddb"),o.color=n[o.mission.id],o.component=ae(te),o.date=new Date(o.date),o.intervenant=this.intervenant,l.push(o)}this.suivi=l,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function Fa(t,s,n,_,l,i){const o=Pa;return r(),E(o,{date:l.date,onChangeDate:i.changeDate,onAddEvent:i.ajouter,"can-add-event":n.canAddMission,addDateFin:"now",events:l.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const Oa=k(qa,[["render",Fa]]),za=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"})),Na={name:"DemandeMiseEnPaiementStructure",props:{datas:{required:!0},intervenant:{required:!0}},data(){return console.log(this.datas),{dotationPaieEtat:this.datas.budget.dotation.paieEtat,dotationRessourcesPropres:this.datas.budget.dotation.ressourcePropre,consommationPaieEtat:this.datas.budget.liquidation.paieEtat,consommationRessourcesPropres:this.datas.budget.liquidation.ressourcePropre}},watch:{datas:function(){this.dotationPaieEtat=this.datas.budget.dotation.paieEtat,this.dotationRessourcesPropres=this.datas.budget.dotation.ressourcePropre,this.consommationPaieEtat=this.datas.budget.liquidation.paieEtat,this.consommationRessourcesPropres=this.datas.budget.liquidation.ressourcePropre}},computed:{pourcentagePaieEtat(){return Math.round(this.consommationPaieEtat/this.dotationPaieEtat*100)},pourcentageRessourcePropre(){return Math.round(this.consommationRessourcesPropres/this.dotationRessourcesPropres*100)}},methods:{heuresStatutToString(t){if(t.heuresAPayer==t.heuresPayees)return'<span style="font-size:12px;line-height:20px;" class="badge bg-success">Paiement effectué</span>';if(t.heuresAPayer==t.heuresDemandees)return'<span style="font-size:12px;line-height:20px;" class="badge bg-secondary text-dark">Paiement demandé</span>';if(t.heuresDemandees==0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-light text-dark">A payer</span>';if(Number(t.heuresPayees)>Number(t.heuresAPayer)){let s=t.heuresPayees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement effectué - '+parseFloat(s.toFixed(2))+" hetd(s) payées en trop. </span>"}if(Number(t.heuresDemandees)>Number(t.heuresAPayer)){let s=t.heuresDemandees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement demandé - '+parseFloat(s.toFixed(2))+" hetd(s) demandées en trop. </span></span>"}return"indetermine"},supprimerDemandeMiseEnPaiement(t){this.btnToggle("remove-"+t),unicaenVue.axios.get(unicaenVue.url("paiement/:intervenant/supprimer-demande/:dmep",{intervenant:this.intervenant,dmep:t})).then(s=>{this.$emit("refresh"),setTimeout(()=>{this.btnToggle("remove-"+t)},2500)}).catch(s=>{this.$emit("refresh"),setTimeout(()=>{this.btnToggle("remove-"+t)},2500)})},disabledPaiement(t){return t.missionId!=""||t.formuleResServiceRefId!=""?!(t.centreCoutId&&t.domaineFonctionnel):!1},enabledPaiement(t,s){if(s=="mission"){let n=document.getElementById("add-"+t),_=document.getElementById("centreCout-"+t).value,l=document.getElementById("domaineFonctionnel-"+t).value;_!=""&&l!=""?n.disabled=!1:n.disabled=!0}},ajouterDemandeMiseEnPaiement(t){this.btnToggle("add-"+t);let s={animation:!0,delay:15e3,autohide:!0},n=document.getElementById("heures-"+t),_=document.getElementById("centreCout-"+t),l=document.getElementById("domaineFonctionnel-"+t),i=Number(n.value),o=Number(n.getAttribute("max")),d=l?l.value:"",u=n.hasAttribute("data-type-heures-id")?n.getAttribute("data-type-heures-id"):"",p=n.hasAttribute("data-formule-res-service-id")?n.getAttribute("data-formule-res-service-id"):"",g=n.hasAttribute("data-formule-res-service-ref-id")?n.getAttribute("data-formule-res-service-ref-id"):"",b=n.hasAttribute("data-service-id")?n.getAttribute("data-service-id"):"",P=n.hasAttribute("data-service-referentiel-id")?n.getAttribute("data-service-referentiel-id"):"",C=n.hasAttribute("data-mission-id")?n.getAttribute("data-mission-id"):"",U=_.value,M=_.options[_.selectedIndex].getAttribute("data-ressources-propres"),V=_.options[_.selectedIndex].getAttribute("data-paie-etat");if(U=="")return unicaenVue.flashMessenger.toast("Vous devez sélectionner un centre de coût pour demander la mise en paiement de ces heures","error",s),this.btnToggle("add-"+t),!1;if(i>0&&i>o)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible, vous demandez "+i+" hetd(s) alors que vous pouvez demander maximum "+o+" hetd(s)","error",s),this.btnToggle("add-"+t),!1;if(V==1&&this.dotationPaieEtat>0&&this.dotationPaieEtat-(this.consommationPaieEtat+i)<=0)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible manque de dotation 'paie etat' pour ces heures","error",s),this.btnToggle("add-"+t),!1;if(M==1&&this.dotationRessourcesPropres>0&&this.dotationRessourcesPropres-(this.consommationRessourcesPropres+i)<=0)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible manque de dotation 'ressources propres' pour ces heures","error",s),this.btnToggle("add-"+t),!1;var L=[];let O={heures:i,centreCoutId:U,typeHeuresId:u,formuleResServiceId:p,formuleResServiceRefId:g,serviceId:b,serviceReferentielId:P,domaineFonctionnelId:d,missionId:C,structureId:this.datas.id};L.push(O),unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),L).then(j=>{this.$emit("refresh"),setTimeout(()=>{this.btnToggle("add-"+t)},2500)}).catch(j=>{console.error(j)})},demanderToutesLesHeuresEnPaiement(t,s){this.btnToggle("add-all-"+t);let n=[],l=document.getElementById("demande-mise-en-paiement-"+t).getElementsByTagName("tr");for(var i=0;i<l.length;i++)if(l[i].getElementsByTagName("input").length>0&&l[i].classList.contains("detailHeure")){let o=l[i].getElementsByTagName("input")[0],d=l[i].getElementsByTagName("select")[0],u=l[i].getElementsByTagName("select")[1],p=Number(o.value),g=Number(o.getAttribute("max"));if(p<=0||p>g)console.warn("Le nombre d'heures demandées en paiement n'est pas situé entre le max et min possible.");else{let b=d.value,P=o.hasAttribute("data-type-heures-id")?o.getAttribute("data-type-heures-id"):"",C=o.hasAttribute("data-formule-res-service-id")?o.getAttribute("data-formule-res-service-id"):"",U=o.hasAttribute("data-formule-res-service-ref-id")?o.getAttribute("data-formule-res-service-ref-id"):"",M=o.hasAttribute("data-mission-id")?o.getAttribute("data-mission-id"):"",V=o.hasAttribute("data-service-id")?o.getAttribute("data-service-id"):"",L=o.hasAttribute("data-service-referentiel-id")?o.getAttribute("data-service-referentiel-id"):"",O=u?u.value:"",j={heures:p,centreCoutId:b,typeHeuresId:P,formuleResServiceId:C,formuleResServiceRefId:U,serviceId:V,serviceReferentielId:L,domaineFonctionnelId:O,missionId:M,structureId:this.datas.id};n.push(j)}}unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),n).then(o=>{this.$emit("refresh"),setTimeout(()=>{this.btnToggle("add-all-"+t)},2500)}).catch(o=>{this.$emit("refresh"),setTimeout(()=>{this.btnToggle("add-all-"+t)},2500)})},filtrerCentresCouts(t,s){let n=[];for(var _ in t){let l=_,i=[];t[_].forEach(function(o,d){o[s]==1&&i.push(o)}),i.length!=0&&n.push({group:l,child:i})}return n},notValueCentreCoutValue(t,s){return this.filtrerCentresCouts(t,s).length!=0?"Choisir un centre de coût":"Aucun centre de coût disponible demande de paiement impossible"},totalHeure(t){let s=0;for(var n in t)s+=Number(t[n].heuresAPayer);return parseFloat(s.toFixed(2))},shorten(t,s=20){if(t.length>s){var n='<span title="'+t+'"';return n+='data-bs-placement="top" data-bs-toggle="tooltip">',n+=t.substring(0,s)+"...",n+="</span>",n}else return t},btnToggle(t){let s=document.getElementById(t);return s.disabled?(s.disabled=!1,s.querySelector("#waiting").style.display="none",s.querySelector("#action").style.display="inline-block"):(s.disabled=!0,s.querySelector("#waiting").style.display="inline-block",s.querySelector("#action").style.display="none"),s}}},Ba=["id"],Ga=["id"],Ya=["aria-controls","data-bs-target"],Ja=["id","aria-labelledby"],Wa={class:"accordion-body"},Qa={key:0},Xa=e("div",{class:"cartridge gray bordered",style:{"padding-bottom":"5px","margin-bottom":"20px"}},[e("span",null,"Budget")],-1),Za={class:"container"},Ka={class:"table table-bordered caption-top"},eo=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressources propres")])],-1),to={key:0,class:"progress position-relative bg-secondary",style:{height:"30px"}},so={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},no=["aria-valuemax","aria-valuenow","title"],io=e("div",{class:"text-center"}," Aucune dotation paie état ",-1),ro={key:0,class:"progress position-relative bg-secondary",style:{height:"30px"}},ao={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},oo=["aria-valuemax","aria-valuenow","title"],lo=e("div",{class:"text-center"}," Aucune dotation ressources propres ",-1),uo={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},co=e("span",null,"Enseignement",-1),ho=["innerHTML"],mo={class:"container"},_o={class:"row"},fo={class:"col-12"},po={class:"table mt-3 table-bordered"},bo={class:"table-light"},vo={colspan:"2"},go={colspan:"2"},yo={class:"table table-sm"},xo=e("thead",null,[e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"40%","font-size":"12px"}},"Centre de cout"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Etat"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),Co={class:"detailHeure"},ko={key:0,style:{width:"20%"}},Po={key:1,style:{width:"20%"}},Eo={class:"input-group col-1"},Do=["id","data-domaine-fonctionnel-id","data-formule-res-service-id","data-formule-res-service-ref-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],Vo=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),To={key:2},So=["id"],$o={value:""},Mo=["label"],wo=["data-paie-etat","data-ressources-propres","selected","value"],Io=["innerHTML"],Ro=["innerHTML"],Ao={style:{"font-size":"12px"}},jo={key:0},Ho=["id","onClick"],Uo={key:1},Lo=["id","onClick"],qo={class:"table-light"},Fo=e("th",{scope:"row"},"Total",-1),Oo={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},zo=e("span",null,"Référentiel",-1),No={class:"container"},Bo={class:"row"},Go={class:"col-12"},Yo={class:"table mt-3 table-bordered"},Jo={colspan:"2"},Wo={class:"table table-sm"},Qo=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de cout"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel"),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"Etat"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),Xo={class:"detailHeure"},Zo={key:0,style:{width:"10%"}},Ko={key:1,style:{width:"20%"}},el={class:"input-group col-1"},tl=["id","data-domaine-fonctionnel-id","data-formule-res-service-id","data-formule-res-service-ref-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],sl=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),nl={key:2},il=["id"],rl=e("option",{value:""},"Aucun centre de cout",-1),al=["label"],ol=["data-paie-etat","data-ressources-propres","selected","value"],ll=["innerHTML"],dl={key:4},ul=["id"],cl=e("option",{value:""},"Aucun domaine fonctionnel",-1),hl=["selected","value"],ml={key:5},_l=["innerHTML"],fl={style:{"font-size":"12px"}},pl={key:0},bl=["id","onClick"],vl={key:1},gl=["id","onClick"],yl={class:"table-light"},xl=e("th",{scope:"row"},"Total",-1),Cl={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},kl=e("span",null,"Mission",-1),Pl={class:"container"},El={class:"row"},Dl={class:"col-12"},Vl={class:"table mt-3 table-bordered"},Tl={colspan:"2"},Sl={class:"table table-sm"},$l=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de cout"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel"),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"Etat"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),Ml={class:"detailHeure"},wl={key:0,style:{width:"10%"}},Il={key:1,style:{width:"20%"}},Rl={class:"input-group col-1"},Al=["id","data-domaine-fonctionnel-id","data-formule-res-service-id","data-formule-res-service-ref-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],jl=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),Hl={key:2},Ul=["id","onChange"],Ll=e("option",{value:""},"Aucun centre de cout",-1),ql=["label"],Fl=["data-paie-etat","data-ressources-propres","selected","value"],Ol=["innerHTML"],zl={key:4},Nl=["id","onChange"],Bl=e("option",{value:""},"Aucun domaine fonctionnel",-1),Gl=["selected","value"],Yl={key:5},Jl=["innerHTML"],Wl={style:{"font-size":"12px"}},Ql={key:0},Xl=["id","onClick"],Zl={key:1},Kl=["id","onClick"],ed={class:"table-light"},td=e("th",{scope:"row"},"Total",-1),sd={style:{"background-color":"#fbfbfb",padding:"10px","padding-right":"40px","text-align":"right"}},nd=["id"];function id(t,s,n,_,l,i){const o=R;return r(),a("div",{id:"demande-mise-en-paiement-"+n.datas.code,class:"accordion-item"},[e("h2",{id:"dmep-heading-"+n.datas.code,class:"accordion-header"},[e("button",{"aria-controls":"dmep-collapse-"+n.datas.code,"data-bs-target":"#dmep-collapse-"+n.datas.code,"aria-expanded":"true",class:"accordion-button bg-light","data-bs-toggle":"collapse",type:"button"},c(n.datas.code+" - "+n.datas.libelle),9,Ya)],8,Ga),e("div",{id:"dmep-collapse-"+n.datas.code,"aria-labelledby":"dmep-heading-"+n.datas.code,class:"accordion-collapse collapse show"},[e("div",Wa,[this.dotationPaieEtat+l.dotationRessourcesPropres>0?(r(),a("div",Qa,[Xa,e("div",Za,[e("table",Ka,[eo,e("tbody",null,[e("tr",null,[e("td",null,[this.dotationRessourcesPropres>0?(r(),a("div",to,[e("span",so,c(this.consommationPaieEtat+" sur "+this.dotationPaieEtat)+" HETD",1),e("div",{"aria-valuemax":this.dotationPaieEtat,"aria-valuenow":this.consommationPaieEtat,style:N("width:"+this.pourcentagePaieEtat+"%;"),title:this.pourcentagePaieEtat+"%","aria-valuemin":"0",class:"progress-bar progress-bar-striped bg-success",role:"progressbar"},null,12,no)])):h("",!0),io]),e("td",null,[this.dotationRessourcesPropres>0?(r(),a("div",ro,[e("span",ao,c(this.consommationRessourcesPropres+" sur "+this.dotationRessourcesPropres)+" HETD",1),e("div",{"aria-valuemax":this.dotationRessourcesPropres,"aria-valuenow":this.consommationRessourcesPropres,style:N("width:"+this.pourcentageRessourcePropre+"%;"),title:this.pourcentageRessourcePropre+"%","aria-valuemin":"0",class:"progress-bar progress-bar-striped bg-success",role:"progressbar"},null,12,oo)])):h("",!0),lo])])])])])])):h("",!0),(r(!0),a(v,null,y(n.datas.etapes,(d,u)=>(r(),a("div",null,[(r(!0),a(v,null,y(d.enseignements,(p,g)=>(r(),a("div",null,[e("div",uo,[co,e("span",{innerHTML:i.shorten(d.libelle,50)},null,8,ho),e("span",null,c(p.libelle),1)]),e("div",mo,[e("div",_o,[(r(!0),a(v,null,y(p.typeHeure,(b,P)=>(r(),a("div",fo,[e("table",po,[e("thead",bo,[e("tr",null,[e("th",vo,c(b.libelle),1)])]),e("tbody",null,[e("tr",null,[e("td",go,[e("table",yo,[xo,e("tbody",null,[(r(!0),a(v,null,y(b.heures,(C,U)=>(r(),a("tr",Co,[C.heuresDemandees!=0?(r(),a("td",ko,c(Number(C.heuresAPayer))+" hetd(s) ",1)):h("",!0),C.heuresDemandees==0?(r(),a("td",Po,[e("div",Eo,[e("input",{id:"heures-"+u+"-"+g+"-"+P,"data-domaine-fonctionnel-id":C.domaineFonctionnelId,"data-formule-res-service-id":C.formuleResServiceId,"data-formule-res-service-ref-id":C.formuleResServiceRefId,"data-mission-id":C.missionId,"data-service-id":C.serviceId,"data-service-referentiel-id":C.serviceReferentielId,"data-type-heures-id":C.typeHeureId,max:C.heuresAPayer,value:C.heuresAPayer,class:"form-control form-control-sm",min:"0",type:"number"},null,8,Do),Vo])])):h("",!0),C.heuresDemandees==0?(r(),a("td",To,[e("select",{id:"centreCout-"+u+"-"+g+"-"+P,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",$o,c(i.notValueCentreCoutValue(n.datas.centreCoutPaiement,C.typeHeureCode)),1),(r(!0),a(v,null,y(i.filtrerCentresCouts(n.datas.centreCoutPaiement,C.typeHeureCode),M=>(r(),a("optgroup",{key:M.group,label:M.group},[(r(!0),a(v,null,y(M.child,V=>(r(),a("option",{key:V.value,"data-paie-etat":V.paieEtat,"data-ressources-propres":V.ressourcesPropres,selected:V.centreCoutId==C.centreCout.centreCoutId,value:V.centreCoutId},c(V.centreCoutCode+" - "+V.centreCoutLibelle),9,wo))),128))],8,Mo))),128))],8,So)])):h("",!0),C.heuresDemandees!=0?(r(),a("td",{key:3,innerHTML:i.shorten(C.centreCout.code+" - "+C.centreCout.libelle,30)},null,8,Io)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(C)},null,8,Ro),e("td",Ao,[C.heuresPayees==0&&C.heuresDemandees>0?(r(),a("span",jo,[e("button",{id:"remove-"+C.mepId,class:"btn btn-danger",type:"button",onClick:M=>this.supprimerDemandeMiseEnPaiement(C.mepId)},[f(o,{id:"action",name:"trash",style:{color:"white"}}),f(o,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Ho)])):h("",!0),C.heuresDemandees==0?(r(),a("span",Uo,[e("button",{id:"add-"+u+"-"+g+"-"+P,class:"btn btn-primary",type:"button",onClick:M=>this.ajouterDemandeMiseEnPaiement(u+"-"+g+"-"+P)},[f(o,{id:"action",name:"plus"}),f(o,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Lo)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",qo,[Fo,e("td",null,c(i.totalHeure(b.heures))+" hetd(s)",1)])])])]))),256))])])]))),256))]))),256)),(r(!0),a(v,null,y(n.datas.fonctionsReferentiels,(d,u)=>(r(),a("div",null,[e("div",Oo,[zo,e("span",null,c(d.libelle),1)]),e("div",No,[e("div",Bo,[e("div",Go,[e("table",Yo,[e("tbody",null,[e("tr",null,[e("td",Jo,[e("table",Wo,[Qo,e("tbody",null,[(r(!0),a(v,null,y(d.heures,(p,g)=>(r(),a("tr",Xo,[p.heuresDemandees!=0?(r(),a("td",Zo,c(p.heuresAPayer)+" hetd(s)",1)):h("",!0),p.heuresDemandees==0?(r(),a("td",Ko,[e("div",el,[e("input",{id:"heures-"+u,"data-domaine-fonctionnel-id":p.domaineFonctionnelId,"data-formule-res-service-id":p.formuleResServiceId,"data-formule-res-service-ref-id":p.formuleResServiceRefId,"data-mission-id":p.missionId,"data-service-id":p.serviceId,"data-service-referentiel-id":p.serviceReferentielId,"data-type-heures-id":p.typeHeureId,max:p.heuresAPayer,value:p.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,tl),sl])])):h("",!0),p.heuresDemandees==0?(r(),a("td",nl,[e("select",{id:"centreCout-"+u,class:"selectpicker","data-live-search":"true",name:"centreCout"},[rl,(r(!0),a(v,null,y(i.filtrerCentresCouts(n.datas.centreCoutPaiement,"referentiel"),b=>(r(),a("optgroup",{key:b.group,label:b.group},[(r(!0),a(v,null,y(b.child,P=>(r(),a("option",{key:P.value,"data-paie-etat":P.paieEtat,"data-ressources-propres":P.ressourcesPropres,selected:P.centreCoutId==p.centreCout.centreCoutId,value:P.centreCoutId},c(P.centreCoutCode+" - "+P.centreCoutLibelle),9,ol))),128))],8,al))),128))],8,il)])):h("",!0),p.heuresDemandees!=0?(r(),a("td",{key:3,innerHTML:i.shorten(p.centreCout.code+" - "+p.centreCout.libelle,20)},null,8,ll)):h("",!0),p.heuresDemandees==0?(r(),a("td",dl,[e("select",{id:"domaineFonctionnel-"+u,class:"selectpicker","data-live-search":"true",name:"centreCout"},[cl,(r(!0),a(v,null,y(n.datas.domaineFonctionnelPaiement,b=>(r(),a("option",{selected:b.domaineFonctionnelId==p.domaineFonctionnel.domaineFonctionnelId,value:b.domaineFonctionnelId},c(b.domaineFonctionnelLibelle),9,hl))),256))],8,ul)])):h("",!0),p.heuresDemandees!=0?(r(),a("td",ml,c(p.domaineFonctionnel.libelle),1)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(p)},null,8,_l),e("td",fl,[p.heuresPayees==0&&p.heuresDemandees>0?(r(),a("span",pl,[e("button",{id:"remove-"+p.mepId,class:"btn btn-danger",type:"button",onClick:b=>this.supprimerDemandeMiseEnPaiement(p.mepId)},[f(o,{id:"action",name:"trash",style:{color:"white"}}),f(o,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,bl)])):h("",!0),p.heuresDemandees==0?(r(),a("span",vl,[e("button",{id:"add-"+u,class:"btn btn-primary",type:"button",onClick:b=>this.ajouterDemandeMiseEnPaiement(u)},[f(o,{id:"action",name:"plus"}),f(o,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,gl)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",yl,[xl,e("td",null,c(i.totalHeure(d.heures))+" hetd(s)",1)])])])])])])]))),256)),(r(!0),a(v,null,y(n.datas.missions,d=>(r(),a("div",null,[e("div",Cl,[kl,e("span",null,c(d.libelle),1)]),e("div",Pl,[e("div",El,[e("div",Dl,[e("table",Vl,[e("tbody",null,[e("tr",null,[e("td",Tl,[e("table",Sl,[$l,e("tbody",null,[(r(!0),a(v,null,y(d.heures,(u,p)=>(r(),a("tr",Ml,[u.heuresDemandees!=0?(r(),a("td",wl,c(u.heuresAPayer)+" hetd(s)",1)):h("",!0),u.heuresDemandees==0?(r(),a("td",Il,[e("div",Rl,[e("input",{id:"heures-"+d.missionId,"data-domaine-fonctionnel-id":u.domaineFonctionnelId,"data-formule-res-service-id":u.formuleResServiceId,"data-formule-res-service-ref-id":u.formuleResServiceRefId,"data-mission-id":u.missionId,"data-service-id":u.serviceId,"data-service-referentiel-id":u.serviceReferentielId,"data-type-heures-id":u.typeHeureId,max:u.heuresAPayer,value:u.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,Al),jl])])):h("",!0),u.heuresDemandees==0?(r(),a("td",Hl,[e("select",{id:"centreCout-"+d.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:g=>i.enabledPaiement(d.missionId,"mission")},[Ll,(r(!0),a(v,null,y(i.filtrerCentresCouts(n.datas.centreCoutPaiement,"mission"),g=>(r(),a("optgroup",{key:g.group,label:g.group},[(r(!0),a(v,null,y(g.child,b=>(r(),a("option",{key:b.value,"data-paie-etat":b.paieEtat,"data-ressources-propres":b.ressourcesPropres,selected:b.centreCoutId==u.centreCout.centreCoutId,value:b.centreCoutId},c(b.centreCoutCode+" - "+b.centreCoutLibelle),9,Fl))),128))],8,ql))),128))],40,Ul)])):h("",!0),u.heuresDemandees!=0?(r(),a("td",{key:3,innerHTML:i.shorten(u.centreCout.code+" - "+u.centreCout.libelle,20)},null,8,Ol)):h("",!0),u.heuresDemandees==0?(r(),a("td",zl,[e("select",{id:"domaineFonctionnel-"+d.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:g=>i.enabledPaiement(d.missionId,"mission")},[Bl,(r(!0),a(v,null,y(n.datas.domaineFonctionnelPaiement,g=>(r(),a("option",{selected:g.domaineFonctionnelId==u.domaineFonctionnel.domaineFonctionnelId,value:g.domaineFonctionnelId},c(g.domaineFonctionnelLibelle),9,Gl))),256))],40,Nl)])):h("",!0),u.heuresDemandees!=0?(r(),a("td",Yl,c(u.domaineFonctionnel.libelle),1)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(u)},null,8,Jl),e("td",Wl,[u.heuresPayees==0&&u.heuresDemandees>0?(r(),a("span",Ql,[e("button",{id:"remove-"+u.mepId,class:"btn btn-danger",type:"button",onClick:g=>this.supprimerDemandeMiseEnPaiement(u.mepId)},[f(o,{id:"action",name:"trash",style:{color:"white"}}),f(o,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Xl)])):h("",!0),u.heuresDemandees==0?(r(),a("span",Zl,[e("button",{id:"add-"+d.missionId,class:"btn btn-primary",type:"button",onClick:g=>this.ajouterDemandeMiseEnPaiement(d.missionId)},[f(o,{id:"action",name:"plus"}),f(o,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Kl)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",ed,[td,e("td",null,c(i.totalHeure(d.heures))+" hetd(s)",1)])])])])])])]))),256))]),e("div",sd,[e("button",{id:"add-all-"+n.datas.code,class:"btn btn-primary",type:"button",onClick:s[0]||(s[0]=d=>i.demanderToutesLesHeuresEnPaiement(n.datas.code,n.datas.libelle))},[f(o,{id:"action",name:"square-plus",style:{color:"white"}}),f(o,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}}),m(" DEMANDER TOUS LES PAIEMENTS POUR "+c(n.datas.libelle),1)],8,nd)])],8,Ja)],8,Ba)}const se=k(Na,[["render",id]]),rd=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),ad={name:"DemandeMiseEnPaiement",components:{DemandeMiseEnPaiementStructure:se},props:{intervenant:{required:!1}},data(){return{datasServiceAPayer:null,urlListeServiceAPayer:unicaenVue.url("intervenant/:intervenant/mise-en-paiement/liste-service-a-payer",{intervenant:this.intervenant})}},methods:{findServiceAPayer(){unicaenVue.axios.get(this.urlListeServiceAPayer).then(t=>{this.datasServiceAPayer=t.data}).catch(t=>{console.error(t)})}},mounted(){this.findServiceAPayer()},updated(){$(".selectpicker").selectpicker("render");var t=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));t.map(function(s){return new bootstrap.Tooltip(s)})}},od={key:0,class:"text-center"},ld=e("div",{class:"mt-5 spinner-border spinner-border-sm",role:"status"},[e("span",{class:"visually-hidden"},"Chargement des demandes de mise en paiement en cours...")],-1),dd={id:"accordionPanelsStayOpenExample",class:"accordion"};function ud(t,s,n,_,l,i){const o=T("demande-mise-en-paiement-structure");return r(),a(v,null,[this.datasServiceAPayer?h("",!0):(r(),a("div",od,[ld,m(" Chargement des demandes de mise en paiement en cours... ")])),e("div",dd,[(r(!0),a(v,null,y(l.datasServiceAPayer,(d,u)=>(r(),E(o,{datas:d,intervenant:n.intervenant,onRefresh:i.findServiceAPayer},null,8,["datas","intervenant","onRefresh"]))),256))])],64)}const cd=k(ad,[["render",ud]]),hd=Object.freeze(Object.defineProperty({__proto__:null,default:cd},Symbol.toStringTag,{value:"Module"}));function md(t){for(let s in t)for(let n in t[s])ne(t[s][n],s)}function _d(){let t=document.getElementById("unicaen-vue-toast-container");return t||(t=document.createElement("div"),t.id="unicaen-vue-toast-container",t.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(t)),t}function fd(t){return t=pd(t),t=bd(t),t}function pd(t){const s=document.createElement("div");s.innerHTML=t;const n=s.querySelector(".alert");return n?n.innerHTML:s.innerHTML}function bd(t){const s=document.createElement("div");return s.innerHTML=t,s.querySelectorAll("i.fas").forEach(_=>_.style.display="none"),s.innerHTML}function ne(t,s,n=null){const _={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},l={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},i=document.createElement("button");i.classList.add("btn-close","btn-close-white","h5"),i.style.float="right",i.setAttribute("data-bs-dismiss","toast"),i.setAttribute("aria-label","Close");const o=document.createElement("i");o.classList.add("icon","fas",`fa-${l[s]}`),o.style.float="left",o.style.fontSize="26pt",o.style.paddingLeft=".4rem",o.style.marginTop=".4rem",o.style.paddingRight="1rem";const d=document.createElement("div");d.classList.add("toast-body"),d.innerHTML=fd(t);const u=document.createElement("div");u.appendChild(i),u.appendChild(o),u.appendChild(d);const p=document.createElement("div");p.classList.add("toast","text-white",_[s]?_[s]:"bg-secondary"),p.setAttribute("role","alert"),p.setAttribute("aria-live","assertive"),p.setAttribute("aria-atomic","true"),s==="error"&&t.length>500&&p.setAttribute("style","width:700px"),p.appendChild(u),_d().appendChild(p),n==null&&(n={animation:!0,delay:s==="warning"?15e3:5e3,autohide:s!=="error"}),new bootstrap.Toast(p,n).show()}const B={toast:ne,toasts:md};let F={...oe};F.interceptors.request.use(t=>{if(t.submitter){let s=t.msg?t.msg:"Action en cours";t.popover!=null&&t.popover.dispose(),t.popover=new bootstrap.Popover(t.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+s,html:!0,trigger:"focus"}),t.popover.show()}return t});F.interceptors.response.use(t=>{if(t.messages=t.data.messages,t.data=t.data.data,t.hasErrors=!!(t.messages&&t.messages.error&&t.messages.error.length>0),t.config.popover){var s=t.config.popover;let n="";for(ns in t.messages)for(mid in t.messages[ns])n+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+t.messages[ns][mid]+"</div>";n?(s._config.content=n,s.setContent(),setTimeout(()=>{s.dispose()},5e3)):s.dispose()}return t.messages&&B.toasts(t.messages),t},t=>{let s=t.response.data;t.response.status==403?s="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":s=t.response.data,B.toast(s,"error")});F.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const vd={uvAxios:F},G={axios:vd.uvAxios,flashMessenger:B,url:(t,s,n)=>{let _=window.__unicaenVueBaseUrl;if(s)for(let i in s)t=t.replace(`:${i}`,s[i]);let l=n?G.encodeUrlQueryParam(n):null;return _+t+(l?`?${l}`:"")},encodeUrlQueryParam:(t,s)=>{var n=[];for(var _ in t)if(t.hasOwnProperty(_)){var l=t[_],i=s?s+"["+encodeURIComponent(_)+"]":encodeURIComponent(_);if(typeof l=="object"&&l!==null)n.push(G.encodeUrlQueryParam(l,i));else{var o=encodeURIComponent(l);n.push(i+"="+o)}}return n.join("&")}};window.unicaenVue=G;const gd={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:null,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(t){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let s=document.getElementById("formRechercheDemandeMiseEnPaiement"),n=new FormData(s),_=document.getElementById("btn-rdmep"),l=document.getElementById("btn-rdmep-inprogress");l.classList.remove("d-none"),_.classList.add("d-none"),_.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,n,{}).then(i=>{this.dispatchDatas(i.data),_.disabled=!1,l.classList.add("d-none"),_.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(d,u){d.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(d=>{let u=d.data;this.dotation=u.dotation,this.liquidation=u.liquidation,this.refreshTotalConsommation()})}).catch(i=>{console.error(i)})},processDemandeMiseEnPaiement(t){let s=document.getElementById("formProcessDemandeMiseEnPaiement"),n=new FormData(s);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>this.totalConsommationRessourcePropre||!this.haveDotation){let _=document.getElementById("btn-pdmep"),l=document.getElementById("btn-pdmep-inprogress");l.classList.remove("d-none"),_.classList.add("d-none"),_.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,n,{}).then(i=>{this.findDemandeMiseEnPaiement(),_.disabled=!1,l.classList.add("d-none"),_.classList.remove("d-none")}).catch(i=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let t=0,s=0,n=0;t=parseFloat(this.liquidation.paieEtat),s=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(l,i){l.hasAttribute("data-paie-etat")&&l.checked&&(t+=parseFloat(l.getAttribute("data-paie-etat")),n+=parseFloat(l.getAttribute("data-paie-etat"))),l.hasAttribute("data-ressource-propre")&&l.checked&&(s+=parseFloat(l.getAttribute("data-ressource-propre")),n+=parseFloat(l.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=t.toFixed(2),this.totalConsommationRessourcePropre=s.toFixed(2),this.totalConsommation=n.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(t){let s=0;return t.forEach((n,_)=>{n.centreCout.code!=""&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalNonPayable(t){let s=0;return t.forEach((n,_)=>{n.centreCout.code==""&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePaieEtat(t){let s=0;return t.forEach((n,_)=>{n.centreCout.typeRessourceCode=="paie-etat"&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(t){let s=0;return t.forEach((n,_)=>{n.centreCout.typeRessourceCode=="ressources-propres"&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(t){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[],t.forEach((s,n)=>{switch(s.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(s),this.intervenants.push(s);break;case"Intervenant permanent":this.permanents.push(s),this.intervenants.push(s);break;case"Étudiant":this.etudiants.push(s),this.intervenants.push(s);break;default:this.autres.push(s),this.intervenants.push(s)}})},toggleCheckbox(t){let s=Array.from(document.getElementsByClassName(t.target.className));t.target.checked?s.forEach(function(n,_){n.checked=!0}):s.forEach(function(n,_){n.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(t){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:t.datasIntervenant.code})},formattedHETD(t){return Util.formattedHeures(t,!1)}}},yd=e("h1",null,"Demande de mise en paiement par lots",-1),xd={class:"card text-dark bg-light"},Cd=e("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1),kd={class:"card-body"},Pd={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},Ed={class:"mb-3"},Dd=e("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1),Vd=["value"],Td={class:"mb-3"},Sd=e("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),m("  Veuillez patienter... ")],-1),$d=["disabled"],Md=e("div",{class:"alert alert-info",role:"alert"}," Seules les HETD avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisées. Pour les autres, il faudra passer sur chaque fiches intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ",-1),wd={key:0},Id={key:0,class:"alert alert-danger",role:"alert"},Rd={class:"table table-bordered caption-top"},Ad=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Budget"),e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressource propre"),e("th",{class:"fw-bold",scope:"col"},"Total")])],-1),jd=e("td",null,"Dotation",-1),Hd={class:"fw-bold"},Ud=e("td",null,"Consommation",-1),Ld={class:"fw-bold"},qd={id:"dmep",class:"accordion"},Fd={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},Od={key:0,class:"accordion-item"},zd={id:"dmep-permanents-heading",class:"accordion-header"},Nd={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},Bd={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},Gd={class:"accordion-body"},Yd={class:"table"},Jd={scope:"col"},Wd=e("th",{scope:"col"},"Intervenant",-1),Qd=e("th",{scope:"col"},"HETD avec centre coût",-1),Xd=e("th",{scope:"col"},"HETD sans centre coût",-1),Zd=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Kd=["href"],eu=["title"],tu={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Aucun centre de coût"},su={key:1,class:"accordion-item"},nu={id:"dmep-vacataires-heading",class:"accordion-header"},iu={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},ru={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},au={class:"accordion-body"},ou={class:"table"},lu=e("th",null,"Intervenant",-1),du=e("th",null,"HETD avec centre coût",-1),uu=e("th",null,"HETD sans centre coût",-1),cu=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],hu=["href"],mu=["title"],_u={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Aucun centre de coût"},fu={key:2,class:"accordion-item"},pu={id:"dmep-etudiants-heading",class:"accordion-header"},bu={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},vu={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},gu={class:"accordion-body"},yu={class:"table"},xu=e("th",null,"Intervenant",-1),Cu=e("th",null,"HETD avec centre coût",-1),ku=e("th",null,"HETD sans centre coût",-1),Pu=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Eu=["href"],Du=["title"],Vu={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Aucun centre de coût"},Tu={key:3,class:"accordion-item"},Su={id:"dmep-autres-heading",class:"accordion-header"},$u={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},Mu={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},wu={class:"accordion-body"},Iu={class:"table"},Ru=e("th",null,"Intervenant",-1),Au=e("th",null,"HETD avec centre coût",-1),ju=e("th",null,"HETD sans centre coût",-1),Hu=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Uu=["href"],Lu=["title"],qu={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Aucun centre de coût"},Fu={key:4,class:"mt-3"},Ou=e("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),m("  Veuillez patienter... ")],-1),zu=["disabled"];function Nu(t,s,n,_,l,i){return r(),a(v,null,[yd,e("div",xd,[Cd,e("div",kd,[e("form",Pd,[e("div",Ed,[Dd,m("  "),A(e("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>l.selectedStructure=o),class:"form-select",name:"structure"},[(r(!0),a(v,null,y(n.structures,o=>(r(),a("option",{value:o.id},c(o.libelle),9,Vd))),256))],512),[[z,l.selectedStructure]])]),e("div",Td,[Sd,e("button",{id:"btn-rdmep",disabled:!l.selectedStructure,class:"btn btn-primary",type:"button",onClick:s[1]||(s[1]=(...o)=>i.findDemandeMiseEnPaiement&&i.findDemandeMiseEnPaiement(...o))}," Lancer la recherche ",8,$d)])])])]),Md,i.haveDotation?(r(),a("div",wd,[l.alertDotation?(r(),a("div",Id," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):h("",!0),e("table",Rd,[Ad,e("tbody",null,[e("tr",null,[jd,e("td",null,c(i.formattedHETD(this.dotation.paieEtat))+" HETD",1),e("td",null,c(i.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),e("td",Hd,c(i.formattedHETD(this.dotation.total))+" HETD",1)]),e("tr",null,[Ud,e("td",null,[e("span",{class:w(i.alertPaieEtat)},c(i.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),e("td",null,[e("span",{class:w(i.alertRessourcePropre)},c(i.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),e("td",Ld,c(i.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):h("",!0),e("div",qd,[e("form",Fd,[this.permanents.length>0?(r(),a("div",Od,[e("h2",zd,[e("button",Nd,c(this.permanents.length)+" Permanent(s) ",1)]),e("div",Bd,[e("div",Gd,[e("table",Yd,[e("thead",null,[e("tr",null,[e("th",Jd,[e("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:s[2]||(s[2]=(...o)=>i.toggleCheckbox&&i.toggleCheckbox(...o))})]),Wd,Qd,Xd])]),e("tbody",null,[(r(!0),a(v,null,y(this.permanents,o=>(r(),a("tr",null,[e("td",null,[e("input",{id:"permanent-"+o.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(o.heures),"data-ressource-propre":i.totalRessourcePropre(o.heures),disabled:i.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:i.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:s[3]||(s[3]=d=>i.refreshTotalConsommation())},null,40,Zd)]),e("td",null,[e("a",{href:i.urlIntervenant(o),target:"_blank"},c(o.datasIntervenant.prenom+" "+o.datasIntervenant.nom_usuel),9,Kd)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+i.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},c(i.totalPayable(o.heures))+" h",9,eu)]),e("td",null,[e("span",tu,c(i.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.vacataires.length>0?(r(),a("div",su,[e("h2",nu,[e("button",iu,c(this.vacataires.length)+" Vacataire(s) ",1)]),e("div",ru,[e("div",au,[e("table",ou,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:s[4]||(s[4]=(...o)=>i.toggleCheckbox&&i.toggleCheckbox(...o))})]),lu,du,uu])]),e("tbody",null,[(r(!0),a(v,null,y(this.vacataires,o=>(r(),a("tr",null,[e("td",null,[e("input",{id:"vacataire-"+o.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(o.heures),"data-ressource-propre":i.totalRessourcePropre(o.heures),disabled:i.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:i.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:s[5]||(s[5]=d=>i.refreshTotalConsommation())},null,40,cu)]),e("td",null,[e("a",{href:i.urlIntervenant(o),target:"_blank"},c(o.datasIntervenant.prenom+" "+o.datasIntervenant.nom_usuel),9,hu)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+i.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},c(i.totalPayable(o.heures))+" h",9,mu)]),e("td",null,[e("span",_u,c(i.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.etudiants.length>0?(r(),a("div",fu,[e("h2",pu,[e("button",bu,c(this.etudiants.length)+" Etudiant(s) ",1)]),e("div",vu,[e("div",gu,[e("table",yu,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:s[6]||(s[6]=(...o)=>i.toggleCheckbox&&i.toggleCheckbox(...o))})]),xu,Cu,ku])]),e("tbody",null,[(r(!0),a(v,null,y(this.etudiants,o=>(r(),a("tr",null,[e("td",null,[e("input",{id:"etudiant-"+o.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(o.heures),"data-ressource-propre":i.totalRessourcePropre(o.heures),disabled:i.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:i.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:s[7]||(s[7]=d=>i.refreshTotalConsommation())},null,40,Pu)]),e("td",null,[e("a",{href:i.urlIntervenant(o),target:"_blank"},c(o.datasIntervenant.prenom+" "+o.datasIntervenant.nom_usuel),9,Eu)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+i.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},c(i.totalPayable(o.heures))+" h",9,Du)]),e("td",null,[e("span",Vu,c(i.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.autres.length>0?(r(),a("div",Tu,[e("h2",Su,[e("button",$u,c(this.autres.length)+" Autre(s) ",1)]),e("div",Mu,[e("div",wu,[e("table",Iu,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:s[8]||(s[8]=(...o)=>i.toggleCheckbox&&i.toggleCheckbox(...o))})]),Ru,Au,ju])]),e("tbody",null,[(r(!0),a(v,null,y(this.etudiants,o=>(r(),a("tr",null,[e("td",null,[e("input",{id:"autre-"+o.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(o.heures),"data-ressource-propre":i.totalRessourcePropre(o.heures),disabled:i.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:i.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:s[9]||(s[9]=d=>i.refreshTotalConsommation())},null,40,Hu)]),e("td",null,[e("a",{href:i.urlIntervenant(o),target:"_blank"},c(o.datasIntervenant.prenom+" "+o.datasIntervenant.nom_usuel),9,Uu)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+i.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},c(i.totalPayable(o.heures))+" h",9,Lu)]),e("td",null,[e("span",qu,c(i.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.intervenants.length>0?(r(),a("div",Fu,[Ou,e("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:s[10]||(s[10]=(...o)=>i.processDemandeMiseEnPaiement&&i.processDemandeMiseEnPaiement(...o))}," Enregistrer les demandes de paiement ",8,zu)])):h("",!0)])])],64)}const Bu=k(gd,[["render",Nu]]),Gu=Object.freeze(Object.defineProperty({__proto__:null,default:Bu},Symbol.toStringTag,{value:"Module"}));const Yu={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},D=t=>(Y("data-v-d4a24889"),t=t(),J(),t),Ju=D(()=>e("h2",null,"Paramètres généraux ou bien selon le statut",-1)),Wu={class:"table table-bordered table-condensed table-extra-condensed"},Qu=D(()=>e("tr",null,[e("th",null,"Paramètre général"),e("th",null,"Valeur")],-1)),Xu=D(()=>e("h2",null,"Services à payer",-1)),Zu={class:"card"},Ku={class:"card-header"},ec={class:"badge bg-primary"},tc={class:"card-body"},sc={class:"row lap"},nc={class:"col-md-6"},ic=D(()=>e("h6",null,"Heures à payer",-1)),rc={class:"table table-bordered table-xs"},ac={key:0,rowspan:"2"},oc={key:1,rowspan:"2"},lc=D(()=>e("th",{colspan:"2"},"Taux de rému.",-1)),dc=D(()=>e("th",{colspan:"3"},"Heures",-1)),uc=D(()=>e("tr",null,[e("th",null,"Nom"),e("th",null,"Valeur"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")],-1)),cc={key:0},hc=["title"],mc={key:1},_c=["title"],fc={class:"col-md-6"},pc=D(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),m(" correspondantes")],-1)),bc={class:"table table-bordered table-xs"},vc=D(()=>e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{colspan:"3"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")])],-1)),gc=["title"],yc=["title"],xc={key:0},Cc={class:"badge bg-info"},kc={key:0,class:"row"},Pc=D(()=>e("div",{class:"col-md-6"},null,-1)),Ec={class:"col-md-6"},Dc=D(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),m(" en trop")],-1)),Vc={class:"table table-bordered table-xs"},Tc=D(()=>e("thead",{class:"bg-danger"},[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{rowspan:"2"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date")])],-1)),Sc=["title"],$c=["title"];function Mc(t,s,n,_,l,i){return r(),a(v,null,[Ju,e("table",Wu,[Qu,(r(!0),a(v,null,y(n.parametres,(o,d)=>(r(),a("tr",{key:d},[e("th",null,c(d),1),e("td",null,c(o),1)]))),128))]),Xu,(r(!0),a(v,null,y(n.servicesAPayer,(o,d)=>(r(),a("div",{key:d},[e("div",Zu,[e("div",Ku,[e("span",ec,c(o.type),1),m(" "+c(o.libelle),1)]),e("div",tc,[e("ul",null,[(r(!0),a(v,null,y(o.parametres,(u,p)=>(r(),a("li",{key:p},c(p)+" : "+c(u),1))),128))]),(r(!0),a(v,null,y(o.laps,u=>(r(),a("div",sc,[e("div",nc,[ic,e("table",rc,[e("thead",null,[e("tr",null,[o.type!="Référentiel"?(r(),a("th",ac,"Volume horaire")):(r(),a("th",oc,"Volumes horaires")),lc,dc]),uc]),e("tbody",null,[e("tr",null,[o.type!="Référentiel"?(r(),a("td",cc,[e("abbr",{class:"badge bg-secondary",title:u.volumeHoraireHisto},c(u.volumeHoraireId),9,hc),m(" "+c(u.volumeHoraire),1)])):(r(),a("td",mc,[(r(!0),a(v,null,y(u.volumeHoraireId,p=>(r(),a("div",null,[e("abbr",{class:"badge bg-secondary",title:p.HISTO},c(p.ID),9,_c),m(" "+c(p.HEURES)+"h ",1)]))),256))])),e("td",null,c(u.tauxRemu),1),e("td",null,c(u.tauxValeur)+"€",1),e("td",null,c(u.heures),1),e("td",null,c(u.heuresAA),1),e("td",null,c(u.heuresAC),1)])])])]),e("div",fc,[pc,e("table",bc,[vc,e("tbody",null,[(r(!0),a(v,null,y(u.misesEnPaiement,p=>(r(),a("tr",{key:p.id},[e("td",null,[e("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+p.heuresTotal+`
Domaine fonctionnel : `+p.domaineFonctionnel+`
`+p.historique},c(p.id),9,gc)]),e("td",null,[e("abbr",{title:p.centreCoutLibelle},c(p.centreCoutCode),9,yc)]),e("td",null,c(p.periodePaiement),1),e("td",null,c(p.date),1),e("td",null,c(p.heures),1),e("td",null,c(p.heuresAA),1),e("td",null,c(p.heuresAC),1)]))),128))])]),u.heuresRestantes!="0,00"?(r(),a("div",xc,[e("span",Cc,c(u.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):h("",!0)])]))),256)),o.misesEnPaiement&&o.misesEnPaiement.length>0?(r(),a("div",kc,[Pc,e("div",Ec,[Dc,e("table",Vc,[Tc,e("tbody",null,[(r(!0),a(v,null,y(o.misesEnPaiement,u=>(r(),a("tr",{key:u.id},[e("td",null,[e("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+u.domaineFonctionnel+`
`+u.historique},c(u.id),9,Sc)]),e("td",null,[e("abbr",{title:u.centreCoutLibelle},c(u.centreCoutCode),9,$c)]),e("td",null,c(u.periodePaiement),1),e("td",null,c(u.date),1),e("td",null,c(u.heures),1)]))),128))])])])])):h("",!0)])])]))),128))],64)}const wc=k(Yu,[["render",Mc],["__scopeId","data-v-d4a24889"]]),Ic=Object.freeze(Object.defineProperty({__proto__:null,default:wc},Symbol.toStringTag,{value:"Module"})),Rc={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(t){this.selectedFile=t.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(t){t.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let s=document.getElementById("btn-import"),n=document.getElementById("btn-import-inprogress");n.classList.remove("d-none"),s.classList.add("d-none"),s.disabled=!0;let _=document.getElementById("formImport"),l=new FormData(_);unicaenVue.axios.post(this.importUrl,l,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{let o=i.data;this.fileErrors=o.file,this.intervenantMissing=o.intervenant,o.message.length!=0?this.messageErrors=o.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",s.disabled=!1,n.classList.add("d-none"),s.classList.remove("d-none")}).catch(i=>{console.error("Error uploading")})}}},Ac={class:"card text-dark bg-light"},jc=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),Hc={class:"card-body"},Uc={key:0,class:"alert alert-danger",role:"alert"},Lc={key:1,class:"alert alert-success",role:"alert"},qc={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},Fc=e("p",{class:"fs-9 text"},[m(" Vous pouvez utiliser le modèle directement extrait de winpaie "),e("strong",null,"(format .xlsx ou .ods)"),m(" ou créer votre modèle générique de classeur "),e("strong",null,"(format .xlsx ou .ods)"),m(" incluant 3 colonnes : insee,numero pec, nom. ")],-1),Oc={class:"mb-3"},zc=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),Nc=le('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),Bc={class:"mb-3"},Gc=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),m("  Veuillez patienter... ")],-1),Yc={key:0,id:"fileErrors",class:"card text-dark bg-light"},Jc=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),Wc={class:"card-body"},Qc={key:0},Xc=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),Zc={key:1},Kc=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function eh(t,s,n,_,l,i){return r(),a(v,null,[e("div",Ac,[jc,e("div",Hc,[this.messageErrors?(r(),a("div",Uc,c(this.messageErrors),1)):h("",!0),this.messageConfirm?(r(),a("div",Lc,c(this.messageConfirm),1)):h("",!0),e("form",qc,[Fc,e("div",Oc,[zc,m("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:s[0]||(s[0]=(...o)=>i.handleFileUpload&&i.handleFileUpload(...o))},null,32)]),Nc,e("div",Bc,[Gc,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:s[1]||(s[1]=(...o)=>i.importFile&&i.importFile(...o))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(r(),a("div",Yc,[Jc,e("div",Wc,[this.fileErrors.length!=0?(r(),a("div",Qc,[Xc,e("ul",null,[(r(!0),a(v,null,y(this.fileErrors,o=>(r(),a("li",null,c(),1))),256))])])):h("",!0),this.intervenantMissing.length!=0?(r(),a("div",Zc,[Kc,e("ul",null,[(r(!0),a(v,null,y(this.intervenantMissing,o=>(r(),a("li",null,c(o),1))),256))])])):h("",!0)])])):h("",!0)],64)}const th=k(Rc,[["render",eh]]),sh=Object.freeze(Object.defineProperty({__proto__:null,default:th},Symbol.toStringTag,{value:"Module"})),nh={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(t){modAjax(t.target,s=>{this.$emit("refreshListe")})},ajoutValeur(t){modAjax(t.target,s=>{this.$emit("refreshListe")})},saisieValeur(t){t.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:t.currentTarget.dataset.id}),modAjax(t.currentTarget,s=>{this.$emit("refreshListe")})},refreshListe(t){this.$emit("refreshListe")},supprimer(t){popConfirm(t.target,s=>{this.$emit("refreshListe")})},supprimerValeur(t){t.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refreshListe")})},refresh(t){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:t.id})).then(s=>{this.$emit("refresh",s.data)})}}},ih={class:"card-header"},rh={style:{display:"inline"}},ah={class:"float-end"},oh=["href"],lh=["href"],dh={class:"card-body"},uh={key:0},ch=e("br",null,null,-1),hh={class:""},mh={class:"row align-items-start"},_h={class:"col-md-6"},fh={class:"col"},ph=["data-id"],bh=["data-id"],vh=["href"],gh={key:1,class:"row"},yh={class:"col-md-7"},xh=e("br",null,null,-1),Ch={class:"row align-items-start"},kh={class:"col-md-8"},Ph={class:"col-md-auto"},Eh=["data-id"],Dh=["data-id"],Vh=["href"],Th={class:"col"},Sh=e("br",null,null,-1),$h={key:0},Mh={key:0};function wh(t,s,n,_,l,i){const o=R,d=T("u-heures"),u=H,p=T("taux",!0);return r(),a(v,null,[e("div",{class:w(["card",{"ms-5":n.taux.tauxRemu}])},[e("div",ih,[e("h3",rh,c(n.taux.libelle)+" ("+c(n.taux.code)+")",1),e("div",ah,[n.taux.canEdit?(r(),a("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=x((...g)=>i.saisie&&i.saisie(...g),["prevent"]))},[f(o,{name:"pen-to-square"}),m(" Modifier")],8,oh)):h("",!0),m("   "),n.taux.canDelete?(r(),a("a",{key:1,href:l.supprimerUrl,class:"btn btn-danger",onClick:s[1]||(s[1]=x((...g)=>i.supprimer&&i.supprimer(...g),["prevent"]))},[f(o,{name:"trash-can"}),m(" Supprimer")],8,lh)):h("",!0)])]),e("div",dh,[n.taux.tauxRemu?h("",!0):(r(),a("div",uh,[m(" Modification :"),ch,e("ul",null,[(r(!0),a(v,null,y(n.taux.tauxRemuValeurs,g=>(r(),a("div",{key:g.id},[e("li",hh,[e("div",mh,[e("div",_h,[f(d,{valeur:g.valeur},null,8,["valeur"]),m("€/h à partir du "),f(u,{value:g.dateEffet},null,8,["value"])]),e("div",fh,[n.taux.canEdit?(r(),a("a",{key:0,class:"text-primary",onClick:s[2]||(s[2]=x((...b)=>i.saisieValeur&&i.saisieValeur(...b),["prevent"])),"data-id":g.id},[f(o,{name:"pen-to-square"})],8,ph)):h("",!0),m("   "),n.taux.canEdit?(r(),a("a",{key:1,class:"text-primary",onClick:s[3]||(s[3]=x((...b)=>i.supprimerValeur&&i.supprimerValeur(...b),["prevent"])),"data-id":g.id},[f(o,{name:"trash-can"})],8,bh)):h("",!0)])])])]))),128))]),n.taux.canEdit?(r(),a("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:s[4]||(s[4]=x((...g)=>i.ajoutValeur&&i.ajoutValeur(...g),["prevent"]))},[f(o,{name:"plus"}),m(" Ajouter une valeur ")],8,vh)):h("",!0)])),n.taux.tauxRemu?(r(),a("div",gh,[e("div",yh,[m(" Modification :"),xh,e("ul",null,[(r(!0),a(v,null,y(n.taux.tauxRemuValeurs,g=>(r(),a("div",null,[e("li",null,[e("div",Ch,[e("div",kh,[m(" Coéfficient de "),f(d,{valeur:g.valeur},null,8,["valeur"]),m(" à partir du "),f(u,{value:g.dateEffet},null,8,["value"])]),e("div",Ph,[n.taux.canEdit?(r(),a("a",{key:0,class:"text-primary",onClick:s[5]||(s[5]=x((...b)=>i.saisieValeur&&i.saisieValeur(...b),["prevent"])),"data-id":g.id},[f(o,{name:"pen-to-square"})],8,Eh)):h("",!0),m("   "),n.taux.canEdit?(r(),a("a",{key:1,class:"text-primary",onClick:s[6]||(s[6]=x((...b)=>i.supprimerValeur&&i.supprimerValeur(...b),["prevent"])),"data-id":g.id},[f(o,{name:"trash-can"})],8,Dh)):h("",!0)])])])]))),256))]),n.taux.canEdit?(r(),a("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:s[7]||(s[7]=x((...g)=>i.ajoutValeur&&i.ajoutValeur(...g),["prevent"]))},[f(o,{name:"plus"})],8,Vh)):h("",!0)]),e("div",Th,[m(" Valeurs calculées (indexées sur le taux "+c(n.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(r(!0),a(v,null,y(n.taux.tauxRemuValeursIndex,g=>(r(),a("div",null,[e("li",null,[f(d,{valeur:g.valeur},null,8,["valeur"]),m("€/h à partir du "),f(u,{value:g.date},null,8,["value"])])]))),256))]),Sh])])):h("",!0)])],2),n.taux.tauxRemu?h("",!0):(r(),a("div",$h,[(r(!0),a(v,null,y(n.listeTaux,g=>(r(),a("div",{key:g},[g.tauxRemu&&g.tauxRemu.id===n.taux.id?(r(),a("div",Mh,[(r(),E(p,{onSupprimer:i.supprimer,onRefreshListe:i.refreshListe,key:n.taux.id,taux:g,listeTaux:n.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):h("",!0)]))),128))]))],64)}const ie=k(nh,[["render",wh]]),Ih=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),Rh={components:{taux:ie},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(t){let s=Util.json.indexById(this.listeTaux,t.id);this.listeTaux[s]=t},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(t=>{this.listeTaux=t.data})}}},Ah=["href"];function jh(t,s,n,_,l,i){const o=T("taux");return r(),a(v,null,[(r(!0),a(v,null,y(l.listeTaux,d=>(r(),a("div",null,[d.tauxRemu?h("",!0):(r(),E(o,{onSupprimer:i.supprimer,onRefreshListe:i.refreshListe,key:d.id,taux:d,listeTaux:l.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),n.canEditTaux?(r(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:s[0]||(s[0]=x((...d)=>i.ajout&&i.ajout(...d),["prevent"]))},"Ajout d'un nouveau taux",8,Ah)):h("",!0)],64)}const Hh=k(Rh,[["render",jh]]),Uh=Object.freeze(Object.defineProperty({__proto__:null,default:Hh},Symbol.toStringTag,{value:"Module"})),Lh={UHeures:"Application/UI/UHeures",Utilisateur:"Application/Utilisateur"};function qh(t,s){const n={};s===void 0&&(s={});for(const _ in t){let i=_.slice(2,-4).replace("/","");n[i]=t[_].default}for(const _ of document.getElementsByClassName("vue-app")){let l=de({template:_.innerHTML,components:n});if(s.beforeMount!==void 0&&s.beforeMount(l),s.autoloads!==void 0)for(const i in s.autoloads){let o=s.autoloads[i].replace("/","");l.component(i,n[o])}l.mount(_),s.afterMount!==void 0&&s.afterMount(l)}}const Fh={init:qh},Oh=Object.assign({"./Application/UI/UHeures.vue":_e,"./Application/Utilisateur.vue":ge,"./Intervenant/Recherche.vue":Fe,"./Lieu/Structure.vue":kt,"./Lieu/StructuresAdmin.vue":Mt,"./Mission/Liste.vue":tn,"./Mission/ListeCandidatures.vue":Sn,"./Mission/ListeOffreEmploi.vue":ir,"./Mission/ListePrime.vue":da,"./Mission/Mission.vue":Qs,"./Mission/OffreEmploi.vue":Qi,"./Mission/Prime.vue":Xr,"./Mission/Suivi.vue":za,"./Mission/SuiviEvent.vue":La,"./Paiement/DemandeMiseEnPaiement.vue":hd,"./Paiement/DemandeMiseEnPaiementLot.vue":Gu,"./Paiement/DemandeMiseEnPaiementStructure.vue":rd,"./Paiement/DetailsCalculs.vue":Ic,"./Paiement/ImportNumeroPec.vue":sh,"./Paiement/ListeTaux.vue":Uh,"./Paiement/Taux.vue":Ih}),zh={autoloads:Lh};Fh.init(Oh,zh);
