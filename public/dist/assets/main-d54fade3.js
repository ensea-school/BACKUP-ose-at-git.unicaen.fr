import{c as a,o as i,t as u,a as f,w as E,b as c,d as e,e as D,F as v,r as g,v as I,f as X,g as L,U as Z,h as K,i as ee,j as y,k as m,l as w,n as P,m as T,p as k,q as H,s as N,u as te,x as se,y as ne,z as re,A as ie,B as ae,_ as oe}from"./vendor-1014b989.js";const C=(s,t)=>{const n=s.__vccOpts||s;for(const[_,l]of t)n[_]=l;return n},le={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},de=["innerHTML"];function ue(s,t,n,_,l,r){return i(),a("span",{class:"heures",innerHTML:r.affichage},null,8,de)}const ce=C(le,[["render",ue]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"})),me={name:"Utilisateur",props:{nom:String,mail:String}},_e=["href"];function fe(s,t,n,_,l,r){return i(),a("a",{href:`mailto:${n.mail}`},u(n.nom),9,_e)}const pe=C(me,[["render",fe]]),ve=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),be={name:"UTableAjax",emits:["update:modelValue"],props:{modelValue:{required:!0},id:{required:!1,type:String},size:{required:!1,default:10},count:{required:!1},search:{required:!1},dataUrl:{required:!0,type:String}},data(){return{page:1,pageSizes:[10,25,50,100,"Tous"],defaultSize:10,dSize:this.size,dCount:this.count,dSearch:this.search,searchTimer:null,columns:{},loading:!1,orderCol:void 0,orderDir:"asc"}},computed:{cSize(){return isNaN(this.dSize)?9999999999999:this.dSize},storageIdentifier(){return"UTableAjax-"+this.id+"-"+window.location.href},elStart(){return isNaN(this.dSize)?1:(this.page-1)*this.dSize+1},elEnd(){return isNaN(this.dCount)?(this.page-1)*this.dSize+this.dSize:isNaN(this.dSize)?this.dCount:Math.min(this.dCount,(this.page-1)*this.dSize+this.dSize)}},watch:{dSize(s){localStorage.setItem(this.storageIdentifier,s),this.getData()},dSearch(s){const t=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.page>1?this.page=1:t.getData()},500)},page(s){this.getData()}},methods:{getData(){unicaenVue.axios.post(this.dataUrl,{page:this.page,size:this.dSize,elStart:this.elStart,elEnd:this.elEnd,search:this.dSearch,orderCol:this.orderCol,orderDir:this.orderDir}).then(s=>{let t=s.data;this.dCount=t.count,this.$emit("update:modelValue",t.data)})},orderBy(s){const t=this.columns[s];for(let _ in this.columns)_!=s&&(this.columns[_].classList.contains("sorting_asc")&&this.columns[_].classList.remove("sorting_asc"),this.columns[_].classList.contains("sorting_desc")&&this.columns[_].classList.remove("sorting_desc"),console.log(_));let n="asc";t.classList.contains("sorting_asc")?(n="desc",t.classList.remove("sorting_asc"),t.classList.add("sorting_desc")):(t.classList.contains("sorting_desc")&&t.classList.remove("sorting_desc"),t.classList.add("sorting_asc")),this.orderCol=s,this.orderDir=n,this.getData()}},mounted(){this.dSize=parseInt(localStorage.getItem(this.storageIdentifier))||this.defaultSize,this.page=1,this.dSize=this.size,this.dCount=this.count;const s=this.$refs.tableRef,t=this;s&&s.querySelectorAll("th[column]").forEach(_=>{Array.from(_.attributes).forEach(l=>{l.name=="column"&&(this.columns[l.value]=_,_.dataset.column=l.value,_.onclick=function(){t.orderBy(this.dataset.column)},_.removeAttribute(l.name),_.classList.add("sorting"))})}),this.getData()}},ge={class:"dt-bootstrap5"},ye=["value"],xe={class:"float-end"},Ce={class:"table table-bordered dataTable mb-2",ref:"tableRef"},ke={class:"dataTables_paginate paging_simple_numbers"};function Ve(s,t,n,_,l,r){const o=Z,d=K,h=ee;return i(),a("div",ge,[f(d,null,{default:E(()=>[f(o,null,{default:E(()=>[c(" Afficher "),e("label",null,[D(e("select",{"onUpdate:modelValue":t[0]||(t[0]=p=>l.dSize=p),class:"form-select form-select-sm"},[(i(!0),a(v,null,g(l.pageSizes,p=>(i(),a("option",{key:p,value:p},u(p),9,ye))),128))],512),[[I,l.dSize]])]),c(" éléments ")]),_:1}),f(o,null,{default:E(()=>[e("div",xe,[c(" Rechercher : "),e("label",null,[D(e("input",{"onUpdate:modelValue":t[1]||(t[1]=p=>l.dSearch=p),class:"form-control form-inline form-control-sm"},null,512),[[X,l.dSearch]])])])]),_:1})]),_:1}),e("table",Ce,[L(s.$slots,"default")],512),f(d,null,{default:E(()=>[f(o,null,{default:E(()=>[c("Affichage de l'élément "+u(r.elStart)+" à "+u(r.elEnd)+" sur "+u(l.dCount)+" éléments",1)]),_:1}),f(o,null,{default:E(()=>[e("div",ke,[f(h,{align:"end",page:l.page,modelValue:l.page,"onUpdate:modelValue":t[2]||(t[2]=p=>l.page=p),"total-rows":l.dCount,"per-page":r.cSize,"last-number":"true",firstNumber:"true","prev-text":"Précédent","next-text":"Suivant"},null,8,["page","modelValue","total-rows","per-page"])])]),_:1})]),_:1})])}const z=C(be,[["render",Ve]]),Se={name:"listeEmployeur",data(){return{dataUrl:unicaenVue.url("employeur/get-data"),lines:[]}},methods:{saisie(s){modAjax(s.currentTarget,t=>{this.$refs.employeurs.getData()})},editUrl(s){return unicaenVue.url("employeur/saisie/:id",{id:s})}}},Ee=e("h1",{class:"page-header"},"Gestion des employeurs",-1),Te=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"RAISON_SOCIALE"},"Raison sociale"),e("th",{column:"NOM_COMMERCIAL"},"Nom commercial"),e("th",null,"Siren"),e("th",null," ")])],-1),De={key:0},Pe=["href"],Me={key:1};function Re(s,t,n,_,l,r){const o=z;return i(),a(v,null,[Ee,f(o,{ref:"employeurs",modelValue:l.lines,"onUpdate:modelValue":t[1]||(t[1]=d=>l.lines=d),"data-url":this.dataUrl},{default:E(()=>[Te,e("tbody",null,[(i(!0),a(v,null,g(l.lines,(d,h)=>(i(),a("tr",{key:h},[e("td",null,u(d.ID),1),e("td",null,u(d.RAISON_SOCIALE),1),e("td",null,u(d.NOM_COMMERCIAL),1),e("td",null,u(d.SIREN),1),d.IMPORTABLE==0?(i(),a("td",De,[d.IMPORTABLE==0?(i(),a("a",{key:0,href:r.editUrl(d.ID),onClick:t[0]||(t[0]=y((...p)=>r.saisie&&r.saisie(...p),["prevent"]))},"Modifier",8,Pe)):m("",!0)])):m("",!0),d.IMPORTABLE==1?(i(),a("td",Me," NON MODIFIABLE ")):m("",!0)]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const Ae=C(Se,[["render",Re]]),$e=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"})),Ue={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(s){this.formatted=this.formatage(s)}},methods:{formatage(s){if(s===void 0)return;let t=new Date(s);const n=t.getFullYear(),_=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),r=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0"),d=t.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${l}/${_}/${n} à ${r}:${o}`;case"time":return`${r}:${o}:${d}`}return`${l}/${_}/${n}`}}};function we(s,t,n,_,l,r){return u(l.formatted)}const R=C(Ue,[["render",we]]),Ie={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(s){this.searchTerm=s.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(s){return unicaenVue.url("intervenant/code:"+s+"/voir")},reload(){var s=document.getElementById("term");s.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(t=>{let n=t.data,_=[];for(const l in n){if(n[l].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){_.push(n[l]);continue}if(n[l].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){_.push(n[l]);continue}if(n[l].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){_.push(n[l]);continue}}this.intervenants=_,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(t=>{console.log(t.message)})},800)}}},je=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),Le={class:"intervenant-recherche"},qe={class:"critere"},Oe=e("br",null,null,-1),He=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),Ne=e("br",null,null,-1),ze={key:0,class:"table table-bordered table-hover"},Fe=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),Be=["title"],Ge={style:{}},Ye=["href"],Je=e("i",{class:"fas fa-eye"},null,-1),Qe={key:1,class:"table table-bordered table-hover"},We=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),Xe=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),Ze=[We,Xe];function Ke(s,t,n,_,l,r){const o=R;return i(),a(v,null,[je,e("div",Le,[e("div",qe,[e("div",null,[e("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:t[0]||(t[0]=(...d)=>r.rechercher&&r.rechercher(...d))},null,32),Oe]),e("div",null,[He,D(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>l.checkedTypes=d),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:t[2]||(t[2]=d=>r.reload())},null,544),[[w,l.checkedTypes]]),c(" Permanent "),D(e("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>l.checkedTypes=d),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:t[4]||(t[4]=d=>r.reload())},null,544),[[w,l.checkedTypes]]),c(" Vacataire "),D(e("input",{"onUpdate:modelValue":t[5]||(t[5]=d=>l.checkedTypes=d),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:t[6]||(t[6]=d=>r.reload())},null,544),[[w,l.checkedTypes]]),c(" Etudiant ")]),Ne])]),l.intervenants.length>0?(i(),a("table",ze,[Fe,e("tbody",null,[(i(!0),a(v,null,g(l.intervenants,(d,h)=>(i(),a("tr",{class:P({"bg-danger":d.destruction!==null}),title:d.destruction!==null?"Fiche historisé":""},[e("td",Ge,[e("a",{href:r.urlFiche(d.code)},[Je,c(" Fiche")],8,Ye)]),e("td",null,u(d.civilite),1),e("td",null,u(d.nom),1),e("td",null,u(d.prenom),1),e("td",null,u(d.structure),1),e("td",null,u(d.statut),1),e("td",null,[f(o,{value:d["date-naissance"]},null,8,["value"])]),e("td",null,u(d["numero-personnel"]),1)],10,Be))),256))])])):m("",!0),l.intervenants.length==0&&l.noResult==1?(i(),a("table",Qe,Ze)):m("",!0)],64)}const et=C(Ie,[["render",Ke]]),tt=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));const st={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return this.structure.structures.length>0}},methods:{saisie(s){modAjax(s.currentTarget,t=>{this.refresh()})},supprimer(s){popConfirm(s.currentTarget,t=>{this.refresh()})},refresh(){this.liste.reload()}}},M=s=>(H("data-v-a94dbf9e"),s=s(),N(),s),nt={class:"accordion-item"},rt={class:"accordion-header"},it=["data-bs-target","aria-controls"],at=["href"],ot=M(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),lt=[ot],dt=["href"],ut=M(()=>e("i",{class:"fas fa-trash-can"},null,-1)),ct=[ut],ht=["id"],mt={class:"accordion-body"},_t={class:"row"},ft=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),c(" : ")],-1)),pt={class:"col-md-5"},vt={class:"row"},bt=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),c(" : ")],-1)),gt={class:"col-md-5"},yt={class:"row"},xt=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),c(" : ")],-1)),Ct={class:"col-md-5"},kt={key:0,class:"fas fa-check text-success"},Vt={key:1,class:"fas fa-xmark text-danger"},St={class:"row"},Et=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),c(" : ")],-1)),Tt={class:"col-md-5"},Dt={key:0,class:"fas fa-check text-success"},Pt={key:1,class:"fas fa-xmark text-danger"},Mt={class:"row"},Rt=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),c(" : ")],-1)),At={class:"col-md-5"},$t={key:0,class:"sous-structures"},Ut=M(()=>e("h4",null,"Sous-structures",-1)),wt={class:"accordion"};function It(s,t,n,_,l,r){const o=T("structure",!0);return i(),a("div",nt,[e("h2",rt,[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":`#str${n.structure.id}`,"aria-expanded":"true","aria-controls":n.structure.id},[n.structure.canEdit?(i(),a("a",{key:0,title:"Modifier la structure",href:l.saisieUrl,class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=y((...d)=>r.saisie&&r.saisie(...d),["prevent"]))},lt,8,at)):m("",!0),n.structure.canDelete?(i(),a("a",{key:1,title:"Supprimer la structure",href:l.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",onClick:t[1]||(t[1]=y((...d)=>r.supprimer&&r.supprimer(...d),["prevent"]))},ct,8,dt)):m("",!0),c("   "+u(n.structure.libelleLong)+" ("+u(n.structure.libelleCourt)+") ",1)],8,it)]),e("div",{id:`str${n.structure.id}`,class:"accordion-collapse collapse show"},[e("div",mt,[e("div",_t,[ft,e("div",pt,u(n.structure.code),1)]),e("div",vt,[bt,e("div",gt,u(n.structure.source.libelle),1)]),e("div",yt,[xt,e("div",Ct,[n.structure.enseignement?(i(),a("i",kt)):n.structure.enseignement?m("",!0):(i(),a("i",Vt))])]),e("div",St,[Et,e("div",Tt,[n.structure.affAdresseContrat?(i(),a("i",Dt)):n.structure.affAdresseContrat?m("",!0):(i(),a("i",Pt))])]),e("div",Mt,[Rt,e("div",At,[e("pre",null,u(n.structure.adresse),1)])]),r.hasSousStructures?(i(),a("div",$t,[Ut,e("div",wt,[(i(!0),a(v,null,g(n.structure.structures,d=>(i(),k(o,{onRefresh:r.refresh,key:d.id,structure:d},null,8,["onRefresh","structure"]))),128))])])):m("",!0)])],8,ht)])}const F=C(st,[["render",It],["__scopeId","data-v-a94dbf9e"]]),jt=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"})),Lt={components:{structure:F},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(s){modAjax(s.currentTarget,t=>{console.log("coucou"),this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(s=>{this.structures=s.data})}}},qt=e("h1",null,"Administration des structures",-1),Ot={class:"accordion"},Ht=["href"],Nt=e("i",{class:"fas fa-pen-to-square"},null,-1);function zt(s,t,n,_,l,r){const o=T("structure");return i(),a(v,null,[qt,e("div",Ot,[(i(!0),a(v,null,g(l.structures,d=>(i(),k(o,{key:d.id,structure:d},null,8,["structure"]))),128))]),n.canAdd?(i(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:t[0]||(t[0]=y((...d)=>r.ajout&&r.ajout(...d),["prevent"])),title:"Ajouter une structure"},[Nt,c(" Ajouter une structure ")],8,Ht)):m("",!0)],64)}const Ft=C(Lt,[["render",zt]]),Bt=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Gt={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},Yt=["id"],Jt={class:"modal-dialog"},Qt={class:"modal-content"},Wt={class:"modal-header"},Xt={class:"modal-title"},Zt=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Kt={class:"modal-body"},es={class:"modal-footer"},ts=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function ss(s,t,n,_,l,r){return i(),a("div",{class:"modal fade",id:n.id,tabindex:"-1","aria-hidden":"true"},[e("div",Jt,[e("div",Qt,[e("div",Wt,[e("h5",Xt,u(n.title),1),Zt]),e("div",Kt,[L(s.$slots,"body")]),e("div",es,[L(s.$slots,"footer"),ts])])])],8,Yt)}const rs=C(Gt,[["render",ss]]),is={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},as=["id"];function os(s,t,n,_,l,r){return i(),a("i",{class:P(`fas fa-${n.name} text-${n.variant} fa-rotate-${n.rotate}`),id:`${n.id}`},null,10,as)}const A=C(is,[["render",os]]);const ls={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(s){this.validationText=this.calcValidation(s)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(s){return s===null?"A valider":s.id===null?"Autovalidée":"Validation du "+Util.dateToString(s.histoCreation)+" par "},saisie(s){modAjax(s.currentTarget,t=>{this.refresh()})},supprimer(s){popConfirm(s.currentTarget,t=>{this.$emit("supprimer",this.mission)})},valider(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},devalider(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireSupprimer(s){s.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:s.currentTarget.dataset.id}),popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireValider(s){s.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:s.currentTarget.dataset.id}),popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireDevalider(s){s.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:s.currentTarget.dataset.id}),popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(s=>{this.$emit("refresh",s.data)})}}},S=s=>(H("data-v-1735108d"),s=s(),N(),s),ds=["id"],us={class:"card-header card-header-h3"},cs={key:0},hs={class:"float-end"},ms={key:1},_s={key:2},fs={class:"float-end"},ps={class:"card-body"},vs={class:"row"},bs={class:"col-md-8"},gs={class:"row"},ys={class:"col-md-12"},xs=S(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),Cs={class:"form-control"},ks={class:"row"},Vs={class:"col-md-6"},Ss=S(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),Es={class:"form-control"},Ts={class:"col-md-6"},Ds=S(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),Ps={class:"form-control"},Ms={class:"col-md-7"},Rs=S(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),As={class:"input-group mb-3"},$s=["innerHTML"],Us=["data-bs-target"],ws={key:0,class:"col-md-5"},Is=S(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),js={class:"form-control"},Ls={class:"row"},qs={class:"col-md-12"},Os=S(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),Hs={class:"form-control"},Ns={key:0,class:"row"},zs={class:"col-md-12"},Fs=S(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),Bs={class:"form-control"},Gs=S(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),Ys={class:"row"},Js={class:"col-md-12"},Qs=["href"],Ws=["href"],Xs=["href"],Zs=["href"],Ks={class:"col-md-4"},en=S(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),tn={class:"table table-bordered table-condensed"},sn=S(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),nn={style:{"text-align":"right"}},rn=S(()=>e("br",null,null,-1)),an={key:0},on=["data-id"],ln=["data-id"],dn=["data-id"];function un(s,t,n,_,l,r){const o=R,d=A,h=T("utilisateur"),p=T("u-heures"),x=rs;return i(),a(v,null,[e("div",{id:n.mission.id,class:P([{"bg-success":n.mission.valide,"bg-default":!n.mission.valide},"card"])},[e("form",{onSubmit:t[4]||(t[4]=y((...b)=>s.submitForm&&s.submitForm(...b),["prevent"]))},[e("div",us,[n.mission.libelleMission?(i(),a("h5",cs,[c(u(n.mission.libelleMission)+" ",1),e("span",hs,[c("Du "),f(o,{value:n.mission.dateDebut},null,8,["value"]),c(" au "),f(o,{value:n.mission.dateFin},null,8,["value"])])])):m("",!0),n.mission.libelleMission?(i(),a("h6",ms,u(n.mission.typeMission.libelle),1)):m("",!0),n.mission.libelleMission?m("",!0):(i(),a("h5",_s,[c(u(n.mission.typeMission.libelle)+" ",1),e("span",fs,[c("Du "),f(o,{value:n.mission.dateDebut},null,8,["value"]),c(" au "),f(o,{value:n.mission.dateFin},null,8,["value"])])]))]),e("div",ps,[e("div",vs,[e("div",bs,[e("div",gs,[e("div",ys,[xs,e("div",Cs,u(n.mission.structure.libelle),1)])]),e("div",ks,[e("div",Vs,[Ss,e("div",Es,u(n.mission.tauxRemu?n.mission.tauxRemu.libelle:null),1)]),e("div",Ts,[Ds,e("div",Ps,u(n.mission.tauxRemuMajore?n.mission.tauxRemuMajore.libelle:n.mission.tauxRemu?"Idem ("+n.mission.tauxRemu.libelle+")":null),1)]),e("div",Ms,[Rs,e("div",As,[e("div",{class:"form-control",innerHTML:r.heuresLib},null,8,$s),e("button",{"data-bs-target":`#details-${n.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,Us)])]),n.mission.typeMission.besoinFormation?(i(),a("div",ws,[Is,e("div",js,u(n.mission.heuresFormation),1)])):m("",!0)]),e("div",Ls,[e("div",qs,[Os,e("div",Hs,u(n.mission.description),1)])]),n.mission.typeMission.accompagnementEtudiants?(i(),a("div",Ns,[e("div",zs,[Fs,e("div",Bs,[e("pre",null,u(n.mission.etudiantsSuivis),1)])])])):m("",!0),Gs,e("div",Ys,[e("div",Js,[n.mission.canSaisie?(i(),a("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...b)=>r.saisie&&r.saisie(...b),["prevent"]))},"Modifier",8,Qs)):m("",!0),n.mission.canValider?(i(),a("a",{key:1,href:l.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:t[1]||(t[1]=y((...b)=>r.valider&&r.valider(...b),["prevent"]))},"Valider",8,Ws)):m("",!0),n.mission.canDevalider?(i(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:t[2]||(t[2]=y((...b)=>r.devalider&&r.devalider(...b),["prevent"]))},"Dévalider",8,Xs)):m("",!0),n.mission.canSupprimer?(i(),a("a",{key:3,href:l.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:t[3]||(t[3]=y((...b)=>r.supprimer&&r.supprimer(...b),["prevent"]))},"Supprimer",8,Zs)):m("",!0)])])]),e("div",Ks,[en,e("div",null,[f(d,{name:"thumbs-up",variant:"success"}),c(" Créé le "),f(o,{value:n.mission.histoCreation},null,8,["value"]),c(" par "),f(h,{mail:n.mission.histoCreateur.email,nom:n.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[f(d,{name:n.mission.valide?"thumbs-up":"thumbs-down",variant:n.mission.valide?"success":"info"},null,8,["name","variant"]),c(" "+u(l.validationText)+" ",1),n.mission.validation&&n.mission.validation.histoCreateur?(i(),k(h,{key:0,mail:n.mission.validation.histoCreateur.email,nom:n.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):m("",!0)]),e("div",null,[f(d,{name:n.mission.contrat?"thumbs-up":"thumbs-down",variant:n.mission.contrat?"success":"info"},null,8,["name","variant"]),c(" "+u(n.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,u(n.mission.heuresRealisees)+" heure"+u(n.mission.heuresRealisees<2?"":"s")+" réalisée"+u(n.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,ds),f(x,{id:`details-${n.mission.id}`,title:"Détail des heures prévisionnelles"},{body:E(()=>[e("table",tn,[sn,e("tbody",null,[(i(!0),a(v,null,g(n.mission.volumesHorairesPrevus,b=>(i(),a("tr",{key:b.id},[e("td",nn,[f(p,{valeur:b.heures},null,8,["valeur"])]),e("td",null,[f(d,{name:"thumbs-up",variant:"success"}),c(" Saisi par "),f(h,{mail:b.histoCreateur.email,nom:b.histoCreateur.displayName},null,8,["mail","nom"]),c(" le "),f(o,{value:b.histoCreation},null,8,["value"]),rn,f(d,{name:b.valide?"thumbs-up":"thumbs-down",variant:b.valide?"success":"info"},null,8,["name","variant"]),c(" "+u(b.validation&&b.validation.id==null?"Autovalidé":b.validation?"":"à valider")+" ",1),b.validation&&b.validation.histoCreateur?(i(),a("span",an,[c(" Validé par "),f(h,{mail:b.validation.histoCreateur.email,nom:b.validation.histoCreateur.displayName},null,8,["mail","nom"]),c(" le "),f(o,{value:b.validation.histoCreation},null,8,["value"])])):m("",!0)]),e("td",null,[b.canValider?(i(),a("a",{key:0,"data-id":b.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:t[5]||(t[5]=y((...U)=>r.volumeHoraireValider&&r.volumeHoraireValider(...U),["prevent"]))},"Valider",8,on)):m("",!0),b.canDevalider?(i(),a("a",{key:1,"data-id":b.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:t[6]||(t[6]=y((...U)=>r.volumeHoraireDevalider&&r.volumeHoraireDevalider(...U),["prevent"]))},"Dévalider",8,ln)):m("",!0),b.canSupprimer?(i(),a("a",{key:2,"data-id":b.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:t[7]||(t[7]=y((...U)=>r.volumeHoraireSupprimer&&r.volumeHoraireSupprimer(...U),["prevent"]))},"Supprimer",8,dn)):m("",!0)])]))),128))])])]),footer:E(()=>[]),_:1},8,["id"])],64)}const B=C(ls,[["render",un],["__scopeId","data-v-1735108d"]]),cn=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"})),hn={components:{mission:B},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(s){modAjax(s.currentTarget,t=>{this.reload()})},supprimer(s){this.reload()},refresh(s){let t=Util.json.indexById(this.missions,s.id);this.missions[t]=s,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(s=>{this.missions=s.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},mn=["href"];function _n(s,t,n,_,l,r){const o=T("mission");return i(),a(v,null,[(i(!0),a(v,null,g(l.missions,d=>(i(),k(o,{onSupprimer:r.supprimer,onRefresh:r.refresh,key:d.id,mission:d},null,8,["onSupprimer","onRefresh","mission"]))),128)),n.canAddMission?(i(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:t[0]||(t[0]=y((...d)=>r.ajout&&r.ajout(...d),["prevent"]))},"Ajout d'une nouvelle mission",8,mn)):m("",!0)],64)}const fn=C(hn,[["render",_n]]),pn=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"})),vn={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},canValiderCandidature:{type:Boolean,required:!1},renseignerDonneesPersonnelles:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},computed:{urlDonneesPersonnelles:function(){return unicaenVue.url("intervenant/:intervenant/dossier",{intervenant:this.intervenant})}},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(s=>{this.candidatures=s.data})},validerCandidature(s){modAjax(s.currentTarget,t=>{this.reload()})},refuserCandidature(s){popConfirm(s.target,t=>{this.reload()})},urlOffre(s){return unicaenVue.url("offre-emploi/detail/:offre",{offre:s.offre.id})},urlAccepterCandidature:function(s){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:s.id})},urlRefuserCandidature:function(s){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:s.id})}}},bn={key:0,class:"alert alert-primary",role:"alert"},gn=["href"],yn={class:"table table-bordered"},xn=e("th",null,"Offre d'emploi",-1),Cn=e("th",null,"Composante",-1),kn=e("th",null,"Etat",-1),Vn=e("th",null,"Date commission",-1),Sn={key:0},En={key:0},Tn={key:0,colspan:"5",style:{"text-align":"center"}},Dn={style:{"text-align":"center"}},Pn=["href"],Mn={style:{"text-align":"center"}},Rn={style:{"text-align":"center"}},An={key:0,class:"badge rounded-pill bg-success"},$n={key:1,class:"badge rounded-pill bg-danger"},Un={key:2,class:"badge rounded-pill bg-warning"},wn={key:0,style:{"text-align":"center"}},In=["href"],jn=e("i",{class:"fa-solid fa-check"},null,-1),Ln=[jn],qn=["href"],On=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),Hn=[On],Nn=["href"];function zn(s,t,n,_,l,r){const o=R,d=A;return i(),a("div",null,[this.renseignerDonneesPersonnelles?(i(),a("div",bn,[c(" Afin que vos candidatures soient étudiées, veuillez compléter "),e("a",{href:this.urlDonneesPersonnelles},"vos données personnelles",8,gn),c(" et fournir les pièces justificatives qui vous seront demandées. ")])):m("",!0),e("table",yn,[e("thead",null,[e("tr",null,[xn,Cn,kn,Vn,n.canValiderCandidature?(i(),a("th",Sn,"Action")):m("",!0)])]),e("tbody",null,[l.candidatures.length==0?(i(),a("tr",En,[n.canValiderCandidature?(i(),a("td",Tn,"Aucune candidature")):m("",!0)])):m("",!0),(i(!0),a(v,null,g(l.candidatures,h=>(i(),a("tr",{key:h.id},[e("td",Dn,[e("a",{href:r.urlOffre(h)},u(h.offre.titre),9,Pn)]),e("td",Mn,u(h.offre.structure.libelleCourt),1),e("td",Rn,[h.validation?(i(),a("span",An,"Acceptée par "+u(h.validation.histoCreateur.displayName),1)):m("",!0),!h.validation&&h.motif!==null?(i(),a("span",$n,u(h.motif),1)):m("",!0),!h.validation&&h.motif===null?(i(),a("span",Un,"En attente d'acceptation")):m("",!0)]),e("td",null,[h.dateCommission?(i(),k(o,{key:0,value:h.dateCommission},null,8,["value"])):m("",!0)]),this.canValiderCandidature?(i(),a("td",wn,[h.validation?m("",!0):(i(),a("a",{key:0,href:r.urlAccepterCandidature(h),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:t[0]||(t[0]=y((...p)=>r.validerCandidature&&r.validerCandidature(...p),["prevent"]))},Ln,8,In)),c("  "),e("a",{href:r.urlRefuserCandidature(h),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:t[1]||(t[1]=y((...p)=>r.refuserCandidature&&r.refuserCandidature(...p),["prevent"]))},Hn,8,qn)])):m("",!0)]))),128))])]),e("a",{href:l.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[f(d,{name:"eye"}),c(" Voir toutes les offres d'emploi ")],8,Nn),c("  ")])}const Fn=C(vn,[["render",zn]]),Bn=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"})),Gn={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let s=this.offre.description.substr(0,200);return this.offre.description.length>200&&(s+="..."),s},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let s="auth/connexion?redirect="+window.location.href;return unicaenVue.url(s)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(s){modAjax(s.target,t=>{this.refresh()})},urlVoir:function(s){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+s.intervenant.code})},urlVoirCandidature:function(s){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+s.intervenant.code})},urlAccepterCandidature:function(s){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:s.id})},urlRefuserCandidature:function(s){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:s.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(s=>{this.$emit("refresh",s.data)})},supprimer(s){popConfirm(s.target,t=>{this.$emit("supprimer",this.offre)})},postuler(s){popConfirm(s.target,t=>{this.$emit("postuler",this.offre)})},valider(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},devalider(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},validerCandidature(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})},refuserCandidature(s){popConfirm(s.currentTarget,t=>{this.$emit("refresh",t.data)})}}},Yn={key:0,class:"col"},Jn={class:"card h-100"},Qn={class:"card-header"},Wn={class:"badge rounded-pill bg-info"},Xn={key:0,class:"badge rounded-pill bg-success"},Zn={key:1,class:"badge rounded-pill bg-warning"},Kn={class:"card-body"},er={class:"bg-light",style:{padding:"5px"}},tr=e("b",null,"Créée le : ",-1),sr=e("br",null,null,-1),nr=e("b",null,"Période à pourvoir : ",-1),rr=e("br",null,null,-1),ir=e("b",null,"Demandée par la composante :",-1),ar=e("br",null,null,-1),or=e("b",null,"Type de mission :",-1),lr={class:"card-footer"},dr={class:"d-grid gap-2 d-md-flex justify-content-md-end"},ur=["href"],cr={key:1},hr={class:"page-header"},mr={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},_r=e("i",{class:"fa-solid fa-user"},null,-1),fr={class:"ms-2"},pr=["href"],vr={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},br=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),gr=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),yr=[br,gr],xr={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},Cr=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),kr=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),Vr=[Cr,kr],Sr={class:"bg-light",style:{padding:"10px"}},Er=e("b",null,"Créée le : ",-1),Tr=e("br",null,null,-1),Dr=e("b",null,"Période à pourvoir : ",-1),Pr=e("br",null,null,-1),Mr=e("b",null,"Date limite de candidature :",-1),Rr=e("br",null,null,-1),Ar=e("b",null,"Demandé par la composante :",-1),$r=e("br",null,null,-1),Ur=e("b",null,"Type de mission :",-1),wr=e("br",null,null,-1),Ir=e("b",null,"Nombre d'heures pour la mission :",-1),jr=e("br",null,null,-1),Lr=e("b",null,"Nombre de postes à pourvoir :",-1),qr=e("br",null,null,-1),Or=["innerHTML"],Hr={key:3,class:"alert alert-info"},Nr=["innerHTML"],zr=e("br",null,null,-1),Fr={key:4},Br=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),Gr={class:"table table-bordered"},Yr=e("th",null,"Intervenant",-1),Jr=e("th",null,"Etat",-1),Qr={key:0},Wr={key:0},Xr={key:0,colspan:"4",style:{"text-align":"center"}},Zr={key:1,colspan:"3",style:{"text-align":"center"}},Kr=["href"],ei={key:0,class:"badge rounded-pill bg-success"},ti={key:1,class:"badge rounded-pill bg-danger"},si={key:2,class:"badge rounded-pill bg-warning"},ni={key:0},ri=["href"],ii={class:"mt-5"},ai=["href"],oi=["href"],li=["href"],di=["href"],ui=["href"],ci=["href"];function hi(s,t,n,_,l,r){const o=R,d=A;return i(),a(v,null,[this.extended?m("",!0):(i(),a("div",Yn,[e("div",Jn,[e("div",Qn,[e("h4",null,u(n.offre.titre),1),e("span",Wn,u(n.offre.nombreHeures)+" heure(s)",1),c("   "),n.offre.validation?(i(),a("span",Xn,[c("Validée le "),f(o,{value:n.offre.validation.histoCreation},null,8,["value"]),c(" par "+u(n.offre.validation.histoCreateur.displayName),1)])):m("",!0),n.offre.validation?m("",!0):(i(),a("span",Zn," En attente de validation par la DRH")),c("  ")]),e("div",Kn,[e("p",er,[tr,f(o,{value:n.offre.histoCreation},null,8,["value"]),c(" par "+u(n.offre.histoCreateur.displayName),1),sr,nr,c("du "),f(o,{value:n.offre.dateDebut},null,8,["value"]),c(" au "),f(o,{value:n.offre.dateFin},null,8,["value"]),rr,ir,c(" "+u(n.offre.structure.libelleCourt)+" ",1),ar,or,c(" "+u(n.offre.typeMission.libelle),1)]),c(" "+u(r.shortDesc),1)]),e("div",lr,[e("div",dr,[e("a",{href:l.consulterUrl,class:"btn btn-primary",title:"Consulter "},[f(d,{name:"eye"}),c(" Voir ")],8,ur)])])])])),this.extended?(i(),a("div",cr,[e("h1",hr,u(n.offre.titre),1),this.utilisateur?m("",!0):(i(),a("div",mr,[_r,e("div",fr,[c(" Vous devez "),e("a",{href:r.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,pr),c(" pour pouvoir postuler. ")])])),!n.offre.canPostuler&&this.utilisateur?(i(),a("div",vr,yr)):m("",!0),r.isCandidat&&this.utilisateur?(i(),a("div",xr,Vr)):m("",!0),e("p",Sr,[Er,f(o,{value:n.offre.histoCreation},null,8,["value"]),c(" par "+u(n.offre.histoCreateur.displayName),1),Tr,Dr,c("du "),f(o,{value:n.offre.dateDebut},null,8,["value"]),c(" au "),f(o,{value:n.offre.dateFin},null,8,["value"]),Pr,Mr,f(o,{value:n.offre.dateLimite},null,8,["value"]),Rr,Ar,c(" "+u(n.offre.structure.libelleCourt)+" ",1),$r,Ur,c(" "+u(n.offre.typeMission.libelle)+" ",1),wr,Ir,c(" "+u(n.offre.nombreHeures)+" heure(s) ",1),jr,Lr,c(" "+u(n.offre.nombrePostes)+" poste(s) ",1),qr]),e("p",{innerHTML:this.descriptionHtml},null,8,Or),this.decretText?(i(),a("p",Hr,[D(e("input",{id:"decret","onUpdate:modelValue":t[0]||(t[0]=h=>l.decret=h),name:"decret",type:"checkbox"},null,512),[[w,l.decret]]),c("  "),e("span",{innerHTML:this.decretText},null,8,Nr)])):m("",!0),zr,this.canValiderCandidature?(i(),a("div",Fr,[Br,e("table",Gr,[e("thead",null,[e("tr",null,[Yr,Jr,n.canValiderCandidature?(i(),a("th",Qr,"Action")):m("",!0)])]),e("tbody",null,[n.offre.candidatures.length==0?(i(),a("tr",Wr,[n.canValiderCandidature?(i(),a("td",Xr,"Aucune candidature")):m("",!0),n.canValiderCandidature?m("",!0):(i(),a("td",Zr,"Aucune candidature"))])):m("",!0),(i(!0),a(v,null,g(n.offre.candidatures,h=>(i(),a("tr",null,[e("td",null,[e("a",{href:r.urlVoir(h)},u(h.intervenant.prenom+" "+h.intervenant.nomUsuel),9,Kr)]),e("td",null,[h.validation?(i(),a("span",ei,[c("Acceptée le "),f(o,{value:h.validation.histoCreation},null,8,["value"]),c(" par "+u(h.validation.histoCreateur.displayName),1)])):m("",!0),!h.validation&&h.motif!==null?(i(),a("span",ti,u(h.motif),1)):m("",!0),!h.validation&&h.motif===null?(i(),a("span",si,"En attente d'acceptation")):m("",!0)]),this.canValiderCandidature?(i(),a("td",ni,[e("a",{href:r.urlVoirCandidature(h),class:"btn btn-primary",title:"Consulter "},[f(d,{name:"eye"}),c(" Voir ")],8,ri)])):m("",!0)]))),256))])])])):m("",!0),e("div",ii,[e("a",{href:l.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,ai),c("  "),this.canPostuler?(i(),a("a",{key:0,class:P([l.decret?"":"disabled","btn btn-primary"]),href:l.postulerUrl,"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,oi)):m("",!0),c("  "),n.offre.canModifier?(i(),a("a",{key:1,href:l.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:t[1]||(t[1]=y((...h)=>r.saisir&&r.saisir(...h),["prevent"]))},[f(d,{name:"pen-to-square"}),c(" Modifier ")],8,li)):m("",!0),c("  "),n.offre.validation&&n.offre.canValider?(i(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:t[2]||(t[2]=y((...h)=>r.devalider&&r.devalider(...h),["prevent"]))},[f(d,{name:"thumbs-down"}),c(" Devalider ")],8,di)):m("",!0),c("  "),!n.offre.validation&&n.offre.canValider?(i(),a("a",{key:3,href:l.validerUrl,class:"btn btn-success",title:"Valider",onClick:t[3]||(t[3]=y((...h)=>r.valider&&r.valider(...h),["prevent"]))},[f(d,{name:"thumbs-up"}),c(" Valider ")],8,ui)):m("",!0),c("  "),n.offre.canSupprimer?(i(),a("a",{key:4,href:l.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:t[4]||(t[4]=y((...h)=>r.supprimer&&r.supprimer(...h),["prevent"]))},[f(d,{name:"trash"}),c(" Supprimer ")],8,ci)):m("",!0)])])):m("",!0)],64)}const G=C(Gn,[["render",hi]]),mi=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"})),_i={components:{offreEmploi:G},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(s){modAjax(s.target,t=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(s){let t=Util.json.indexById(this.offres,s.id);this.offres[t]=s},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(s=>{this.offres=[s.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(s=>{this.offres=s.data})}}},fi={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},pi={key:1},vi=["href"],bi={key:2};function gi(s,t,n,_,l,r){const o=T("offreEmploi");return i(),a(v,null,[r.extended?m("",!0):(i(),a("div",fi,[(i(!0),a(v,null,g(l.offres,d=>(i(),k(o,{key:d.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:d,decretText:d.decretText,onRefresh:r.refresh,onSupprimer:r.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),r.extended?m("",!0):(i(),a("div",pi,[this.canModifier?(i(),a("a",{key:0,href:l.ajoutUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...d)=>r.ajout&&r.ajout(...d),["prevent"]))},"Ajouter une nouvelle offre",8,vi)):m("",!0)])),r.extended?(i(),a("div",bi,[(i(!0),a(v,null,g(l.offres,d=>(i(),k(o,{key:d.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:d.decretText,extended:r.extended,offre:d,utilisateur:this.utilisateur,onRefresh:r.refresh,onSupprimer:r.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):m("",!0)],64)}const yi=C(_i,[["render",gi]]),xi=Object.freeze(Object.defineProperty({__proto__:null,default:yi},Symbol.toStringTag,{value:"Module"})),Ci={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(s){popConfirm(s.target,t=>{this.$emit("reload")})},valider(s){popConfirm(s.target,t=>{this.$emit("reload")})},devalider(s){popConfirm(s.target,t=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(s=>{this.$emit("reload")})},modifierPrime(s){modAjax(s.currentTarget,t=>{this.$emit("reload")})},supprimerPrime(s){popConfirm(s.target,t=>{this.$emit("reload")})}}},ki={key:0},Vi=e("br",null,null,-1),Si=e("u",null,"Mission(s) concernée(s)",-1),Ei={key:0},Ti=["action"],Di={class:"card-body"},Pi={class:"row"},Mi={key:0,class:"col-md-6"},Ri={class:"card text-dark bg-light"},Ai=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),$i={class:"card-body"},Ui=e("p",{class:"card-text"},[c(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),c(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),c(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),wi=["disabled"],Ii={class:"card-footer d-grid gap-2"},ji=["disabled"],Li={key:1,class:"col-md-6"},qi={class:"card text-dark bg-light"},Oi=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),Hi={class:"card-body"},Ni=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),zi=["href"],Fi={class:"card-footer",style:{"text-align":"right"}},Bi=["href"],Gi=["href"],Yi=["href"],Ji={class:"col-md-6"},Qi={key:0},Wi=["checked","disabled"],Xi=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),Zi=e("br",null,null,-1),Ki=e("br",null,null,-1),ea=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),ta={key:0},sa={key:1},na={key:2},ra={key:3},ia={key:4},aa={key:5},oa={key:6},la={class:"row"},da={class:"col-md-12"},ua={class:"float-end"},ca=["href"],ha=["href"];function ma(s,t,n,_,l,r){const o=R,d=A;return i(),a("div",{class:P([{"bg-success":n.prime.validation,"bg-default":!n.prime.validation&&!n.prime.dateRefus,"bg-danger":n.prime.dateRefus},"card"])},[e("div",{class:P([{"text-white":n.prime.dateRefus},"card-header card-header-h3"])},[n.prime.id?(i(),a("h5",ki,[c(" Indemnité de fin de contrat N°"+u(n.numero+1),1),Vi])):m("",!0),e("div",null,[Si,c(" : "),(i(!0),a(v,null,g(n.prime.missions,(h,p)=>(i(),a("span",null,[c(u(h.typeMission.libelle)+" (Pour "+u(h.structure.libelleCourt)+" du ",1),f(o,{value:h.dateDebut},null,8,["value"]),c(" au "),f(o,{value:h.dateFin},null,8,["value"]),c(") "),p!=n.prime.missions.length-1?(i(),a("span",Ei,", ")):m("",!0)]))),256))])],2),e("form",{action:l.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",Di,[e("div",Pi,[n.prime.declaration?m("",!0):(i(),a("div",Mi,[e("div",Ri,[Ai,e("div",$i,[Ui,e("input",{ref:"file",disabled:!!n.prime.dateRefus,name:"files[]",type:"file"},null,8,wi)]),e("div",Ii,[e("input",{disabled:!!n.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,ji)])])])),n.prime.declaration?(i(),a("div",Li,[e("div",qi,[Oi,e("div",Hi,[Ni,e("a",{href:l.telechargerUrl},u(n.prime.declaration.nom),9,zi)]),e("div",Fi,[n.prime.declaration&&!n.prime.validation&&!n.prime.dateRefus?(i(),a("a",{key:0,href:l.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:t[0]||(t[0]=y((...h)=>r.supprimer&&r.supprimer(...h),["prevent"]))}," Supprimer ",8,Bi)):m("",!0),c("  "),n.prime.declaration&&!n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(i(),a("a",{key:1,href:l.validerUrl,class:"btn btn-success",title:"Valider",onClick:t[1]||(t[1]=y((...h)=>r.valider&&r.valider(...h),["prevent"]))}," Valider ",8,Gi)):m("",!0),c("  "),n.prime.declaration&&n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(i(),a("a",{key:2,href:l.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:t[2]||(t[2]=y((...h)=>r.devalider&&r.devalider(...h),["prevent"]))}," Dévalider ",8,Yi)):m("",!0),c("  ")])])])):m("",!0),e("div",Ji,[n.prime.validation?m("",!0):(i(),a("div",Qi,[e("input",{checked:n.prime.dateRefus,disabled:n.prime.validation,name:"prime",type:"checkbox",onChange:t[3]||(t[3]=(...h)=>r.refuser&&r.refuser(...h))},null,40,Wi),c("  Ou en cochant cette case, "),Xi,c(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),Zi,Ki])),e("div",null,[ea,n.prime.dateRefus?(i(),a("div",ta,[f(d,{name:"thumbs-down",variant:"danger"}),c(" Indemnité refusée le "),f(o,{value:n.prime.dateRefus},null,8,["value"])])):m("",!0),n.prime.declaration&&!n.prime.dateRefus?(i(),a("div",sa,[f(d,{name:"thumbs-up",variant:"success"}),c(" Déclaration déposée le "),f(o,{value:n.prime.declaration.histoCreation},null,8,["value"]),c(" par "+u(n.prime.declaration.histoCreateur.displayName),1)])):m("",!0),!n.prime.declaration&&!n.prime.dateRefus?(i(),a("div",na,[f(d,{name:"thumbs-down",variant:"info"}),c(" Aucune déclaration déposée ")])):m("",!0),n.prime.validation&&!n.prime.dateRefus?(i(),a("div",ra,[f(d,{name:"thumbs-up",variant:"success"}),c(" Déclaration validée le "),f(o,{value:n.prime.validation.histoCreation},null,8,["value"]),c(" par "+u(n.prime.validation.histoCreateur.displayName),1)])):m("",!0),!n.prime.validation&&!n.prime.dateRefus?(i(),a("div",ia,[f(d,{name:"thumbs-down",variant:"info"}),c(" Aucune déclaration validée ")])):m("",!0),n.prime.validation&&!n.prime.dateRefus?(i(),a("div",aa,[f(d,{name:"euro-sign",variant:"success"}),c(" Intervenant éligible à une indemnité de fin de contrat ")])):m("",!0),n.prime.dateRefus?(i(),a("div",oa,[f(d,{name:"euro-sign",variant:"info"}),c(" Intervenant non éligible à une indemnité de fin de contrat ")])):m("",!0)])])]),e("div",la,[e("div",da,[e("span",ua,[!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(i(),a("a",{key:0,href:l.modifierPrimeUrl,class:"btn btn-primary",onClick:t[4]||(t[4]=y((...h)=>r.modifierPrime&&r.modifierPrime(...h),["prevent"]))},"Modifier",8,ca)):m("",!0),c("   "),!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(i(),a("a",{key:1,href:l.supprimerPrimeUrl,class:"btn btn-danger",onClick:t[5]||(t[5]=y((...h)=>r.supprimerPrime&&r.supprimerPrime(...h),["prevent"]))},"Supprimer",8,ha)):m("",!0)])])])])],8,Ti)],2)}const Y=C(Ci,[["render",ma]]),_a=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"})),fa={components:{prime:Y},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(s){modAjax(s.currentTarget,t=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(s=>{this.primes=s.data,this.load=!0})}}},pa={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},va=e("br",null,null,-1),ba=e("br",null,null,-1),ga={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},ya=e("br",null,null,-1),xa=e("br",null,null,-1),Ca={key:2},ka=["href"];function Va(s,t,n,_,l,r){const o=T("prime");return i(),a(v,null,[(i(!0),a(v,null,g(l.primes,(d,h)=>(i(),k(o,{canGerer:n.canGerer,intervenant:this.intervenant,numero:h,prime:d,onReload:r.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),l.load?m("",!0):(i(),a("div",pa,[c(" Chargement en cours..."),va,ba])),l.primes.length==0&&l.load?(i(),a("div",ga,[c(" Aucune indemnité de fin de contrat actuellement..."),ya,xa])):m("",!0),this.missionsWithoutPrime>0&&this.canGerer?(i(),a("div",Ca,[e("a",{href:l.ajoutUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...d)=>r.ajout&&r.ajout(...d),["prevent"]))},"Créer une nouvelle indemnité",8,ka)])):m("",!0)],64)}const Sa=C(fa,[["render",Va]]),Ea=Object.freeze(Object.defineProperty({__proto__:null,default:Sa},Symbol.toStringTag,{value:"Module"}));const Ta={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const s=new Date(this.date);return{mois:s.getMonth()+1,annee:s.getFullYear()}},computed:{listeJours(){const s=new Date(this.date);s.setDate(1),s.setMonth(s.getMonth()+1),s.setDate(s.getDate()-1);let t=s.getDate();return Array.from({length:t},(n,_)=>_+1)}},watch:{date:function(s,t){const n=new Date(this.date);this.mois=n.getMonth()+1,this.annee=n.getFullYear()},mois:function(s,t){const n=new Date(this.date);n.setMonth(s-1),this.$emit("changeDate",n)},annee:function(s,t){const n=new Date(this.date);n.setFullYear(s),this.$emit("changeDate",n)}},methods:{nomJour(s){const t=new Date(this.date);return t.setDate(s),t.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let s=[];const t=new Date;for(let n=1;n<=12;n++){t.setMonth(n-1);let _=t.toLocaleString("fr-FR",{month:"long"});s.push({id:n,libelle:_})}return s},listeAnnees(){const t=new Date().getFullYear(),n=1;let _=[];for(let l=t-n;l<=t+n;l++)_.push(l);return _},canAdd(s){if(!this.canAddEvent)return!1;let t=this.addDateDebut;t===void 0?t=new Date("2000-01-01"):t==="now"?t=new Date:t=new Date(t);let n=this.addDateFin;n===void 0?n=new Date("2500-01-01"):n==="now"?n=new Date:n=new Date(n);let _=new Date(this.date);return _.setDate(s),t=this.isoDateOnly(t),n=this.isoDateOnly(n),_=this.isoDateOnly(_),!(_<t||_>n)},addEvent(s){const t=new Date(this.date);t.setDate(s.currentTarget.dataset.jour),this.$emit("addEvent",t,s)},prevMois(){const s=new Date(this.date);s.setMonth(s.getMonth()-1),this.$emit("changeDate",s)},nextMois(){const s=new Date(this.date);s.setMonth(s.getMonth()+1),this.$emit("changeDate",s)},eventsByJour(s){const t=new Date(this.date);let n={};for(let _ in this.events){let l=this.events[_];l.date.getFullYear()===t.getFullYear()&&l.date.getMonth()+1===t.getMonth()+1&&l.date.getDate()===s&&(n[_]=l)}return n},isoDateOnly(s){const t=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),_=String(s.getDate()).padStart(2,"0");return`${t}-${n}-${_}`}}},Da={class:"calendar"},Pa={class:"recherche"},Ma={class:"recherche btn-group"},Ra=["value"],Aa=["value"],$a={class:"table table-bordered table-hover table-sm"},Ua=["data-jour"],wa={class:"nom-jour"},Ia={class:"numero-jour"},ja={class:"num-jour badge bg-secondary rounded-circle"},La={key:0},qa=["data-jour"];function Oa(s,t,n,_,l,r){const o=A;return i(),a("div",Da,[e("div",Pa,[e("div",Ma,[e("button",{class:"btn btn-light",id:"prevMois",onClick:t[0]||(t[0]=(...d)=>r.prevMois&&r.prevMois(...d)),title:"Mois précédant"},[f(o,{name:"chevron-left"})]),D(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":t[1]||(t[1]=d=>l.mois=d)},[(i(!0),a(v,null,g(r.listeMois(),d=>(i(),a("option",{value:d.id},u(d.libelle),9,Ra))),256))],512),[[I,l.mois]]),D(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":t[2]||(t[2]=d=>l.annee=d)},[(i(!0),a(v,null,g(r.listeAnnees(),d=>(i(),a("option",{value:d},u(d),9,Aa))),256))],512),[[I,l.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:t[3]||(t[3]=(...d)=>r.nextMois&&r.nextMois(...d)),title:"Mois suivant"},[f(o,{name:"chevron-right"})])])]),e("table",$a,[(i(!0),a(v,null,g(r.listeJours,d=>(i(),a("tr",{"data-jour":d},[e("th",wa,u(r.nomJour(d)),1),e("th",Ia,[e("div",ja,u(d<10?"0"+d.toString():d),1)]),e("td",null,[(i(!0),a(v,null,g(r.eventsByJour(d),(h,p)=>(i(),a("div",{class:"event",style:te("border-color:"+h.color+";background-color:"+h.bgcolor),key:p},[(i(),k(se(h.component),{event:h},null,8,["event"]))],4))),128)),r.canAdd(d)?(i(),a("div",La,[e("button",{onClick:t[4]||(t[4]=(...h)=>r.addEvent&&r.addEvent(...h)),"data-jour":d,class:"btn btn-light btn-sm"},[f(o,{name:"plus"}),c(" Nouvel événement ")],8,qa)])):m("",!0)])],8,Ua))),256))])])}const Ha=C(Ta,[["render",Oa],["__scopeId","data-v-51bbc42d"]]);const Na={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(s){modAjax(s.currentTarget,t=>{this.suivi.refresh()})},supprimer(s){popConfirm(s.currentTarget,t=>{this.suivi.refresh()})},valider(s){unicaenVue.axios.get(this.validerUrl).then(t=>{this.suivi.refresh()})},devalider(s){popConfirm(s.currentTarget,t=>{this.suivi.refresh()})}}},za={class:"event-content"},Fa={class:"mission"},Ba={key:0,class:"badge bg-success"},Ga={class:"horaires"},Ya={key:0,class:"badge bg-secondary"},Ja={key:0,class:"description"},Qa={class:"event-actions"},Wa={class:"btn-group btn-group-sm"},Xa=["data-url"],Za=["data-url"],Ka=["data-url"],eo=["data-url"];function to(s,t,n,_,l,r){const o=A;return i(),a(v,null,[e("div",za,[e("p",Fa,[c(u(n.event.mission.libelleCourt)+" ",1),n.event.valide?(i(),a("span",Ba,"Validé")):m("",!0)]),e("p",Ga,[c(" de "+u(r.heureDebut)+" à "+u(r.heureFin)+", soit "+u(r.heures)+" heure"+u(r.heures<2?"":"s")+" ",1),n.event.formation?(i(),a("span",Ya,"En formation")):m("",!0)]),n.event.description?(i(),a("p",Ja,u(n.event.description),1)):m("",!0)]),e("div",Qa,[e("div",Wa,[n.event.canEdit?(i(),a("button",{key:0,class:"btn btn-light",onClick:t[0]||(t[0]=(...d)=>r.modifier&&r.modifier(...d)),title:"Modifier le suivi","data-url":l.modifierUrl},[f(o,{name:"pen-to-square"})],8,Xa)):m("",!0),n.event.canValider?(i(),a("button",{key:1,class:"btn btn-light",onClick:t[1]||(t[1]=(...d)=>r.valider&&r.valider(...d)),title:"Valider le suivi","data-url":l.validerUrl},[f(o,{name:"check",class:"text-success"})],8,Za)):m("",!0),n.event.canDevalider?(i(),a("button",{key:2,class:"btn btn-light",onClick:t[2]||(t[2]=(...d)=>r.devalider&&r.devalider(...d)),title:"Dévalider le suivi","data-url":l.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[f(o,{name:"xmark",class:"text-danger"})],8,Ka)):m("",!0),n.event.canSupprimer?(i(),a("button",{key:3,class:"btn btn-light",onClick:t[3]||(t[3]=(...d)=>r.supprimer&&r.supprimer(...d)),title:"Supprimer le suivi","data-url":l.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[f(o,{name:"trash-can",class:"text-danger"})],8,eo)):m("",!0)])])],64)}const J=C(Na,[["render",to],["__scopeId","data-v-17cb1f29"]]),so=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"})),no={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(s){this.date=s},ajouter(s,t){const n={intervenant:this.intervenant,date:s.toISOString().slice(0,10)};t.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",n),modAjax(t.currentTarget,_=>{this.refresh()})},refresh(){const s=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let t=0,n=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(_=>{let l=[];for(let r in _.data){let o=_.data[r];n[o.mission.id]===void 0&&(n[o.mission.id]=s[t],t++),o.valide&&(o.bgcolor="#d0eddb"),o.color=n[o.mission.id],o.component=ne(J),o.date=new Date(o.date),o.intervenant=this.intervenant,l.push(o)}this.suivi=l,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function ro(s,t,n,_,l,r){const o=Ha;return i(),k(o,{date:l.date,onChangeDate:r.changeDate,onAddEvent:r.ajouter,"can-add-event":n.canAddMission,addDateFin:"now",events:l.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const io=C(no,[["render",ro]]),ao=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"}));function oo(s){for(let t in s)for(let n in s[t])Q(s[t][n],t)}function lo(){let s=document.getElementById("unicaen-vue-toast-container");return s||(s=document.createElement("div"),s.id="unicaen-vue-toast-container",s.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(s)),s}function uo(s){return s=co(s),s=ho(s),s}function co(s){const t=document.createElement("div");t.innerHTML=s;const n=t.querySelector(".alert");return n?n.innerHTML:t.innerHTML}function ho(s){const t=document.createElement("div");return t.innerHTML=s,t.querySelectorAll("i.fas").forEach(_=>_.style.display="none"),t.innerHTML}function Q(s,t,n=null){const _={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},l={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},r=document.createElement("button");r.classList.add("btn-close","btn-close-white","h5"),r.style.float="right",r.setAttribute("data-bs-dismiss","toast"),r.setAttribute("aria-label","Close");const o=document.createElement("i");o.classList.add("icon","fas",`fa-${l[t]}`),o.style.float="left",o.style.fontSize="26pt",o.style.paddingLeft=".4rem",o.style.marginTop=".4rem",o.style.paddingRight="1rem";const d=document.createElement("div");d.classList.add("toast-body"),d.innerHTML=uo(s);const h=document.createElement("div");h.appendChild(r),h.appendChild(o),h.appendChild(d);const p=document.createElement("div");p.classList.add("toast","text-white",_[t]?_[t]:"bg-secondary"),p.setAttribute("role","alert"),p.setAttribute("aria-live","assertive"),p.setAttribute("aria-atomic","true"),t==="error"&&s.length>500&&p.setAttribute("style","width:700px"),p.appendChild(h),lo().appendChild(p),n==null&&(n={animation:!0,delay:t==="warning"?15e3:5e3,autohide:t!=="error"}),new bootstrap.Toast(p,n).show()}const q={toast:Q,toasts:oo};let j={...re};j.interceptors.request.use(s=>{if(s.submitter){let t=s.msg?s.msg:"Action en cours";s.popover!=null&&s.popover.dispose(),s.popover=new bootstrap.Popover(s.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+t,html:!0,trigger:"focus"}),s.popover.show()}return s});j.interceptors.response.use(s=>{if(s.messages=s.data.messages,s.data=s.data.data,s.hasErrors=!!(s.messages&&s.messages.error&&s.messages.error.length>0),s.config.popover){var t=s.config.popover;let n="";for(ns in s.messages)for(mid in s.messages[ns])n+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+s.messages[ns][mid]+"</div>";n?(t._config.content=n,t.setContent(),setTimeout(()=>{t.dispose()},5e3)):t.dispose()}return s.messages&&q.toasts(s.messages),s},s=>{let t=s.response.data;s.response.status==403?t="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":t=s.response.data,q.toast(t,"error")});j.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const mo={uvAxios:j},O={axios:mo.uvAxios,flashMessenger:q,url:(s,t,n)=>{let _=window.__unicaenVueBaseUrl;if(t)for(let r in t)s=s.replace(`:${r}`,t[r]);let l=n?O.encodeUrlQueryParam(n):null;return _+s+(l?`?${l}`:"")},encodeUrlQueryParam:(s,t)=>{var n=[];for(var _ in s)if(s.hasOwnProperty(_)){var l=s[_],r=t?t+"["+encodeURIComponent(_)+"]":encodeURIComponent(_);if(typeof l=="object"&&l!==null)n.push(O.encodeUrlQueryParam(l,r));else{var o=encodeURIComponent(l);n.push(r+"="+o)}}return n.join("&")}};window.unicaenVue=O;const _o={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{type:Array,required:!0},canMiseEnPaiement:{type:Boolean,required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),urlMiseEnPaiement:unicaenVue.url("paiement/etat-demande-paiement"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:!1,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(s){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let t=document.getElementById("formRechercheDemandeMiseEnPaiement"),n=new FormData(t),_=document.getElementById("btn-rdmep"),l=document.getElementById("btn-rdmep-inprogress");l.classList.remove("d-none"),_.classList.add("d-none"),_.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,n,{}).then(r=>{this.dispatchDatas(r.data),_.disabled=!1,l.classList.add("d-none"),_.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(d,h){d.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(d=>{let h=d.data;this.dotation=h.dotation,this.liquidation=h.liquidation,this.refreshTotalConsommation()})}).catch(r=>{console.error(r)})},processDemandeMiseEnPaiement(s){let t=document.getElementById("formProcessDemandeMiseEnPaiement"),n=new FormData(t);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>=this.totalConsommationRessourcePropre||!this.haveDotation){let _=document.getElementById("btn-pdmep"),l=document.getElementById("btn-pdmep-inprogress");l.classList.remove("d-none"),_.classList.add("d-none"),_.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,n,{}).then(r=>{this.findDemandeMiseEnPaiement(),_.disabled=!1,l.classList.add("d-none"),_.classList.remove("d-none")}).catch(r=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let s=0,t=0,n=0;s=parseFloat(this.liquidation.paieEtat),t=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(l,r){l.hasAttribute("data-paie-etat")&&l.checked&&(s+=parseFloat(l.getAttribute("data-paie-etat")),n+=parseFloat(l.getAttribute("data-paie-etat"))),l.hasAttribute("data-ressource-propre")&&l.checked&&(t+=parseFloat(l.getAttribute("data-ressource-propre")),n+=parseFloat(l.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=s.toFixed(2),this.totalConsommationRessourcePropre=t.toFixed(2),this.totalConsommation=n.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(s){let t=0;return s.forEach((n,_)=>{n.centreCout.code!=""&&(n.missionId!=""||n.serviceRefId!=""?n.domaineFonctionnel.code!=""&&(t+=n.heuresAPayer):t+=n.heuresAPayer)}),t.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalNonPayable(s){let t=0;return s.forEach((n,_)=>{(n.centreCout.code==""||(n.missionId!=""||n.serviceRefId!="")&&n.domaineFonctionnel.code=="")&&(t+=n.heuresAPayer)}),t.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePaieEtat(s){let t=0;return s.forEach((n,_)=>{n.centreCout.typeRessourceCode=="paie-etat"&&(t+=n.heuresAPayer)}),t.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(s){let t=0;return s.forEach((n,_)=>{n.centreCout.typeRessourceCode=="ressources-propres"&&(t+=n.heuresAPayer)}),t.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(s){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[],console.log(s);for(const[t,n]of Object.entries(s))switch(n.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(n),this.intervenants.push(n);break;case"Intervenant permanent":this.permanents.push(n),this.intervenants.push(n);break;case"Étudiant":this.etudiants.push(n),this.intervenants.push(n);break;default:this.autres.push(n),this.intervenants.push(n)}},toggleCheckbox(s){let t=Array.from(document.getElementsByClassName(s.target.className));s.target.checked?t.forEach(function(n,_){n.checked=!0}):t.forEach(function(n,_){n.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(s){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:s.datasIntervenant.code})},formattedHETD(s){return Util.formattedHeures(s,!1)}}},fo=e("h1",null,"Demande de mise en paiement par lots",-1),po={class:"card text-dark bg-light"},vo=e("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1),bo={class:"card-body"},go={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},yo={class:"mb-3"},xo=e("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1),Co=["value"],ko={class:"mb-3"},Vo=e("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),c("  Veuillez patienter... ")],-1),So=["disabled"],Eo=e("div",{class:"alert alert-info",role:"alert"},[c(" Seules les HETD "),e("strong",null,"(hors référentiel)"),c(" avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisées. Pour les autres, il faudra passer sur chaque fiches intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ")],-1),To={key:0},Do={key:0,class:"alert alert-danger",role:"alert"},Po={class:"table table-bordered caption-top"},Mo=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Budget"),e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressource propre"),e("th",{class:"fw-bold",scope:"col"},"Total")])],-1),Ro=e("td",null,"Dotation",-1),Ao={class:"fw-bold"},$o=e("td",null,"Consommation",-1),Uo={class:"fw-bold"},wo={id:"dmep",class:"accordion"},Io={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},jo={key:0,class:"accordion-item"},Lo={id:"dmep-permanents-heading",class:"accordion-header"},qo={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},Oo={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},Ho={class:"accordion-body"},No={class:"table"},zo={scope:"col"},Fo=e("th",{scope:"col"},"Intervenant",-1),Bo=e("th",null,"HETD payables",-1),Go=e("th",null,"HETD non payables",-1),Yo=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Jo=["href"],Qo=["title"],Wo={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Xo={key:1,class:"accordion-item"},Zo={id:"dmep-vacataires-heading",class:"accordion-header"},Ko={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},el={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},tl={class:"accordion-body"},sl={class:"table"},nl=e("th",null,"Intervenant",-1),rl=e("th",null,"HETD payables",-1),il=e("th",null,"HETD non payables",-1),al=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],ol=["href"],ll=["title"],dl={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},ul={key:2,class:"accordion-item"},cl={id:"dmep-etudiants-heading",class:"accordion-header"},hl={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},ml={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},_l={class:"accordion-body"},fl={class:"table"},pl=e("th",null,"Intervenant",-1),vl=e("th",null,"HETD payables",-1),bl=e("th",null,"HETD non payables",-1),gl=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],yl=["href"],xl=["title"],Cl={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},kl={key:3,class:"accordion-item"},Vl={id:"dmep-autres-heading",class:"accordion-header"},Sl={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},El={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},Tl={class:"accordion-body"},Dl={class:"table"},Pl=e("th",null,"Intervenant",-1),Ml=e("th",null,"HETD payables",-1),Rl=e("th",null,"HETD non payables",-1),Al=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],$l=["href"],Ul=["title"],wl={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Il={key:4,class:"mt-3"},jl=e("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),c("  Veuillez patienter... ")],-1),Ll=["disabled"],ql=["href"];function Ol(s,t,n,_,l,r){return i(),a(v,null,[fo,e("div",po,[vo,e("div",bo,[e("form",go,[e("div",yo,[xo,c("  "),D(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.selectedStructure=o),class:"form-select",name:"structure"},[(i(!0),a(v,null,g(n.structures,o=>(i(),a("option",{value:o.id},u(o.libelle),9,Co))),256))],512),[[I,l.selectedStructure]])]),e("div",ko,[Vo,e("button",{id:"btn-rdmep",disabled:!l.selectedStructure,class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=(...o)=>r.findDemandeMiseEnPaiement&&r.findDemandeMiseEnPaiement(...o))}," Lancer la recherche ",8,So)])])])]),Eo,r.haveDotation?(i(),a("div",To,[l.alertDotation?(i(),a("div",Do," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):m("",!0),e("table",Po,[Mo,e("tbody",null,[e("tr",null,[Ro,e("td",null,u(r.formattedHETD(this.dotation.paieEtat))+" HETD",1),e("td",null,u(r.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),e("td",Ao,u(r.formattedHETD(this.dotation.total))+" HETD",1)]),e("tr",null,[$o,e("td",null,[e("span",{class:P(r.alertPaieEtat)},u(r.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),e("td",null,[e("span",{class:P(r.alertRessourcePropre)},u(r.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),e("td",Uo,u(r.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):m("",!0),e("div",wo,[e("form",Io,[this.permanents.length>0?(i(),a("div",jo,[e("h2",Lo,[e("button",qo,u(this.permanents.length)+" Permanent(s) ",1)]),e("div",Oo,[e("div",Ho,[e("table",No,[e("thead",null,[e("tr",null,[e("th",zo,[e("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:t[2]||(t[2]=(...o)=>r.toggleCheckbox&&r.toggleCheckbox(...o))})]),Fo,Bo,Go])]),e("tbody",null,[(i(!0),a(v,null,g(this.permanents,o=>(i(),a("tr",null,[e("td",null,[e("input",{id:"permanent-"+o.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(o.heures),"data-ressource-propre":r.totalRessourcePropre(o.heures),disabled:r.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:r.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:t[3]||(t[3]=d=>r.refreshTotalConsommation())},null,40,Yo)]),e("td",null,[e("a",{href:r.urlIntervenant(o),target:"_blank"},u(o.datasIntervenant.nom_usuel.toUpperCase()+" "+o.datasIntervenant.prenom),9,Jo)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+r.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(o.heures))+" h",9,Qo)]),e("td",null,[e("span",Wo,u(r.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):m("",!0),this.vacataires.length>0?(i(),a("div",Xo,[e("h2",Zo,[e("button",Ko,u(this.vacataires.length)+" Vacataire(s) ",1)]),e("div",el,[e("div",tl,[e("table",sl,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:t[4]||(t[4]=(...o)=>r.toggleCheckbox&&r.toggleCheckbox(...o))})]),nl,rl,il])]),e("tbody",null,[(i(!0),a(v,null,g(this.vacataires,o=>(i(),a("tr",null,[e("td",null,[e("input",{id:"vacataire-"+o.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(o.heures),"data-ressource-propre":r.totalRessourcePropre(o.heures),disabled:r.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:r.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:t[5]||(t[5]=d=>r.refreshTotalConsommation())},null,40,al)]),e("td",null,[e("a",{href:r.urlIntervenant(o),target:"_blank"},u(o.datasIntervenant.nom_usuel.toUpperCase()+" "+o.datasIntervenant.prenom),9,ol)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+r.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(o.heures))+" h",9,ll)]),e("td",null,[e("span",dl,u(r.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):m("",!0),this.etudiants.length>0?(i(),a("div",ul,[e("h2",cl,[e("button",hl,u(this.etudiants.length)+" Etudiant(s) ",1)]),e("div",ml,[e("div",_l,[e("table",fl,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:t[6]||(t[6]=(...o)=>r.toggleCheckbox&&r.toggleCheckbox(...o))})]),pl,vl,bl])]),e("tbody",null,[(i(!0),a(v,null,g(this.etudiants,o=>(i(),a("tr",null,[e("td",null,[e("input",{id:"etudiant-"+o.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(o.heures),"data-ressource-propre":r.totalRessourcePropre(o.heures),disabled:r.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:r.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:t[7]||(t[7]=d=>r.refreshTotalConsommation())},null,40,gl)]),e("td",null,[e("a",{href:r.urlIntervenant(o),target:"_blank"},u(o.datasIntervenant.nom_usuel.toUpperCase()+" "+o.datasIntervenant.prenom),9,yl)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+r.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(o.heures))+" h",9,xl)]),e("td",null,[e("span",Cl,u(r.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):m("",!0),this.autres.length>0?(i(),a("div",kl,[e("h2",Vl,[e("button",Sl,u(this.autres.length)+" Autre(s) ",1)]),e("div",El,[e("div",Tl,[e("table",Dl,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:t[8]||(t[8]=(...o)=>r.toggleCheckbox&&r.toggleCheckbox(...o))})]),Pl,Ml,Rl])]),e("tbody",null,[(i(!0),a(v,null,g(this.etudiants,o=>(i(),a("tr",null,[e("td",null,[e("input",{id:"autre-"+o.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(o.heures),"data-ressource-propre":r.totalRessourcePropre(o.heures),disabled:r.totalPayable(o.heures)==0,name:"intervenant["+o.datasIntervenant.id+"]",title:r.totalPayable(o.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:t[9]||(t[9]=d=>r.refreshTotalConsommation())},null,40,Al)]),e("td",null,[e("a",{href:r.urlIntervenant(o),target:"_blank"},u(o.datasIntervenant.nom_usuel.toUpperCase()+" "+o.datasIntervenant.prenom),9,$l)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(o.heures)+" HETD en paie état / "+r.totalRessourcePropre(o.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(o.heures))+" h",9,Ul)]),e("td",null,[e("span",wl,u(r.totalNonPayable(o.heures))+" h",1)])]))),256))])])])])])):m("",!0),this.intervenants.length>0?(i(),a("div",Il,[jl,e("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:t[10]||(t[10]=(...o)=>r.processDemandeMiseEnPaiement&&r.processDemandeMiseEnPaiement(...o))}," Enregistrer les demandes de paiement ",8,Ll),this.canMiseEnPaiement?(i(),a("a",{key:0,id:"btn-mep",href:this.urlMiseEnPaiement,class:"ms-2 btn btn-secondary"}," Aller au mise en paiement ",8,ql)):m("",!0)])):m("",!0)])])],64)}const Hl=C(_o,[["render",Ol]]),Nl=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"}));const zl={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},V=s=>(H("data-v-d4a24889"),s=s(),N(),s),Fl=V(()=>e("h2",null,"Paramètres généraux ou bien selon le statut",-1)),Bl={class:"table table-bordered table-condensed table-extra-condensed"},Gl=V(()=>e("tr",null,[e("th",null,"Paramètre général"),e("th",null,"Valeur")],-1)),Yl=V(()=>e("h2",null,"Services à payer",-1)),Jl={class:"card"},Ql={class:"card-header"},Wl={class:"badge bg-primary"},Xl={class:"card-body"},Zl={class:"row lap"},Kl={class:"col-md-6"},ed=V(()=>e("h6",null,"Heures à payer",-1)),td={class:"table table-bordered table-xs"},sd={key:0,rowspan:"2"},nd={key:1,rowspan:"2"},rd=V(()=>e("th",{colspan:"2"},"Taux de rému.",-1)),id=V(()=>e("th",{colspan:"3"},"Heures",-1)),ad=V(()=>e("tr",null,[e("th",null,"Nom"),e("th",null,"Valeur"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")],-1)),od={key:0},ld=["title"],dd={key:1},ud=["title"],cd={class:"col-md-6"},hd=V(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),c(" correspondantes")],-1)),md={class:"table table-bordered table-xs"},_d=V(()=>e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{colspan:"3"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")])],-1)),fd=["title"],pd=["title"],vd={key:0},bd={class:"badge bg-info"},gd={key:0,class:"row"},yd=V(()=>e("div",{class:"col-md-6"},null,-1)),xd={class:"col-md-6"},Cd=V(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),c(" en trop")],-1)),kd={class:"table table-bordered table-xs"},Vd=V(()=>e("thead",{class:"bg-danger"},[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{rowspan:"2"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date")])],-1)),Sd=["title"],Ed=["title"];function Td(s,t,n,_,l,r){return i(),a(v,null,[Fl,e("table",Bl,[Gl,(i(!0),a(v,null,g(n.parametres,(o,d)=>(i(),a("tr",{key:d},[e("th",null,u(d),1),e("td",null,u(o),1)]))),128))]),Yl,(i(!0),a(v,null,g(n.servicesAPayer,(o,d)=>(i(),a("div",{key:d},[e("div",Jl,[e("div",Ql,[e("span",Wl,u(o.type),1),c(" "+u(o.libelle),1)]),e("div",Xl,[e("ul",null,[(i(!0),a(v,null,g(o.parametres,(h,p)=>(i(),a("li",{key:p},u(p)+" : "+u(h),1))),128))]),(i(!0),a(v,null,g(o.laps,h=>(i(),a("div",Zl,[e("div",Kl,[ed,e("table",td,[e("thead",null,[e("tr",null,[o.type!="Référentiel"?(i(),a("th",sd,"Volume horaire")):(i(),a("th",nd,"Volumes horaires")),rd,id]),ad]),e("tbody",null,[e("tr",null,[o.type!="Référentiel"?(i(),a("td",od,[e("abbr",{class:"badge bg-secondary",title:h.volumeHoraireHisto},u(h.volumeHoraireId),9,ld),c(" "+u(h.volumeHoraire),1)])):(i(),a("td",dd,[(i(!0),a(v,null,g(h.volumeHoraireId,p=>(i(),a("div",null,[e("abbr",{class:"badge bg-secondary",title:p.HISTO},u(p.ID),9,ud),c(" "+u(p.HEURES)+"h ",1)]))),256))])),e("td",null,u(h.tauxRemu),1),e("td",null,u(h.tauxValeur)+"€",1),e("td",null,u(h.heures),1),e("td",null,u(h.heuresAA),1),e("td",null,u(h.heuresAC),1)])])])]),e("div",cd,[hd,e("table",md,[_d,e("tbody",null,[(i(!0),a(v,null,g(h.misesEnPaiement,p=>(i(),a("tr",{key:p.id},[e("td",null,[e("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+p.heuresTotal+`
Domaine fonctionnel : `+p.domaineFonctionnel+`
`+p.historique},u(p.id),9,fd)]),e("td",null,[e("abbr",{title:p.centreCoutLibelle},u(p.centreCoutCode),9,pd)]),e("td",null,u(p.periodePaiement),1),e("td",null,u(p.date),1),e("td",null,u(p.heures),1),e("td",null,u(p.heuresAA),1),e("td",null,u(p.heuresAC),1)]))),128))])]),h.heuresRestantes!="0,00"?(i(),a("div",vd,[e("span",bd,u(h.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):m("",!0)])]))),256)),o.misesEnPaiement&&o.misesEnPaiement.length>0?(i(),a("div",gd,[yd,e("div",xd,[Cd,e("table",kd,[Vd,e("tbody",null,[(i(!0),a(v,null,g(o.misesEnPaiement,h=>(i(),a("tr",{key:h.id},[e("td",null,[e("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+h.domaineFonctionnel+`
`+h.historique},u(h.id),9,Sd)]),e("td",null,[e("abbr",{title:h.centreCoutLibelle},u(h.centreCoutCode),9,Ed)]),e("td",null,u(h.periodePaiement),1),e("td",null,u(h.date),1),e("td",null,u(h.heures),1)]))),128))])])])])):m("",!0)])])]))),128))],64)}const Dd=C(zl,[["render",Td],["__scopeId","data-v-d4a24889"]]),Pd=Object.freeze(Object.defineProperty({__proto__:null,default:Dd},Symbol.toStringTag,{value:"Module"})),Md={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(s){this.selectedFile=s.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(s){s.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let t=document.getElementById("btn-import"),n=document.getElementById("btn-import-inprogress");n.classList.remove("d-none"),t.classList.add("d-none"),t.disabled=!0;let _=document.getElementById("formImport"),l=new FormData(_);unicaenVue.axios.post(this.importUrl,l,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{let o=r.data;this.fileErrors=o.file,this.intervenantMissing=o.intervenant,o.message.length!=0?this.messageErrors=o.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",t.disabled=!1,n.classList.add("d-none"),t.classList.remove("d-none")}).catch(r=>{console.error("Error uploading")})}}},Rd={class:"card text-dark bg-light"},Ad=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),$d={class:"card-body"},Ud={key:0,class:"alert alert-danger",role:"alert"},wd={key:1,class:"alert alert-success",role:"alert"},Id={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},jd=e("p",{class:"fs-9 text"},[c(" Vous pouvez utiliser le modèle directement extrait de winpaie "),e("strong",null,"(format .xlsx ou .ods)"),c(" ou créer votre modèle générique de classeur "),e("strong",null,"(format .xlsx ou .ods)"),c(" incluant 3 colonnes : insee,numero pec, nom. ")],-1),Ld={class:"mb-3"},qd=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),Od=ie('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),Hd={class:"mb-3"},Nd=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),c("  Veuillez patienter... ")],-1),zd={key:0,id:"fileErrors",class:"card text-dark bg-light"},Fd=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),Bd={class:"card-body"},Gd={key:0},Yd=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),Jd={key:1},Qd=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function Wd(s,t,n,_,l,r){return i(),a(v,null,[e("div",Rd,[Ad,e("div",$d,[this.messageErrors?(i(),a("div",Ud,u(this.messageErrors),1)):m("",!0),this.messageConfirm?(i(),a("div",wd,u(this.messageConfirm),1)):m("",!0),e("form",Id,[jd,e("div",Ld,[qd,c("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:t[0]||(t[0]=(...o)=>r.handleFileUpload&&r.handleFileUpload(...o))},null,32)]),Od,e("div",Hd,[Nd,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:t[1]||(t[1]=(...o)=>r.importFile&&r.importFile(...o))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(i(),a("div",zd,[Fd,e("div",Bd,[this.fileErrors.length!=0?(i(),a("div",Gd,[Yd,e("ul",null,[(i(!0),a(v,null,g(this.fileErrors,o=>(i(),a("li",null,u(),1))),256))])])):m("",!0),this.intervenantMissing.length!=0?(i(),a("div",Jd,[Qd,e("ul",null,[(i(!0),a(v,null,g(this.intervenantMissing,o=>(i(),a("li",null,u(o),1))),256))])])):m("",!0)])])):m("",!0)],64)}const Xd=C(Md,[["render",Wd]]),Zd=Object.freeze(Object.defineProperty({__proto__:null,default:Xd},Symbol.toStringTag,{value:"Module"})),Kd={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(s){modAjax(s.target,t=>{this.$emit("refreshListe")})},ajoutValeur(s){modAjax(s.target,t=>{this.$emit("refreshListe")})},saisieValeur(s){s.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:s.currentTarget.dataset.id}),modAjax(s.currentTarget,t=>{this.$emit("refreshListe")})},refreshListe(s){this.$emit("refreshListe")},supprimer(s){popConfirm(s.target,t=>{this.$emit("refreshListe")})},supprimerValeur(s){s.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:s.currentTarget.dataset.id}),popConfirm(s.currentTarget,t=>{this.$emit("refreshListe")})},refresh(s){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:s.id})).then(t=>{this.$emit("refresh",t.data)})}}},eu={class:"card-header"},tu={style:{display:"inline"}},su={class:"float-end"},nu=["href"],ru=["href"],iu={class:"card-body"},au={key:0},ou=e("br",null,null,-1),lu={class:""},du={class:"row align-items-start"},uu={class:"col-md-6"},cu={class:"col"},hu=["data-id"],mu=["data-id"],_u=["href"],fu={key:1,class:"row"},pu={class:"col-md-7"},vu=e("br",null,null,-1),bu={class:"row align-items-start"},gu={class:"col-md-8"},yu={class:"col-md-auto"},xu=["data-id"],Cu=["data-id"],ku=["href"],Vu={class:"col"},Su=e("br",null,null,-1),Eu={key:0},Tu={key:0};function Du(s,t,n,_,l,r){const o=A,d=T("u-heures"),h=R,p=T("taux",!0);return i(),a(v,null,[e("div",{class:P(["card",{"ms-5":n.taux.tauxRemu}])},[e("div",eu,[e("h3",tu,u(n.taux.libelle)+" ("+u(n.taux.code)+")",1),e("div",su,[n.taux.canEdit?(i(),a("a",{key:0,href:l.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=y((...x)=>r.saisie&&r.saisie(...x),["prevent"]))},[f(o,{name:"pen-to-square"}),c(" Modifier")],8,nu)):m("",!0),c("   "),n.taux.canDelete?(i(),a("a",{key:1,href:l.supprimerUrl,class:"btn btn-danger",onClick:t[1]||(t[1]=y((...x)=>r.supprimer&&r.supprimer(...x),["prevent"]))},[f(o,{name:"trash-can"}),c(" Supprimer")],8,ru)):m("",!0)])]),e("div",iu,[n.taux.tauxRemu?m("",!0):(i(),a("div",au,[c(" Modification :"),ou,e("ul",null,[(i(!0),a(v,null,g(n.taux.tauxRemuValeurs,x=>(i(),a("div",{key:x.id},[e("li",lu,[e("div",du,[e("div",uu,[f(d,{valeur:x.valeur},null,8,["valeur"]),c("€/h à partir du "),f(h,{value:x.dateEffet},null,8,["value"])]),e("div",cu,[n.taux.canEdit?(i(),a("a",{key:0,class:"text-primary",onClick:t[2]||(t[2]=y((...b)=>r.saisieValeur&&r.saisieValeur(...b),["prevent"])),"data-id":x.id},[f(o,{name:"pen-to-square"})],8,hu)):m("",!0),c("   "),n.taux.canEdit?(i(),a("a",{key:1,class:"text-primary",onClick:t[3]||(t[3]=y((...b)=>r.supprimerValeur&&r.supprimerValeur(...b),["prevent"])),"data-id":x.id},[f(o,{name:"trash-can"})],8,mu)):m("",!0)])])])]))),128))]),n.taux.canEdit?(i(),a("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:t[4]||(t[4]=y((...x)=>r.ajoutValeur&&r.ajoutValeur(...x),["prevent"]))},[f(o,{name:"plus"}),c(" Ajouter une valeur ")],8,_u)):m("",!0)])),n.taux.tauxRemu?(i(),a("div",fu,[e("div",pu,[c(" Modification :"),vu,e("ul",null,[(i(!0),a(v,null,g(n.taux.tauxRemuValeurs,x=>(i(),a("div",null,[e("li",null,[e("div",bu,[e("div",gu,[c(" Coéfficient de "),f(d,{valeur:x.valeur},null,8,["valeur"]),c(" à partir du "),f(h,{value:x.dateEffet},null,8,["value"])]),e("div",yu,[n.taux.canEdit?(i(),a("a",{key:0,class:"text-primary",onClick:t[5]||(t[5]=y((...b)=>r.saisieValeur&&r.saisieValeur(...b),["prevent"])),"data-id":x.id},[f(o,{name:"pen-to-square"})],8,xu)):m("",!0),c("   "),n.taux.canEdit?(i(),a("a",{key:1,class:"text-primary",onClick:t[6]||(t[6]=y((...b)=>r.supprimerValeur&&r.supprimerValeur(...b),["prevent"])),"data-id":x.id},[f(o,{name:"trash-can"})],8,Cu)):m("",!0)])])])]))),256))]),n.taux.canEdit?(i(),a("a",{key:0,href:l.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:t[7]||(t[7]=y((...x)=>r.ajoutValeur&&r.ajoutValeur(...x),["prevent"]))},[f(o,{name:"plus"})],8,ku)):m("",!0)]),e("div",Vu,[c(" Valeurs calculées (indexées sur le taux "+u(n.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(i(!0),a(v,null,g(n.taux.tauxRemuValeursIndex,x=>(i(),a("div",null,[e("li",null,[f(d,{valeur:x.valeur},null,8,["valeur"]),c("€/h à partir du "),f(h,{value:x.date},null,8,["value"])])]))),256))]),Su])])):m("",!0)])],2),n.taux.tauxRemu?m("",!0):(i(),a("div",Eu,[(i(!0),a(v,null,g(n.listeTaux,x=>(i(),a("div",{key:x},[x.tauxRemu&&x.tauxRemu.id===n.taux.id?(i(),a("div",Tu,[(i(),k(p,{onSupprimer:r.supprimer,onRefreshListe:r.refreshListe,key:n.taux.id,taux:x,listeTaux:n.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):m("",!0)]))),128))]))],64)}const W=C(Kd,[["render",Du]]),Pu=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"})),Mu={components:{taux:W},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(s){modAjax(s.currentTarget,t=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(s){let t=Util.json.indexById(this.listeTaux,s.id);this.listeTaux[t]=s},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(s=>{this.listeTaux=s.data})}}},Ru=["href"];function Au(s,t,n,_,l,r){const o=T("taux");return i(),a(v,null,[(i(!0),a(v,null,g(l.listeTaux,d=>(i(),a("div",null,[d.tauxRemu?m("",!0):(i(),k(o,{onSupprimer:r.supprimer,onRefreshListe:r.refreshListe,key:d.id,taux:d,listeTaux:l.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),n.canEditTaux?(i(),a("a",{key:0,class:"btn btn-primary",href:l.ajoutUrl,onClick:t[0]||(t[0]=y((...d)=>r.ajout&&r.ajout(...d),["prevent"]))},"Ajout d'un nouveau taux",8,Ru)):m("",!0)],64)}const $u=C(Mu,[["render",Au]]),Uu=Object.freeze(Object.defineProperty({__proto__:null,default:$u},Symbol.toStringTag,{value:"Module"})),wu={name:"listeContrat",data(){return{dataUrl:unicaenVue.url("signature/data-contrat"),lines:[]}},methods:{contratUrl(s){return unicaenVue.url("intervenant/:intervenant/contrat",{intervenant:s})},getDocumentUrl(s){return unicaenVue.url("signature/:signature/get-document",{signature:s})},updateSignatureUrl(s){return unicaenVue.url("signature/:signature/update-signature",{signature:s})}}},Iu=e("h1",{class:"page-header"},"Liste des signatures électroniques de contrat",-1),ju=e("thead",null,[e("tr",null,[e("th",{column:"ID_SIGNATURE"},"Id"),e("th",{column:"NOM"},"Nom"),e("th",{column:"PRENOM"},"Prénom"),e("th",{column:"DATE_CREATION_SIGNATURE_ELECTRONIQUE"},"Date signature électronique"),e("th",{column:"STATUT_SIGNATURE_ELECTRONIQUE"},"Statut"),e("th",null," ")])],-1),Lu=["href"],qu=e("i",{class:"fas fa-download"},null,-1),Ou=[qu],Hu=["href"],Nu=e("i",{class:"fas fa-eye"},null,-1),zu=[Nu],Fu=["href"],Bu=e("i",{class:"fas fa-rotate"},null,-1),Gu=[Bu];function Yu(s,t,n,_,l,r){const o=R,d=z;return i(),a(v,null,[Iu,f(d,{ref:"signatures",modelValue:l.lines,"onUpdate:modelValue":t[0]||(t[0]=h=>l.lines=h),"data-url":this.dataUrl},{default:E(()=>[ju,e("tbody",null,[(i(!0),a(v,null,g(l.lines,(h,p)=>(i(),a("tr",{key:p},[e("td",null,u(h.ID_SIGNATURE),1),e("td",null,u(h.NOM),1),e("td",null,u(h.PRENOM),1),e("td",null,[f(o,{value:h.DATE_CREATION_SIGNATURE_ELECTRONIQUE},null,8,["value"])]),e("td",null,u(h.STATUT_SIGNATURE_ELECTRONIQUE),1),e("td",null,[e("a",{href:r.getDocumentUrl(h.ID_SIGNATURE),class:"btn btn-info"},Ou,8,Lu),c("   "),e("a",{href:r.contratUrl(h.ID_INTERVENANT),class:"btn btn-info"},zu,8,Hu),c("   "),e("a",{href:r.updateSignatureUrl(h.ID_SIGNATURE),class:"btn btn-info"},Gu,8,Fu)])]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const Ju=C(wu,[["render",Yu]]),Qu=Object.freeze(Object.defineProperty({__proto__:null,default:Ju},Symbol.toStringTag,{value:"Module"})),Wu={UHeures:"Application/UI/UHeures",Utilisateur:"Application/Utilisateur"};function Xu(s,t){const n={};t===void 0&&(t={});for(const _ in s){let r=_.slice(2,-4).replaceAll("/","");n[r]=s[_].default}for(const _ of document.getElementsByClassName("vue-app")){let l=ae({template:_.innerHTML,components:n});if(t.beforeMount!==void 0&&t.beforeMount(l),t.autoloads!==void 0)for(const r in t.autoloads){let o=t.autoloads[r].replaceAll("/","");l.component(r,n[o])}l.use(oe({components:!0,directives:!0})),l.mount(_),t.afterMount!==void 0&&t.afterMount(l)}}const Zu={init:Xu},Ku=Object.assign({"./Application/UI/UHeures.vue":he,"./Application/Utilisateur.vue":ve,"./Employeur/ListeEmployeur.vue":$e,"./Intervenant/Recherche.vue":tt,"./Lieu/Structure.vue":jt,"./Lieu/StructuresAdmin.vue":Bt,"./Mission/Liste.vue":pn,"./Mission/ListeCandidatures.vue":Bn,"./Mission/ListeOffreEmploi.vue":xi,"./Mission/ListePrime.vue":Ea,"./Mission/Mission.vue":cn,"./Mission/OffreEmploi.vue":mi,"./Mission/Prime.vue":_a,"./Mission/Suivi.vue":ao,"./Mission/SuiviEvent.vue":so,"./Paiement/DemandeMiseEnPaiementLot.vue":Nl,"./Paiement/DetailsCalculs.vue":Pd,"./Paiement/ImportNumeroPec.vue":Zd,"./Paiement/ListeTaux.vue":Uu,"./Paiement/Taux.vue":Pu,"./Signature/ListeContrat.vue":Qu}),ec={autoloads:Wu};Zu.init(Ku,ec);
