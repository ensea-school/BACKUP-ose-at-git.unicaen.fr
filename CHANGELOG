---
title: "Changements intervenus sur OSE"
author: Laurent Lécluse - DSI - Unicaen
...

#OSE 8.0 (en développement)

## Corrections de bugs

## Nouveautés

## Notes de mise à jour

#OSE 7.0.4 (en développement)

## Corrections de bugs

* Les intervenants peuvent maintenant avoir un code composé de lettres, plus seulement de chiffres
* Le report des heures de l'année précédente vers l'année en cours actualise maintenant automatiquement la feuille de route de l'intervenant
* Les plafonds bloquants ne peuvent plus être dépassés lors du report  du service prévisionnel de l'année dernière vers l'année actuelle
* Les plafonds bloquants ne peuvent plus être dépassés lors de l'initialisation du réalisé à partir du prévisionnel

#OSE 7.0.3

## Corrections de bugs

* Le modèle de contrat est désormais téléchargeable depuis l'interface d'administration.
* Un bug affectant l'affichage de la page "Calcul HETD" dans certains cas est résolu.

#OSE 7.0.2

## Corrections de bugs

En mode calendaire, le formulaire de saisie de service réalisé ne s'affichait plus.

#OSE 7.0.1

## Corrections de bugs

La génération des contrats ne fonctionnait pas en mode production.
Idem pour télécharger des modèles de contrats.

## Notes de mise à jour

Pas de BDD à mettre à jour, juste le code de l'application en lancant la commande /bin/ose update.

#OSE 7.0

## Corrections de bugs

* La page "Contact" est maintenant personnalisable.

* Le bug empêchant de saisir de nouveaux services depuis la page "Services" est résolu.

* Les filtres portant sur l'export des services (CSV et PDF) refonctionnent.

* L'affichage des détails d'une composante (lorsqu'on clique sur son nom) a été réparé.

* Administration des fonctions référentielles :
Les composantes supprimées n'apparaissent maintenant plus dans la liste. Apparaissent en plus les composantes sans enseignements (pour lesquelles il peut y avoir du référentiel).

* Page d'accès aux contrats qui affichait une erreur si des services étaient validés dans une composante supplémentaire sans que l'agrément du conseil restreint ne soit saisi.

* Dans certains cas, le passage des heures du prévisionnel au réalisé ne fonctionnait pas.

* Les utilisateurs LDAP qui n'ont pas de SupannEmpId peuvent maintenant se connecter à OSE sans soucis

* Lorsqu'un clique sur une composante dans le service référentiel, l'affichage du détail ne plante plus.

## Nouveautés

* Synchronisation possible de services et des volumes horaires associés (en vue d'import depuis ADE)

* Possibilité de définir des volumes horaires enseignement et référentiel comme auto-validés.

* Possibilité de déterminer si les heures de service pour un type de formation donné peuvent être comptées dans le service statutaire ou non. 

* Possibilité de déterminer si les heures pour une fonction référentielle donnée peuvent être comptées dans le service statutaire ou non.

* Possibilité de basculer OSE en mode calendaire ou en mode semestriel (par défaut) selon qu'on soit en prévisionnel ou en réalisé.

* Mise en place d'une interface de saisie d'heures en mode calendaire

* Possibilité de personnaliser le modèle de contrat de travail et d'avenant.
    * Un modèle générique est à votre disposition dans le dossier data de l'application (format OpenDocument Texte à adapter avec l'application LibreOffice).
    * Les modèles peuvent être spécifiques à une composante donnée ou bien à un statut donné (ou les deux)
    * Un système de variables permet de réaliser un publipostage à partir des données de contrat pour les injecter dans le document
    * Vous pouvez personnaliser les requêtes afin d'injecter dans le modèle les données de votre choix
    * Vous pouvez créer de nouvelles variables comme bon vous semble
    * Une interface d'administration vous permettra de configurer vos modèles

* il est désormais possible, via la gestion des privilèges, d'interdire à des statuts ou des rôles de générer de nouveaux contrats et/ou avenants.
    
* Le pays "France" peut maintenant être sélectionné dans la configuration globale de l'application

* Formulaire de saisie de services amélioré :
    * Le choix de l'intervenant n'apparait plus lorsque  l'on se trouve déjà dans la fiche de l'intervenant
    * La saisie des volumes horaires n'est affichée que lorsque c'est nécessaire (plus de liste de tous les types d'intervention affichés par défaut).
    * Il est désormais possible de limiter les types d'intervention disponibles pour saisir des services à l'extérieur
     (paramétrage possible depuis Administration/Types d'intervention)

* Dans le module Charges, il est désormais possible de modifier/créer des scénarios de niveau établissement

* Meilleures possibilités de personnalisation :
    * page contacts, 
    * adresse mail d'envoi, 
    * icône de l'application, 
    * URL des documentations permanents et vacataires dans les paramètres généraux.
    * possibilité de préciser des informations lorsqu'un recherche une personne pour affectation à OSE

## Notes de mise à jour

* Modifiez la structure de votre base de données en exécutant dans SQL developer le script de mise à jour suivant :
`data/Mises à jour/07.0.sql`

* Dans les paramètres de configuration (Menu Administration/Paramètres généraux), 
veuillez sélectionner "FRANCE" dans le bloc "Divers" (en bas à gauche de la page). 
**Attention** : si ce n'est pas fait, la page "données personnelles" des intervenants ne pourra pas s'afficher.

* De nouveaux paramètres de configuration ont été ajoutés dans le fichier de configuration global de l'application
`/config.local.php`. A vous de les ajouter manuellement à votre fichier de confguration existant.
Au besoin, le modèle est le fichier `/config.local.php.default`.

Les paramètres à ajouter puis personnaliser sont :

| Rubrique        | Paramètre       | Description                         |
| --------------- | --------------- | ----------------------------------- |
| etablissement | contact | Personnalisation du contenu de votre page "contact" (code HTML) |
| etablissement | icones | Personnaliser l'icône de l'application |
| mail | from | préciser l'adresse d'expéditeur des mails de OSE |
| ldap | utilisateurExtraMasque | Masque de données à afficher lorsqu'on recherche une personne en vue de lui créer une affectation | 
| ldap | utilisateurExtraAttributes | Attributs LDAP à fournir pour le masque ci-dessus |

* Pour la génération des contrats de travail, veillez bien à installer Unoconv sur votre serveur.
Pour plus d'informations, merci de vous rendre à la page "Procédure d'installation" où tout y est expliqué.

* De nouveaux privilèges liés aux contrats de travail ont été créés. Il vous revient de les attribuer aux rôles et statuts de votre souhait.
Sans cela, les fonctionnalités associées ne seront pas accessibles.


#OSE 6.3.2

## Corrections de bugs

* Mise à jour des tableaux de bord lancée depuis le CRON plus fiable : si un tableau de bord plante, 
les autres sont tout de même mis à jour.

* La personnalisation des liens informatique et libertés et mentions légales refonctionne

* Correction définitive du bug de saisie du service référentiel

* Accès données personnelles : correction d'un bug portant sur certains vacataires affichant une page d'erreur.

* Accès données personnelles : le dossier était accessible même si l'intervenant concerné ne devait pas avoir de dossier.

* Données personnelles : les statuts supprimés étaient toujours disponibles au choix.

* Clôture des services réalisés : les tableaux de bord se mettent à jour automatiquement, ce qui n'était pas le cas avant.

* Lors de la déconnexion, lorsqu'on est cassifié, l'application met complètement fin à la session de 
l'utilisateur, ce qui n'était pas le cas avant où on pouvais se reconnecter sans avoir à se ré-authentifier.

* Correction de bug faisant planter la saisie d'un nouveau service depuis la page "Enseignements".

## Nouveautés

* Pièces justificatives : vous avez la possibilité de personnaliser les documents types à télécharger, y compris au moyen d'URLs.

## Notes de mise à jour

* PHP 7.0.x est obligatoire. Les versions supérieures de PHP ne sont pas supportées pour le moment.
* Une DeployKey générique est intégrée dans le script d'installation de OSE. Il n'est maintenant plus nécessaire de 
déployer une clé nominative sur un serveur.

#OSE 6.3.1

## Corrections de bugs

* Suppression du bug empêchant de saisir des services référentiels si la structure "UNIV" n'existe pas.

* Correction de bug empêchant la modification d'heures de service déjà validés dans certains cas.

* Affichage d'un message d'erreur explicite si l'établissement n'est pas renseigné dans les paramètres.

* La notification gênante est supprimée lors du dépôt de pièces justificatives

## Notes de mise à jour

* Si vous mettez à jour à partir de la version 6.3, pas de changement en base de données.
Toutefois, le dépôt de OSE a changé. 
Il faut donc mettre à jour votre configuration via ces trois étapes :
    1. Dans le dossier de OSE, exécutez en ligne de commande :
  `git remote set-url origin git@git.unicaen.fr:open-source/OSE.git`
    2. Puis `git checkout tags/6.3.1`
    3. Suivez ensuite la procédure de [mise à jour](https://ose.unicaen.fr/deploiement/mise-a-jour.html) normale.

* Si vous n'avez pas installé la version 6.3, alors merci d'installer la 6.3.1 avec la procédure de mise à jour 
indiquée pour la 6.3 (ci-dessous).
N'oubliez pas d'exécuter les requêtes SQL de mise à jour (`data/Mises à jour/06.3.sql`)!


#OSE 6.3 

## Corrections de bugs

* Suppression de la vue `V_TYPE_INTERVENTION_REGLE_EP` qui ne compilait pas.

* Ajout de la dépendance à BCMath (extension PHP à installer).

* Ajout de la dépendance à GD (extension PHP à installer).

* La validation du numéro INSEE dans les données personnelles était incorrecte dans certains cas.

* Recherche d'intervenants inopérante (se produisant uniquement avec PHP 7.1).

* Connecteurs : les disciplines remontent aussi pour les intervenants ayant une fin d'affectation en cours d'année.

* L'affichage de l'interface d'administration des années ne fonctionnait plus.

* à l'installation : toutes les tables étaient considérées par défaut comme synchronisées, ce qui n'était pas le cas.

* Dans l'export CSV des services, le libellé de formation n'apparaissait plus.

## Nouveautés

* Personnalisation : vous pouvez maintenant adapter entièrement l'interface de OSE 
à votre établissement (finies les références explicites à l'Université de Caen dans l'interface)
L'apparence de l'application peut également être personnalisée en fournissant une URL qui
pointe vers une feuille de style CSS propre à votre établissement.

* Nouvel outil en ligne de comande permettant de piloter OSE ( `<dossier OSE>/bin/ose help` pour la liste des possibilités)

* Nouvelle procédure d'installation (https://ose.unicaen.fr/deploiement)
Le déploiement de OSE se fait désormais directement à partir de sa plateforme GitLab.

* Nouvelle procédure de mise à jour à partir de GitLab.

* Suppression des anciens Jobs Oracle et remplacement par des tâches CRON

* Possibilité de changer le mot de passe d'un utilisateur local depuis la ligne de commande

## Notes de mise à jour

* Sauvegardez votre fichier de configuration local (`config/application.local.php`)
dans un autre répertoire que celui de OSE.

* Du fait de la mise en place d'une nouvelle procédure de mise à jour, l'application doit être
réinstallée (uniquement les fichiers, pas la base de données). 
Supprimez complètement le répertoire OSE.

* Procédez à une nouvelle installation (procédure ici : https://ose.unicaen.fr/deploiement/install).
Si vous déployez au même endroit qu'avant, la configuration d'Apache ne devra pas être modifiée.
La base de données n'a pas non plus besoin d'être réinstallée.

* Réintégrez votre fichier de configuration locale.
Attention : **ce dernier a changé d'emplacement**. De `config/application.local.php` il est devenu `config.local.php`.
Le fichier n'est donc plus placé dans le répertoire `config`, mais à la **racine** du répertoire OSE!!

* Le fichier de configuration locale (`config.local.php`) doit être modifié.
  La rubrique `'liens'` (Liens divers) n'a plus d'utilité et doit être supprimée.

  A sa place, copiez-collez dans votre fichier la rubrique `'etablissement'` en provenance 
  du fichier `config/application.local.dist`, puis personnalisez-la.

* Modifiez la structure de votre base de données en exécutant dans SQL developer le script de mise à jour suivant :
`data/Mises à jour/06.3.sql`

* Modifiez votre configuration Apache pour supprimer la ligne suivante, qui n'est plus nécessaire :
`Alias /ose/vendor/unicaen/app	/var/www/ose/vendor/unicaen/app/public`
`/ose/` et `/var/www/ose/` sont à adapter selon votre configuration.
Pour plus d'informations, merci de vous reporter à la [procédure d'installation](https://ose.unicaen.fr/deploiement/install.html).

* Créez les tâches CRON suivantes si elles n'existent pas déjà :
    * notifier-indicateurs
    * synchronisation
    * chargens-calcul-effectifs
    * calcul-tableaux-bord
    * formule-calcul

Pour cela, se référer à la procédure d'installation de OSE.