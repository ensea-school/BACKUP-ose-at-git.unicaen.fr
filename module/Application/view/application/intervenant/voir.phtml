<?php

use Application\Provider\Privilege\Privileges;

/* @var $intervenant \Application\Entity\Db\Intervenant */
/* @var $tab string */

$this->intervenant($intervenant)->renderTitle('Fiche');

$tabs = [
    [
        'id'            => 'fiche',
        'label'         => '<span class="glyphicon glyphicon-eye-open"></span> Fiche',
        'content'       => $this->partial('application/intervenant/fiche.phtml', compact('intervenant')),
        'url'           => $this->url('intervenant/fiche', ['intervenant' => $intervenant->getId()]),
        'force-refresh' => true,
    ],
];

if ($this->isAllowed(Privileges::getResourceId(Privileges::INTERVENANT_EDITION))) {
    $tabs[] = [
        'id'    => 'edition',
        'label' => '<span class="glyphicon glyphicon-pencil"></span> Ã‰dition',
        'url'   => $this->url('intervenant/saisir', ['intervenant' => $intervenant->getId()]),
    ];
}

if ($this->isAllowed(Privileges::getResourceId(Privileges::INTERVENANT_EDITION))) {
    $tabs[] = [
        'id'            => 'synchronisation',
        'label'         => '<span class="glyphicon glyphicon-import"></span> Synchronisation',
        'url'           => $this->url('intervenant/synchronisation', ['intervenant' => $intervenant->getId()]),
        'force-refresh' => true,
    ];
}

if ($this->isAllowed(Privileges::getResourceId(Privileges::INTERVENANT_EDITION))) {
    $tabs[] = [
        'id'            => 'export-rh',
        'label'         => '<span class="glyphicon glyphicon-export"></span> Export RH',
        'url'           => $this->url('intervenant/export', ['intervenant' => $intervenant->getId()]),
        'force-refresh' => true,
    ];
}


if ($this->isAllowed(Privileges::getResourceId(Privileges::INTERVENANT_SUPPRESSION))) {
    $tabs[] = [
        'id'            => 'suppression',
        'label'         => '<span class="glyphicon glyphicon-trash"></span> Suppression',
        'url'           => $this->url('intervenant/supprimer', ['intervenant' => $intervenant->getId()]),
        'force-refresh' => true,
    ];
}

echo $this->tabajax($tabs, $tab);
