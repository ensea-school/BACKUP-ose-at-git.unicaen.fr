import{c as o,o as a,w as v,v as A,n as T,t as d,a as h,b as M,d as m,e,F as x,r as V,f as U,g as z,U as se,h as ie,i as re,j as S,k as p,p as H,l as N,m as J,B as Y,q as D,s as g,u as O,x as E,y as le,z as ae,A as oe,C as ue,D as de,_ as ce}from"./vendor-BvGfWhUA.js";const k=(t,n)=>{const s=t.__vccOpts||t;for(const[b,i]of n)s[b]=i;return s},me={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},he=["innerHTML"];function _e(t,n,s,b,i,r){return a(),o("span",{class:"heures",innerHTML:r.affichage},null,8,he)}const pe=k(me,[["render",_e]]),fe=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),ve={name:"UInputFloat",props:{modelValue:{},isPourc:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},class:{type:String,required:!1,default:""},fraction:{type:Boolean,required:!1,default:!1},maximumDigits:{required:!1,default:8}},data(){return{fractions:{.333333:"1/3",.166667:"1/6",.142857:"1/7",.111111:"1/9",.666667:"2/3",.285714:"2/7",.222222:"2/9",.428571:"3/7",1.333333:"4/3",.571429:"4/7",.444444:"4/9",1.666667:"5/3",.833333:"5/6",.714286:"5/7",.555556:"5/9",.857143:"6/7",2.333333:"7/3",1.166667:"7/6",.777778:"7/9",2.666667:"8/3",1.142857:"8/7",.888889:"8/9",1.285714:"9/7"},inError:!1}},emits:["update:modelValue"],computed:{value:{get(){let t=this.modelValue;return this.isPourc&&(t*=100),this.floatToString(t)},set(t){const n=/^-?\d*\.?\d+$/;if(this.inError=t!==void 0&&t!==""&&!n.test(t.replace("/","").replace(",","").replace(".","")),!this.inError){let s=this.stringToFloat(t);this.isPourc&&(s/=100),(s===void 0||!isNaN(s)&&isFinite(s))&&this.$emit("update:modelValue",s)}}},cclass(){let t=this.class;return this.inError&&(t+=" is-invalid"),t}},methods:{floatToString(t){if(t==null)return;const n=Math.round(t*1e6)/1e6;if(this.fraction&&this.fractions[n]!==void 0)return this.fractions[n];var s="fr",b={minimumFractionDigits:0,maximumFractionDigits:this.maximumDigits,useGrouping:!1},i=new Intl.NumberFormat(s,b);return i.format(t)},stringToFloat(t){if(!(t===null||t===""||t===void 0))return t.indexOf("/")!==-1?(t=t.split("/"),t=Util.stringToFloat(t[0])/Util.stringToFloat(t[1])):t=parseFloat(t.replace(",",".")),t}},mounted(){}},be=["disabled"];function ge(t,n,s,b,i,r){return v((a(),o("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>r.value=l),disabled:s.disabled,ref:"inputFloat",class:T(r.cclass)},null,10,be)),[[A,r.value]])}const ye=k(ve,[["render",ge],["__scopeId","data-v-29c90e6d"]]),xe=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"})),Ve={name:"Utilisateur",props:{nom:String,mail:String}},Ce=["href"];function Se(t,n,s,b,i,r){return a(),o("a",{href:`mailto:${s.mail}`},d(s.nom),9,Ce)}const ke=k(Ve,[["render",Se]]),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"})),Ue={name:"UTableAjax",emits:["update:modelValue"],props:{modelValue:{required:!0},id:{required:!1,type:String},size:{required:!1,default:10},count:{required:!1},search:{required:!1},dataUrl:{required:!0,type:String}},data(){return{page:1,pageSizes:[10,25,50,100,"Tous"],defaultSize:10,dSize:this.size,dCount:this.count,dSearch:this.search,searchTimer:null,columns:{},loading:!1,orderCol:void 0,orderDir:"asc"}},computed:{cSize(){return isNaN(this.dSize)?9999999999999:this.dSize},storageIdentifier(){return"UTableAjax-"+this.id+"-"+window.location.href},elStart(){return isNaN(this.dSize)?1:(this.page-1)*this.dSize+1},elEnd(){return isNaN(this.dCount)?(this.page-1)*this.dSize+this.dSize:isNaN(this.dSize)?this.dCount:Math.min(this.dCount,(this.page-1)*this.dSize+this.dSize)}},watch:{dSize(t){localStorage.setItem(this.storageIdentifier,t),this.getData()},dSearch(t){const n=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.page>1?this.page=1:n.getData()},500)},page(t){this.getData()}},methods:{getData(){unicaenVue.axios.post(this.dataUrl,{page:this.page,size:this.dSize,elStart:this.elStart,elEnd:this.elEnd,search:this.dSearch,orderCol:this.orderCol,orderDir:this.orderDir}).then(t=>{let n=t.data;this.dCount=n.count,this.$emit("update:modelValue",n.data)})},orderBy(t){const n=this.columns[t];for(let b in this.columns)b!=t&&(this.columns[b].classList.contains("sorting_asc")&&this.columns[b].classList.remove("sorting_asc"),this.columns[b].classList.contains("sorting_desc")&&this.columns[b].classList.remove("sorting_desc"),console.log(b));let s="asc";n.classList.contains("sorting_asc")?(s="desc",n.classList.remove("sorting_asc"),n.classList.add("sorting_desc")):(n.classList.contains("sorting_desc")&&n.classList.remove("sorting_desc"),n.classList.add("sorting_asc")),this.orderCol=t,this.orderDir=s,this.getData()}},mounted(){this.dSize=parseInt(localStorage.getItem(this.storageIdentifier))||this.defaultSize,this.page=1,this.dSize=this.size,this.dCount=this.count;const t=this.$refs.tableRef,n=this;t&&t.querySelectorAll("th[column]").forEach(b=>{Array.from(b.attributes).forEach(i=>{i.name=="column"&&(this.columns[i.value]=b,b.dataset.column=i.value,b.onclick=function(){n.orderBy(this.dataset.column)},b.removeAttribute(i.name),b.classList.add("sorting"))})}),this.getData()}},Ae={class:"dt-bootstrap5"},Me=["value"],Te={class:"float-end"},De={class:"table table-bordered dataTable mb-2",ref:"tableRef"},Ee={class:"dataTables_paginate paging_simple_numbers"};function Re(t,n,s,b,i,r){const l=se,c=ie,_=re;return a(),o("div",Ae,[h(c,null,{default:M(()=>[h(l,null,{default:M(()=>[m(" Afficher "),e("label",null,[v(e("select",{"onUpdate:modelValue":n[0]||(n[0]=u=>i.dSize=u),class:"form-select form-select-sm"},[(a(!0),o(x,null,V(i.pageSizes,u=>(a(),o("option",{key:u,value:u},d(u),9,Me))),128))],512),[[U,i.dSize]])]),m(" éléments ")]),_:1}),h(l,null,{default:M(()=>[e("div",Te,[m(" Rechercher : "),e("label",null,[v(e("input",{"onUpdate:modelValue":n[1]||(n[1]=u=>i.dSearch=u),class:"form-control form-inline form-control-sm"},null,512),[[A,i.dSearch]])])])]),_:1})]),_:1}),e("table",De,[z(t.$slots,"default")],512),h(c,null,{default:M(()=>[h(l,null,{default:M(()=>[m("Affichage de l'élément "+d(r.elStart)+" à "+d(r.elEnd)+" sur "+d(i.dCount)+" éléments",1)]),_:1}),h(l,null,{default:M(()=>[e("div",Ee,[h(_,{align:"end",page:i.page,modelValue:i.page,"onUpdate:modelValue":n[2]||(n[2]=u=>i.page=u),"total-rows":i.dCount,"per-page":r.cSize,"last-number":"true",firstNumber:"true","prev-text":"Précédent","next-text":"Suivant"},null,8,["page","modelValue","total-rows","per-page"])])]),_:1})]),_:1})])}const W=k(Ue,[["render",Re]]),we={name:"listeEmployeur",data(){return{dataUrl:unicaenVue.url("employeur/get-data"),lines:[]}},methods:{saisie(t){modAjax(t.currentTarget,n=>{this.$refs.employeurs.getData()})},editUrl(t){return unicaenVue.url("employeur/saisie/:id",{id:t})}}},Fe=e("h1",{class:"page-header"},"Gestion des employeurs",-1),Ie=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"RAISON_SOCIALE"},"Raison sociale"),e("th",{column:"NOM_COMMERCIAL"},"Nom commercial"),e("th",null,"Siren"),e("th",null," ")])],-1),je={key:0},Le=["href"],He={key:1};function Ne(t,n,s,b,i,r){const l=W;return a(),o(x,null,[Fe,h(l,{ref:"employeurs",modelValue:i.lines,"onUpdate:modelValue":n[1]||(n[1]=c=>i.lines=c),"data-url":this.dataUrl},{default:M(()=>[Ie,e("tbody",null,[(a(!0),o(x,null,V(i.lines,(c,_)=>(a(),o("tr",{key:_},[e("td",null,d(c.ID),1),e("td",null,d(c.RAISON_SOCIALE),1),e("td",null,d(c.NOM_COMMERCIAL),1),e("td",null,d(c.SIREN),1),c.IMPORTABLE==0?(a(),o("td",je,[c.IMPORTABLE==0?(a(),o("a",{key:0,href:r.editUrl(c.ID),onClick:n[0]||(n[0]=S((...u)=>r.saisie&&r.saisie(...u),["prevent"]))},"Modifier",8,Le)):p("",!0)])):p("",!0),c.IMPORTABLE==1?(a(),o("td",He," NON MODIFIABLE ")):p("",!0)]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const $e=k(we,[["render",Ne]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"})),qe={name:"Details",components:{},props:{formule:{type:Object},phpClass:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},ze=["innerHTML"],Be={class:"mb-2"},Ge=["href"],Je=e("i",{class:"fas fa-rotate-left"},null,-1);function Ye(t,n,s,b,i,r){return a(),o(x,null,[e("h1",null,"Code source de "+d(s.formule.code),1),e("div",{innerHTML:s.phpClass,class:"code"},null,8,ze),e("div",Be,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[Je,m(" Retour à l'administration des formules")],8,Ge)])],64)}const We=k(qe,[["render",Ye]]),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"})),Xe={name:"Formulator",components:{},props:{phpClass:{type:String},error:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},Ze=e("h1",null,"Formulator",-1),Ke={class:"mb-2"},et=["href"],tt=e("i",{class:"fas fa-rotate-left"},null,-1),nt={key:0},st={class:"alert alert-danger"},it={key:1},rt=e("div",{class:"alert alert-success"},"Formule bien intégrée",-1),lt=[rt],at={key:2},ot=e("h3",null,"Code généré :",-1),ut=["innerHTML"];function dt(t,n,s,b,i,r){return a(),o(x,null,[Ze,e("div",Ke,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[tt,m(" Retour à l'administration des formules")],8,et)]),s.error?(a(),o("div",nt,[e("div",st,d(s.error),1)])):(a(),o("div",it,lt)),s.phpClass?(a(),o("div",at,[ot,e("div",{innerHTML:s.phpClass},null,8,ut)])):p("",!0),m(" "+d(s.error),1)],64)}const ct=k(Xe,[["render",dt]]),mt=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"})),ht={name:"Index",components:{},props:{formules:{required:!0,type:Array},canEdit:{required:!0,type:Boolean}},methods:{telechargementUrl(t){return unicaenVue.url("formule/administration/telecharger-tableur/"+t)},televersementUrl(){return unicaenVue.url("formule/administration/televerser-tableur")},detailsUrl(t){return unicaenVue.url("formule/administration/details/"+t)}}},P=t=>(H("data-v-ba77464f"),t=t(),N(),t),_t=P(()=>e("h1",null,"Formules de calcul",-1)),pt={class:"table table-bordered table-hover table-sort"},ft=P(()=>e("thead",null,[e("tr",null,[e("th",null,"Libellé"),e("th",null,"Paramètres"),e("th",null,"Règle de délégation"),e("th",null,"Ressources")])],-1)),vt=["title"],bt=P(()=>e("br",null,null,-1)),gt={key:0,class:"cartridge"},yt=P(()=>e("span",null,"intervenant",-1)),xt=P(()=>e("span",null,"param1",-1)),Vt={key:1,class:"cartridge"},Ct=P(()=>e("span",null,"intervenant",-1)),St=P(()=>e("span",null,"param2",-1)),kt={key:2,class:"cartridge"},Pt=P(()=>e("span",null,"intervenant",-1)),Ut=P(()=>e("span",null,"param3",-1)),At={key:3,class:"cartridge"},Mt=P(()=>e("span",null,"intervenant",-1)),Tt=P(()=>e("span",null,"param4",-1)),Dt={key:4,class:"cartridge"},Et=P(()=>e("span",null,"intervenant",-1)),Rt=P(()=>e("span",null,"param5",-1)),wt={key:5,class:"cartridge"},Ft=P(()=>e("span",null,"volume horaire",-1)),It=P(()=>e("span",null,"param1",-1)),jt={key:6,class:"cartridge"},Lt=P(()=>e("span",null,"volume horaire",-1)),Ht=P(()=>e("span",null,"param2",-1)),Nt={key:7,class:"cartridge"},$t=P(()=>e("span",null,"volume horaire",-1)),Ot=P(()=>e("span",null,"param3",-1)),qt={key:8,class:"cartridge"},zt=P(()=>e("span",null,"volume horaire",-1)),Bt=P(()=>e("span",null,"param4",-1)),Gt={key:9,class:"cartridge"},Jt=P(()=>e("span",null,"volume horaire",-1)),Yt=P(()=>e("span",null,"param5",-1)),Wt={key:0},Qt={key:1},Xt=["href"],Zt=P(()=>e("i",{class:"fas fa-table-cells"},null,-1)),Kt=P(()=>e("br",null,null,-1)),en=["href"],tn=P(()=>e("i",{class:"fas fa-table-cells"},null,-1)),nn=P(()=>e("br",null,null,-1)),sn={key:0,class:"card bg-warning"},rn=P(()=>e("div",{class:"card-header"},[e("h3",null,"Création/Modification d'une formule à partir d'un tableur")],-1)),ln={class:"card-body"},an=P(()=>e("div",{class:"alert alert-warning"},[e("span",{class:"icon iconly icon-attention"}),e("strong",null,"Attention :"),m(" cette opération peut avoir un impact déterminant sur le calcul de vos heures complémentaires et par extension sur tous vos paiements. En outre, le fichier doit être bâti selon un modèle bien précis. Vous êtes invités à ne téléverser que des tableurs préparés ou validés par l'équipe OSE. ")],-1)),on=["action"],un=J('<div class="form-group mb-3" data-v-ba77464f><label for="formule-name" data-v-ba77464f>Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier" data-v-ba77464f></div><div class="form-group" data-v-ba77464f><button type="submit" class="btn btn-primary" data-v-ba77464f>Ajout/Modification à partir d&#39;un tableur</button></div>',2),dn=[un];function cn(t,n,s,b,i,r){return a(),o(x,null,[_t,e("table",pt,[ft,e("tbody",null,[(a(!0),o(x,null,V(s.formules,l=>(a(),o("tr",{key:t.id,class:T({desactivee:!l.active}),title:l.active?"":"Cette formule est désactivée"},[e("td",null,[m(d(l.libelle),1),bt,e("i",null,d(l.code),1)]),e("td",null,[l.iParam1Libelle?(a(),o("div",gt,[yt,xt,m(" "+d(l.iParam1Libelle),1)])):p("",!0),l.iParam2Libelle?(a(),o("div",Vt,[Ct,St,m(" "+d(l.iParam2Libelle),1)])):p("",!0),l.iParam3Libelle?(a(),o("div",kt,[Pt,Ut,m(" "+d(l.iParam3Libelle),1)])):p("",!0),l.iParam4Libelle?(a(),o("div",At,[Mt,Tt,m(" "+d(l.iParam4Libelle),1)])):p("",!0),l.iParam5Libelle?(a(),o("div",Dt,[Et,Rt,m(" "+d(l.iParam5Libelle),1)])):p("",!0),l.vhParam1Libelle?(a(),o("div",wt,[Ft,It,m(" "+d(l.vhParam1Libelle),1)])):p("",!0),l.vhParam2Libelle?(a(),o("div",jt,[Lt,Ht,m(" "+d(l.vhParam2Libelle),1)])):p("",!0),l.vhParam3Libelle?(a(),o("div",Nt,[$t,Ot,m(" "+d(l.vhParam3Libelle),1)])):p("",!0),l.vhParam4Libelle?(a(),o("div",qt,[zt,Bt,m(" "+d(l.vhParam4Libelle),1)])):p("",!0),l.vhParam5Libelle?(a(),o("div",Gt,[Jt,Yt,m(" "+d(l.vhParam5Libelle),1)])):p("",!0)]),l.delegationAnnee?(a(),o("td",Wt,[m("Avant "+d(l.delegationAnnee)+"/"+d(l.delegationAnnee+1)+", utilise ",1),e("i",null,d(l.delegationFormule),1)])):(a(),o("td",Qt)),e("td",null,[e("a",{href:this.telechargementUrl(l.id)},[Zt,m(" tableur")],8,Xt),Kt,this.canEdit?(a(),o("a",{key:0,href:this.detailsUrl(l.id)},[tn,m(" code PHP")],8,en)):p("",!0)])],10,vt))),128))])]),nn,this.canEdit?(a(),o("div",sn,[rn,e("div",ln,[an,e("form",{method:"post",enctype:"multipart/form-data",action:this.televersementUrl()},dn,8,on)])])):p("",!0)],64)}const mn=k(ht,[["render",cn],["__scopeId","data-v-ba77464f"]]),hn=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),_n={data(){return{dataUrl:unicaenVue.url("formule-test/data"),lines:[]}},methods:{addUrl(){return unicaenVue.url("formule-test/saisir")},editUrl(t){return unicaenVue.url("formule-test/saisir/:id",{id:t})},deleteUrl(t){return unicaenVue.url("formule-test/supprimer/:id",{id:t})},importUrl(){return unicaenVue.url("formule-test/import")},supprimerTest(t){return popConfirm(t.currentTarget,n=>{this.$refs.testsFormules.getData()}),!1}}},pn=e("h1",{class:"page-header"},"Page de tests de formule de calcul des HETD",-1),fn=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"LIBELLE"},"Libellé"),e("th",{column:"FORMULE"},"Formule"),e("th",{column:"ANNEE"},"Année"),e("th",null," ")])],-1),vn={style:{width:"1%","white-space":"nowrap"}},bn=["href"],gn=e("i",{class:"fas fa-pencil"},null,-1),yn=[gn],xn=["href"],Vn=e("i",{class:"fas fa-trash-can"},null,-1),Cn=[Vn],Sn=e("br",null,null,-1),kn=e("br",null,null,-1),Pn={class:"card bg-warning"},Un=e("div",{class:"card-header"},[e("h3",null,"Import d'un nouveau test à partir d'un tableur")],-1),An={class:"card-body"},Mn=["action"],Tn=J('<div class="form-group mb-3"><label for="formule-name">Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier"></div><div class="form-group"><button type="submit" class="btn btn-primary">Import d&#39;un test à partir d&#39;un tableur</button></div>',2),Dn=[Tn];function En(t,n,s,b,i,r){const l=W,c=Y;return a(),o(x,null,[pn,h(l,{"data-url":this.dataUrl,modelValue:i.lines,"onUpdate:modelValue":n[1]||(n[1]=_=>i.lines=_),ref:"testsFormules"},{default:M(()=>[fn,e("tbody",null,[(a(!0),o(x,null,V(i.lines,(_,u)=>(a(),o("tr",{key:u},[e("td",null,d(_.ID),1),e("td",null,d(_.LIBELLE),1),e("td",null,d(_.FORMULE),1),e("td",null,d(_.ANNEE),1),e("td",vn,[e("a",{href:r.editUrl(_.ID),title:"Modification du test de formule"},yn,8,bn),m("   "),e("a",{href:r.deleteUrl(_.ID),title:"Suppression du test de formule","data-content":"Êtes-vous sur de vouloir supprimer ce test ?","data-title":"Suppression du test de formule",onClick:n[0]||(n[0]=S((...C)=>r.supprimerTest&&r.supprimerTest(...C),["prevent"]))},Cn,8,xn)])]))),128))])]),_:1},8,["data-url","modelValue"]),h(c,{variant:"primary",href:r.addUrl()},{default:M(()=>[m("Ajout d'un nouveau test")]),_:1},8,["href"]),Sn,kn,e("div",Pn,[Un,e("div",An,[e("form",{method:"post",enctype:"multipart/form-data",action:this.importUrl()},Dn,8,Mn)])])],64)}const Rn=k(_n,[["render",En]]),wn=Object.freeze(Object.defineProperty({__proto__:null,default:Rn},Symbol.toStringTag,{value:"Module"})),Fn={props:{id:{type:Number},formules:{type:Object},annees:{type:Object},typesIntervenants:{type:Object},typesVolumesHoraires:{type:Object},etatsVolumesHoraires:{type:Object},defaultFormule:{type:Number}},data(){return{indexUrl:unicaenVue.url("formule-test"),dataUrl:unicaenVue.url("formule-test/data"),tauxAutre1Visibility:!0,tauxAutre2Visibility:!1,tauxAutre3Visibility:!1,tauxAutre4Visibility:!1,tauxAutre5Visibility:!1,resMode:"hetd",debug:{},intervenant:{formule:void 0,tauxCmServiceDu:1.5,tauxCmServiceCompl:1.5,tauxTpServiceDu:1,tauxTpServiceCompl:.6666666666667},volumesHoraires:[],formule:{iParam1Libelle:void 0,iParam2Libelle:void 0,iParam3Libelle:void 0,iParam4Libelle:void 0,iParam5Libelle:void 0,vhParam1Libelle:void 0,vhParam2Libelle:void 0,vhParam3Libelle:void 0,vhParam4Libelle:void 0,vhParam5Libelle:void 0},structures:{},typesIntervention:["CM","TD","TP",void 0,void 0,void 0,void 0,void 0,"Référentiel"]}},watch:{"intervenant.tauxAutre1Code"(t){this.tauxAutre2Visibility=t||this.intervenant.tauxAutre1Code||this.intervenant.tauxAutre2ServiceDu||this.intervenant.tauxAutre2ServiceCompl,this.typesIntervention[3]=t},"intervenant.tauxAutre2Code"(t){this.tauxAutre3Visibility=t||this.intervenant.tauxAutre2Code||this.intervenant.tauxAutre3ServiceDu||this.intervenant.tauxAutre3ServiceCompl,this.typesIntervention[4]=t},"intervenant.tauxAutre3Code"(t){this.tauxAutre4Visibility=t||this.intervenant.tauxAutre3Code||this.intervenant.tauxAutre4ServiceDu||this.intervenant.tauxAutre4ServiceCompl,this.typesIntervention[5]=t},"intervenant.tauxAutre4Code"(t){this.tauxAutre5Visibility=t||this.intervenant.tauxAutre4Code||this.intervenant.tauxAutre5ServiceDu||this.intervenant.tauxAutre5ServiceCompl,this.typesIntervention[6]=t},"intervenant.tauxAutre5Code"(t){this.typesIntervention[7]=t},"intervenant.formule"(t){t&&(this.formule=this.formules[t])}},computed:{filteredTypesIntervention(){let t=Object.values(this.typesIntervention).filter(n=>n);return t.unshift(""),t},vhParamCount(){let t=0;for(let n=1;n<6;n++)this.formule["vhParam"+n+"Libelle"]&&t++;return t}},methods:{charger(){unicaenVue.axios.get(unicaenVue.url("formule-test/saisir-data/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0})).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,this.debug={},this.addVolumeHoraire(),this.updateStructures()})},enregistrer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,this.debug=t.data.debug,this.addVolumeHoraire(),this.updateStructures()})},calculer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires,simpleCalcul:!0}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,this.debug=t.data.debug,this.addVolumeHoraire(),this.updateStructures()})},exporter:function(){const t={intervenant:this.intervenant,volumesHoraires:this.volumesHoraires},n=t.libelle;var s=document.createElement("a"),b=new Blob([JSON.stringify(t)],{type:"text/json"});s.href=window.URL.createObjectURL(b),s.download="Test de formule "+n+".json",s.click()},importer:function(t){const n=t.target.files[0];if(!n.type.match("application/json")){console.error("Le fichier n'est pas de type JSON.");return}const s=new FileReader;s.onload=b=>{try{const i=JSON.parse(b.target.result);this.intervenant=i.intervenant,this.volumesHoraires=i.volumesHoraires,this.updateStructures()}catch(i){console.error("Erreur lors de l'analyse du contenu JSON :",i)}},s.readAsText(n)},dropTauxNonUtilises(t){return t.tauxAutre1Code||(t.tauxAutre1ServiceDu=void 0,t.tauxAutre1ServiceCompl=void 0),t.tauxAutre2Code||(t.tauxAutre2ServiceDu=void 0,t.tauxAutre2ServiceCompl=void 0),t.tauxAutre3Code||(t.tauxAutre3ServiceDu=void 0,t.tauxAutre3ServiceCompl=void 0),t.tauxAutre4Code||(t.tauxAutre4ServiceDu=void 0,t.tauxAutre4ServiceCompl=void 0),t.tauxAutre5Code||(t.tauxAutre5ServiceDu=void 0,t.tauxAutre5ServiceCompl=void 0),t},updateStructures(){let t={"":""};this.intervenant.structureCode&&(t[this.intervenant.structureCode]=this.intervenant.structureCode);for(let n in this.volumesHoraires){const s=this.volumesHoraires[n].structureCode;s&&(t[s]=s)}t.__UNIV__="Université (établissement)",t.__EXTERIEUR__="Extérieur (autre établissement)",t.__new_structure__="- Ajout d'une nouvelle structure -",this.structures=t},selectStructure(t){if(t.target.value=="__new_structure__"&&this.addStructure(t.target),t.target.dataset.variable!="intervenant"){const n=parseInt(t.target.dataset.variable);n==this.lastVolumeHoraireIndex()&&this.volumesHoraires[n].structureCode&&this.addVolumeHoraire()}},majTauxFi(t){const n=t.target.dataset.variable;this.volumesHoraires[n].tauxFi=1-this.volumesHoraires[n].tauxFa-this.volumesHoraires[n].tauxFc},lastVolumeHoraireIndex(){return this.volumesHoraires.length==0?-1:parseInt(Object.keys(this.volumesHoraires).pop())},addVolumeHoraire(){this.volumesHoraires.push({structureCode:null,typeInterventionCode:null,tauxFi:1,tauxFa:0,tauxFc:0,ponderationServiceDu:1,ponderationServiceCompl:1,serviceStatutaire:!0,heures:null})},addStructure(t){const n=prompt("Ajout d'une nouvelle structure");this.structures[n]=n,setTimeout(()=>{const s=t.dataset.variable;s=="intervenant"?this.intervenant.structureCode=n:this.volumesHoraires[s].structureCode=n},200)}},mounted(){this.charger()}},y=t=>(H("data-v-83cf8d39"),t=t(),N(),t),In=y(()=>e("h1",{class:"page-header"},"Modification d'un test de formule",-1)),jn={class:"row"},Ln={class:"col-md-6"},Hn=y(()=>e("h2",null,"Intervenant",-1)),Nn={class:"table table-xs table-bordered fti"},$n=y(()=>e("th",null,"Libellé",-1)),On={class:"saisie"},qn=y(()=>e("th",null,"Formule",-1)),zn={class:"saisie"},Bn=["value"],Gn=y(()=>e("th",null,"Année",-1)),Jn={class:"saisie"},Yn=["value"],Wn=y(()=>e("th",null,"Type",-1)),Qn={class:"saisie"},Xn=["value"],Zn=y(()=>e("th",null,"Structure",-1)),Kn={class:"saisie"},es=["value"],ts=y(()=>e("th",null,"Type de volume horaire",-1)),ss={class:"saisie"},is=["value"],rs=y(()=>e("th",null,"État de volume horaire",-1)),ls={class:"saisie"},as=["value"],os=y(()=>e("th",null,"Heures de service statutaire",-1)),us={class:"saisie"},ds=y(()=>e("th",null,"Heures de service modifié",-1)),cs={class:"saisie"},ms=y(()=>e("th",null,"Dépassement de service dû sans HC",-1)),hs={class:"saisie"},_s=y(()=>e("option",{value:!0},"Oui",-1)),ps=y(()=>e("option",{value:!1},"Non",-1)),fs=[_s,ps],vs={class:"i-param"},bs={class:"saisie"},gs={class:"actions"},ys={class:"row mb-4"},xs={class:"col-md-6"},Vs={class:"col-md-6"},Cs={class:"row"},Ss={class:"col-md-6"},ks={class:"col-md-6"},Ps={for:"importbtn"},Us=y(()=>e("span",{class:"btn btn-secondary"},"Téléverser un jeu de données",-1)),As={class:"col-md-5"},Ms=y(()=>e("h2",null,"Types d'intervention (HETD)",-1)),Ts={class:"types-interventions"},Ds={class:"table table-bordered table-xs"},Es=y(()=>e("tr",null,[e("th"),e("th",{colspan:"3"},"Standards"),e("th",{colspan:"5"},"Personnalisés")],-1)),Rs=y(()=>e("th",{style:{width:"20%"}},null,-1)),ws=y(()=>e("th",{style:{width:"5%"}},"CM",-1)),Fs=y(()=>e("th",{style:{width:"5%"}},"TD",-1)),Is=y(()=>e("th",{style:{width:"5%"}},"TP",-1)),js={style:{width:"10%"}},Ls={style:{width:"10%"}},Hs={style:{width:"10%"}},Ns={style:{width:"10%"}},$s={style:{width:"10%"}},Os=y(()=>e("th",null,"En service",-1)),qs={class:"saisie"},zs=y(()=>e("td",null,"1",-1)),Bs={class:"saisie"},Gs={class:"saisie"},Js={class:"saisie"},Ys={class:"saisie"},Ws={class:"saisie"},Qs={class:"saisie"},Xs=y(()=>e("th",null,"Au-delà du service",-1)),Zs={class:"saisie"},Ks=y(()=>e("td",null,"1",-1)),ei={class:"saisie"},ti={class:"saisie"},ni={class:"saisie"},si={class:"saisie"},ii={class:"saisie"},ri={class:"saisie"},li=y(()=>e("h2",null,"Résultat",-1)),ai={class:"table table-xs table-bordered resultats"},oi=y(()=>e("th",{colspan:"2"},"Service dû",-1)),ui=y(()=>e("th",{rowspan:"4"},"Service",-1)),di=y(()=>e("th",null,"FI",-1)),ci=y(()=>e("th",null,"FA",-1)),mi=y(()=>e("th",null,"FC",-1)),hi=y(()=>e("th",null,"Référentiel",-1)),_i=y(()=>e("th",{colspan:"2"},"Total service dû assuré",-1)),pi=y(()=>e("th",{rowspan:"4"},"Heures compl.",-1)),fi=y(()=>e("th",null,"FI",-1)),vi=y(()=>e("th",null,"FA",-1)),bi=y(()=>e("th",null,"FC",-1)),gi=y(()=>e("th",null,"Référentiel",-1)),yi=y(()=>e("th",{colspan:"2"},"Total heures compl. à payer",-1)),xi=y(()=>e("th",{colspan:"2"},"Primes",-1)),Vi=y(()=>e("th",{rowspan:"4"},"Heures non payables",-1)),Ci=y(()=>e("th",null,"FI",-1)),Si=y(()=>e("th",null,"FA",-1)),ki=y(()=>e("th",null,"FC",-1)),Pi=y(()=>e("th",null,"Référentiel",-1)),Ui=y(()=>e("th",{colspan:"2"},"Total heures non payables",-1)),Ai=y(()=>e("h2",null,"Heures effectuées (A saisir de manière chronologique)",-1)),Mi={class:"table table-bordered table-xs table-hover fvh"},Ti=y(()=>e("th",{rowspan:"3"},null,-1)),Di=["colspan"],Ei=y(()=>e("th",{rowspan:"3",class:"spacer"}," ",-1)),Ri={colspan:"13"},wi=y(()=>e("option",{value:"attendu"},"Résultats attendus (en HETD)",-1)),Fi=y(()=>e("option",{value:"hetd",selected:"selected"},"Résultats calculés (en HETD)",-1)),Ii=y(()=>e("option",{value:"debug"},"Informations de débogage",-1)),ji=[wi,Fi,Ii],Li=y(()=>e("th",{rowspan:"2",style:{"min-width":"10em"}},"Structure",-1)),Hi=y(()=>e("th",{rowspan:"2"},"Compte dans le service statutaire",-1)),Ni=y(()=>e("th",{rowspan:"2",style:{"min-width":"5em"}},"Type d'intervention",-1)),$i=y(()=>e("th",{colspan:"3"},"Répartition",-1)),Oi=y(()=>e("th",{colspan:"2"},"Modulation",-1)),qi=["colspan"],zi=y(()=>e("th",{rowspan:"2"},"Heures",-1)),Bi={colspan:"4"},Gi={colspan:"4"},Ji={rowspan:"2"},Yi={colspan:"4"},Wi={colspan:"4"},Qi={colspan:"4"},Xi={rowspan:"2"},Zi={colspan:"4"},Ki={rowspan:"2"},er=y(()=>e("th",null,"Fi",-1)),tr=y(()=>e("th",null,"Fa",-1)),nr=y(()=>e("th",null,"Fc",-1)),sr=y(()=>e("th",null,"Service dû",-1)),ir=y(()=>e("th",null,"Service compl.",-1)),rr=["onUpdate:modelValue","data-variable"],lr=["value"],ar=["onUpdate:modelValue"],or=y(()=>e("option",{value:!0},"Oui",-1)),ur=y(()=>e("option",{value:!1},"Non",-1)),dr=[or,ur],cr=["onUpdate:modelValue"],mr=["value"],hr=y(()=>e("span",{class:"pourc"},"%",-1)),_r=y(()=>e("span",{class:"pourc"},"%",-1)),pr=y(()=>e("span",{class:"pourc"},"%",-1)),fr=y(()=>e("span",{class:"pourc"},"%",-1)),vr=y(()=>e("span",{class:"pourc"},"%",-1)),br=["onUpdate:modelValue"],gr=["onUpdate:modelValue"],yr=["onUpdate:modelValue"],xr=["onUpdate:modelValue"],Vr=["onUpdate:modelValue"],Cr=y(()=>e("td",{class:"spacer"},null,-1)),Sr={class:"debug-td"},kr={key:0},Pr={class:"debug-cell"},Ur={class:"debug-val"},Ar={key:0},Mr=y(()=>e("h4",null,"Débogage : calculs globaux",-1)),Tr={class:"debug-cell"},Dr={class:"debug-val"},Er=["href"],Rr=y(()=>e("i",{class:"fas fa-rotate-left","aria-hidden":"true"},null,-1));function wr(t,n,s,b,i,r){const l=D("u-input-float"),c=Y,_=D("u-heures");return a(),o(x,null,[In,e("div",jn,[e("div",Ln,[Hn,e("table",Nn,[e("tr",null,[$n,e("td",On,[v(e("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>i.intervenant.libelle=u),class:"dinput"},null,512),[[A,i.intervenant.libelle]])])]),e("tr",null,[qn,e("td",zn,[v(e("select",{"onUpdate:modelValue":n[1]||(n[1]=u=>i.intervenant.formule=u),class:"dinput"},[(a(!0),o(x,null,V(s.formules,u=>(a(),o("option",{value:u.id},d(u.libelle),9,Bn))),256))],512),[[U,i.intervenant.formule]])])]),e("tr",null,[Gn,e("td",Jn,[v(e("select",{"onUpdate:modelValue":n[2]||(n[2]=u=>i.intervenant.annee=u),class:"dinput"},[(a(!0),o(x,null,V(s.annees,u=>(a(),o("option",{value:u.id},d(u.libelle),9,Yn))),256))],512),[[U,i.intervenant.annee]])])]),e("tr",null,[Wn,e("td",Qn,[v(e("select",{"onUpdate:modelValue":n[3]||(n[3]=u=>i.intervenant.typeIntervenant=u),class:"dinput"},[(a(!0),o(x,null,V(s.typesIntervenants,u=>(a(),o("option",{value:u.id},d(u.libelle),9,Xn))),256))],512),[[U,i.intervenant.typeIntervenant]])])]),e("tr",null,[Zn,e("td",Kn,[v(e("select",{"onUpdate:modelValue":n[4]||(n[4]=u=>i.intervenant.structureCode=u),"data-variable":"intervenant",class:"dinput",onChange:n[5]||(n[5]=(...u)=>r.selectStructure&&r.selectStructure(...u))},[(a(!0),o(x,null,V(i.structures,(u,C)=>(a(),o("option",{value:C,key:C},d(u),9,es))),128))],544),[[U,i.intervenant.structureCode]])])]),e("tr",null,[ts,e("td",ss,[v(e("select",{"onUpdate:modelValue":n[6]||(n[6]=u=>i.intervenant.typeVolumeHoraire=u),class:"dinput"},[(a(!0),o(x,null,V(s.typesVolumesHoraires,u=>(a(),o("option",{value:u.id},d(u.libelle),9,is))),256))],512),[[U,i.intervenant.typeVolumeHoraire]])])]),e("tr",null,[rs,e("td",ls,[v(e("select",{"onUpdate:modelValue":n[7]||(n[7]=u=>i.intervenant.etatVolumeHoraire=u),class:"dinput"},[(a(!0),o(x,null,V(s.etatsVolumesHoraires,u=>(a(),o("option",{value:u.id},d(u.libelle),9,as))),256))],512),[[U,i.intervenant.etatVolumeHoraire]])])]),e("tr",null,[os,e("td",us,[h(l,{modelValue:i.intervenant.heuresServiceStatutaire,"onUpdate:modelValue":n[8]||(n[8]=u=>i.intervenant.heuresServiceStatutaire=u),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[ds,e("td",cs,[h(l,{modelValue:i.intervenant.heuresServiceModifie,"onUpdate:modelValue":n[9]||(n[9]=u=>i.intervenant.heuresServiceModifie=u),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[ms,e("td",hs,[v(e("select",{"onUpdate:modelValue":n[10]||(n[10]=u=>i.intervenant.depassementServiceDuSansHC=u),class:"dinput"},fs,512),[[U,i.intervenant.depassementServiceDuSansHC]])])]),(a(),o(x,null,V([1,2,3,4,5],u=>v(e("tr",{key:u,class:T("i-param i-param-"+u)},[e("th",vs,d(i.formule["iParam"+u+"Libelle"]),1),e("td",bs,[v(e("input",{"onUpdate:modelValue":n[11]||(n[11]=C=>i.intervenant.param1=C),class:"dinput"},null,512),[[A,i.intervenant.param1]])])],2),[[g,i.formule["iParam"+u+"Libelle"]]])),64))]),e("div",gs,[e("div",ys,[e("div",xs,[h(c,{variant:"primary",onClick:r.enregistrer},{default:M(()=>[m("Enregistrer les données")]),_:1},8,["onClick"])]),e("div",Vs,[h(c,{variant:"secondary",onClick:r.calculer},{default:M(()=>[m("Calculer les HETD")]),_:1},8,["onClick"])])]),e("div",Cs,[e("div",Ss,[e("button",{class:"exporter btn btn-secondary",onClick:n[12]||(n[12]=(...u)=>r.exporter&&r.exporter(...u))},"Télécharger les données")]),e("div",ks,[e("label",Ps,[Us,e("input",{type:"file",id:"importbtn",class:"importer",onChange:n[13]||(n[13]=(...u)=>r.importer&&r.importer(...u))},null,32)])])])])]),e("div",As,[Ms,e("div",Ts,[e("table",Ds,[Es,e("tr",null,[Rs,ws,Fs,Is,v(e("th",js,[v(e("input",{"onUpdate:modelValue":n[14]||(n[14]=u=>i.intervenant.tauxAutre1Code=u),class:"dinput"},null,512),[[A,i.intervenant.tauxAutre1Code]])],512),[[g,i.tauxAutre1Visibility]]),v(e("th",Ls,[v(e("input",{"onUpdate:modelValue":n[15]||(n[15]=u=>i.intervenant.tauxAutre2Code=u),class:"dinput"},null,512),[[A,i.intervenant.tauxAutre2Code]])],512),[[g,i.tauxAutre2Visibility]]),v(e("th",Hs,[v(e("input",{"onUpdate:modelValue":n[16]||(n[16]=u=>i.intervenant.tauxAutre3Code=u),class:"dinput"},null,512),[[A,i.intervenant.tauxAutre3Code]])],512),[[g,i.tauxAutre3Visibility]]),v(e("th",Ns,[v(e("input",{"onUpdate:modelValue":n[17]||(n[17]=u=>i.intervenant.tauxAutre4Code=u),class:"dinput"},null,512),[[A,i.intervenant.tauxAutre4Code]])],512),[[g,i.tauxAutre4Visibility]]),v(e("th",$s,[v(e("input",{"onUpdate:modelValue":n[18]||(n[18]=u=>i.intervenant.tauxAutre5Code=u),class:"dinput"},null,512),[[A,i.intervenant.tauxAutre5Code]])],512),[[g,i.tauxAutre5Visibility]])]),e("tr",null,[Os,e("td",qs,[h(l,{modelValue:i.intervenant.tauxCmServiceDu,"onUpdate:modelValue":n[19]||(n[19]=u=>i.intervenant.tauxCmServiceDu=u),fraction:!0,class:"dinput"},null,8,["modelValue"])]),zs,e("td",Bs,[h(l,{modelValue:i.intervenant.tauxTpServiceDu,"onUpdate:modelValue":n[20]||(n[20]=u=>i.intervenant.tauxTpServiceDu=u),fraction:!0,class:"dinput"},null,8,["modelValue"])]),v(e("td",Gs,[h(l,{modelValue:i.intervenant.tauxAutre1ServiceDu,"onUpdate:modelValue":n[21]||(n[21]=u=>i.intervenant.tauxAutre1ServiceDu=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre1Visibility]]),v(e("td",Js,[h(l,{modelValue:i.intervenant.tauxAutre2ServiceDu,"onUpdate:modelValue":n[22]||(n[22]=u=>i.intervenant.tauxAutre2ServiceDu=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre2Visibility]]),v(e("td",Ys,[h(l,{modelValue:i.intervenant.tauxAutre3ServiceDu,"onUpdate:modelValue":n[23]||(n[23]=u=>i.intervenant.tauxAutre3ServiceDu=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre3Visibility]]),v(e("td",Ws,[h(l,{modelValue:i.intervenant.tauxAutre4ServiceDu,"onUpdate:modelValue":n[24]||(n[24]=u=>i.intervenant.tauxAutre4ServiceDu=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre4Visibility]]),v(e("td",Qs,[h(l,{modelValue:i.intervenant.tauxAutre5ServiceDu,"onUpdate:modelValue":n[25]||(n[25]=u=>i.intervenant.tauxAutre5ServiceDu=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre5Visibility]])]),e("tr",null,[Xs,e("td",Zs,[h(l,{modelValue:i.intervenant.tauxCmServiceCompl,"onUpdate:modelValue":n[26]||(n[26]=u=>i.intervenant.tauxCmServiceCompl=u),fraction:!0,class:"dinput"},null,8,["modelValue"])]),Ks,e("td",ei,[h(l,{modelValue:i.intervenant.tauxTpServiceCompl,"onUpdate:modelValue":n[27]||(n[27]=u=>i.intervenant.tauxTpServiceCompl=u),fraction:!0,class:"dinput"},null,8,["modelValue"])]),v(e("td",ti,[h(l,{modelValue:i.intervenant.tauxAutre1ServiceCompl,"onUpdate:modelValue":n[28]||(n[28]=u=>i.intervenant.tauxAutre1ServiceCompl=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre1Visibility]]),v(e("td",ni,[h(l,{modelValue:i.intervenant.tauxAutre2ServiceCompl,"onUpdate:modelValue":n[29]||(n[29]=u=>i.intervenant.tauxAutre2ServiceCompl=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre2Visibility]]),v(e("td",si,[h(l,{modelValue:i.intervenant.tauxAutre3ServiceCompl,"onUpdate:modelValue":n[30]||(n[30]=u=>i.intervenant.tauxAutre3ServiceCompl=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre3Visibility]]),v(e("td",ii,[h(l,{modelValue:i.intervenant.tauxAutre4ServiceCompl,"onUpdate:modelValue":n[31]||(n[31]=u=>i.intervenant.tauxAutre4ServiceCompl=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre4Visibility]]),v(e("td",ri,[h(l,{modelValue:i.intervenant.tauxAutre5ServiceCompl,"onUpdate:modelValue":n[32]||(n[32]=u=>i.intervenant.tauxAutre5ServiceCompl=u),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre5Visibility]])])])]),li,e("table",ai,[e("tr",null,[oi,e("td",null,[h(_,{valeur:i.intervenant.serviceDu??NaN},null,8,["valeur"])])]),e("tr",null,[ui,di,e("td",null,[h(_,{valeur:i.intervenant.heuresServiceFi??NaN},null,8,["valeur"])])]),e("tr",null,[ci,e("td",null,[h(_,{valeur:i.intervenant.heuresServiceFa??NaN},null,8,["valeur"])])]),e("tr",null,[mi,e("td",null,[h(_,{valeur:i.intervenant.heuresServiceFc??NaN},null,8,["valeur"])])]),e("tr",null,[hi,e("td",null,[h(_,{valeur:i.intervenant.heuresServiceReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[_i,e("td",null,[h(_,{valeur:i.intervenant.heuresService??NaN},null,8,["valeur"])])]),e("tr",null,[pi,fi,e("td",null,[h(_,{valeur:i.intervenant.heuresComplFi??NaN},null,8,["valeur"])])]),e("tr",null,[vi,e("td",null,[h(_,{valeur:i.intervenant.heuresComplFa??NaN},null,8,["valeur"])])]),e("tr",null,[bi,e("td",null,[h(_,{valeur:i.intervenant.heuresComplFc??NaN},null,8,["valeur"])])]),e("tr",null,[gi,e("td",null,[h(_,{valeur:i.intervenant.heuresComplReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[yi,e("td",null,[h(_,{valeur:i.intervenant.heuresCompl??NaN},null,8,["valeur"])])]),e("tr",null,[xi,e("td",null,[h(_,{valeur:i.intervenant.heuresPrimes??NaN},null,8,["valeur"])])]),e("tr",null,[Vi,Ci,e("td",null,[h(_,{valeur:i.intervenant.heuresNonPayableFi??NaN},null,8,["valeur"])])]),e("tr",null,[Si,e("td",null,[h(_,{valeur:i.intervenant.heuresNonPayableFa??NaN},null,8,["valeur"])])]),e("tr",null,[ki,e("td",null,[h(_,{valeur:i.intervenant.heuresNonPayableFc??NaN},null,8,["valeur"])])]),e("tr",null,[Pi,e("td",null,[h(_,{valeur:i.intervenant.heuresNonPayableReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[Ui,e("td",null,[h(_,{valeur:i.intervenant.heuresNonPayable??NaN},null,8,["valeur"])])])])]),Ai,e("table",Mi,[e("thead",null,[e("tr",null,[Ti,e("th",{colspan:9+r.vhParamCount,class:"vh-donnees"},"Données",8,Di),Ei,e("th",Ri,[v(e("select",{"onUpdate:modelValue":n[33]||(n[33]=u=>i.resMode=u),class:"form-select res-mode"},ji,512),[[U,i.resMode]])])]),e("tr",null,[Li,Hi,Ni,$i,Oi,v(e("th",{colspan:r.vhParamCount},"Paramètres",8,qi),[[g,r.vhParamCount>0]]),zi,v(e("th",Bi,"Service",512),[[g,i.resMode=="attendu"]]),v(e("th",Gi,"Heures compl.",512),[[g,i.resMode=="attendu"]]),v(e("th",Ji,"Primes",512),[[g,i.resMode=="attendu"]]),v(e("th",Yi,"Heures non payables",512),[[g,i.resMode=="attendu"]]),v(e("th",Wi,"Service",512),[[g,i.resMode=="hetd"]]),v(e("th",Qi,"Heures compl.",512),[[g,i.resMode=="hetd"]]),v(e("th",Xi,"Primes",512),[[g,i.resMode=="hetd"]]),v(e("th",Zi,"Heures non payables",512),[[g,i.resMode=="hetd"]]),v(e("th",Ki,"Informations de débogage",512),[[g,i.resMode=="debug"]])]),e("tr",null,[er,tr,nr,sr,ir,(a(),o(x,null,V([1,2,3,4,5],u=>v(e("th",{key:u},d(i.formule["vhParam"+u+"Libelle"]),1),[[g,i.formule["vhParam"+u+"Libelle"]]])),64)),v(e("th",null,"Fi",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="hetd"]])])]),e("tbody",null,[(a(!0),o(x,null,V(i.volumesHoraires,(u,C)=>(a(),o("tr",{key:C},[e("th",null,d(C+1),1),e("td",null,[v(e("select",{"onUpdate:modelValue":f=>u.structureCode=f,"data-variable":C,class:"dinput",onChange:n[34]||(n[34]=(...f)=>r.selectStructure&&r.selectStructure(...f))},[(a(!0),o(x,null,V(i.structures,(f,F)=>(a(),o("option",{value:F,key:F},d(f),9,lr))),128))],40,rr),[[U,u.structureCode]])]),e("td",null,[v(e("select",{"onUpdate:modelValue":f=>u.serviceStatutaire=f,class:"dinput"},dr,8,ar),[[U,u.serviceStatutaire],[g,u.structureCode]])]),e("td",null,[v(e("select",{"onUpdate:modelValue":f=>u.typeInterventionCode=f,class:"dinput"},[(a(!0),o(x,null,V(r.filteredTypesIntervention,f=>(a(),o("option",{value:f,key:f},d(f),9,mr))),128))],8,cr),[[U,u.typeInterventionCode],[g,u.structureCode]])]),e("td",null,[v(e("div",null,[h(l,{modelValue:u.tauxFi,"onUpdate:modelValue":f=>u.tauxFi=f,"is-pourc":"",class:"doutput",readonly:"",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),hr],512),[[g,!["",null,"Référentiel"].includes(u.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[h(l,{modelValue:u.tauxFa,"onUpdate:modelValue":f=>u.tauxFa=f,"is-pourc":"",class:"dinput","data-variable":C,onChange:r.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange"]),_r],512),[[g,!["",null,"Référentiel"].includes(u.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[h(l,{modelValue:u.tauxFc,"onUpdate:modelValue":f=>u.tauxFc=f,"is-pourc":"",class:"dinput","data-variable":C,onChange:r.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange"]),pr],512),[[g,!["",null,"Référentiel"].includes(u.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[h(l,{modelValue:u.ponderationServiceDu,"onUpdate:modelValue":f=>u.ponderationServiceDu=f,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),fr],512),[[g,!["",null,"Référentiel"].includes(u.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[h(l,{modelValue:u.ponderationServiceCompl,"onUpdate:modelValue":f=>u.ponderationServiceCompl=f,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),vr],512),[[g,!["",null,"Référentiel"].includes(u.typeInterventionCode)]])]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>u.param1=f,class:"dinput"},null,8,br),[[A,u.param1],[g,u.structureCode]])],512),[[g,i.formule.vhParam1Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>u.param2=f,class:"dinput"},null,8,gr),[[A,u.param2],[g,u.structureCode]])],512),[[g,i.formule.vhParam2Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>u.param3=f,class:"dinput"},null,8,yr),[[A,u.param3],[g,u.structureCode]])],512),[[g,i.formule.vhParam3Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>u.param4=f,class:"dinput"},null,8,xr),[[A,u.param4],[g,u.structureCode]])],512),[[g,i.formule.vhParam4Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":f=>u.param5=f,class:"dinput"},null,8,Vr),[[A,u.param5],[g,u.structureCode]])],512),[[g,i.formule.vhParam5Libelle]]),e("td",null,[v(h(l,{modelValue:u.heures,"onUpdate:modelValue":f=>u.heures=f,class:"dinput",onChange:r.calculer},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[g,!["",null].includes(u.typeInterventionCode)]])]),Cr,v(e("td",null,[h(l,{modelValue:u.heuresAttenduesServiceFi,"onUpdate:modelValue":f=>u.heuresAttenduesServiceFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesServiceFa,"onUpdate:modelValue":f=>u.heuresAttenduesServiceFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesServiceFc,"onUpdate:modelValue":f=>u.heuresAttenduesServiceFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesServiceReferentiel,"onUpdate:modelValue":f=>u.heuresAttenduesServiceReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesComplFi,"onUpdate:modelValue":f=>u.heuresAttenduesComplFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesComplFa,"onUpdate:modelValue":f=>u.heuresAttenduesComplFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesComplFc,"onUpdate:modelValue":f=>u.heuresAttenduesComplFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesComplReferentiel,"onUpdate:modelValue":f=>u.heuresAttenduesComplReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesPrimes,"onUpdate:modelValue":f=>u.heuresAttenduesPrimes=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesNonPayableFi,"onUpdate:modelValue":f=>u.heuresAttenduesNonPayableFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesNonPayableFa,"onUpdate:modelValue":f=>u.heuresAttenduesNonPayableFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesNonPayableFc,"onUpdate:modelValue":f=>u.heuresAttenduesNonPayableFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresAttenduesNonPayableReferentiel,"onUpdate:modelValue":f=>u.heuresAttenduesNonPayableReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[h(l,{modelValue:u.heuresServiceFi,"onUpdate:modelValue":f=>u.heuresServiceFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresServiceFa,"onUpdate:modelValue":f=>u.heuresServiceFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresServiceFc,"onUpdate:modelValue":f=>u.heuresServiceFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresServiceReferentiel,"onUpdate:modelValue":f=>u.heuresServiceReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresComplFi,"onUpdate:modelValue":f=>u.heuresComplFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresComplFa,"onUpdate:modelValue":f=>u.heuresComplFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresComplFc,"onUpdate:modelValue":f=>u.heuresComplFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresComplReferentiel,"onUpdate:modelValue":f=>u.heuresComplReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresPrimes,"onUpdate:modelValue":f=>u.heuresPrimes=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresNonPayableFi,"onUpdate:modelValue":f=>u.heuresNonPayableFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresNonPayableFa,"onUpdate:modelValue":f=>u.heuresNonPayableFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresNonPayableFc,"onUpdate:modelValue":f=>u.heuresNonPayableFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[h(l,{modelValue:u.heuresNonPayableReferentiel,"onUpdate:modelValue":f=>u.heuresNonPayableReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:"doutput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="hetd"]]),v(e("td",Sr,[i.debug.vh&&i.debug.vh[C]?(a(),o("div",kr,[(a(!0),o(x,null,V(i.debug.vh[C],(f,F)=>(a(),o("span",Pr,[m(d(F)+" ",1),e("span",Ur,d(Math.round(f*100)/100),1)]))),256)),m("  ")])):p("",!0)],512),[[g,i.resMode=="debug"]])]))),128))])]),i.resMode=="debug"&&i.debug.global?(a(),o("div",Ar,[Mr,(a(!0),o(x,null,V(i.debug.global,(u,C)=>(a(),o("span",Tr,[m(d(C)+" ",1),e("span",Dr,d(Math.round(u*100)/100),1)]))),256)),m("  ")])):p("",!0),e("div",null,[e("a",{class:"btn btn-secondary",href:i.indexUrl},[Rr,m(" Retour à la liste des formules")],8,Er)])])],64)}const Fr=k(Fn,[["render",wr],["__scopeId","data-v-83cf8d39"]]),Ir=Object.freeze(Object.defineProperty({__proto__:null,default:Fr},Symbol.toStringTag,{value:"Module"})),jr={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(t){this.formatted=this.formatage(t)}},methods:{formatage(t){if(t===void 0)return;let n=new Date(t);const s=n.getFullYear(),b=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),r=n.getHours().toString().padStart(2,"0"),l=n.getMinutes().toString().padStart(2,"0"),c=n.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${i}/${b}/${s} à ${r}:${l}`;case"time":return`${r}:${l}:${c}`}return`${i}/${b}/${s}`}}};function Lr(t,n,s,b,i,r){return d(i.formatted)}const L=k(jr,[["render",Lr]]),Hr={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(t){this.searchTerm=t.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(t){return unicaenVue.url("intervenant/code:"+t+"/voir")},reload(){var t=document.getElementById("term");t.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(n=>{let s=n.data,b=[];for(const i in s){if(s[i].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){b.push(s[i]);continue}if(s[i].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){b.push(s[i]);continue}if(s[i].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){b.push(s[i]);continue}}this.intervenants=b,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(n=>{console.log(n.message)})},800)}}},Nr=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),$r={class:"intervenant-recherche"},Or={class:"critere"},qr=e("br",null,null,-1),zr=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),Br=e("br",null,null,-1),Gr={key:0,class:"table table-bordered table-hover"},Jr=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),Yr=["title"],Wr={style:{}},Qr=["href"],Xr=e("i",{class:"fas fa-eye"},null,-1),Zr={key:1,class:"table table-bordered table-hover"},Kr=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),el=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),tl=[Kr,el];function nl(t,n,s,b,i,r){const l=L;return a(),o(x,null,[Nr,e("div",$r,[e("div",Or,[e("div",null,[e("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:n[0]||(n[0]=(...c)=>r.rechercher&&r.rechercher(...c))},null,32),qr]),e("div",null,[zr,v(e("input",{"onUpdate:modelValue":n[1]||(n[1]=c=>i.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:n[2]||(n[2]=c=>r.reload())},null,544),[[O,i.checkedTypes]]),m(" Permanent "),v(e("input",{"onUpdate:modelValue":n[3]||(n[3]=c=>i.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:n[4]||(n[4]=c=>r.reload())},null,544),[[O,i.checkedTypes]]),m(" Vacataire "),v(e("input",{"onUpdate:modelValue":n[5]||(n[5]=c=>i.checkedTypes=c),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:n[6]||(n[6]=c=>r.reload())},null,544),[[O,i.checkedTypes]]),m(" Etudiant ")]),Br])]),i.intervenants.length>0?(a(),o("table",Gr,[Jr,e("tbody",null,[(a(!0),o(x,null,V(i.intervenants,(c,_)=>(a(),o("tr",{class:T({"bg-danger":c.destruction!==null}),title:c.destruction!==null?"Fiche historisé":""},[e("td",Wr,[e("a",{href:r.urlFiche(c.code)},[Xr,m(" Fiche")],8,Qr)]),e("td",null,d(c.civilite),1),e("td",null,d(c.nom),1),e("td",null,d(c.prenom),1),e("td",null,d(c.structure),1),e("td",null,d(c.statut),1),e("td",null,[h(l,{value:c["date-naissance"]},null,8,["value"])]),e("td",null,d(c["numero-personnel"]),1)],10,Yr))),256))])])):p("",!0),i.intervenants.length==0&&i.noResult==1?(a(),o("table",Zr,tl)):p("",!0)],64)}const sl=k(Hr,[["render",nl]]),il=Object.freeze(Object.defineProperty({__proto__:null,default:sl},Symbol.toStringTag,{value:"Module"})),rl={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return this.structure.structures.length>0}},methods:{saisie(t){modAjax(t.currentTarget,n=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.refresh()})},refresh(){this.liste.reload()}}},I=t=>(H("data-v-a94dbf9e"),t=t(),N(),t),ll={class:"accordion-item"},al={class:"accordion-header"},ol=["data-bs-target","aria-controls"],ul=["href"],dl=I(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),cl=[dl],ml=["href"],hl=I(()=>e("i",{class:"fas fa-trash-can"},null,-1)),_l=[hl],pl=["id"],fl={class:"accordion-body"},vl={class:"row"},bl=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),m(" : ")],-1)),gl={class:"col-md-5"},yl={class:"row"},xl=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),m(" : ")],-1)),Vl={class:"col-md-5"},Cl={class:"row"},Sl=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),m(" : ")],-1)),kl={class:"col-md-5"},Pl={key:0,class:"fas fa-check text-success"},Ul={key:1,class:"fas fa-xmark text-danger"},Al={class:"row"},Ml=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),m(" : ")],-1)),Tl={class:"col-md-5"},Dl={key:0,class:"fas fa-check text-success"},El={key:1,class:"fas fa-xmark text-danger"},Rl={class:"row"},wl=I(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),m(" : ")],-1)),Fl={class:"col-md-5"},Il={key:0,class:"sous-structures"},jl=I(()=>e("h4",null,"Sous-structures",-1)),Ll={class:"accordion"};function Hl(t,n,s,b,i,r){const l=D("structure",!0);return a(),o("div",ll,[e("h2",al,[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":`#str${s.structure.id}`,"aria-expanded":"true","aria-controls":s.structure.id},[s.structure.canEdit?(a(),o("a",{key:0,title:"Modifier la structure",href:i.saisieUrl,class:"btn btn-primary btn-sm",onClick:n[0]||(n[0]=S((...c)=>r.saisie&&r.saisie(...c),["prevent"]))},cl,8,ul)):p("",!0),s.structure.canDelete?(a(),o("a",{key:1,title:"Supprimer la structure",href:i.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",onClick:n[1]||(n[1]=S((...c)=>r.supprimer&&r.supprimer(...c),["prevent"]))},_l,8,ml)):p("",!0),m("   "+d(s.structure.libelleLong)+" ("+d(s.structure.libelleCourt)+") ",1)],8,ol)]),e("div",{id:`str${s.structure.id}`,class:"accordion-collapse collapse show"},[e("div",fl,[e("div",vl,[bl,e("div",gl,d(s.structure.code),1)]),e("div",yl,[xl,e("div",Vl,d(s.structure.source.libelle),1)]),e("div",Cl,[Sl,e("div",kl,[s.structure.enseignement?(a(),o("i",Pl)):s.structure.enseignement?p("",!0):(a(),o("i",Ul))])]),e("div",Al,[Ml,e("div",Tl,[s.structure.affAdresseContrat?(a(),o("i",Dl)):s.structure.affAdresseContrat?p("",!0):(a(),o("i",El))])]),e("div",Rl,[wl,e("div",Fl,[e("pre",null,d(s.structure.adresse),1)])]),r.hasSousStructures?(a(),o("div",Il,[jl,e("div",Ll,[(a(!0),o(x,null,V(s.structure.structures,c=>(a(),E(l,{onRefresh:r.refresh,key:c.id,structure:c},null,8,["onRefresh","structure"]))),128))])])):p("",!0)])],8,pl)])}const Q=k(rl,[["render",Hl],["__scopeId","data-v-a94dbf9e"]]),Nl=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),$l={components:{structure:Q},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{console.log("coucou"),this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(t=>{this.structures=t.data})}}},Ol=e("h1",null,"Administration des structures",-1),ql={class:"accordion"},zl=["href"],Bl=e("i",{class:"fas fa-pen-to-square"},null,-1);function Gl(t,n,s,b,i,r){const l=D("structure");return a(),o(x,null,[Ol,e("div",ql,[(a(!0),o(x,null,V(i.structures,c=>(a(),E(l,{key:c.id,structure:c},null,8,["structure"]))),128))]),s.canAdd?(a(),o("a",{key:0,class:"btn btn-primary",href:i.ajoutUrl,onClick:n[0]||(n[0]=S((...c)=>r.ajout&&r.ajout(...c),["prevent"])),title:"Ajouter une structure"},[Bl,m(" Ajouter une structure ")],8,zl)):p("",!0)],64)}const Jl=k($l,[["render",Gl]]),Yl=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),Wl={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},Ql=["id"],Xl={class:"modal-dialog"},Zl={class:"modal-content"},Kl={class:"modal-header"},ea={class:"modal-title"},ta=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),na={class:"modal-body"},sa={class:"modal-footer"},ia=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function ra(t,n,s,b,i,r){return a(),o("div",{class:"modal fade",id:s.id,tabindex:"-1","aria-hidden":"true"},[e("div",Xl,[e("div",Zl,[e("div",Kl,[e("h5",ea,d(s.title),1),ta]),e("div",na,[z(t.$slots,"body")]),e("div",sa,[z(t.$slots,"footer"),ia])])])],8,Ql)}const la=k(Wl,[["render",ra]]),aa={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},oa=["id"];function ua(t,n,s,b,i,r){return a(),o("i",{class:T(`fas fa-${s.name} text-${s.variant} fa-rotate-${s.rotate}`),id:`${s.id}`},null,10,oa)}const j=k(aa,[["render",ua]]),da={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(t){this.validationText=this.calcValidation(t)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(t){return t===null?"A valider":t.id===null?"Autovalidée":"Validation du "+Util.dateToString(t.histoCreation)+" par "},saisie(t){modAjax(t.currentTarget,n=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.$emit("supprimer",this.mission)})},valider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},devalider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireSupprimer(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireValider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireDevalider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(t=>{this.$emit("refresh",t.data)})}}},w=t=>(H("data-v-1735108d"),t=t(),N(),t),ca=["id"],ma={class:"card-header card-header-h3"},ha={key:0},_a={class:"float-end"},pa={key:1},fa={key:2},va={class:"float-end"},ba={class:"card-body"},ga={class:"row"},ya={class:"col-md-8"},xa={class:"row"},Va={class:"col-md-12"},Ca=w(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),Sa={class:"form-control"},ka={class:"row"},Pa={class:"col-md-6"},Ua=w(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),Aa={class:"form-control"},Ma={class:"col-md-6"},Ta=w(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),Da={class:"form-control"},Ea={class:"col-md-7"},Ra=w(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),wa={class:"input-group mb-3"},Fa=["innerHTML"],Ia=["data-bs-target"],ja={key:0,class:"col-md-5"},La=w(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),Ha={class:"form-control"},Na={class:"row"},$a={class:"col-md-12"},Oa=w(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),qa={class:"form-control"},za={key:0,class:"row"},Ba={class:"col-md-12"},Ga=w(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),Ja={class:"form-control"},Ya=w(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),Wa={class:"row"},Qa={class:"col-md-12"},Xa=["href"],Za=["href"],Ka=["href"],eo=["href"],to={class:"col-md-4"},no=w(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),so={class:"table table-bordered table-condensed"},io=w(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),ro={style:{"text-align":"right"}},lo=w(()=>e("br",null,null,-1)),ao={key:0},oo=["data-id"],uo=["data-id"],co=["data-id"];function mo(t,n,s,b,i,r){const l=L,c=j,_=D("utilisateur"),u=D("u-heures"),C=la;return a(),o(x,null,[e("div",{id:s.mission.id,class:T([{"bg-success":s.mission.valide,"bg-default":!s.mission.valide},"card"])},[e("form",{onSubmit:n[4]||(n[4]=S((...f)=>t.submitForm&&t.submitForm(...f),["prevent"]))},[e("div",ma,[s.mission.libelleMission?(a(),o("h5",ha,[m(d(s.mission.libelleMission)+" ",1),e("span",_a,[m("Du "),h(l,{value:s.mission.dateDebut},null,8,["value"]),m(" au "),h(l,{value:s.mission.dateFin},null,8,["value"])])])):p("",!0),s.mission.libelleMission?(a(),o("h6",pa,d(s.mission.typeMission.libelle),1)):p("",!0),s.mission.libelleMission?p("",!0):(a(),o("h5",fa,[m(d(s.mission.typeMission.libelle)+" ",1),e("span",va,[m("Du "),h(l,{value:s.mission.dateDebut},null,8,["value"]),m(" au "),h(l,{value:s.mission.dateFin},null,8,["value"])])]))]),e("div",ba,[e("div",ga,[e("div",ya,[e("div",xa,[e("div",Va,[Ca,e("div",Sa,d(s.mission.structure.libelle),1)])]),e("div",ka,[e("div",Pa,[Ua,e("div",Aa,d(s.mission.tauxRemu?s.mission.tauxRemu.libelle:null),1)]),e("div",Ma,[Ta,e("div",Da,d(s.mission.tauxRemuMajore?s.mission.tauxRemuMajore.libelle:s.mission.tauxRemu?"Idem ("+s.mission.tauxRemu.libelle+")":null),1)]),e("div",Ea,[Ra,e("div",wa,[e("div",{class:"form-control",innerHTML:r.heuresLib},null,8,Fa),e("button",{"data-bs-target":`#details-${s.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,Ia)])]),s.mission.typeMission.besoinFormation?(a(),o("div",ja,[La,e("div",Ha,d(s.mission.heuresFormation),1)])):p("",!0)]),e("div",Na,[e("div",$a,[Oa,e("div",qa,d(s.mission.description),1)])]),s.mission.typeMission.accompagnementEtudiants?(a(),o("div",za,[e("div",Ba,[Ga,e("div",Ja,[e("pre",null,d(s.mission.etudiantsSuivis),1)])])])):p("",!0),Ya,e("div",Wa,[e("div",Qa,[s.mission.canSaisie?(a(),o("a",{key:0,href:i.saisieUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=S((...f)=>r.saisie&&r.saisie(...f),["prevent"]))},"Modifier",8,Xa)):p("",!0),s.mission.canValider?(a(),o("a",{key:1,href:i.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:n[1]||(n[1]=S((...f)=>r.valider&&r.valider(...f),["prevent"]))},"Valider",8,Za)):p("",!0),s.mission.canDevalider?(a(),o("a",{key:2,href:i.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:n[2]||(n[2]=S((...f)=>r.devalider&&r.devalider(...f),["prevent"]))},"Dévalider",8,Ka)):p("",!0),s.mission.canSupprimer?(a(),o("a",{key:3,href:i.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:n[3]||(n[3]=S((...f)=>r.supprimer&&r.supprimer(...f),["prevent"]))},"Supprimer",8,eo)):p("",!0)])])]),e("div",to,[no,e("div",null,[h(c,{name:"thumbs-up",variant:"success"}),m(" Créé le "),h(l,{value:s.mission.histoCreation},null,8,["value"]),m(" par "),h(_,{mail:s.mission.histoCreateur.email,nom:s.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[h(c,{name:s.mission.valide?"thumbs-up":"thumbs-down",variant:s.mission.valide?"success":"info"},null,8,["name","variant"]),m(" "+d(i.validationText)+" ",1),s.mission.validation&&s.mission.validation.histoCreateur?(a(),E(_,{key:0,mail:s.mission.validation.histoCreateur.email,nom:s.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):p("",!0)]),e("div",null,[h(c,{name:s.mission.contrat?"thumbs-up":"thumbs-down",variant:s.mission.contrat?"success":"info"},null,8,["name","variant"]),m(" "+d(s.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,d(s.mission.heuresRealisees)+" heure"+d(s.mission.heuresRealisees<2?"":"s")+" réalisée"+d(s.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,ca),h(C,{id:`details-${s.mission.id}`,title:"Détail des heures prévisionnelles"},{body:M(()=>[e("table",so,[io,e("tbody",null,[(a(!0),o(x,null,V(s.mission.volumesHorairesPrevus,f=>(a(),o("tr",{key:f.id},[e("td",ro,[h(u,{valeur:f.heures},null,8,["valeur"])]),e("td",null,[h(c,{name:"thumbs-up",variant:"success"}),m(" Saisi par "),h(_,{mail:f.histoCreateur.email,nom:f.histoCreateur.displayName},null,8,["mail","nom"]),m(" le "),h(l,{value:f.histoCreation},null,8,["value"]),lo,h(c,{name:f.valide?"thumbs-up":"thumbs-down",variant:f.valide?"success":"info"},null,8,["name","variant"]),m(" "+d(f.validation&&f.validation.id==null?"Autovalidé":f.validation?"":"à valider")+" ",1),f.validation&&f.validation.histoCreateur?(a(),o("span",ao,[m(" Validé par "),h(_,{mail:f.validation.histoCreateur.email,nom:f.validation.histoCreateur.displayName},null,8,["mail","nom"]),m(" le "),h(l,{value:f.validation.histoCreation},null,8,["value"])])):p("",!0)]),e("td",null,[f.canValider?(a(),o("a",{key:0,"data-id":f.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:n[5]||(n[5]=S((...F)=>r.volumeHoraireValider&&r.volumeHoraireValider(...F),["prevent"]))},"Valider",8,oo)):p("",!0),f.canDevalider?(a(),o("a",{key:1,"data-id":f.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:n[6]||(n[6]=S((...F)=>r.volumeHoraireDevalider&&r.volumeHoraireDevalider(...F),["prevent"]))},"Dévalider",8,uo)):p("",!0),f.canSupprimer?(a(),o("a",{key:2,"data-id":f.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:n[7]||(n[7]=S((...F)=>r.volumeHoraireSupprimer&&r.volumeHoraireSupprimer(...F),["prevent"]))},"Supprimer",8,co)):p("",!0)])]))),128))])])]),footer:M(()=>[]),_:1},8,["id"])],64)}const X=k(da,[["render",mo],["__scopeId","data-v-1735108d"]]),ho=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"})),_o={components:{mission:X},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},supprimer(t){this.reload()},refresh(t){let n=Util.json.indexById(this.missions,t.id);this.missions[n]=t,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(t=>{this.missions=t.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},po=["href"];function fo(t,n,s,b,i,r){const l=D("mission");return a(),o(x,null,[(a(!0),o(x,null,V(i.missions,c=>(a(),E(l,{onSupprimer:r.supprimer,onRefresh:r.refresh,key:c.id,mission:c},null,8,["onSupprimer","onRefresh","mission"]))),128)),s.canAddMission?(a(),o("a",{key:0,class:"btn btn-primary",href:i.ajoutUrl,onClick:n[0]||(n[0]=S((...c)=>r.ajout&&r.ajout(...c),["prevent"]))},"Ajout d'une nouvelle mission",8,po)):p("",!0)],64)}const vo=k(_o,[["render",fo]]),bo=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),go={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},canValiderCandidature:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(t=>{this.candidatures=t.data})},validerCandidature(t){modAjax(t.currentTarget,n=>{this.reload()})},refuserCandidature(t){popConfirm(t.target,n=>{this.reload()})},urlOffre(t){return unicaenVue.url("offre-emploi/detail/:offre",{offre:t.offre.id})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})}}},yo={class:"table table-bordered"},xo=e("th",null,"Offre d'emploi",-1),Vo=e("th",null,"Composante",-1),Co=e("th",null,"Etat",-1),So=e("th",null,"Date commission",-1),ko={key:0},Po={key:0},Uo={key:0,colspan:"5",style:{"text-align":"center"}},Ao={style:{"text-align":"center"}},Mo=["href"],To={style:{"text-align":"center"}},Do={style:{"text-align":"center"}},Eo={key:0,class:"badge rounded-pill bg-success"},Ro={key:1,class:"badge rounded-pill bg-danger"},wo={key:2,class:"badge rounded-pill bg-warning"},Fo={key:0,style:{"text-align":"center"}},Io=["href"],jo=e("i",{class:"fa-solid fa-check"},null,-1),Lo=[jo],Ho=["href"],No=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),$o=[No],Oo=["href"];function qo(t,n,s,b,i,r){const l=L,c=j;return a(),o("div",null,[e("table",yo,[e("thead",null,[e("tr",null,[xo,Vo,Co,So,s.canValiderCandidature?(a(),o("th",ko,"Action")):p("",!0)])]),e("tbody",null,[i.candidatures.length==0?(a(),o("tr",Po,[s.canValiderCandidature?(a(),o("td",Uo,"Aucune candidature")):p("",!0)])):p("",!0),(a(!0),o(x,null,V(i.candidatures,_=>(a(),o("tr",{key:_.id},[e("td",Ao,[e("a",{href:r.urlOffre(_)},d(_.offre.titre),9,Mo)]),e("td",To,d(_.offre.structure.libelleCourt),1),e("td",Do,[_.validation?(a(),o("span",Eo,"Acceptée par "+d(_.validation.histoCreateur.displayName),1)):p("",!0),!_.validation&&_.motif!==null?(a(),o("span",Ro,d(_.motif),1)):p("",!0),!_.validation&&_.motif===null?(a(),o("span",wo,"En attente d'acceptation")):p("",!0)]),e("td",null,[_.dateCommission?(a(),E(l,{key:0,value:_.dateCommission},null,8,["value"])):p("",!0)]),this.canValiderCandidature?(a(),o("td",Fo,[_.validation?p("",!0):(a(),o("a",{key:0,href:r.urlAccepterCandidature(_),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:n[0]||(n[0]=S((...u)=>r.validerCandidature&&r.validerCandidature(...u),["prevent"]))},Lo,8,Io)),m("  "),e("a",{href:r.urlRefuserCandidature(_),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:n[1]||(n[1]=S((...u)=>r.refuserCandidature&&r.refuserCandidature(...u),["prevent"]))},$o,8,Ho)])):p("",!0)]))),128))])]),e("a",{href:i.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[h(c,{name:"eye"}),m(" Voir toutes les offres d'emploi ")],8,Oo),m("  ")])}const zo=k(go,[["render",qo]]),Bo=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),Go={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let t=this.offre.description.substr(0,200);return this.offre.description.length>200&&(t+="..."),t},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let t="auth/connexion?redirect="+window.location.href;return unicaenVue.url(t)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(t){modAjax(t.target,n=>{this.refresh()})},urlVoir:function(t){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+t.intervenant.code})},urlVoirCandidature:function(t){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+t.intervenant.code})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(t=>{this.$emit("refresh",t.data)})},supprimer(t){popConfirm(t.target,n=>{this.$emit("supprimer",this.offre)})},postuler(t){popConfirm(t.target,n=>{this.$emit("postuler",this.offre)})},valider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},devalider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},validerCandidature(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},refuserCandidature(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})}}},Jo={key:0,class:"col"},Yo={class:"card h-100"},Wo={class:"card-header"},Qo={class:"badge rounded-pill bg-info"},Xo={key:0,class:"badge rounded-pill bg-success"},Zo={key:1,class:"badge rounded-pill bg-warning"},Ko={class:"card-body"},eu={class:"bg-light",style:{padding:"5px"}},tu=e("b",null,"Créée le : ",-1),nu=e("br",null,null,-1),su=e("b",null,"Période à pourvoir : ",-1),iu=e("br",null,null,-1),ru=e("b",null,"Demandée par la composante :",-1),lu=e("br",null,null,-1),au=e("b",null,"Type de mission :",-1),ou={class:"card-footer"},uu={class:"d-grid gap-2 d-md-flex justify-content-md-end"},du=["href"],cu={key:1},mu={class:"page-header"},hu={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},_u=e("i",{class:"fa-solid fa-user"},null,-1),pu={class:"ms-2"},fu=["href"],vu={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},bu=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),gu=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),yu=[bu,gu],xu={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},Vu=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),Cu=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),Su=[Vu,Cu],ku={class:"bg-light",style:{padding:"10px"}},Pu=e("b",null,"Créée le : ",-1),Uu=e("br",null,null,-1),Au=e("b",null,"Période à pourvoir : ",-1),Mu=e("br",null,null,-1),Tu=e("b",null,"Date limite de candidature :",-1),Du=e("br",null,null,-1),Eu=e("b",null,"Demandé par la composante :",-1),Ru=e("br",null,null,-1),wu=e("b",null,"Type de mission :",-1),Fu=e("br",null,null,-1),Iu=e("b",null,"Nombre d'heures pour la mission :",-1),ju=e("br",null,null,-1),Lu=e("b",null,"Nombre de postes à pourvoir :",-1),Hu=e("br",null,null,-1),Nu=["innerHTML"],$u={key:3,class:"alert alert-info"},Ou=["innerHTML"],qu=e("br",null,null,-1),zu={key:4},Bu=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),Gu={class:"table table-bordered"},Ju=e("th",null,"Intervenant",-1),Yu=e("th",null,"Etat",-1),Wu={key:0},Qu={key:0},Xu={key:0,colspan:"4",style:{"text-align":"center"}},Zu={key:1,colspan:"3",style:{"text-align":"center"}},Ku=["href"],ed={key:0,class:"badge rounded-pill bg-success"},td={key:1,class:"badge rounded-pill bg-danger"},nd={key:2,class:"badge rounded-pill bg-warning"},sd={key:0},id=["href"],rd={class:"mt-5"},ld=["href"],ad=["href"],od=["href"],ud=["href"],dd=["href"],cd=["href"];function md(t,n,s,b,i,r){const l=L,c=j;return a(),o(x,null,[this.extended?p("",!0):(a(),o("div",Jo,[e("div",Yo,[e("div",Wo,[e("h4",null,d(s.offre.titre),1),e("span",Qo,d(s.offre.nombreHeures)+" heure(s)",1),m("   "),s.offre.validation?(a(),o("span",Xo,[m("Validée le "),h(l,{value:s.offre.validation.histoCreation},null,8,["value"]),m(" par "+d(s.offre.validation.histoCreateur.displayName),1)])):p("",!0),s.offre.validation?p("",!0):(a(),o("span",Zo," En attente de validation par la DRH")),m("  ")]),e("div",Ko,[e("p",eu,[tu,h(l,{value:s.offre.histoCreation},null,8,["value"]),m(" par "+d(s.offre.histoCreateur.displayName),1),nu,su,m("du "),h(l,{value:s.offre.dateDebut},null,8,["value"]),m(" au "),h(l,{value:s.offre.dateFin},null,8,["value"]),iu,ru,m(" "+d(s.offre.structure.libelleCourt)+" ",1),lu,au,m(" "+d(s.offre.typeMission.libelle),1)]),m(" "+d(r.shortDesc),1)]),e("div",ou,[e("div",uu,[e("a",{href:i.consulterUrl,class:"btn btn-primary",title:"Consulter "},[h(c,{name:"eye"}),m(" Voir ")],8,du)])])])])),this.extended?(a(),o("div",cu,[e("h1",mu,d(s.offre.titre),1),this.utilisateur?p("",!0):(a(),o("div",hu,[_u,e("div",pu,[m(" Vous devez "),e("a",{href:r.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,fu),m(" pour pouvoir postuler. ")])])),!s.offre.canPostuler&&this.utilisateur?(a(),o("div",vu,yu)):p("",!0),r.isCandidat&&this.utilisateur?(a(),o("div",xu,Su)):p("",!0),e("p",ku,[Pu,h(l,{value:s.offre.histoCreation},null,8,["value"]),m(" par "+d(s.offre.histoCreateur.displayName),1),Uu,Au,m("du "),h(l,{value:s.offre.dateDebut},null,8,["value"]),m(" au "),h(l,{value:s.offre.dateFin},null,8,["value"]),Mu,Tu,h(l,{value:s.offre.dateLimite},null,8,["value"]),Du,Eu,m(" "+d(s.offre.structure.libelleCourt)+" ",1),Ru,wu,m(" "+d(s.offre.typeMission.libelle)+" ",1),Fu,Iu,m(" "+d(s.offre.nombreHeures)+" heure(s) ",1),ju,Lu,m(" "+d(s.offre.nombrePostes)+" poste(s) ",1),Hu]),e("p",{innerHTML:this.descriptionHtml},null,8,Nu),this.decretText?(a(),o("p",$u,[v(e("input",{id:"decret","onUpdate:modelValue":n[0]||(n[0]=_=>i.decret=_),name:"decret",type:"checkbox"},null,512),[[O,i.decret]]),m("  "),e("span",{innerHTML:this.decretText},null,8,Ou)])):p("",!0),qu,this.canValiderCandidature?(a(),o("div",zu,[Bu,e("table",Gu,[e("thead",null,[e("tr",null,[Ju,Yu,s.canValiderCandidature?(a(),o("th",Wu,"Action")):p("",!0)])]),e("tbody",null,[s.offre.candidatures.length==0?(a(),o("tr",Qu,[s.canValiderCandidature?(a(),o("td",Xu,"Aucune candidature")):p("",!0),s.canValiderCandidature?p("",!0):(a(),o("td",Zu,"Aucune candidature"))])):p("",!0),(a(!0),o(x,null,V(s.offre.candidatures,_=>(a(),o("tr",null,[e("td",null,[e("a",{href:r.urlVoir(_)},d(_.intervenant.prenom+" "+_.intervenant.nomUsuel),9,Ku)]),e("td",null,[_.validation?(a(),o("span",ed,[m("Acceptée le "),h(l,{value:_.validation.histoCreation},null,8,["value"]),m(" par "+d(_.validation.histoCreateur.displayName),1)])):p("",!0),!_.validation&&_.motif!==null?(a(),o("span",td,d(_.motif),1)):p("",!0),!_.validation&&_.motif===null?(a(),o("span",nd,"En attente d'acceptation")):p("",!0)]),this.canValiderCandidature?(a(),o("td",sd,[e("a",{href:r.urlVoirCandidature(_),class:"btn btn-primary",title:"Consulter "},[h(c,{name:"eye"}),m(" Voir ")],8,id)])):p("",!0)]))),256))])])])):p("",!0),e("div",rd,[e("a",{href:i.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,ld),m("  "),this.canPostuler?(a(),o("a",{key:0,class:T([i.decret?"":"disabled","btn btn-primary"]),href:i.postulerUrl,"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,ad)):p("",!0),m("  "),s.offre.canModifier?(a(),o("a",{key:1,href:i.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:n[1]||(n[1]=S((..._)=>r.saisir&&r.saisir(..._),["prevent"]))},[h(c,{name:"pen-to-square"}),m(" Modifier ")],8,od)):p("",!0),m("  "),s.offre.validation&&s.offre.canValider?(a(),o("a",{key:2,href:i.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:n[2]||(n[2]=S((..._)=>r.devalider&&r.devalider(..._),["prevent"]))},[h(c,{name:"thumbs-down"}),m(" Devalider ")],8,ud)):p("",!0),m("  "),!s.offre.validation&&s.offre.canValider?(a(),o("a",{key:3,href:i.validerUrl,class:"btn btn-success",title:"Valider",onClick:n[3]||(n[3]=S((..._)=>r.valider&&r.valider(..._),["prevent"]))},[h(c,{name:"thumbs-up"}),m(" Valider ")],8,dd)):p("",!0),m("  "),s.offre.canSupprimer?(a(),o("a",{key:4,href:i.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:n[4]||(n[4]=S((..._)=>r.supprimer&&r.supprimer(..._),["prevent"]))},[h(c,{name:"trash"}),m(" Supprimer ")],8,cd)):p("",!0)])])):p("",!0)],64)}const Z=k(Go,[["render",md]]),hd=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"})),_d={components:{offreEmploi:Z},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(t){modAjax(t.target,n=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(t){let n=Util.json.indexById(this.offres,t.id);this.offres[n]=t},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(t=>{this.offres=[t.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(t=>{this.offres=t.data})}}},pd={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},fd={key:1},vd=["href"],bd={key:2};function gd(t,n,s,b,i,r){const l=D("offreEmploi");return a(),o(x,null,[r.extended?p("",!0):(a(),o("div",pd,[(a(!0),o(x,null,V(i.offres,c=>(a(),E(l,{key:c.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:c,decretText:c.decretText,onRefresh:r.refresh,onSupprimer:r.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),r.extended?p("",!0):(a(),o("div",fd,[this.canModifier?(a(),o("a",{key:0,href:i.ajoutUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=S((...c)=>r.ajout&&r.ajout(...c),["prevent"]))},"Ajouter une nouvelle offre",8,vd)):p("",!0)])),r.extended?(a(),o("div",bd,[(a(!0),o(x,null,V(i.offres,c=>(a(),E(l,{key:c.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:c.decretText,extended:r.extended,offre:c,utilisateur:this.utilisateur,onRefresh:r.refresh,onSupprimer:r.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):p("",!0)],64)}const yd=k(_d,[["render",gd]]),xd=Object.freeze(Object.defineProperty({__proto__:null,default:yd},Symbol.toStringTag,{value:"Module"})),Vd={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(t){popConfirm(t.target,n=>{this.$emit("reload")})},valider(t){popConfirm(t.target,n=>{this.$emit("reload")})},devalider(t){popConfirm(t.target,n=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(t=>{this.$emit("reload")})},modifierPrime(t){modAjax(t.currentTarget,n=>{this.$emit("reload")})},supprimerPrime(t){popConfirm(t.target,n=>{this.$emit("reload")})}}},Cd={key:0},Sd=e("br",null,null,-1),kd=e("u",null,"Mission(s) concernée(s)",-1),Pd={key:0},Ud=["action"],Ad={class:"card-body"},Md={class:"row"},Td={key:0,class:"col-md-6"},Dd={class:"card text-dark bg-light"},Ed=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),Rd={class:"card-body"},wd=e("p",{class:"card-text"},[m(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),m(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),m(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),Fd=["disabled"],Id={class:"card-footer d-grid gap-2"},jd=["disabled"],Ld={key:1,class:"col-md-6"},Hd={class:"card text-dark bg-light"},Nd=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),$d={class:"card-body"},Od=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),qd=["href"],zd={class:"card-footer",style:{"text-align":"right"}},Bd=["href"],Gd=["href"],Jd=["href"],Yd={class:"col-md-6"},Wd={key:0},Qd=["checked","disabled"],Xd=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),Zd=e("br",null,null,-1),Kd=e("br",null,null,-1),ec=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),tc={key:0},nc={key:1},sc={key:2},ic={key:3},rc={key:4},lc={key:5},ac={key:6},oc={class:"row"},uc={class:"col-md-12"},dc={class:"float-end"},cc=["href"],mc=["href"];function hc(t,n,s,b,i,r){const l=L,c=j;return a(),o("div",{class:T([{"bg-success":s.prime.validation,"bg-default":!s.prime.validation&&!s.prime.dateRefus,"bg-danger":s.prime.dateRefus},"card"])},[e("div",{class:T([{"text-white":s.prime.dateRefus},"card-header card-header-h3"])},[s.prime.id?(a(),o("h5",Cd,[m(" Indemnité de fin de contrat N°"+d(s.numero+1),1),Sd])):p("",!0),e("div",null,[kd,m(" : "),(a(!0),o(x,null,V(s.prime.missions,(_,u)=>(a(),o("span",null,[m(d(_.typeMission.libelle)+" (Pour "+d(_.structure.libelleCourt)+" du ",1),h(l,{value:_.dateDebut},null,8,["value"]),m(" au "),h(l,{value:_.dateFin},null,8,["value"]),m(") "),u!=s.prime.missions.length-1?(a(),o("span",Pd,", ")):p("",!0)]))),256))])],2),e("form",{action:i.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",Ad,[e("div",Md,[s.prime.declaration?p("",!0):(a(),o("div",Td,[e("div",Dd,[Ed,e("div",Rd,[wd,e("input",{ref:"file",disabled:!!s.prime.dateRefus,name:"files[]",type:"file"},null,8,Fd)]),e("div",Id,[e("input",{disabled:!!s.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,jd)])])])),s.prime.declaration?(a(),o("div",Ld,[e("div",Hd,[Nd,e("div",$d,[Od,e("a",{href:i.telechargerUrl},d(s.prime.declaration.nom),9,qd)]),e("div",zd,[s.prime.declaration&&!s.prime.validation&&!s.prime.dateRefus?(a(),o("a",{key:0,href:i.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:n[0]||(n[0]=S((..._)=>r.supprimer&&r.supprimer(..._),["prevent"]))}," Supprimer ",8,Bd)):p("",!0),m("  "),s.prime.declaration&&!s.prime.validation&&this.canGerer&&!s.prime.dateRefus?(a(),o("a",{key:1,href:i.validerUrl,class:"btn btn-success",title:"Valider",onClick:n[1]||(n[1]=S((..._)=>r.valider&&r.valider(..._),["prevent"]))}," Valider ",8,Gd)):p("",!0),m("  "),s.prime.declaration&&s.prime.validation&&this.canGerer&&!s.prime.dateRefus?(a(),o("a",{key:2,href:i.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:n[2]||(n[2]=S((..._)=>r.devalider&&r.devalider(..._),["prevent"]))}," Dévalider ",8,Jd)):p("",!0),m("  ")])])])):p("",!0),e("div",Yd,[s.prime.validation?p("",!0):(a(),o("div",Wd,[e("input",{checked:s.prime.dateRefus,disabled:s.prime.validation,name:"prime",type:"checkbox",onChange:n[3]||(n[3]=(..._)=>r.refuser&&r.refuser(..._))},null,40,Qd),m("  Ou en cochant cette case, "),Xd,m(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),Zd,Kd])),e("div",null,[ec,s.prime.dateRefus?(a(),o("div",tc,[h(c,{name:"thumbs-down",variant:"danger"}),m(" Indemnité refusée le "),h(l,{value:s.prime.dateRefus},null,8,["value"])])):p("",!0),s.prime.declaration&&!s.prime.dateRefus?(a(),o("div",nc,[h(c,{name:"thumbs-up",variant:"success"}),m(" Déclaration déposée le "),h(l,{value:s.prime.declaration.histoCreation},null,8,["value"]),m(" par "+d(s.prime.declaration.histoCreateur.displayName),1)])):p("",!0),!s.prime.declaration&&!s.prime.dateRefus?(a(),o("div",sc,[h(c,{name:"thumbs-down",variant:"info"}),m(" Aucune déclaration déposée ")])):p("",!0),s.prime.validation&&!s.prime.dateRefus?(a(),o("div",ic,[h(c,{name:"thumbs-up",variant:"success"}),m(" Déclaration validée le "),h(l,{value:s.prime.validation.histoCreation},null,8,["value"]),m(" par "+d(s.prime.validation.histoCreateur.displayName),1)])):p("",!0),!s.prime.validation&&!s.prime.dateRefus?(a(),o("div",rc,[h(c,{name:"thumbs-down",variant:"info"}),m(" Aucune déclaration validée ")])):p("",!0),s.prime.validation&&!s.prime.dateRefus?(a(),o("div",lc,[h(c,{name:"euro-sign",variant:"success"}),m(" Intervenant éligible à une indemnité de fin de contrat ")])):p("",!0),s.prime.dateRefus?(a(),o("div",ac,[h(c,{name:"euro-sign",variant:"info"}),m(" Intervenant non éligible à une indemnité de fin de contrat ")])):p("",!0)])])]),e("div",oc,[e("div",uc,[e("span",dc,[!s.prime.validation&&!s.prime.dateRefus&&this.canGerer?(a(),o("a",{key:0,href:i.modifierPrimeUrl,class:"btn btn-primary",onClick:n[4]||(n[4]=S((..._)=>r.modifierPrime&&r.modifierPrime(..._),["prevent"]))},"Modifier",8,cc)):p("",!0),m("   "),!s.prime.validation&&!s.prime.dateRefus&&this.canGerer?(a(),o("a",{key:1,href:i.supprimerPrimeUrl,class:"btn btn-danger",onClick:n[5]||(n[5]=S((..._)=>r.supprimerPrime&&r.supprimerPrime(..._),["prevent"]))},"Supprimer",8,mc)):p("",!0)])])])])],8,Ud)],2)}const K=k(Vd,[["render",hc]]),_c=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"})),pc={components:{prime:K},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(t=>{this.primes=t.data,this.load=!0})}}},fc={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},vc=e("br",null,null,-1),bc=e("br",null,null,-1),gc={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},yc=e("br",null,null,-1),xc=e("br",null,null,-1),Vc={key:2},Cc=["href"];function Sc(t,n,s,b,i,r){const l=D("prime");return a(),o(x,null,[(a(!0),o(x,null,V(i.primes,(c,_)=>(a(),E(l,{canGerer:s.canGerer,intervenant:this.intervenant,numero:_,prime:c,onReload:r.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),i.load?p("",!0):(a(),o("div",fc,[m(" Chargement en cours..."),vc,bc])),i.primes.length==0&&i.load?(a(),o("div",gc,[m(" Aucune indemnité de fin de contrat actuellement..."),yc,xc])):p("",!0),this.missionsWithoutPrime>0&&this.canGerer?(a(),o("div",Vc,[e("a",{href:i.ajoutUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=S((...c)=>r.ajout&&r.ajout(...c),["prevent"]))},"Créer une nouvelle indemnité",8,Cc)])):p("",!0)],64)}const kc=k(pc,[["render",Sc]]),Pc=Object.freeze(Object.defineProperty({__proto__:null,default:kc},Symbol.toStringTag,{value:"Module"})),Uc={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const t=new Date(this.date);return{mois:t.getMonth()+1,annee:t.getFullYear()}},computed:{listeJours(){const t=new Date(this.date);t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1);let n=t.getDate();return Array.from({length:n},(s,b)=>b+1)}},watch:{date:function(t,n){const s=new Date(this.date);this.mois=s.getMonth()+1,this.annee=s.getFullYear()},mois:function(t,n){const s=new Date(this.date);s.setMonth(t-1),this.$emit("changeDate",s)},annee:function(t,n){const s=new Date(this.date);s.setFullYear(t),this.$emit("changeDate",s)}},methods:{nomJour(t){const n=new Date(this.date);return n.setDate(t),n.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let t=[];const n=new Date;for(let s=1;s<=12;s++){n.setMonth(s-1);let b=n.toLocaleString("fr-FR",{month:"long"});t.push({id:s,libelle:b})}return t},listeAnnees(){const n=new Date().getFullYear(),s=1;let b=[];for(let i=n-s;i<=n+s;i++)b.push(i);return b},canAdd(t){if(!this.canAddEvent)return!1;let n=this.addDateDebut;n===void 0?n=new Date("2000-01-01"):n==="now"?n=new Date:n=new Date(n);let s=this.addDateFin;s===void 0?s=new Date("2500-01-01"):s==="now"?s=new Date:s=new Date(s);let b=new Date(this.date);return b.setDate(t),n=this.isoDateOnly(n),s=this.isoDateOnly(s),b=this.isoDateOnly(b),!(b<n||b>s)},addEvent(t){const n=new Date(this.date);n.setDate(t.currentTarget.dataset.jour),this.$emit("addEvent",n,t)},prevMois(){const t=new Date(this.date);t.setMonth(t.getMonth()-1),this.$emit("changeDate",t)},nextMois(){const t=new Date(this.date);t.setMonth(t.getMonth()+1),this.$emit("changeDate",t)},eventsByJour(t){const n=new Date(this.date);let s={};for(let b in this.events){let i=this.events[b];i.date.getFullYear()===n.getFullYear()&&i.date.getMonth()+1===n.getMonth()+1&&i.date.getDate()===t&&(s[b]=i)}return s},isoDateOnly(t){const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),b=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${b}`}}},Ac={class:"calendar"},Mc={class:"recherche"},Tc={class:"recherche btn-group"},Dc=["value"],Ec=["value"],Rc={class:"table table-bordered table-hover table-sm"},wc=["data-jour"],Fc={class:"nom-jour"},Ic={class:"numero-jour"},jc={class:"num-jour badge bg-secondary rounded-circle"},Lc={key:0},Hc=["data-jour"];function Nc(t,n,s,b,i,r){const l=j;return a(),o("div",Ac,[e("div",Mc,[e("div",Tc,[e("button",{class:"btn btn-light",id:"prevMois",onClick:n[0]||(n[0]=(...c)=>r.prevMois&&r.prevMois(...c)),title:"Mois précédant"},[h(l,{name:"chevron-left"})]),v(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":n[1]||(n[1]=c=>i.mois=c)},[(a(!0),o(x,null,V(r.listeMois(),c=>(a(),o("option",{value:c.id},d(c.libelle),9,Dc))),256))],512),[[U,i.mois]]),v(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":n[2]||(n[2]=c=>i.annee=c)},[(a(!0),o(x,null,V(r.listeAnnees(),c=>(a(),o("option",{value:c},d(c),9,Ec))),256))],512),[[U,i.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:n[3]||(n[3]=(...c)=>r.nextMois&&r.nextMois(...c)),title:"Mois suivant"},[h(l,{name:"chevron-right"})])])]),e("table",Rc,[(a(!0),o(x,null,V(r.listeJours,c=>(a(),o("tr",{"data-jour":c},[e("th",Fc,d(r.nomJour(c)),1),e("th",Ic,[e("div",jc,d(c<10?"0"+c.toString():c),1)]),e("td",null,[(a(!0),o(x,null,V(r.eventsByJour(c),(_,u)=>(a(),o("div",{class:"event",style:le("border-color:"+_.color+";background-color:"+_.bgcolor),key:u},[(a(),E(ae(_.component),{event:_},null,8,["event"]))],4))),128)),r.canAdd(c)?(a(),o("div",Lc,[e("button",{onClick:n[4]||(n[4]=(..._)=>r.addEvent&&r.addEvent(..._)),"data-jour":c,class:"btn btn-light btn-sm"},[h(l,{name:"plus"}),m(" Nouvel événement ")],8,Hc)])):p("",!0)])],8,wc))),256))])])}const $c=k(Uc,[["render",Nc],["__scopeId","data-v-51bbc42d"]]),Oc={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(t){modAjax(t.currentTarget,n=>{this.suivi.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.suivi.refresh()})},valider(t){unicaenVue.axios.get(this.validerUrl).then(n=>{this.suivi.refresh()})},devalider(t){popConfirm(t.currentTarget,n=>{this.suivi.refresh()})}}},qc={class:"event-content"},zc={class:"mission"},Bc={key:0,class:"badge bg-success"},Gc={class:"horaires"},Jc={key:0,class:"badge bg-secondary"},Yc={key:0,class:"description"},Wc={class:"event-actions"},Qc={class:"btn-group btn-group-sm"},Xc=["data-url"],Zc=["data-url"],Kc=["data-url"],em=["data-url"];function tm(t,n,s,b,i,r){const l=j;return a(),o(x,null,[e("div",qc,[e("p",zc,[m(d(s.event.mission.libelleCourt)+" ",1),s.event.valide?(a(),o("span",Bc,"Validé")):p("",!0)]),e("p",Gc,[m(" de "+d(r.heureDebut)+" à "+d(r.heureFin)+", soit "+d(r.heures)+" heure"+d(r.heures<2?"":"s")+" ",1),s.event.formation?(a(),o("span",Jc,"En formation")):p("",!0)]),s.event.description?(a(),o("p",Yc,d(s.event.description),1)):p("",!0)]),e("div",Wc,[e("div",Qc,[s.event.canEdit?(a(),o("button",{key:0,class:"btn btn-light",onClick:n[0]||(n[0]=(...c)=>r.modifier&&r.modifier(...c)),title:"Modifier le suivi","data-url":i.modifierUrl},[h(l,{name:"pen-to-square"})],8,Xc)):p("",!0),s.event.canValider?(a(),o("button",{key:1,class:"btn btn-light",onClick:n[1]||(n[1]=(...c)=>r.valider&&r.valider(...c)),title:"Valider le suivi","data-url":i.validerUrl},[h(l,{name:"check",class:"text-success"})],8,Zc)):p("",!0),s.event.canDevalider?(a(),o("button",{key:2,class:"btn btn-light",onClick:n[2]||(n[2]=(...c)=>r.devalider&&r.devalider(...c)),title:"Dévalider le suivi","data-url":i.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[h(l,{name:"xmark",class:"text-danger"})],8,Kc)):p("",!0),s.event.canSupprimer?(a(),o("button",{key:3,class:"btn btn-light",onClick:n[3]||(n[3]=(...c)=>r.supprimer&&r.supprimer(...c)),title:"Supprimer le suivi","data-url":i.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[h(l,{name:"trash-can",class:"text-danger"})],8,em)):p("",!0)])])],64)}const ee=k(Oc,[["render",tm],["__scopeId","data-v-17cb1f29"]]),nm=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),sm={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(t){this.date=t},ajouter(t,n){const s={intervenant:this.intervenant,date:t.toISOString().slice(0,10)};n.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",s),modAjax(n.currentTarget,b=>{this.refresh()})},refresh(){const t=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let n=0,s=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(b=>{let i=[];for(let r in b.data){let l=b.data[r];s[l.mission.id]===void 0&&(s[l.mission.id]=t[n],n++),l.valide&&(l.bgcolor="#d0eddb"),l.color=s[l.mission.id],l.component=oe(ee),l.date=new Date(l.date),l.intervenant=this.intervenant,i.push(l)}this.suivi=i,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function im(t,n,s,b,i,r){const l=$c;return a(),E(l,{date:i.date,onChangeDate:r.changeDate,onAddEvent:r.ajouter,"can-add-event":s.canAddMission,addDateFin:"now",events:i.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const rm=k(sm,[["render",im]]),lm=Object.freeze(Object.defineProperty({__proto__:null,default:rm},Symbol.toStringTag,{value:"Module"}));function am(t){for(let n in t)for(let s in t[n])te(t[n][s],n)}function om(){let t=document.getElementById("unicaen-vue-toast-container");return t||(t=document.createElement("div"),t.id="unicaen-vue-toast-container",t.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(t)),t}function um(t){return t=dm(t),t=cm(t),t}function dm(t){const n=document.createElement("div");n.innerHTML=t;const s=n.querySelector(".alert");return s?s.innerHTML:n.innerHTML}function cm(t){const n=document.createElement("div");return n.innerHTML=t,n.querySelectorAll("i.fas").forEach(b=>b.style.display="none"),n.innerHTML}function te(t,n,s=null){const b={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},i={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},r=document.createElement("button");r.classList.add("btn-close","btn-close-white","h5"),r.style.float="right",r.setAttribute("data-bs-dismiss","toast"),r.setAttribute("aria-label","Close");const l=document.createElement("i");l.classList.add("icon","fas",`fa-${i[n]}`),l.style.float="left",l.style.fontSize="26pt",l.style.paddingLeft=".4rem",l.style.marginTop=".4rem",l.style.paddingRight="1rem";const c=document.createElement("div");c.classList.add("toast-body"),c.innerHTML=um(t);const _=document.createElement("div");_.appendChild(r),_.appendChild(l),_.appendChild(c);const u=document.createElement("div");u.classList.add("toast","text-white",b[n]?b[n]:"bg-secondary"),u.setAttribute("role","alert"),u.setAttribute("aria-live","assertive"),u.setAttribute("aria-atomic","true"),n==="error"&&t.length>500&&u.setAttribute("style","width:700px"),u.appendChild(_),om().appendChild(u),s==null&&(s={animation:!0,delay:n==="warning"?15e3:5e3,autohide:n!=="error"}),new bootstrap.Toast(u,s).show()}const B={toast:te,toasts:am};let q={...ue};q.interceptors.request.use(t=>{if(t.submitter){let n=t.msg?t.msg:"Action en cours";t.popover!=null&&t.popover.dispose(),t.popover=new bootstrap.Popover(t.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+n,html:!0,trigger:"focus"}),t.popover.show()}return t});q.interceptors.response.use(t=>{if(t.messages=t.data.messages,t.data=t.data.data,t.hasErrors=!!(t.messages&&t.messages.error&&t.messages.error.length>0),t.config.popover){var n=t.config.popover;let s="";for(ns in t.messages)for(mid in t.messages[ns])s+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+t.messages[ns][mid]+"</div>";s?(n._config.content=s,n.setContent(),setTimeout(()=>{n.dispose()},5e3)):n.dispose()}return t.messages&&B.toasts(t.messages),t},t=>{let n=t.response.data;t.response.status==403?n="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":n=t.response.data,B.toast(n,"error")});q.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const mm={uvAxios:q},G={axios:mm.uvAxios,flashMessenger:B,url:(t,n,s)=>{let b=window.__unicaenVueBaseUrl;if(n)for(let r in n)t=t.replace(`:${r}`,n[r]);let i=s?G.encodeUrlQueryParam(s):null;return b+t+(i?`?${i}`:"")},encodeUrlQueryParam:(t,n)=>{var s=[];for(var b in t)if(t.hasOwnProperty(b)){var i=t[b],r=n?n+"["+encodeURIComponent(b)+"]":encodeURIComponent(b);if(typeof i=="object"&&i!==null)s.push(G.encodeUrlQueryParam(i,r));else{var l=encodeURIComponent(i);s.push(r+"="+l)}}return s.join("&")}};window.unicaenVue=G;const hm={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{type:Array,required:!0},canMiseEnPaiement:{type:Boolean,required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),urlMiseEnPaiement:unicaenVue.url("paiement/etat-demande-paiement"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:!1,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(t){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let n=document.getElementById("formRechercheDemandeMiseEnPaiement"),s=new FormData(n),b=document.getElementById("btn-rdmep"),i=document.getElementById("btn-rdmep-inprogress");i.classList.remove("d-none"),b.classList.add("d-none"),b.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,s,{}).then(r=>{this.dispatchDatas(r.data),b.disabled=!1,i.classList.add("d-none"),b.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(c,_){c.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(c=>{let _=c.data;this.dotation=_.dotation,this.liquidation=_.liquidation,this.refreshTotalConsommation()})}).catch(r=>{console.error(r)})},processDemandeMiseEnPaiement(t){let n=document.getElementById("formProcessDemandeMiseEnPaiement"),s=new FormData(n);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>=this.totalConsommationRessourcePropre||!this.haveDotation){let b=document.getElementById("btn-pdmep"),i=document.getElementById("btn-pdmep-inprogress");i.classList.remove("d-none"),b.classList.add("d-none"),b.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,s,{}).then(r=>{this.findDemandeMiseEnPaiement(),b.disabled=!1,i.classList.add("d-none"),b.classList.remove("d-none")}).catch(r=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let t=0,n=0,s=0;t=parseFloat(this.liquidation.paieEtat),n=parseFloat(this.liquidation.ressourcePropre),s+=parseFloat(this.liquidation.ressourcePropre),s+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(i,r){i.hasAttribute("data-paie-etat")&&i.checked&&(t+=parseFloat(i.getAttribute("data-paie-etat")),s+=parseFloat(i.getAttribute("data-paie-etat"))),i.hasAttribute("data-ressource-propre")&&i.checked&&(n+=parseFloat(i.getAttribute("data-ressource-propre")),s+=parseFloat(i.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=t.toFixed(2),this.totalConsommationRessourcePropre=n.toFixed(2),this.totalConsommation=s.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(t){let n=0;return t.forEach((s,b)=>{s.centreCout.code!=""&&(s.missionId!=""||s.serviceRefId!=""?s.domaineFonctionnel.code!=""&&(n+=s.heuresAPayer):n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalNonPayable(t){let n=0;return t.forEach((s,b)=>{(s.centreCout.code==""||(s.missionId!=""||s.serviceRefId!="")&&s.domaineFonctionnel.code=="")&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePaieEtat(t){let n=0;return t.forEach((s,b)=>{s.centreCout.typeRessourceCode=="paie-etat"&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(t){let n=0;return t.forEach((s,b)=>{s.centreCout.typeRessourceCode=="ressources-propres"&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(t){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[],console.log(t);for(const[n,s]of Object.entries(t))switch(s.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(s),this.intervenants.push(s);break;case"Intervenant permanent":this.permanents.push(s),this.intervenants.push(s);break;case"Étudiant":this.etudiants.push(s),this.intervenants.push(s);break;default:this.autres.push(s),this.intervenants.push(s)}},toggleCheckbox(t){let n=Array.from(document.getElementsByClassName(t.target.className));t.target.checked?n.forEach(function(s,b){s.checked=!0}):n.forEach(function(s,b){s.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(t){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:t.datasIntervenant.code})},formattedHETD(t){return Util.formattedHeures(t,!1)}}},_m=e("h1",null,"Demande de mise en paiement par lots",-1),pm={class:"card text-dark bg-light"},fm=e("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1),vm={class:"card-body"},bm={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},gm={class:"mb-3"},ym=e("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1),xm=["value"],Vm={class:"mb-3"},Cm=e("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),m("  Veuillez patienter... ")],-1),Sm=["disabled"],km=e("div",{class:"alert alert-info",role:"alert"},[m(" Seules les HETD "),e("strong",null,"(hors référentiel)"),m(" avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisées. Pour les autres, il faudra passer sur chaque fiches intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ")],-1),Pm={key:0},Um={key:0,class:"alert alert-danger",role:"alert"},Am={class:"table table-bordered caption-top"},Mm=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Budget"),e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressource propre"),e("th",{class:"fw-bold",scope:"col"},"Total")])],-1),Tm=e("td",null,"Dotation",-1),Dm={class:"fw-bold"},Em=e("td",null,"Consommation",-1),Rm={class:"fw-bold"},wm={id:"dmep",class:"accordion"},Fm={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},Im={key:0,class:"accordion-item"},jm={id:"dmep-permanents-heading",class:"accordion-header"},Lm={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},Hm={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},Nm={class:"accordion-body"},$m={class:"table"},Om={scope:"col"},qm=e("th",{scope:"col"},"Intervenant",-1),zm=e("th",null,"HETD payables",-1),Bm=e("th",null,"HETD non payables",-1),Gm=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Jm=["href"],Ym=["title"],Wm={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Qm={key:1,class:"accordion-item"},Xm={id:"dmep-vacataires-heading",class:"accordion-header"},Zm={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},Km={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},eh={class:"accordion-body"},th={class:"table"},nh=e("th",null,"Intervenant",-1),sh=e("th",null,"HETD payables",-1),ih=e("th",null,"HETD non payables",-1),rh=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],lh=["href"],ah=["title"],oh={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},uh={key:2,class:"accordion-item"},dh={id:"dmep-etudiants-heading",class:"accordion-header"},ch={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},mh={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},hh={class:"accordion-body"},_h={class:"table"},ph=e("th",null,"Intervenant",-1),fh=e("th",null,"HETD payables",-1),vh=e("th",null,"HETD non payables",-1),bh=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],gh=["href"],yh=["title"],xh={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Vh={key:3,class:"accordion-item"},Ch={id:"dmep-autres-heading",class:"accordion-header"},Sh={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},kh={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},Ph={class:"accordion-body"},Uh={class:"table"},Ah=e("th",null,"Intervenant",-1),Mh=e("th",null,"HETD payables",-1),Th=e("th",null,"HETD non payables",-1),Dh=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Eh=["href"],Rh=["title"],wh={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Fh={key:4,class:"mt-3"},Ih=e("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),m("  Veuillez patienter... ")],-1),jh=["disabled"],Lh=["href"];function Hh(t,n,s,b,i,r){return a(),o(x,null,[_m,e("div",pm,[fm,e("div",vm,[e("form",bm,[e("div",gm,[ym,m("  "),v(e("select",{"onUpdate:modelValue":n[0]||(n[0]=l=>i.selectedStructure=l),class:"form-select",name:"structure"},[(a(!0),o(x,null,V(s.structures,l=>(a(),o("option",{value:l.id},d(l.libelle),9,xm))),256))],512),[[U,i.selectedStructure]])]),e("div",Vm,[Cm,e("button",{id:"btn-rdmep",disabled:!i.selectedStructure,class:"btn btn-primary",type:"button",onClick:n[1]||(n[1]=(...l)=>r.findDemandeMiseEnPaiement&&r.findDemandeMiseEnPaiement(...l))}," Lancer la recherche ",8,Sm)])])])]),km,r.haveDotation?(a(),o("div",Pm,[i.alertDotation?(a(),o("div",Um," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):p("",!0),e("table",Am,[Mm,e("tbody",null,[e("tr",null,[Tm,e("td",null,d(r.formattedHETD(this.dotation.paieEtat))+" HETD",1),e("td",null,d(r.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),e("td",Dm,d(r.formattedHETD(this.dotation.total))+" HETD",1)]),e("tr",null,[Em,e("td",null,[e("span",{class:T(r.alertPaieEtat)},d(r.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),e("td",null,[e("span",{class:T(r.alertRessourcePropre)},d(r.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),e("td",Rm,d(r.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):p("",!0),e("div",wm,[e("form",Fm,[this.permanents.length>0?(a(),o("div",Im,[e("h2",jm,[e("button",Lm,d(this.permanents.length)+" Permanent(s) ",1)]),e("div",Hm,[e("div",Nm,[e("table",$m,[e("thead",null,[e("tr",null,[e("th",Om,[e("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:n[2]||(n[2]=(...l)=>r.toggleCheckbox&&r.toggleCheckbox(...l))})]),qm,zm,Bm])]),e("tbody",null,[(a(!0),o(x,null,V(this.permanents,l=>(a(),o("tr",null,[e("td",null,[e("input",{id:"permanent-"+l.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(l.heures),"data-ressource-propre":r.totalRessourcePropre(l.heures),disabled:r.totalPayable(l.heures)==0,name:"intervenant["+l.datasIntervenant.id+"]",title:r.totalPayable(l.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:n[3]||(n[3]=c=>r.refreshTotalConsommation())},null,40,Gm)]),e("td",null,[e("a",{href:r.urlIntervenant(l),target:"_blank"},d(l.datasIntervenant.prenom+" "+l.datasIntervenant.nom_usuel),9,Jm)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(l.heures)+" HETD en paie état / "+r.totalRessourcePropre(l.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(r.totalPayable(l.heures))+" h",9,Ym)]),e("td",null,[e("span",Wm,d(r.totalNonPayable(l.heures))+" h",1)])]))),256))])])])])])):p("",!0),this.vacataires.length>0?(a(),o("div",Qm,[e("h2",Xm,[e("button",Zm,d(this.vacataires.length)+" Vacataire(s) ",1)]),e("div",Km,[e("div",eh,[e("table",th,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:n[4]||(n[4]=(...l)=>r.toggleCheckbox&&r.toggleCheckbox(...l))})]),nh,sh,ih])]),e("tbody",null,[(a(!0),o(x,null,V(this.vacataires,l=>(a(),o("tr",null,[e("td",null,[e("input",{id:"vacataire-"+l.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(l.heures),"data-ressource-propre":r.totalRessourcePropre(l.heures),disabled:r.totalPayable(l.heures)==0,name:"intervenant["+l.datasIntervenant.id+"]",title:r.totalPayable(l.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:n[5]||(n[5]=c=>r.refreshTotalConsommation())},null,40,rh)]),e("td",null,[e("a",{href:r.urlIntervenant(l),target:"_blank"},d(l.datasIntervenant.prenom+" "+l.datasIntervenant.nom_usuel),9,lh)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(l.heures)+" HETD en paie état / "+r.totalRessourcePropre(l.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(r.totalPayable(l.heures))+" h",9,ah)]),e("td",null,[e("span",oh,d(r.totalNonPayable(l.heures))+" h",1)])]))),256))])])])])])):p("",!0),this.etudiants.length>0?(a(),o("div",uh,[e("h2",dh,[e("button",ch,d(this.etudiants.length)+" Etudiant(s) ",1)]),e("div",mh,[e("div",hh,[e("table",_h,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:n[6]||(n[6]=(...l)=>r.toggleCheckbox&&r.toggleCheckbox(...l))})]),ph,fh,vh])]),e("tbody",null,[(a(!0),o(x,null,V(this.etudiants,l=>(a(),o("tr",null,[e("td",null,[e("input",{id:"etudiant-"+l.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(l.heures),"data-ressource-propre":r.totalRessourcePropre(l.heures),disabled:r.totalPayable(l.heures)==0,name:"intervenant["+l.datasIntervenant.id+"]",title:r.totalPayable(l.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:n[7]||(n[7]=c=>r.refreshTotalConsommation())},null,40,bh)]),e("td",null,[e("a",{href:r.urlIntervenant(l),target:"_blank"},d(l.datasIntervenant.prenom+" "+l.datasIntervenant.nom_usuel),9,gh)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(l.heures)+" HETD en paie état / "+r.totalRessourcePropre(l.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(r.totalPayable(l.heures))+" h",9,yh)]),e("td",null,[e("span",xh,d(r.totalNonPayable(l.heures))+" h",1)])]))),256))])])])])])):p("",!0),this.autres.length>0?(a(),o("div",Vh,[e("h2",Ch,[e("button",Sh,d(this.autres.length)+" Autre(s) ",1)]),e("div",kh,[e("div",Ph,[e("table",Uh,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:n[8]||(n[8]=(...l)=>r.toggleCheckbox&&r.toggleCheckbox(...l))})]),Ah,Mh,Th])]),e("tbody",null,[(a(!0),o(x,null,V(this.etudiants,l=>(a(),o("tr",null,[e("td",null,[e("input",{id:"autre-"+l.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(l.heures),"data-ressource-propre":r.totalRessourcePropre(l.heures),disabled:r.totalPayable(l.heures)==0,name:"intervenant["+l.datasIntervenant.id+"]",title:r.totalPayable(l.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:n[9]||(n[9]=c=>r.refreshTotalConsommation())},null,40,Dh)]),e("td",null,[e("a",{href:r.urlIntervenant(l),target:"_blank"},d(l.datasIntervenant.prenom+" "+l.datasIntervenant.nom_usuel),9,Eh)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(l.heures)+" HETD en paie état / "+r.totalRessourcePropre(l.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(r.totalPayable(l.heures))+" h",9,Rh)]),e("td",null,[e("span",wh,d(r.totalNonPayable(l.heures))+" h",1)])]))),256))])])])])])):p("",!0),this.intervenants.length>0?(a(),o("div",Fh,[Ih,e("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:n[10]||(n[10]=(...l)=>r.processDemandeMiseEnPaiement&&r.processDemandeMiseEnPaiement(...l))}," Enregistrer les demandes de paiement ",8,jh),this.canMiseEnPaiement?(a(),o("a",{key:0,id:"btn-mep",href:this.urlMiseEnPaiement,class:"ms-2 btn btn-secondary"}," Aller au mise en paiement ",8,Lh)):p("",!0)])):p("",!0)])])],64)}const Nh=k(hm,[["render",Hh]]),$h=Object.freeze(Object.defineProperty({__proto__:null,default:Nh},Symbol.toStringTag,{value:"Module"})),Oh={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},R=t=>(H("data-v-d4a24889"),t=t(),N(),t),qh=R(()=>e("h2",null,"Paramètres généraux ou bien selon le statut",-1)),zh={class:"table table-bordered table-condensed table-extra-condensed"},Bh=R(()=>e("tr",null,[e("th",null,"Paramètre général"),e("th",null,"Valeur")],-1)),Gh=R(()=>e("h2",null,"Services à payer",-1)),Jh={class:"card"},Yh={class:"card-header"},Wh={class:"badge bg-primary"},Qh={class:"card-body"},Xh={class:"row lap"},Zh={class:"col-md-6"},Kh=R(()=>e("h6",null,"Heures à payer",-1)),e_={class:"table table-bordered table-xs"},t_={key:0,rowspan:"2"},n_={key:1,rowspan:"2"},s_=R(()=>e("th",{colspan:"2"},"Taux de rému.",-1)),i_=R(()=>e("th",{colspan:"3"},"Heures",-1)),r_=R(()=>e("tr",null,[e("th",null,"Nom"),e("th",null,"Valeur"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")],-1)),l_={key:0},a_=["title"],o_={key:1},u_=["title"],d_={class:"col-md-6"},c_=R(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),m(" correspondantes")],-1)),m_={class:"table table-bordered table-xs"},h_=R(()=>e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{colspan:"3"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")])],-1)),__=["title"],p_=["title"],f_={key:0},v_={class:"badge bg-info"},b_={key:0,class:"row"},g_=R(()=>e("div",{class:"col-md-6"},null,-1)),y_={class:"col-md-6"},x_=R(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),m(" en trop")],-1)),V_={class:"table table-bordered table-xs"},C_=R(()=>e("thead",{class:"bg-danger"},[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{rowspan:"2"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date")])],-1)),S_=["title"],k_=["title"];function P_(t,n,s,b,i,r){return a(),o(x,null,[qh,e("table",zh,[Bh,(a(!0),o(x,null,V(s.parametres,(l,c)=>(a(),o("tr",{key:c},[e("th",null,d(c),1),e("td",null,d(l),1)]))),128))]),Gh,(a(!0),o(x,null,V(s.servicesAPayer,(l,c)=>(a(),o("div",{key:c},[e("div",Jh,[e("div",Yh,[e("span",Wh,d(l.type),1),m(" "+d(l.libelle),1)]),e("div",Qh,[e("ul",null,[(a(!0),o(x,null,V(l.parametres,(_,u)=>(a(),o("li",{key:u},d(u)+" : "+d(_),1))),128))]),(a(!0),o(x,null,V(l.laps,_=>(a(),o("div",Xh,[e("div",Zh,[Kh,e("table",e_,[e("thead",null,[e("tr",null,[l.type!="Référentiel"?(a(),o("th",t_,"Volume horaire")):(a(),o("th",n_,"Volumes horaires")),s_,i_]),r_]),e("tbody",null,[e("tr",null,[l.type!="Référentiel"?(a(),o("td",l_,[e("abbr",{class:"badge bg-secondary",title:_.volumeHoraireHisto},d(_.volumeHoraireId),9,a_),m(" "+d(_.volumeHoraire),1)])):(a(),o("td",o_,[(a(!0),o(x,null,V(_.volumeHoraireId,u=>(a(),o("div",null,[e("abbr",{class:"badge bg-secondary",title:u.HISTO},d(u.ID),9,u_),m(" "+d(u.HEURES)+"h ",1)]))),256))])),e("td",null,d(_.tauxRemu),1),e("td",null,d(_.tauxValeur)+"€",1),e("td",null,d(_.heures),1),e("td",null,d(_.heuresAA),1),e("td",null,d(_.heuresAC),1)])])])]),e("div",d_,[c_,e("table",m_,[h_,e("tbody",null,[(a(!0),o(x,null,V(_.misesEnPaiement,u=>(a(),o("tr",{key:u.id},[e("td",null,[e("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+u.heuresTotal+`
Domaine fonctionnel : `+u.domaineFonctionnel+`
`+u.historique},d(u.id),9,__)]),e("td",null,[e("abbr",{title:u.centreCoutLibelle},d(u.centreCoutCode),9,p_)]),e("td",null,d(u.periodePaiement),1),e("td",null,d(u.date),1),e("td",null,d(u.heures),1),e("td",null,d(u.heuresAA),1),e("td",null,d(u.heuresAC),1)]))),128))])]),_.heuresRestantes!="0,00"?(a(),o("div",f_,[e("span",v_,d(_.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):p("",!0)])]))),256)),l.misesEnPaiement&&l.misesEnPaiement.length>0?(a(),o("div",b_,[g_,e("div",y_,[x_,e("table",V_,[C_,e("tbody",null,[(a(!0),o(x,null,V(l.misesEnPaiement,_=>(a(),o("tr",{key:_.id},[e("td",null,[e("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+_.domaineFonctionnel+`
`+_.historique},d(_.id),9,S_)]),e("td",null,[e("abbr",{title:_.centreCoutLibelle},d(_.centreCoutCode),9,k_)]),e("td",null,d(_.periodePaiement),1),e("td",null,d(_.date),1),e("td",null,d(_.heures),1)]))),128))])])])])):p("",!0)])])]))),128))],64)}const U_=k(Oh,[["render",P_],["__scopeId","data-v-d4a24889"]]),A_=Object.freeze(Object.defineProperty({__proto__:null,default:U_},Symbol.toStringTag,{value:"Module"})),M_={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(t){this.selectedFile=t.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(t){t.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let n=document.getElementById("btn-import"),s=document.getElementById("btn-import-inprogress");s.classList.remove("d-none"),n.classList.add("d-none"),n.disabled=!0;let b=document.getElementById("formImport"),i=new FormData(b);unicaenVue.axios.post(this.importUrl,i,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{let l=r.data;this.fileErrors=l.file,this.intervenantMissing=l.intervenant,l.message.length!=0?this.messageErrors=l.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",n.disabled=!1,s.classList.add("d-none"),n.classList.remove("d-none")}).catch(r=>{console.error("Error uploading")})}}},T_={class:"card text-dark bg-light"},D_=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),E_={class:"card-body"},R_={key:0,class:"alert alert-danger",role:"alert"},w_={key:1,class:"alert alert-success",role:"alert"},F_={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},I_=e("p",{class:"fs-9 text"},[m(" Vous pouvez utiliser le modèle directement extrait de winpaie "),e("strong",null,"(format .xlsx ou .ods)"),m(" ou créer votre modèle générique de classeur "),e("strong",null,"(format .xlsx ou .ods)"),m(" incluant 3 colonnes : insee,numero pec, nom. ")],-1),j_={class:"mb-3"},L_=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),H_=J('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),N_={class:"mb-3"},$_=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),m("  Veuillez patienter... ")],-1),O_={key:0,id:"fileErrors",class:"card text-dark bg-light"},q_=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),z_={class:"card-body"},B_={key:0},G_=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),J_={key:1},Y_=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function W_(t,n,s,b,i,r){return a(),o(x,null,[e("div",T_,[D_,e("div",E_,[this.messageErrors?(a(),o("div",R_,d(this.messageErrors),1)):p("",!0),this.messageConfirm?(a(),o("div",w_,d(this.messageConfirm),1)):p("",!0),e("form",F_,[I_,e("div",j_,[L_,m("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:n[0]||(n[0]=(...l)=>r.handleFileUpload&&r.handleFileUpload(...l))},null,32)]),H_,e("div",N_,[$_,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:n[1]||(n[1]=(...l)=>r.importFile&&r.importFile(...l))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(a(),o("div",O_,[q_,e("div",z_,[this.fileErrors.length!=0?(a(),o("div",B_,[G_,e("ul",null,[(a(!0),o(x,null,V(this.fileErrors,l=>(a(),o("li",null,d(),1))),256))])])):p("",!0),this.intervenantMissing.length!=0?(a(),o("div",J_,[Y_,e("ul",null,[(a(!0),o(x,null,V(this.intervenantMissing,l=>(a(),o("li",null,d(l),1))),256))])])):p("",!0)])])):p("",!0)],64)}const Q_=k(M_,[["render",W_]]),X_=Object.freeze(Object.defineProperty({__proto__:null,default:Q_},Symbol.toStringTag,{value:"Module"})),Z_={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(t){modAjax(t.target,n=>{this.$emit("refreshListe")})},ajoutValeur(t){modAjax(t.target,n=>{this.$emit("refreshListe")})},saisieValeur(t){t.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:t.currentTarget.dataset.id}),modAjax(t.currentTarget,n=>{this.$emit("refreshListe")})},refreshListe(t){this.$emit("refreshListe")},supprimer(t){popConfirm(t.target,n=>{this.$emit("refreshListe")})},supprimerValeur(t){t.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refreshListe")})},refresh(t){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:t.id})).then(n=>{this.$emit("refresh",n.data)})}}},K_={class:"card-header"},ep={style:{display:"inline"}},tp={class:"float-end"},np=["href"],sp=["href"],ip={class:"card-body"},rp={key:0},lp=e("br",null,null,-1),ap={class:""},op={class:"row align-items-start"},up={class:"col-md-6"},dp={class:"col"},cp=["data-id"],mp=["data-id"],hp=["href"],_p={key:1,class:"row"},pp={class:"col-md-7"},fp=e("br",null,null,-1),vp={class:"row align-items-start"},bp={class:"col-md-8"},gp={class:"col-md-auto"},yp=["data-id"],xp=["data-id"],Vp=["href"],Cp={class:"col"},Sp=e("br",null,null,-1),kp={key:0},Pp={key:0};function Up(t,n,s,b,i,r){const l=j,c=D("u-heures"),_=L,u=D("taux",!0);return a(),o(x,null,[e("div",{class:T(["card",{"ms-5":s.taux.tauxRemu}])},[e("div",K_,[e("h3",ep,d(s.taux.libelle)+" ("+d(s.taux.code)+")",1),e("div",tp,[s.taux.canEdit?(a(),o("a",{key:0,href:i.saisieUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=S((...C)=>r.saisie&&r.saisie(...C),["prevent"]))},[h(l,{name:"pen-to-square"}),m(" Modifier")],8,np)):p("",!0),m("   "),s.taux.canDelete?(a(),o("a",{key:1,href:i.supprimerUrl,class:"btn btn-danger",onClick:n[1]||(n[1]=S((...C)=>r.supprimer&&r.supprimer(...C),["prevent"]))},[h(l,{name:"trash-can"}),m(" Supprimer")],8,sp)):p("",!0)])]),e("div",ip,[s.taux.tauxRemu?p("",!0):(a(),o("div",rp,[m(" Modification :"),lp,e("ul",null,[(a(!0),o(x,null,V(s.taux.tauxRemuValeurs,C=>(a(),o("div",{key:C.id},[e("li",ap,[e("div",op,[e("div",up,[h(c,{valeur:C.valeur},null,8,["valeur"]),m("€/h à partir du "),h(_,{value:C.dateEffet},null,8,["value"])]),e("div",dp,[s.taux.canEdit?(a(),o("a",{key:0,class:"text-primary",onClick:n[2]||(n[2]=S((...f)=>r.saisieValeur&&r.saisieValeur(...f),["prevent"])),"data-id":C.id},[h(l,{name:"pen-to-square"})],8,cp)):p("",!0),m("   "),s.taux.canEdit?(a(),o("a",{key:1,class:"text-primary",onClick:n[3]||(n[3]=S((...f)=>r.supprimerValeur&&r.supprimerValeur(...f),["prevent"])),"data-id":C.id},[h(l,{name:"trash-can"})],8,mp)):p("",!0)])])])]))),128))]),s.taux.canEdit?(a(),o("a",{key:0,href:i.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:n[4]||(n[4]=S((...C)=>r.ajoutValeur&&r.ajoutValeur(...C),["prevent"]))},[h(l,{name:"plus"}),m(" Ajouter une valeur ")],8,hp)):p("",!0)])),s.taux.tauxRemu?(a(),o("div",_p,[e("div",pp,[m(" Modification :"),fp,e("ul",null,[(a(!0),o(x,null,V(s.taux.tauxRemuValeurs,C=>(a(),o("div",null,[e("li",null,[e("div",vp,[e("div",bp,[m(" Coéfficient de "),h(c,{valeur:C.valeur},null,8,["valeur"]),m(" à partir du "),h(_,{value:C.dateEffet},null,8,["value"])]),e("div",gp,[s.taux.canEdit?(a(),o("a",{key:0,class:"text-primary",onClick:n[5]||(n[5]=S((...f)=>r.saisieValeur&&r.saisieValeur(...f),["prevent"])),"data-id":C.id},[h(l,{name:"pen-to-square"})],8,yp)):p("",!0),m("   "),s.taux.canEdit?(a(),o("a",{key:1,class:"text-primary",onClick:n[6]||(n[6]=S((...f)=>r.supprimerValeur&&r.supprimerValeur(...f),["prevent"])),"data-id":C.id},[h(l,{name:"trash-can"})],8,xp)):p("",!0)])])])]))),256))]),s.taux.canEdit?(a(),o("a",{key:0,href:i.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:n[7]||(n[7]=S((...C)=>r.ajoutValeur&&r.ajoutValeur(...C),["prevent"]))},[h(l,{name:"plus"})],8,Vp)):p("",!0)]),e("div",Cp,[m(" Valeurs calculées (indexées sur le taux "+d(s.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(a(!0),o(x,null,V(s.taux.tauxRemuValeursIndex,C=>(a(),o("div",null,[e("li",null,[h(c,{valeur:C.valeur},null,8,["valeur"]),m("€/h à partir du "),h(_,{value:C.date},null,8,["value"])])]))),256))]),Sp])])):p("",!0)])],2),s.taux.tauxRemu?p("",!0):(a(),o("div",kp,[(a(!0),o(x,null,V(s.listeTaux,C=>(a(),o("div",{key:C},[C.tauxRemu&&C.tauxRemu.id===s.taux.id?(a(),o("div",Pp,[(a(),E(u,{onSupprimer:r.supprimer,onRefreshListe:r.refreshListe,key:s.taux.id,taux:C,listeTaux:s.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):p("",!0)]))),128))]))],64)}const ne=k(Z_,[["render",Up]]),Ap=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),Mp={components:{taux:ne},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(t){let n=Util.json.indexById(this.listeTaux,t.id);this.listeTaux[n]=t},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(t=>{this.listeTaux=t.data})}}},Tp=["href"];function Dp(t,n,s,b,i,r){const l=D("taux");return a(),o(x,null,[(a(!0),o(x,null,V(i.listeTaux,c=>(a(),o("div",null,[c.tauxRemu?p("",!0):(a(),E(l,{onSupprimer:r.supprimer,onRefreshListe:r.refreshListe,key:c.id,taux:c,listeTaux:i.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),s.canEditTaux?(a(),o("a",{key:0,class:"btn btn-primary",href:i.ajoutUrl,onClick:n[0]||(n[0]=S((...c)=>r.ajout&&r.ajout(...c),["prevent"]))},"Ajout d'un nouveau taux",8,Tp)):p("",!0)],64)}const Ep=k(Mp,[["render",Dp]]),Rp=Object.freeze(Object.defineProperty({__proto__:null,default:Ep},Symbol.toStringTag,{value:"Module"})),wp={UHeures:"Application/UI/UHeures",UInputFloat:"Application/UI/UInputFloat",Utilisateur:"Application/Utilisateur"};function Fp(t,n){const s={};n===void 0&&(n={});for(const b in t){let r=b.slice(2,-4).replaceAll("/","");s[r]=t[b].default}for(const b of document.getElementsByClassName("vue-app")){let i=de({template:b.innerHTML,components:s});if(n.beforeMount!==void 0&&n.beforeMount(i),n.autoloads!==void 0)for(const r in n.autoloads){let l=n.autoloads[r].replaceAll("/","");i.component(r,s[l])}i.use(ce({components:!0,directives:!0})),i.mount(b),n.afterMount!==void 0&&n.afterMount(i)}}const Ip={init:Fp},jp=Object.assign({"./Application/UI/UHeures.vue":fe,"./Application/UI/UInputFloat.vue":xe,"./Application/Utilisateur.vue":Pe,"./Employeur/ListeEmployeur.vue":Oe,"./Formule/Administration/Details.vue":Qe,"./Formule/Administration/Formulator.vue":mt,"./Formule/Administration/Index.vue":hn,"./Formule/Test/Index.vue":wn,"./Formule/Test/Test.vue":Ir,"./Intervenant/Recherche.vue":il,"./Lieu/Structure.vue":Nl,"./Lieu/StructuresAdmin.vue":Yl,"./Mission/Liste.vue":bo,"./Mission/ListeCandidatures.vue":Bo,"./Mission/ListeOffreEmploi.vue":xd,"./Mission/ListePrime.vue":Pc,"./Mission/Mission.vue":ho,"./Mission/OffreEmploi.vue":hd,"./Mission/Prime.vue":_c,"./Mission/Suivi.vue":lm,"./Mission/SuiviEvent.vue":nm,"./Paiement/DemandeMiseEnPaiementLot.vue":$h,"./Paiement/DetailsCalculs.vue":A_,"./Paiement/ImportNumeroPec.vue":X_,"./Paiement/ListeTaux.vue":Rp,"./Paiement/Taux.vue":Ap}),Lp={autoloads:wp};Ip.init(jp,Lp);
