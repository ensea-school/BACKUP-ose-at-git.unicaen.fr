import{c as l,a as e,n as M,t as d,b as p,d as m,e as _,w as R,F as g,f as He,o as i,r as C,g as b,v as je,h as N,i as L,p as G,j as Y,B as le,k as ie,U as ge,l as ye,m as Le,q as A,s as oe,u as H,x as xe,y as w,z as y,A as ee,C as Ce,D as Ne,E as Oe,G as qe,H as Ve,I as J,J as ze,K as Be,_ as Je}from"./vendor-C5pazc6D.js";const k=(t,n)=>{const s=t.__vccOpts||t;for(const[v,r]of n)s[v]=r;return s},Ge={name:"Connexion",props:{data:Object},data(){return{identity:"",currentRoleId:null,selectedStructures:{}}},mounted(){this.currentRoleId=this.data.roleId;for(let t in this.data.roles)this.selectedStructures[t]=-1;this.selectedStructures[this.currentRoleId]=this.data.structureId??-1},methods:{userProfileChange(t){let n=this.selectedStructures[t];n==-1&&(n=null),t!=this.currentRoleId&&(this.currentRoleId=t),document.body.classList.add("wait-cursor"),unicaenVue.axios.post(this.selectionProfilUrl,{role:t,structure:n}).then(s=>{window.location.href=unicaenVue.url("")})}},computed:{roleIcon(){return this.data.usurpationEnCours?"fa fa-theater-masks":"fa fa-user"},roleContent(){return"coucou!!!"},connexionUrl(){return this.data.connecte?unicaenVue.url("auth/deconnexion"):unicaenVue.url("auth/connexion")},connexionTitle(){return this.data.connecte?"Supprime les informations de connexion":"Affiche le formulaire d'authentification"},connexionContent(){return this.data.connecte?"Déconnexion":"Connexion"},startUsurpationUrl(){return unicaenVue.url("utilisateur/usurper-identite")},stopUsurpationUrl(){return unicaenVue.url("utilisateur/stopper-usurpation")},selectionProfilUrl(){return unicaenVue.url("utilisateur/selectionner-profil")}}},te=t=>(G("data-v-cbfe77c3"),t=t(),Y(),t),Ye={key:0,class:"navbar-link",id:"user-current-info",href:"#"},Qe={id:"user-status"},We=te(()=>e("span",{class:"caret"}," ",-1)),Xe={id:"user-status-name"},Ke={key:1},Ze=["href","title"],et=te(()=>e("div",null,[e("strong",null,"Profil utilisateur :")],-1)),tt={method:"POST",class:"user-profile-select-form"},nt=["value","onClick"],st=["onUpdate:modelValue","onChange"],it=te(()=>e("option",{value:"-1"},"- toutes structures -",-1)),rt=["value"],at={key:0},lt=["action"],ot=te(()=>e("div",null,[e("strong",null,"Usurpation d'identité :")],-1)),ut={class:"mb-2"},dt={class:"mb-2"},ct=["disabled"],ht={key:1};function mt(t,n,s,v,r,a){const u=le,h=He;return i(),l(g,null,[s.data.connecte?(i(),l("a",Ye,[e("span",Qe,[e("span",{class:M(a.roleIcon)},null,2),We,e("span",Xe,[e("strong",null,d(s.data.utilisateurNom),1),p(", "+d(s.data.roleNom),1)])])])):m("",!0),s.data.connecte?(i(),l("span",Ke,"|")):m("",!0),e("a",{class:"navbar-link user-connection",href:a.connexionUrl,title:a.connexionUrl},d(a.connexionContent),9,Ze),_(h,{click:!0,"close-on-hide":!0,delay:{show:0,hide:0},target:"user-current-info"},{title:R(()=>[p("Utilisateur connecté à l'application")]),default:R(()=>[et,e("div",null,[e("form",tt,[(i(!0),l(g,null,C(s.data.roles,(c,o)=>(i(),l("div",{key:o,class:"radio"},[e("label",null,[b(e("input",{type:"radio",name:"role",class:"user-profile-select-input",title:"Cliquez pour changer de profil courant",value:o,onClick:x=>a.userProfileChange(o),"onUpdate:modelValue":n[0]||(n[0]=x=>r.currentRoleId=x)},null,8,nt),[[je,r.currentRoleId]]),p(d(c.libelle),1)]),p("  "),s.data.roles[o].peutChangerStructure?b((i(),l("select",{key:0,class:"user-profile-select-input-structure","onUpdate:modelValue":x=>r.selectedStructures[o]=x,onChange:x=>a.userProfileChange(o),title:"Cliquez pour sélectionner la structure associée au profil Administrateur"},[it,(i(!0),l(g,null,C(s.data.structures,(x,f)=>(i(),l("option",{key:f,value:f},d(x),9,rt))),128))],40,st)),[[N,r.selectedStructures[o]]]):m("",!0)]))),128))])]),s.data.usurpationEnabled&&!s.data.usurpationEnCours?(i(),l("div",at,[e("form",{action:a.startUsurpationUrl},[ot,e("div",ut,[b(e("input",{type:"text",name:"identity","onUpdate:modelValue":n[1]||(n[1]=c=>r.identity=c),class:"user-usurpation-input form-control",placeholder:"Identifiant utilisateur",value:""},null,512),[[L,r.identity]])]),e("div",dt,[e("input",{type:"submit",name:"submit",disabled:!r.identity,class:"user-usurpation-submit btn btn-danger form-control",value:"Usurper"},null,8,ct)])],8,lt)])):m("",!0),s.data.usurpationEnabled&&s.data.usurpationEnCours?(i(),l("div",ht,[_(u,{variant:"danger",href:a.stopUsurpationUrl},{default:R(()=>[p("Stopper l'usurpation")]),_:1},8,["href"])])):m("",!0)]),_:1})],64)}const _t=k(Ge,[["render",mt],["__scopeId","data-v-cbfe77c3"]]),pt=Object.freeze(Object.defineProperty({__proto__:null,default:_t},Symbol.toStringTag,{value:"Module"})),ft={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},vt=["innerHTML"];function bt(t,n,s,v,r,a){return i(),l("span",{class:"heures",innerHTML:a.affichage},null,8,vt)}const gt=k(ft,[["render",bt]]),yt=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"})),xt={name:"UInputFloat",props:{modelValue:{},isPourc:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},class:{type:String,required:!1,default:""},fraction:{type:Boolean,required:!1,default:!1},maximumDigits:{required:!1,default:8}},data(){return{fractions:{.333333:"1/3",.166667:"1/6",.142857:"1/7",.111111:"1/9",.666667:"2/3",.285714:"2/7",.222222:"2/9",.428571:"3/7",1.333333:"4/3",.571429:"4/7",.444444:"4/9",1.666667:"5/3",.833333:"5/6",.714286:"5/7",.555556:"5/9",.857143:"6/7",2.333333:"7/3",1.166667:"7/6",.777778:"7/9",2.666667:"8/3",1.142857:"8/7",.888889:"8/9",1.285714:"9/7"},inError:!1}},emits:["update:modelValue"],computed:{value:{get(){let t=this.modelValue;return this.isPourc&&(t*=100),this.floatToString(t)},set(t){const n=/^-?\d*\.?\d+$/;if(this.inError=t!==void 0&&t!==""&&!n.test(t.replace("/","").replace(",","").replace(".","")),!this.inError){let s=this.stringToFloat(t);this.isPourc&&(s/=100),(s===void 0||!isNaN(s)&&isFinite(s))&&this.$emit("update:modelValue",s)}}},cclass(){let t=this.class;return this.inError&&(t+=" is-invalid"),t}},methods:{floatToString(t){if(t==null)return;const n=Math.round(t*1e6)/1e6;if(this.fraction&&this.fractions[n]!==void 0)return this.fractions[n];var s="fr",v={minimumFractionDigits:0,maximumFractionDigits:this.maximumDigits,useGrouping:!1},r=new Intl.NumberFormat(s,v);return r.format(t)},stringToFloat(t){if(!(t===null||t===""||t===void 0))return t.indexOf("/")!==-1?(t=t.split("/"),t=Util.stringToFloat(t[0])/Util.stringToFloat(t[1])):t=parseFloat(t.replace(",",".")),t}},mounted(){}},Ct=["disabled"];function Vt(t,n,s,v,r,a){return b((i(),l("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>a.value=u),disabled:s.disabled,ref:"inputFloat",class:M(a.cclass)},null,10,Ct)),[[L,a.value]])}const St=k(xt,[["render",Vt],["__scopeId","data-v-29c90e6d"]]),kt=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})),Pt={name:"Utilisateur",props:{nom:String,mail:String}},Dt=["href"];function At(t,n,s,v,r,a){return i(),l("a",{href:`mailto:${s.mail}`},d(s.nom),9,Dt)}const Tt=k(Pt,[["render",At]]),Mt=Object.freeze(Object.defineProperty({__proto__:null,default:Tt},Symbol.toStringTag,{value:"Module"})),Et={name:"UTableAjax",emits:["update:modelValue"],props:{modelValue:{required:!0},id:{required:!1,type:String},size:{required:!1,default:10},count:{required:!1},search:{required:!1},dataUrl:{required:!0,type:String}},data(){return{page:1,pageSizes:[10,25,50,100,"Tous"],defaultSize:10,dSize:this.size,dCount:this.count,dSearch:this.search,searchTimer:null,columns:{},loading:!1,orderCol:void 0,orderDir:"asc"}},computed:{cSize(){return isNaN(this.dSize)?9999999999999:this.dSize},storageIdentifier(){return"UTableAjax-"+this.id+"-"+window.location.href},elStart(){return isNaN(this.dSize)?1:(this.page-1)*this.dSize+1},elEnd(){return isNaN(this.dCount)?(this.page-1)*this.dSize+this.dSize:isNaN(this.dSize)?this.dCount:Math.min(this.dCount,(this.page-1)*this.dSize+this.dSize)}},watch:{dSize(t){localStorage.setItem(this.storageIdentifier,t),this.getData()},dSearch(t){const n=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.page>1?this.page=1:n.getData()},500)},page(t){this.getData()}},methods:{getData(){unicaenVue.axios.post(this.dataUrl,{page:this.page,size:this.dSize,elStart:this.elStart,elEnd:this.elEnd,search:this.dSearch,orderCol:this.orderCol,orderDir:this.orderDir}).then(t=>{let n=t.data;this.dCount=n.count,this.$emit("update:modelValue",n.data)})},orderBy(t){const n=this.columns[t];for(let v in this.columns)v!=t&&(this.columns[v].classList.contains("sorting_asc")&&this.columns[v].classList.remove("sorting_asc"),this.columns[v].classList.contains("sorting_desc")&&this.columns[v].classList.remove("sorting_desc"),console.log(v));let s="asc";n.classList.contains("sorting_asc")?(s="desc",n.classList.remove("sorting_asc"),n.classList.add("sorting_desc")):(n.classList.contains("sorting_desc")&&n.classList.remove("sorting_desc"),n.classList.add("sorting_asc")),this.orderCol=t,this.orderDir=s,this.getData()}},mounted(){this.dSize=parseInt(localStorage.getItem(this.storageIdentifier))||this.defaultSize,this.page=1,this.dSize=this.size,this.dCount=this.count;const t=this.$refs.tableRef,n=this;t&&t.querySelectorAll("th[column]").forEach(v=>{Array.from(v.attributes).forEach(r=>{r.name=="column"&&(this.columns[r.value]=v,v.dataset.column=r.value,v.onclick=function(){n.orderBy(this.dataset.column)},v.removeAttribute(r.name),v.classList.add("sorting"))})}),this.getData()}},Ut={class:"dt-bootstrap5"},Ft=["value"],It={class:"float-end"},$t={class:"table table-bordered dataTable mb-2",ref:"tableRef"},Rt={class:"dataTables_paginate paging_simple_numbers"};function wt(t,n,s,v,r,a){const u=ge,h=ye,c=Le;return i(),l("div",Ut,[_(h,null,{default:R(()=>[_(u,null,{default:R(()=>[p(" Afficher "),e("label",null,[b(e("select",{"onUpdate:modelValue":n[0]||(n[0]=o=>r.dSize=o),class:"form-select form-select-sm"},[(i(!0),l(g,null,C(r.pageSizes,o=>(i(),l("option",{key:o,value:o},d(o),9,Ft))),128))],512),[[N,r.dSize]])]),p(" éléments ")]),_:1}),_(u,null,{default:R(()=>[e("div",It,[p(" Rechercher : "),e("label",null,[b(e("input",{"onUpdate:modelValue":n[1]||(n[1]=o=>r.dSearch=o),class:"form-control form-inline form-control-sm"},null,512),[[L,r.dSearch]])])])]),_:1})]),_:1}),e("table",$t,[ie(t.$slots,"default")],512),_(h,null,{default:R(()=>[_(u,null,{default:R(()=>[p("Affichage de l'élément "+d(a.elStart)+" à "+d(a.elEnd)+" sur "+d(r.dCount)+" éléments",1)]),_:1}),_(u,null,{default:R(()=>[e("div",Rt,[_(c,{align:"end",page:r.page,modelValue:r.page,"onUpdate:modelValue":n[2]||(n[2]=o=>r.page=o),"total-rows":r.dCount,"per-page":a.cSize,"last-number":"true",firstNumber:"true","prev-text":"Précédent","next-text":"Suivant"},null,8,["page","modelValue","total-rows","per-page"])])]),_:1})]),_:1})])}const ue=k(Et,[["render",wt]]),Ht={name:"listeEmployeur",data(){return{dataUrl:unicaenVue.url("employeur/get-data"),dataNewEmployeur:unicaenVue.url("employeur/saisie"),lines:[]}},methods:{saisie(t){modAjax(t.currentTarget,n=>{this.$refs.employeurs.getData()})},editUrl(t){return unicaenVue.url("employeur/saisie/:id",{id:t})}}},jt=e("h1",{class:"page-header"},"Gestion des employeurs",-1),Lt=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"RAISON_SOCIALE"},"Raison sociale"),e("th",{column:"NOM_COMMERCIAL"},"Nom commercial"),e("th",null,"Siren"),e("th",null," ")])],-1),Nt={key:0},Ot=["href"],qt={key:1},zt=["href"],Bt=e("i",{class:"fas fa-plus"},null,-1);function Jt(t,n,s,v,r,a){const u=ue;return i(),l(g,null,[jt,_(u,{ref:"employeurs",modelValue:r.lines,"onUpdate:modelValue":n[1]||(n[1]=h=>r.lines=h),"data-url":this.dataUrl},{default:R(()=>[Lt,e("tbody",null,[(i(!0),l(g,null,C(r.lines,(h,c)=>(i(),l("tr",{key:c},[e("td",null,d(h.ID),1),e("td",null,d(h.RAISON_SOCIALE),1),e("td",null,d(h.NOM_COMMERCIAL),1),e("td",null,d(h.SIREN),1),h.IMPORTABLE==0?(i(),l("td",Nt,[h.IMPORTABLE==0?(i(),l("a",{key:0,href:a.editUrl(h.ID),onClick:n[0]||(n[0]=A((...o)=>a.saisie&&a.saisie(...o),["prevent"]))},"Modifier",8,Ot)):m("",!0)])):m("",!0),h.IMPORTABLE==1?(i(),l("td",qt," NON MODIFIABLE ")):m("",!0)]))),128))])]),_:1},8,["modelValue","data-url"]),e("a",{class:"btn btn-primary",onClick:n[2]||(n[2]=A((...h)=>a.saisie&&a.saisie(...h),["prevent"])),href:this.dataNewEmployeur,title:"Ajouter un employeur"},[Bt,p(" Ajout d'un employeur")],8,zt)],64)}const Gt=k(Ht,[["render",Jt]]),Yt=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"})),Qt={name:"Details",components:{},props:{formule:{type:Object},phpClass:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},Wt=["innerHTML"],Xt={class:"mb-2"},Kt=["href"],Zt=e("i",{class:"fas fa-rotate-left"},null,-1);function en(t,n,s,v,r,a){return i(),l(g,null,[e("h1",null,"Code source de "+d(s.formule.code),1),e("div",{innerHTML:s.phpClass,class:"code"},null,8,Wt),e("div",Xt,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[Zt,p(" Retour à l'administration des formules")],8,Kt)])],64)}const tn=k(Qt,[["render",en]]),nn=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),sn={name:"Formulator",components:{},props:{phpClass:{type:String},error:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},rn=e("h1",null,"Formulator",-1),an={class:"mb-2"},ln=["href"],on=e("i",{class:"fas fa-rotate-left"},null,-1),un={key:0},dn={class:"alert alert-danger"},cn={key:1},hn=e("div",{class:"alert alert-success"},"Formule bien intégrée",-1),mn=[hn],_n={key:2},pn=e("h3",null,"Code généré :",-1),fn=["innerHTML"];function vn(t,n,s,v,r,a){return i(),l(g,null,[rn,e("div",an,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[on,p(" Retour à l'administration des formules")],8,ln)]),s.error?(i(),l("div",un,[e("div",dn,d(s.error),1)])):(i(),l("div",cn,mn)),s.phpClass?(i(),l("div",_n,[pn,e("div",{innerHTML:s.phpClass},null,8,fn)])):m("",!0),p(" "+d(s.error),1)],64)}const bn=k(sn,[["render",vn]]),gn=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),yn={name:"Index",components:{},props:{formules:{required:!0,type:Array},canEdit:{required:!0,type:Boolean}},methods:{telechargementUrl(t){return unicaenVue.url("formule/administration/telecharger-tableur/"+t)},televersementUrl(){return unicaenVue.url("formule/administration/televerser-tableur")},detailsUrl(t){return unicaenVue.url("formule/administration/details/"+t)}}},U=t=>(G("data-v-ba77464f"),t=t(),Y(),t),xn=U(()=>e("h1",null,"Formules de calcul",-1)),Cn={class:"table table-bordered table-hover table-sort"},Vn=U(()=>e("thead",null,[e("tr",null,[e("th",null,"Libellé"),e("th",null,"Paramètres"),e("th",null,"Règle de délégation"),e("th",null,"Ressources")])],-1)),Sn=["title"],kn=U(()=>e("br",null,null,-1)),Pn={key:0,class:"cartridge"},Dn=U(()=>e("span",null,"intervenant",-1)),An=U(()=>e("span",null,"param1",-1)),Tn={key:1,class:"cartridge"},Mn=U(()=>e("span",null,"intervenant",-1)),En=U(()=>e("span",null,"param2",-1)),Un={key:2,class:"cartridge"},Fn=U(()=>e("span",null,"intervenant",-1)),In=U(()=>e("span",null,"param3",-1)),$n={key:3,class:"cartridge"},Rn=U(()=>e("span",null,"intervenant",-1)),wn=U(()=>e("span",null,"param4",-1)),Hn={key:4,class:"cartridge"},jn=U(()=>e("span",null,"intervenant",-1)),Ln=U(()=>e("span",null,"param5",-1)),Nn={key:5,class:"cartridge"},On=U(()=>e("span",null,"volume horaire",-1)),qn=U(()=>e("span",null,"param1",-1)),zn={key:6,class:"cartridge"},Bn=U(()=>e("span",null,"volume horaire",-1)),Jn=U(()=>e("span",null,"param2",-1)),Gn={key:7,class:"cartridge"},Yn=U(()=>e("span",null,"volume horaire",-1)),Qn=U(()=>e("span",null,"param3",-1)),Wn={key:8,class:"cartridge"},Xn=U(()=>e("span",null,"volume horaire",-1)),Kn=U(()=>e("span",null,"param4",-1)),Zn={key:9,class:"cartridge"},es=U(()=>e("span",null,"volume horaire",-1)),ts=U(()=>e("span",null,"param5",-1)),ss={key:0},is={key:1},rs=["href"],as=U(()=>e("i",{class:"fas fa-table-cells"},null,-1)),ls=U(()=>e("br",null,null,-1)),os=["href"],us=U(()=>e("i",{class:"fas fa-table-cells"},null,-1)),ds=U(()=>e("br",null,null,-1)),cs={key:0,class:"card bg-warning"},hs=U(()=>e("div",{class:"card-header"},[e("h3",null,"Création/Modification d'une formule à partir d'un tableur")],-1)),ms={class:"card-body"},_s=U(()=>e("div",{class:"alert alert-warning"},[e("span",{class:"icon iconly icon-attention"}),e("strong",null,"Attention :"),p(" cette opération peut avoir un impact déterminant sur le calcul de vos heures complémentaires et par extension sur tous vos paiements. En outre, le fichier doit être bâti selon un modèle bien précis. Vous êtes invités à ne téléverser que des tableurs préparés ou validés par l'équipe OSE. ")],-1)),ps=["action"],fs=oe('<div class="form-group mb-3" data-v-ba77464f><label for="formule-name" data-v-ba77464f>Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier" data-v-ba77464f></div><div class="form-group" data-v-ba77464f><button type="submit" class="btn btn-primary" data-v-ba77464f>Ajout/Modification à partir d&#39;un tableur</button></div>',2),vs=[fs];function bs(t,n,s,v,r,a){return i(),l(g,null,[xn,e("table",Cn,[Vn,e("tbody",null,[(i(!0),l(g,null,C(s.formules,u=>(i(),l("tr",{key:t.id,class:M({desactivee:!u.active}),title:u.active?"":"Cette formule est désactivée"},[e("td",null,[p(d(u.libelle),1),kn,e("i",null,d(u.code),1)]),e("td",null,[u.iParam1Libelle?(i(),l("div",Pn,[Dn,An,p(" "+d(u.iParam1Libelle),1)])):m("",!0),u.iParam2Libelle?(i(),l("div",Tn,[Mn,En,p(" "+d(u.iParam2Libelle),1)])):m("",!0),u.iParam3Libelle?(i(),l("div",Un,[Fn,In,p(" "+d(u.iParam3Libelle),1)])):m("",!0),u.iParam4Libelle?(i(),l("div",$n,[Rn,wn,p(" "+d(u.iParam4Libelle),1)])):m("",!0),u.iParam5Libelle?(i(),l("div",Hn,[jn,Ln,p(" "+d(u.iParam5Libelle),1)])):m("",!0),u.vhParam1Libelle?(i(),l("div",Nn,[On,qn,p(" "+d(u.vhParam1Libelle),1)])):m("",!0),u.vhParam2Libelle?(i(),l("div",zn,[Bn,Jn,p(" "+d(u.vhParam2Libelle),1)])):m("",!0),u.vhParam3Libelle?(i(),l("div",Gn,[Yn,Qn,p(" "+d(u.vhParam3Libelle),1)])):m("",!0),u.vhParam4Libelle?(i(),l("div",Wn,[Xn,Kn,p(" "+d(u.vhParam4Libelle),1)])):m("",!0),u.vhParam5Libelle?(i(),l("div",Zn,[es,ts,p(" "+d(u.vhParam5Libelle),1)])):m("",!0)]),u.delegationAnnee?(i(),l("td",ss,[p("Avant "+d(u.delegationAnnee)+"/"+d(u.delegationAnnee+1)+", utilise ",1),e("i",null,d(u.delegationFormule),1)])):(i(),l("td",is)),e("td",null,[e("a",{href:this.telechargementUrl(u.id)},[as,p(" tableur")],8,rs),ls,this.canEdit?(i(),l("a",{key:0,href:this.detailsUrl(u.id)},[us,p(" code PHP")],8,os)):m("",!0)])],10,Sn))),128))])]),ds,this.canEdit?(i(),l("div",cs,[hs,e("div",ms,[_s,e("form",{method:"post",enctype:"multipart/form-data",action:this.televersementUrl()},vs,8,ps)])])):m("",!0)],64)}const gs=k(yn,[["render",bs],["__scopeId","data-v-ba77464f"]]),ys=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"})),xs={name:"DetailsServiceEnseignement",components:{},props:{enseignement:{type:Object}},computed:{tauxFi(){return Util.floatToString(this.enseignement.tauxFi*100)+"% FI"},tauxFa(){return Util.floatToString(this.enseignement.tauxFa*100)+"% FA"},tauxFc(){return Util.floatToString(this.enseignement.tauxFc*100)+"% FC"}}},Cs={key:0},Vs={key:1},Ss={key:0,class:"cartridge"},ks={class:"code"},Ps={class:"code"},Ds={key:1,class:"cartridge gray"},As={key:0};function Ts(t,n,s,v,r,a){const u=xe;return i(),l(g,null,[e("h6",null,[p(" Enseignement "),s.enseignement.elementPedagogique?m("",!0):(i(),l("span",Cs," extérieur")),s.enseignement.elementPedagogique?(i(),l("span",Vs,[_(u,null,{default:R(()=>[p(d(s.enseignement.structure.libelle),1)]),_:1}),s.enseignement.tauxFi>0?(i(),H(u,{key:0,variant:"light"},{default:R(()=>[p(d(a.tauxFi),1)]),_:1})):m("",!0),s.enseignement.tauxFa>0?(i(),H(u,{key:1,variant:"light"},{default:R(()=>[p(d(a.tauxFa),1)]),_:1})):m("",!0),s.enseignement.tauxFc>0?(i(),H(u,{key:2,variant:"light"},{default:R(()=>[p(d(a.tauxFc),1)]),_:1})):m("",!0)])):m("",!0)]),s.enseignement.elementPedagogique?(i(),l("div",Ss,[e("span",null,[e("span",ks,d(s.enseignement.etape.code),1),p(" "+d(s.enseignement.etape.libelle),1)]),e("span",null,[e("span",Ps,d(s.enseignement.elementPedagogique.code),1),p(" "+d(s.enseignement.elementPedagogique.libelle),1)])])):(i(),l("div",Ds,[e("span",null,d(s.enseignement.etablissement.libelle),1),s.enseignement.description?(i(),l("span",As,d(s.enseignement.description),1)):m("",!0)]))],64)}const Se=k(xs,[["render",Ts],["__scopeId","data-v-f6c21cf6"]]),Ms=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),Es={name:"DetailsServiceEnseignement",components:{},props:{referentiel:{type:Object}}},Us={class:"cartridge"},Fs={key:0};function Is(t,n,s,v,r,a){const u=xe;return i(),l(g,null,[e("h6",null,[p(" Référentiel "),_(u,null,{default:R(()=>[p(d(s.referentiel.structure.libelle),1)]),_:1})]),e("div",Us,[e("span",null,d(s.referentiel.fonction.libelle),1),s.referentiel.description?(i(),l("span",Fs,d(s.referentiel.description),1)):m("",!0)])],64)}const ke=k(Es,[["render",Is]]),$s=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"})),Rs={name:"DetailsVolumeHoraireEnseignement",components:{},props:{vh:{type:Object},visibilite:{type:Object}},methods:{histoTooltip(){return"Créé le "+Util.dateToString(this.vh.histo.creation)+" par "+this.vh.histo.createur.libelle+`
Modifié le `+Util.dateToString(this.vh.histo.modification)+" par "+this.vh.histo.modificateur.libelle+`
`},typeInterventionTooltip(){return"Taux en service : "+Util.floatToString(this.vh.tauxServiceDu)+`
Taux en HC : `+Util.floatToString(this.vh.tauxServiceCompl)+`
`},motifNonPaiement(){return this.vh.motifNonPaiement?this.vh.motifNonPaiement.libelle:this.vh.nonPayable?"Non payable":""},floatToString(t){return Util.floatToString(t)}}},ws={style:{"text-align":"center"}},Hs=["title"],js=e("i",{class:"fa-regular fa-user"},null,-1),Ls=[js],Ns={key:0},Os={key:1},qs={style:{"text-align":"center"}},zs={key:2},Bs=["title"],Js={key:3},Gs={key:0,class:"fa fa-check text-success"},Ys={key:1,class:"fa fa-xmark text-danger"},Qs={key:4},Ws={key:5},Xs=e("td",null," ",-1);function Ks(t,n,s,v,r,a){const u=w("u-heures");return i(),l(g,null,[e("td",ws,[e("abbr",{title:a.histoTooltip()},Ls,8,Hs)]),s.visibilite.horaires?(i(),l("td",Ns,d(s.vh.horaireDebut),1)):m("",!0),s.visibilite.horaires?(i(),l("td",Os,d(s.vh.horaireFin),1)):m("",!0),e("td",qs,d(s.vh.periode.libelle),1),(i(!0),l(g,null,C(s.vh.params,(h,c)=>(i(),l("td",{key:c},d(h),1))),128)),s.visibilite.motifsNonPaiement?(i(),l("td",zs,d(a.motifNonPaiement()),1)):m("",!0),e("td",null,[e("abbr",{title:a.typeInterventionTooltip()},d(s.vh.typeIntervention.code),9,Bs)]),s.visibilite.servicesStatutaire?(i(),l("td",Js,[s.vh.serviceStatutaire?(i(),l("i",Gs)):(i(),l("i",Ys))])):m("",!0),s.visibilite.majorations?(i(),l("td",Qs,d(a.floatToString(s.vh.ponderationServiceDu)),1)):m("",!0),s.visibilite.majorations?(i(),l("td",Ws,d(a.floatToString(s.vh.ponderationServiceCompl)),1)):m("",!0),e("td",null,[_(u,{valeur:s.vh.heures},null,8,["valeur"])]),Xs],64)}const Pe=k(Rs,[["render",Ks]]),Zs=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"})),ei={name:"DetailsVolumeHoraireReferentiel",components:{},props:{vhr:{type:Object},visibilite:{type:Object}},methods:{histoTooltip(){return"Créé le "+Util.dateToString(this.vhr.histo.creation)+" par "+this.vhr.histo.createur.libelle+`
Modifié le `+Util.dateToString(this.vhr.histo.modification)+" par "+this.vhr.histo.modificateur.libelle+`
`},motifNonPaiement(){return this.vhr.motifNonPaiement?this.vhr.motifNonPaiement.libelle:this.vhr.nonPayable?"Non payable":""},floatToString(t){return Util.floatToString(t)}}},ti={style:{"text-align":"center"}},ni=["title"],si=e("i",{class:"fa-regular fa-user"},null,-1),ii=[si],ri={key:0},ai={key:1},li=e("td",null,null,-1),oi={key:2},ui=e("td",null,"Référentiel",-1),di={key:3},ci={key:0,class:"fa fa-check text-success"},hi={key:1,class:"fa fa-xmark text-danger"},mi={key:4},_i={key:5},pi=e("td",null," ",-1);function fi(t,n,s,v,r,a){const u=w("u-heures");return i(),l(g,null,[e("td",ti,[e("abbr",{title:a.histoTooltip()},ii,8,ni)]),s.visibilite.horaires?(i(),l("td",ri)):m("",!0),s.visibilite.horaires?(i(),l("td",ai)):m("",!0),li,(i(!0),l(g,null,C(s.vhr.params,(h,c)=>(i(),l("td",{key:c},d(h),1))),128)),s.visibilite.motifsNonPaiement?(i(),l("td",oi,d(a.motifNonPaiement()),1)):m("",!0),ui,s.visibilite.servicesStatutaire?(i(),l("td",di,[t.vh.serviceStatutaire?(i(),l("i",ci)):(i(),l("i",hi))])):m("",!0),s.visibilite.majorations?(i(),l("td",mi,d(a.floatToString(s.vhr.ponderationServiceDu)),1)):m("",!0),s.visibilite.majorations?(i(),l("td",_i,d(a.floatToString(s.vhr.ponderationServiceCompl)),1)):m("",!0),e("td",null,[_(u,{valeur:s.vhr.heures},null,8,["valeur"])]),pi],64)}const De=k(ei,[["render",fi]]),vi=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"})),bi={name:"DetailsHetd",components:{},props:{type:{type:String},hetd:{type:Object}},computed:{arrondiClass(){switch(this.hetd.arrondi){case-1:return"arrondi-defaut";case 1:return"arrondi-exces"}return this.hetd.original!=this.hetd.valeur?"arrondi":""},legende(){let t="";return this.hetd.arrondi==1?t="L'arrondisseur de règle de calcul a procédé à un arrondi à l'excès":this.hetd.arrondi==-1&&(t="L'arrondisseur de règle de calcul a procédé à un arrondi par troncature"),this.hetd.original!=this.hetd.valeur&&(t!=""&&(t+=`
`),t+="Valeur originale : "+Util.floatToString(this.hetd.original,15)),t}}},gi=["title"];function yi(t,n,s,v,r,a){const u=w("u-heures");return i(),l("td",{class:M(a.arrondiClass),title:a.legende},[_(u,{valeur:s.hetd.valeur},null,8,["valeur"])],10,gi)}const Ae=k(bi,[["render",yi],["__scopeId","data-v-717df7b7"]]),xi=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"})),Ci={name:"DetailsHetds",components:{DetailsHetd:Ae},props:{hetds:{type:Object}}};function Vi(t,n,s,v,r,a){const u=w("details-hetd");return i(!0),l(g,null,C(s.hetds,(h,c)=>(i(),H(u,{key:c,type:c,hetd:h},null,8,["type","hetd"]))),128)}const Te=k(Ci,[["render",Vi]]),Si=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),ki={name:"Details",components:{DetailsVolumeHoraireReferentiel:De,DetailsVolumeHoraireEnseignement:Pe,DetailsServiceEnseignement:Se,DetailsServiceReferentiel:ke,DetailsHetds:Te},props:{intervenant:{type:Number},typesVolumesHoraires:{type:Object},canReporter:{type:Boolean}},data(){return{data:{},typeVolumeHoraire:null,etatVolumeHoraire:null}},mounted(){if(this.countChoix()==1){for(let t in this.typesVolumesHoraires){this.typeVolumeHoraire=t;for(let n in this.typesVolumesHoraires[t].etats)this.etatVolumeHoraire=n}this.load(this.typeVolumeHoraire,this.etatVolumeHoraire)}},methods:{load(t,n){this.typeVolumeHoraire=t,this.etatVolumeHoraire=n;const s={intervenant:this.intervenant,typeVolumeHoraire:this.typeVolumeHoraire,etatVolumeHoraire:this.etatVolumeHoraire};IntraNavigator.loadBegin(),unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/formule/details-data/:typeVolumeHoraire/:etatVolumeHoraire",s)).then(v=>{this.data=v.data,IntraNavigator.loadEnd()})},reportUrl(){const t={intervenant:this.intervenant,typeVolumeHoraire:this.data.intervenant.typeVolumeHoraireId,etatVolumeHoraire:this.data.intervenant.etatVolumeHoraireId};return unicaenVue.url("formule-test/creer-from-reel/:intervenant/:typeVolumeHoraire/:etatVolumeHoraire",t)},totalColSpan(){let t=4;return this.data.visibilite.horaires&&(t+=2),this.data.visibilite.motifsNonPaiement&&(t+=1),this.data.visibilite.servicesStatutaire&&(t+=1),this.data.visibilite.majorations&&(t+=2),t},countChoix(){let t=0;for(let n in this.typesVolumesHoraires)for(let s in this.typesVolumesHoraires[n].etats)t++;return t}},computed:{listeTypes(){let t={};for(let n in this.typesVolumesHoraires)t[n]=this.typesVolumesHoraires[n].libelle;return t},listeEtats(){let t={};for(let s in this.typesVolumesHoraires)for(let v in this.typesVolumesHoraires[s].etats)t[v]=this.typesVolumesHoraires[s].etats[v];return Object.keys(t).sort((s,v)=>s-v).reduce((s,v)=>(s[v]=t[v],s),{})}}},j=t=>(G("data-v-07a28351"),t=t(),Y(),t),Pi={key:0},Di=j(()=>e("div",{class:"alert alert-info"},"Aucun service saisi",-1)),Ai=[Di],Ti={key:1},Mi={class:"d-flex justify-content-center align-items-center"},Ei={class:"table table-borderless table-xs"},Ui={key:0},Fi=["onClick"],Ii={key:0,class:"alert alert-info"},$i={key:2},Ri={key:3},wi={key:0},Hi=j(()=>e("div",{class:"alert alert-warning"},"Aucune heure HETD n'a été calculée",-1)),ji=[Hi],Li=j(()=>e("h2",null,"Paramètres intervenant",-1)),Ni={class:"table table-bordered"},Oi=j(()=>e("th",null,"Structure",-1)),qi={key:0},zi={key:1},Bi=j(()=>e("span",{class:"text-secondary"},"Aucune structure d'affectation",-1)),Ji=[Bi],Gi={key:0},Yi=j(()=>e("th",null,"Heures de service statutaire",-1)),Qi={key:1},Wi=j(()=>e("th",null,"Heures de service modifié",-1)),Xi={key:2},Ki=j(()=>e("th",null,"Heures de service dû",-1)),Zi=j(()=>e("th",null,"Dépassement de service dû sans HC",-1)),er={key:0},tr={key:1},nr=j(()=>e("h2",null,[p("Données utilisées pour le calcul des "),e("abbr",{title:"Heures équivalent TD"},"HETD")],-1)),sr={key:1,class:"alert alert-info"},ir={key:2,class:"alert alert-info"},rr={class:"table table-bordered table-xs table-details"},ar=j(()=>e("thead",null,null,-1)),lr={class:"service",colspan:"999"},or={class:"details"},ur=j(()=>e("th",{rowspan:"2"}," ",-1)),dr={key:0,colspan:"2"},cr=j(()=>e("th",{rowspan:"2"},"Période",-1)),hr={key:1,rowspan:"2"},mr=j(()=>e("th",{rowspan:"2"},"Type d'intervention",-1)),_r={key:2,rowspan:"2"},pr=j(()=>e("abbr",{title:"Détermine si les heures peuvent être comptées dans le service statutaire de l'intervenant ou non"},"Peut dans serv.",-1)),fr=[pr],vr={key:3,colspan:"2"},br=j(()=>e("th",{rowspan:"2"},"Heures",-1)),gr=j(()=>e("th",{rowspan:"2"}," ",-1)),yr=["rowspan","colspan"],xr={class:"details"},Cr={key:0},Vr={key:1},Sr={key:2},kr={key:3},Pr=["colspan"],Dr=j(()=>e("th",null," ",-1)),Ar=j(()=>e("tr",null,[e("th",{class:"service",colspan:"999"}," ")],-1)),Tr=["colspan"],Mr=j(()=>e("th",null," ",-1)),Er=["href"];function Ur(t,n,s,v,r,a){const u=w("u-heures"),h=w("details-service-enseignement"),c=w("details-service-referentiel"),o=w("details-volume-horaire-enseignement"),x=w("details-volume-horaire-referentiel"),f=w("details-hetds");return i(),l(g,null,[a.countChoix()==0?(i(),l("div",Pi,Ai)):m("",!0),a.countChoix()>1?(i(),l("div",Ti,[e("div",Mi,[e("div",null,[e("table",Ei,[(i(!0),l(g,null,C(a.listeTypes,(P,S)=>(i(),l("tr",{key:S},[(i(!0),l(g,null,C(a.listeEtats,(I,F)=>(i(),l("td",{key:F},[s.typesVolumesHoraires[S].etats[F]?(i(),l("div",Ui,[e("a",{class:M({"btn btn-outline-secondary btn-choixtevh":!0,active:!(S==r.typeVolumeHoraire&&F==r.etatVolumeHoraire)}),onClick:D=>a.load(S,F)},d(P)+" "+d(I),11,Fi)])):m("",!0)]))),128))]))),128))])])]),r.typeVolumeHoraire?m("",!0):(i(),l("div",Ii,"Veuillez cliquer sur un des boutons ci-dessus pour afficher de détail de calcul des HETD "))])):(i(),l("div",$i,[e("h2",null,d(a.listeTypes[r.typeVolumeHoraire])+" "+d(a.listeEtats[r.etatVolumeHoraire]),1)])),Object.keys(this.data).length>0?(i(),l("div",Ri,[r.data.typesHetd.length==0?(i(),l("div",wi,ji)):m("",!0),Li,e("table",Ni,[e("tbody",null,[e("tr",null,[Oi,r.data.intervenant.structure?(i(),l("td",qi,d(r.data.intervenant.structure.libelle),1)):(i(),l("td",zi,Ji))]),r.data.intervenant.heuresServiceStatutaire>0&&r.data.intervenant.heuresServiceStatutaire!=r.data.intervenant.serviceDu?(i(),l("tr",Gi,[Yi,e("td",null,[_(u,{valeur:r.data.intervenant.heuresServiceStatutaire},null,8,["valeur"])])])):m("",!0),r.data.intervenant.heuresServiceModifie>0?(i(),l("tr",Qi,[Wi,e("td",null,[_(u,{valeur:r.data.intervenant.heuresServiceModifie},null,8,["valeur"])])])):m("",!0),r.data.intervenant.serviceDu>0?(i(),l("tr",Xi,[Ki,e("td",null,[_(u,{valeur:r.data.intervenant.serviceDu},null,8,["valeur"])])])):m("",!0),e("tr",null,[Zi,r.data.intervenant.depassementServiceDuSansHC?(i(),l("td",er,"Oui")):(i(),l("td",tr,"Non"))]),(i(!0),l(g,null,C(r.data.iParams,(P,S)=>(i(),l("tr",{key:S},[e("th",null,d(P)+" "+d(S),1),e("td",null,d(r.data.intervenant.params[S]),1)]))),128))])]),nr,r.data.intervenant.arrondisseur==0?(i(),l("div",sr,"L'arrondisseur de calcul HETD est désactivé ")):m("",!0),r.data.intervenant.arrondisseur==1?(i(),l("div",ir,`L'arrondisseur de calcul HETD est ici activé en mode "minimal" : les opérations d'arrondissage ne se font ici qu'au niveau des volumes horaires et ne prennent pas en compte la totalisation des heures au niveau de la fiche de l'intervenant. `)):m("",!0),e("table",rr,[ar,e("tbody",null,[(i(!0),l(g,null,C(r.data.services,(P,S)=>(i(),l(g,{key:S},[e("tr",null,[e("th",lr,[P.type=="enseignement"?(i(),H(h,{key:0,enseignement:P},null,8,["enseignement"])):(i(),H(c,{key:1,referentiel:P},null,8,["referentiel"]))])]),e("tr",or,[ur,r.data.visibilite.horaires?(i(),l("th",dr,"Horaire")):m("",!0),cr,(i(!0),l(g,null,C(r.data.vhParams,(I,F)=>(i(),l("th",{rowspan:"2",key:F},d(I),1))),128)),r.data.visibilite.motifsNonPaiement?(i(),l("th",hr,"Motif non paiement")):m("",!0),mr,r.data.visibilite.servicesStatutaire?(i(),l("th",_r,fr)):m("",!0),r.data.visibilite.majorations?(i(),l("th",vr,"Majoration")):m("",!0),br,gr,(i(!0),l(g,null,C(r.data.typesHetd,(I,F)=>(i(),l("th",{key:F,rowspan:I.length==0?2:1,colspan:Math.max(I.length,1)},d(F),9,yr))),128))]),e("tr",xr,[r.data.visibilite.horaires?(i(),l("th",Cr,"Début")):m("",!0),r.data.visibilite.horaires?(i(),l("th",Vr,"Fin")):m("",!0),r.data.visibilite.majorations?(i(),l("th",Sr,"Service")):m("",!0),r.data.visibilite.majorations?(i(),l("th",kr,"Compl.")):m("",!0),(i(!0),l(g,null,C(r.data.typesHetd,I=>(i(),l(g,{key:I},[(i(!0),l(g,null,C(I,(F,D)=>(i(),l("th",{key:D},d(F),1))),128))],64))),128))]),(i(!0),l(g,null,C(P.volumesHoraires,(I,F)=>(i(),l("tr",{key:F},[P.type=="enseignement"?(i(),H(o,{key:0,vh:I,visibilite:r.data.visibilite},null,8,["vh","visibilite"])):(i(),H(x,{key:1,vhr:I,visibilite:r.data.visibilite},null,8,["vhr","visibilite"])),_(f,{hetds:I.hetd},null,8,["hetds"])]))),128)),e("tr",null,[e("th",{class:"total",colspan:a.totalColSpan()},"Total",8,Pr),Dr,_(f,{hetds:P.hetd},null,8,["hetds"])])],64))),128)),Ar,e("tr",null,[e("th",{class:"total",colspan:a.totalColSpan()},"Total intervenant",8,Tr),Mr,_(f,{hetds:r.data.intervenant.hetd},null,8,["hetds"])])])]),s.canReporter?(i(),l("a",{key:3,href:a.reportUrl(),class:"btn btn-secondary"},"Reporter les données de cet intervenant dans l'interface de tests de formule",8,Er)):m("",!0)])):m("",!0)],64)}const Fr=k(ki,[["render",Ur],["__scopeId","data-v-07a28351"]]),Ir=Object.freeze(Object.defineProperty({__proto__:null,default:Fr},Symbol.toStringTag,{value:"Module"})),$r={data(){return{dataUrl:unicaenVue.url("formule-test/data"),lines:[]}},methods:{addUrl(){return unicaenVue.url("formule-test/saisir")},editUrl(t){return unicaenVue.url("formule-test/saisir/:id",{id:t})},deleteUrl(t){return unicaenVue.url("formule-test/supprimer/:id",{id:t})},importUrl(){return unicaenVue.url("formule-test/import")},supprimerTest(t){return popConfirm(t.currentTarget,n=>{this.$refs.testsFormules.getData()}),!1}}},Rr=e("h1",{class:"page-header"},"Page de tests de formule de calcul des HETD",-1),wr=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"LIBELLE"},"Libellé"),e("th",{column:"FORMULE"},"Formule"),e("th",{column:"ANNEE"},"Année"),e("th",null," ")])],-1),Hr={style:{width:"1%","white-space":"nowrap"}},jr=["href"],Lr=e("i",{class:"fas fa-pencil"},null,-1),Nr=[Lr],Or=["href"],qr=e("i",{class:"fas fa-trash-can"},null,-1),zr=[qr],Br=e("br",null,null,-1),Jr=e("br",null,null,-1),Gr={class:"card bg-warning"},Yr=e("div",{class:"card-header"},[e("h3",null,"Import d'un nouveau test à partir d'un tableur")],-1),Qr={class:"card-body"},Wr=["action"],Xr=oe('<div class="form-group mb-3"><label for="formule-name">Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier"></div><div class="form-group"><button type="submit" class="btn btn-primary">Import d&#39;un test à partir d&#39;un tableur</button></div>',2),Kr=[Xr];function Zr(t,n,s,v,r,a){const u=ue,h=le;return i(),l(g,null,[Rr,_(u,{"data-url":this.dataUrl,modelValue:r.lines,"onUpdate:modelValue":n[1]||(n[1]=c=>r.lines=c),ref:"testsFormules"},{default:R(()=>[wr,e("tbody",null,[(i(!0),l(g,null,C(r.lines,(c,o)=>(i(),l("tr",{key:o},[e("td",null,d(c.ID),1),e("td",null,d(c.LIBELLE),1),e("td",null,d(c.FORMULE),1),e("td",null,d(c.ANNEE),1),e("td",Hr,[e("a",{href:a.editUrl(c.ID),title:"Modification du test de formule"},Nr,8,jr),p("   "),e("a",{href:a.deleteUrl(c.ID),title:"Suppression du test de formule","data-content":"Êtes-vous sur de vouloir supprimer ce test ?","data-title":"Suppression du test de formule",onClick:n[0]||(n[0]=A((...x)=>a.supprimerTest&&a.supprimerTest(...x),["prevent"]))},zr,8,Or)])]))),128))])]),_:1},8,["data-url","modelValue"]),_(h,{variant:"primary",href:a.addUrl()},{default:R(()=>[p("Ajout d'un nouveau test")]),_:1},8,["href"]),Br,Jr,e("div",Gr,[Yr,e("div",Qr,[e("form",{method:"post",enctype:"multipart/form-data",action:this.importUrl()},Kr,8,Wr)])])],64)}const ea=k($r,[["render",Zr]]),ta=Object.freeze(Object.defineProperty({__proto__:null,default:ea},Symbol.toStringTag,{value:"Module"})),na={props:{id:{type:Number},formules:{type:Object},annees:{type:Object},typesIntervenants:{type:Object},typesVolumesHoraires:{type:Object},etatsVolumesHoraires:{type:Object},defaultFormule:{type:Number}},data(){return{indexUrl:unicaenVue.url("formule-test"),dataUrl:unicaenVue.url("formule-test/data"),tauxAutre1Visibility:!0,tauxAutre2Visibility:!1,tauxAutre3Visibility:!1,tauxAutre4Visibility:!1,tauxAutre5Visibility:!1,resMode:"hetd",debug:{},intervenant:{formule:void 0,tauxCmServiceDu:1.5,tauxCmServiceCompl:1.5,tauxTpServiceDu:1,tauxTpServiceCompl:.6666666666667},volumesHoraires:[],formule:{iParam1Libelle:void 0,iParam2Libelle:void 0,iParam3Libelle:void 0,iParam4Libelle:void 0,iParam5Libelle:void 0,vhParam1Libelle:void 0,vhParam2Libelle:void 0,vhParam3Libelle:void 0,vhParam4Libelle:void 0,vhParam5Libelle:void 0},structures:{},typesIntervention:["CM","TD","TP",void 0,void 0,void 0,void 0,void 0,"Référentiel"]}},watch:{"intervenant.tauxAutre1Code"(t){this.tauxAutre2Visibility=t||this.intervenant.tauxAutre1Code||this.intervenant.tauxAutre2ServiceDu||this.intervenant.tauxAutre2ServiceCompl,this.typesIntervention[3]=t},"intervenant.tauxAutre2Code"(t){this.tauxAutre3Visibility=t||this.intervenant.tauxAutre2Code||this.intervenant.tauxAutre3ServiceDu||this.intervenant.tauxAutre3ServiceCompl,this.typesIntervention[4]=t},"intervenant.tauxAutre3Code"(t){this.tauxAutre4Visibility=t||this.intervenant.tauxAutre3Code||this.intervenant.tauxAutre4ServiceDu||this.intervenant.tauxAutre4ServiceCompl,this.typesIntervention[5]=t},"intervenant.tauxAutre4Code"(t){this.tauxAutre5Visibility=t||this.intervenant.tauxAutre4Code||this.intervenant.tauxAutre5ServiceDu||this.intervenant.tauxAutre5ServiceCompl,this.typesIntervention[6]=t},"intervenant.tauxAutre5Code"(t){this.typesIntervention[7]=t},"intervenant.formule"(t){t&&(this.formule=this.formules[t])}},computed:{filteredTypesIntervention(){let t=Object.values(this.typesIntervention).filter(n=>n);return t.unshift(""),t},vhParamCount(){let t=0;for(let n=1;n<6;n++)this.formule["vhParam"+n+"Libelle"]&&t++;return t}},methods:{charger(){unicaenVue.axios.get(unicaenVue.url("formule-test/saisir-data/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0})).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,this.debug={},this.addVolumeHoraire(),this.updateStructures()})},enregistrer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,t.data.debug?this.debug=t.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},calculer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires,simpleCalcul:!0}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,t.data.debug?this.debug=t.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},exporter:function(){const t={intervenant:this.intervenant,volumesHoraires:this.volumesHoraires},n=this.intervenant.libelle;var s=document.createElement("a"),v=new Blob([JSON.stringify(t)],{type:"text/json"});s.href=window.URL.createObjectURL(v),s.download="Test de formule "+n+".json",s.click()},exporterCsv:function(){let t=`Structure;Compte dans le service statutaire;Heures non payables;Type d’intervention;Taux FI;Taux FA;Taux FC;Modulation service dû;Modulation service compl.;Param 1;Param 2;Param 3;Param 4;Param 5;Heures;Service FI;Service FA;Service FC;Service Référentiel;HC FI;HC FA;HC FC;HC Référentiel;Primes;Non payable FI;Non payable FA;Non payable FC;Non payable Référentiel
`;for(const r in this.volumesHoraires){const a=this.volumesHoraires[r];t+=(a.structureCode?a.structureCode:"")+";"+(a.nonPayable?"Oui":"Non")+";"+(a.serviceStatutaire?"Oui":"Non")+";"+(a.referentiel?"Référentiel":a.typeInterventionCode?a.typeInterventionCode:"")+";"+(a.tauxFi?a.tauxFi.toLocaleString("fr-FR"):"")+";"+(a.tauxFa?a.tauxFa.toLocaleString("fr-FR"):"")+";"+(a.tauxFc?a.tauxFc.toLocaleString("fr-FR"):"")+";"+(a.ponderationServiceDu?a.ponderationServiceDu.toLocaleString("fr-FR"):"")+";"+(a.ponderationServiceCompl?a.ponderationServiceCompl.toLocaleString("fr-FR"):"")+";"+(a.param1?a.param1:"")+";"+(a.param2?a.param2:"")+";"+(a.param3?a.param3:"")+";"+(a.param4?a.param4:"")+";"+(a.param5?a.param5:"")+";"+(a.heures?a.heures.toLocaleString("fr-FR"):"")+";"+(a.heuresServiceFi?a.heuresServiceFi.toLocaleString("fr-FR"):"")+";"+(a.heuresServiceFa?a.heuresServiceFa.toLocaleString("fr-FR"):"")+";"+(a.heuresServiceFc?a.heuresServiceFc.toLocaleString("fr-FR"):"")+";"+(a.heuresServiceReferentiel?a.heuresServiceReferentiel.toLocaleString("fr-FR"):"")+";"+(a.heuresComplFi?a.heuresComplFi.toLocaleString("fr-FR"):"")+";"+(a.heuresComplFa?a.heuresComplFa.toLocaleString("fr-FR"):"")+";"+(a.heuresComplFc?a.heuresComplFc.toLocaleString("fr-FR"):"")+";"+(a.heuresComplReferentiel?a.heuresComplReferentiel.toLocaleString("fr-FR"):"")+";"+(a.heuresPrimes?a.heuresPrimes.toLocaleString("fr-FR"):"")+";"+(a.heuresNonPayableFi?a.heuresNonPayableFi.toLocaleString("fr-FR"):"")+";"+(a.heuresNonPayableFa?a.heuresNonPayableFa.toLocaleString("fr-FR"):"")+";"+(a.heuresNonPayableFc?a.heuresNonPayableFc.toLocaleString("fr-FR"):"")+";"+(a.heuresNonPayableReferentiel?a.heuresNonPayableReferentiel.toLocaleString("fr-FR"):"")+`;
`}const n=this.intervenant.libelle;var s=document.createElement("a"),v=new Blob([t],{type:"text/csv"});s.href=window.URL.createObjectURL(v),s.download="Test de formule "+n+".csv",s.click()},importer:function(t){const n=t.target.files[0];if(!n.type.match("application/json")){console.error("Le fichier n'est pas de type JSON.");return}const s=new FileReader;s.onload=v=>{try{const r=JSON.parse(v.target.result);this.intervenant=r.intervenant,this.volumesHoraires=r.volumesHoraires,this.updateStructures()}catch(r){console.error("Erreur lors de l'analyse du contenu JSON :",r)}},s.readAsText(n)},dropTauxNonUtilises(t){return t.tauxAutre1Code||(t.tauxAutre1ServiceDu=void 0,t.tauxAutre1ServiceCompl=void 0),t.tauxAutre2Code||(t.tauxAutre2ServiceDu=void 0,t.tauxAutre2ServiceCompl=void 0),t.tauxAutre3Code||(t.tauxAutre3ServiceDu=void 0,t.tauxAutre3ServiceCompl=void 0),t.tauxAutre4Code||(t.tauxAutre4ServiceDu=void 0,t.tauxAutre4ServiceCompl=void 0),t.tauxAutre5Code||(t.tauxAutre5ServiceDu=void 0,t.tauxAutre5ServiceCompl=void 0),t},updateStructures(){let t={"":""};this.intervenant.structureCode&&(t[this.intervenant.structureCode]=this.intervenant.structureCode);for(let n in this.volumesHoraires){const s=this.volumesHoraires[n].structureCode;s&&(t[s]=s)}t.__UNIV__="Université (établissement)",t.__EXTERIEUR__="Extérieur (autre établissement)",t.__new_structure__="- Ajout d'une nouvelle structure -",this.structures=t},selectStructure(t){if(t.target.value=="__new_structure__"&&this.addStructure(t.target),t.target.dataset.variable!="intervenant"){const n=parseInt(t.target.dataset.variable);n==this.lastVolumeHoraireIndex()&&this.volumesHoraires[n].structureCode&&this.addVolumeHoraire()}},majTauxFi(t){const n=t.target.dataset.variable;this.volumesHoraires[n].tauxFi=1-this.volumesHoraires[n].tauxFa-this.volumesHoraires[n].tauxFc},lastVolumeHoraireIndex(){return this.volumesHoraires.length==0?-1:parseInt(Object.keys(this.volumesHoraires).pop())},addVolumeHoraire(){this.volumesHoraires.push({structureCode:null,typeInterventionCode:null,tauxFi:1,tauxFa:0,tauxFc:0,ponderationServiceDu:1,ponderationServiceCompl:1,serviceStatutaire:!0,heures:null})},addStructure(t){const n=prompt("Ajout d'une nouvelle structure");this.structures[n]=n,setTimeout(()=>{const s=t.dataset.variable;s=="intervenant"?this.intervenant.structureCode=n:this.volumesHoraires[s].structureCode=n},200)}},mounted(){this.charger()}},V=t=>(G("data-v-140dc61b"),t=t(),Y(),t),sa=V(()=>e("h1",{class:"page-header"},"Modification d'un test de formule",-1)),ia={class:"row"},ra={class:"col-md-6"},aa=V(()=>e("h2",null,"Intervenant",-1)),la={class:"table table-xs table-bordered fti"},oa=V(()=>e("th",null,"Libellé",-1)),ua={class:"saisie"},da=V(()=>e("th",null,"Formule",-1)),ca={class:"saisie"},ha=["value"],ma=V(()=>e("th",null,"Année",-1)),_a={class:"saisie"},pa=["value"],fa=V(()=>e("th",null,"Type",-1)),va={class:"saisie"},ba=["value"],ga=V(()=>e("th",null,"Structure",-1)),ya={class:"saisie"},xa=["value"],Ca=V(()=>e("th",null,"Type de volume horaire",-1)),Va={class:"saisie"},Sa=["value"],ka=V(()=>e("th",null,"État de volume horaire",-1)),Pa={class:"saisie"},Da=["value"],Aa=V(()=>e("th",null,"Heures de service statutaire",-1)),Ta={class:"saisie"},Ma=V(()=>e("th",null,"Heures de service modifié",-1)),Ea={class:"saisie"},Ua=V(()=>e("th",null,"Dépassement de service dû sans HC",-1)),Fa={class:"saisie"},Ia=V(()=>e("option",{value:!0},"Oui",-1)),$a=V(()=>e("option",{value:!1},"Non",-1)),Ra=[Ia,$a],wa={class:"i-param i-param-1"},Ha={class:"i-param"},ja={class:"saisie"},La={class:"i-param i-param-2"},Na={class:"i-param"},Oa={class:"saisie"},qa={class:"i-param i-param-3"},za={class:"i-param"},Ba={class:"saisie"},Ja={class:"i-param i-param-4"},Ga={class:"i-param"},Ya={class:"saisie"},Qa={class:"i-param i-param-5"},Wa={class:"i-param"},Xa={class:"saisie"},Ka={class:"actions"},Za={class:"row mb-4"},el={class:"col-md-6"},tl={class:"col-md-6"},nl={class:"row mb-4"},sl={class:"col-md-6"},il={class:"col-md-6"},rl={for:"importbtn"},al=V(()=>e("span",{class:"btn btn-secondary"},"Téléverser un jeu de données",-1)),ll={class:"row"},ol={class:"col-md-6"},ul={class:"col-md-5"},dl=V(()=>e("h2",null,"Types d'intervention (HETD)",-1)),cl={class:"types-interventions"},hl={class:"table table-bordered table-xs"},ml=V(()=>e("tr",null,[e("th"),e("th",{colspan:"3"},"Standards"),e("th",{colspan:"5"},"Personnalisés")],-1)),_l=V(()=>e("th",{style:{width:"20%"}},null,-1)),pl=V(()=>e("th",{style:{width:"5%"}},"CM",-1)),fl=V(()=>e("th",{style:{width:"5%"}},"TD",-1)),vl=V(()=>e("th",{style:{width:"5%"}},"TP",-1)),bl={style:{width:"10%"}},gl={style:{width:"10%"}},yl={style:{width:"10%"}},xl={style:{width:"10%"}},Cl={style:{width:"10%"}},Vl=V(()=>e("th",null,"En service",-1)),Sl={class:"saisie"},kl=V(()=>e("td",null,"1",-1)),Pl={class:"saisie"},Dl={class:"saisie"},Al={class:"saisie"},Tl={class:"saisie"},Ml={class:"saisie"},El={class:"saisie"},Ul=V(()=>e("th",null,"Au-delà du service",-1)),Fl={class:"saisie"},Il=V(()=>e("td",null,"1",-1)),$l={class:"saisie"},Rl={class:"saisie"},wl={class:"saisie"},Hl={class:"saisie"},jl={class:"saisie"},Ll={class:"saisie"},Nl=V(()=>e("h2",null,"Résultat",-1)),Ol={class:"table table-xs table-bordered resultats"},ql=V(()=>e("th",{colspan:"2"},"Service dû",-1)),zl=V(()=>e("th",{rowspan:"4"},"Service",-1)),Bl=V(()=>e("th",null,"FI",-1)),Jl=V(()=>e("th",null,"FA",-1)),Gl=V(()=>e("th",null,"FC",-1)),Yl=V(()=>e("th",null,"Référentiel",-1)),Ql=V(()=>e("th",{colspan:"2"},"Total service dû assuré",-1)),Wl=V(()=>e("th",{rowspan:"4"},"Heures compl.",-1)),Xl=V(()=>e("th",null,"FI",-1)),Kl=V(()=>e("th",null,"FA",-1)),Zl=V(()=>e("th",null,"FC",-1)),eo=V(()=>e("th",null,"Référentiel",-1)),to=V(()=>e("th",{colspan:"2"},"Total heures compl. à payer",-1)),no=V(()=>e("th",{colspan:"2"},"Primes",-1)),so=V(()=>e("th",{rowspan:"4"},"Heures non payables",-1)),io=V(()=>e("th",null,"FI",-1)),ro=V(()=>e("th",null,"FA",-1)),ao=V(()=>e("th",null,"FC",-1)),lo=V(()=>e("th",null,"Référentiel",-1)),oo=V(()=>e("th",{colspan:"2"},"Total heures non payables",-1)),uo=V(()=>e("h2",null,"Heures effectuées (A saisir de manière chronologique)",-1)),co={class:"table table-bordered table-xs table-hover fvh"},ho=V(()=>e("th",{rowspan:"3"},null,-1)),mo=["colspan"],_o=V(()=>e("th",{rowspan:"3",class:"spacer"}," ",-1)),po={colspan:"13"},fo=V(()=>e("option",{value:"attendu"},"Résultats attendus (en HETD)",-1)),vo=V(()=>e("option",{value:"hetd",selected:"selected"},"Résultats calculés (en HETD)",-1)),bo=V(()=>e("option",{value:"debug"},"Informations de débogage",-1)),go=[fo,vo,bo],yo=V(()=>e("th",{rowspan:"2",style:{"min-width":"10em"}},"Structure",-1)),xo=V(()=>e("th",{rowspan:"2"},"Non payable",-1)),Co=V(()=>e("th",{rowspan:"2"},"Compte dans le service statutaire",-1)),Vo=V(()=>e("th",{rowspan:"2",style:{"min-width":"5em"}},"Type d'intervention",-1)),So=V(()=>e("th",{colspan:"3"},"Répartition",-1)),ko=V(()=>e("th",{colspan:"2"},"Modulation",-1)),Po=["colspan"],Do=V(()=>e("th",{rowspan:"2"},"Heures",-1)),Ao={colspan:"4"},To={colspan:"4"},Mo={rowspan:"2"},Eo={colspan:"4"},Uo={colspan:"4"},Fo={colspan:"4"},Io={rowspan:"2"},$o={colspan:"4"},Ro={rowspan:"2"},wo=V(()=>e("th",null,"Fi",-1)),Ho=V(()=>e("th",null,"Fa",-1)),jo=V(()=>e("th",null,"Fc",-1)),Lo=V(()=>e("th",null,"Service dû",-1)),No=V(()=>e("th",null,"Service compl.",-1)),Oo=["onUpdate:modelValue","data-variable"],qo=["value"],zo=["onUpdate:modelValue"],Bo=V(()=>e("option",{value:!0},"Oui",-1)),Jo=V(()=>e("option",{value:!1},"Non",-1)),Go=[Bo,Jo],Yo=["onUpdate:modelValue"],Qo=V(()=>e("option",{value:!0},"Oui",-1)),Wo=V(()=>e("option",{value:!1},"Non",-1)),Xo=[Qo,Wo],Ko=["onUpdate:modelValue"],Zo=["value"],eu=V(()=>e("span",{class:"pourc"},"%",-1)),tu=V(()=>e("span",{class:"pourc"},"%",-1)),nu=V(()=>e("span",{class:"pourc"},"%",-1)),su=V(()=>e("span",{class:"pourc"},"%",-1)),iu=V(()=>e("span",{class:"pourc"},"%",-1)),ru=["onUpdate:modelValue"],au=["onUpdate:modelValue"],lu=["onUpdate:modelValue"],ou=["onUpdate:modelValue"],uu=["onUpdate:modelValue"],du=V(()=>e("td",{class:"spacer"},null,-1)),cu={class:"debug-td"},hu={key:0},mu={class:"debug-cell"},_u={class:"debug-val"},pu={key:0},fu=V(()=>e("h4",null,"Débogage : calculs globaux",-1)),vu={class:"debug-cell"},bu={class:"debug-val"},gu=["href"],yu=V(()=>e("i",{class:"fas fa-rotate-left","aria-hidden":"true"},null,-1));function xu(t,n,s,v,r,a){const u=w("u-input-float"),h=le,c=w("u-heures");return i(),l(g,null,[sa,e("div",ia,[e("div",ra,[aa,e("table",la,[e("tr",null,[oa,e("td",ua,[b(e("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>r.intervenant.libelle=o),class:"dinput"},null,512),[[L,r.intervenant.libelle]])])]),e("tr",null,[da,e("td",ca,[b(e("select",{"onUpdate:modelValue":n[1]||(n[1]=o=>r.intervenant.formule=o),class:"dinput"},[(i(!0),l(g,null,C(s.formules,o=>(i(),l("option",{value:o.id},d(o.libelle),9,ha))),256))],512),[[N,r.intervenant.formule]])])]),e("tr",null,[ma,e("td",_a,[b(e("select",{"onUpdate:modelValue":n[2]||(n[2]=o=>r.intervenant.annee=o),class:"dinput"},[(i(!0),l(g,null,C(s.annees,o=>(i(),l("option",{value:o.id},d(o.libelle),9,pa))),256))],512),[[N,r.intervenant.annee]])])]),e("tr",null,[fa,e("td",va,[b(e("select",{"onUpdate:modelValue":n[3]||(n[3]=o=>r.intervenant.typeIntervenant=o),class:"dinput"},[(i(!0),l(g,null,C(s.typesIntervenants,o=>(i(),l("option",{value:o.id},d(o.libelle),9,ba))),256))],512),[[N,r.intervenant.typeIntervenant]])])]),e("tr",null,[ga,e("td",ya,[b(e("select",{"onUpdate:modelValue":n[4]||(n[4]=o=>r.intervenant.structureCode=o),"data-variable":"intervenant",class:"dinput",onChange:n[5]||(n[5]=(...o)=>a.selectStructure&&a.selectStructure(...o))},[(i(!0),l(g,null,C(r.structures,(o,x)=>(i(),l("option",{value:x,key:x},d(o),9,xa))),128))],544),[[N,r.intervenant.structureCode]])])]),e("tr",null,[Ca,e("td",Va,[b(e("select",{"onUpdate:modelValue":n[6]||(n[6]=o=>r.intervenant.typeVolumeHoraire=o),class:"dinput"},[(i(!0),l(g,null,C(s.typesVolumesHoraires,o=>(i(),l("option",{value:o.id},d(o.libelle),9,Sa))),256))],512),[[N,r.intervenant.typeVolumeHoraire]])])]),e("tr",null,[ka,e("td",Pa,[b(e("select",{"onUpdate:modelValue":n[7]||(n[7]=o=>r.intervenant.etatVolumeHoraire=o),class:"dinput"},[(i(!0),l(g,null,C(s.etatsVolumesHoraires,o=>(i(),l("option",{value:o.id},d(o.libelle),9,Da))),256))],512),[[N,r.intervenant.etatVolumeHoraire]])])]),e("tr",null,[Aa,e("td",Ta,[_(u,{modelValue:r.intervenant.heuresServiceStatutaire,"onUpdate:modelValue":n[8]||(n[8]=o=>r.intervenant.heuresServiceStatutaire=o),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[Ma,e("td",Ea,[_(u,{modelValue:r.intervenant.heuresServiceModifie,"onUpdate:modelValue":n[9]||(n[9]=o=>r.intervenant.heuresServiceModifie=o),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[Ua,e("td",Fa,[b(e("select",{"onUpdate:modelValue":n[10]||(n[10]=o=>r.intervenant.depassementServiceDuSansHC=o),class:"dinput"},Ra,512),[[N,r.intervenant.depassementServiceDuSansHC]])])]),b(e("tr",wa,[e("th",Ha,d(r.formule.iParam1Libelle),1),e("td",ja,[b(e("input",{"onUpdate:modelValue":n[11]||(n[11]=o=>r.intervenant.param1=o),class:"dinput"},null,512),[[L,r.intervenant.param1]])])],512),[[y,r.formule.iParam1Libelle]]),b(e("tr",La,[e("th",Na,d(r.formule.iParam2Libelle),1),e("td",Oa,[b(e("input",{"onUpdate:modelValue":n[12]||(n[12]=o=>r.intervenant.param2=o),class:"dinput"},null,512),[[L,r.intervenant.param2]])])],512),[[y,r.formule.iParam2Libelle]]),b(e("tr",qa,[e("th",za,d(r.formule.iParam3Libelle),1),e("td",Ba,[b(e("input",{"onUpdate:modelValue":n[13]||(n[13]=o=>r.intervenant.param3=o),class:"dinput"},null,512),[[L,r.intervenant.param3]])])],512),[[y,r.formule.iParam3Libelle]]),b(e("tr",Ja,[e("th",Ga,d(r.formule.iParam4Libelle),1),e("td",Ya,[b(e("input",{"onUpdate:modelValue":n[14]||(n[14]=o=>r.intervenant.param4=o),class:"dinput"},null,512),[[L,r.intervenant.param4]])])],512),[[y,r.formule.iParam4Libelle]]),b(e("tr",Qa,[e("th",Wa,d(r.formule.iParam5Libelle),1),e("td",Xa,[b(e("input",{"onUpdate:modelValue":n[15]||(n[15]=o=>r.intervenant.param5=o),class:"dinput"},null,512),[[L,r.intervenant.param5]])])],512),[[y,r.formule.iParam5Libelle]])]),e("div",Ka,[e("div",Za,[e("div",el,[_(h,{variant:"primary",onClick:a.enregistrer},{default:R(()=>[p("Enregistrer les données")]),_:1},8,["onClick"])]),e("div",tl,[_(h,{variant:"secondary",onClick:a.calculer},{default:R(()=>[p("Calculer les HETD")]),_:1},8,["onClick"])])]),e("div",nl,[e("div",sl,[e("button",{class:"exporter btn btn-secondary",onClick:n[16]||(n[16]=(...o)=>a.exporter&&a.exporter(...o))},"Télécharger les données")]),e("div",il,[e("label",rl,[al,e("input",{type:"file",id:"importbtn",class:"importer",onChange:n[17]||(n[17]=(...o)=>a.importer&&a.importer(...o))},null,32)])])]),e("div",ll,[e("div",ol,[e("button",{class:"exporter btn btn-secondary",onClick:n[18]||(n[18]=(...o)=>a.exporterCsv&&a.exporterCsv(...o))},"Télécharger les données en CSV ")])])])]),e("div",ul,[dl,e("div",cl,[e("table",hl,[ml,e("tr",null,[_l,pl,fl,vl,b(e("th",bl,[b(e("input",{"onUpdate:modelValue":n[19]||(n[19]=o=>r.intervenant.tauxAutre1Code=o),class:"dinput"},null,512),[[L,r.intervenant.tauxAutre1Code]])],512),[[y,r.tauxAutre1Visibility]]),b(e("th",gl,[b(e("input",{"onUpdate:modelValue":n[20]||(n[20]=o=>r.intervenant.tauxAutre2Code=o),class:"dinput"},null,512),[[L,r.intervenant.tauxAutre2Code]])],512),[[y,r.tauxAutre2Visibility]]),b(e("th",yl,[b(e("input",{"onUpdate:modelValue":n[21]||(n[21]=o=>r.intervenant.tauxAutre3Code=o),class:"dinput"},null,512),[[L,r.intervenant.tauxAutre3Code]])],512),[[y,r.tauxAutre3Visibility]]),b(e("th",xl,[b(e("input",{"onUpdate:modelValue":n[22]||(n[22]=o=>r.intervenant.tauxAutre4Code=o),class:"dinput"},null,512),[[L,r.intervenant.tauxAutre4Code]])],512),[[y,r.tauxAutre4Visibility]]),b(e("th",Cl,[b(e("input",{"onUpdate:modelValue":n[23]||(n[23]=o=>r.intervenant.tauxAutre5Code=o),class:"dinput"},null,512),[[L,r.intervenant.tauxAutre5Code]])],512),[[y,r.tauxAutre5Visibility]])]),e("tr",null,[Vl,e("td",Sl,[_(u,{modelValue:r.intervenant.tauxCmServiceDu,"onUpdate:modelValue":n[24]||(n[24]=o=>r.intervenant.tauxCmServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),kl,e("td",Pl,[_(u,{modelValue:r.intervenant.tauxTpServiceDu,"onUpdate:modelValue":n[25]||(n[25]=o=>r.intervenant.tauxTpServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),b(e("td",Dl,[_(u,{modelValue:r.intervenant.tauxAutre1ServiceDu,"onUpdate:modelValue":n[26]||(n[26]=o=>r.intervenant.tauxAutre1ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre1Visibility]]),b(e("td",Al,[_(u,{modelValue:r.intervenant.tauxAutre2ServiceDu,"onUpdate:modelValue":n[27]||(n[27]=o=>r.intervenant.tauxAutre2ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre2Visibility]]),b(e("td",Tl,[_(u,{modelValue:r.intervenant.tauxAutre3ServiceDu,"onUpdate:modelValue":n[28]||(n[28]=o=>r.intervenant.tauxAutre3ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre3Visibility]]),b(e("td",Ml,[_(u,{modelValue:r.intervenant.tauxAutre4ServiceDu,"onUpdate:modelValue":n[29]||(n[29]=o=>r.intervenant.tauxAutre4ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre4Visibility]]),b(e("td",El,[_(u,{modelValue:r.intervenant.tauxAutre5ServiceDu,"onUpdate:modelValue":n[30]||(n[30]=o=>r.intervenant.tauxAutre5ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre5Visibility]])]),e("tr",null,[Ul,e("td",Fl,[_(u,{modelValue:r.intervenant.tauxCmServiceCompl,"onUpdate:modelValue":n[31]||(n[31]=o=>r.intervenant.tauxCmServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),Il,e("td",$l,[_(u,{modelValue:r.intervenant.tauxTpServiceCompl,"onUpdate:modelValue":n[32]||(n[32]=o=>r.intervenant.tauxTpServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),b(e("td",Rl,[_(u,{modelValue:r.intervenant.tauxAutre1ServiceCompl,"onUpdate:modelValue":n[33]||(n[33]=o=>r.intervenant.tauxAutre1ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre1Visibility]]),b(e("td",wl,[_(u,{modelValue:r.intervenant.tauxAutre2ServiceCompl,"onUpdate:modelValue":n[34]||(n[34]=o=>r.intervenant.tauxAutre2ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre2Visibility]]),b(e("td",Hl,[_(u,{modelValue:r.intervenant.tauxAutre3ServiceCompl,"onUpdate:modelValue":n[35]||(n[35]=o=>r.intervenant.tauxAutre3ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre3Visibility]]),b(e("td",jl,[_(u,{modelValue:r.intervenant.tauxAutre4ServiceCompl,"onUpdate:modelValue":n[36]||(n[36]=o=>r.intervenant.tauxAutre4ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre4Visibility]]),b(e("td",Ll,[_(u,{modelValue:r.intervenant.tauxAutre5ServiceCompl,"onUpdate:modelValue":n[37]||(n[37]=o=>r.intervenant.tauxAutre5ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[y,r.tauxAutre5Visibility]])])])]),Nl,e("table",Ol,[e("tr",null,[ql,e("td",null,[_(c,{valeur:r.intervenant.serviceDu??NaN},null,8,["valeur"])])]),e("tr",null,[zl,Bl,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFi??NaN},null,8,["valeur"])])]),e("tr",null,[Jl,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFa??NaN},null,8,["valeur"])])]),e("tr",null,[Gl,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFc??NaN},null,8,["valeur"])])]),e("tr",null,[Yl,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[Ql,e("td",null,[_(c,{valeur:r.intervenant.heuresService??NaN},null,8,["valeur"])])]),e("tr",null,[Wl,Xl,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFi??NaN},null,8,["valeur"])])]),e("tr",null,[Kl,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFa??NaN},null,8,["valeur"])])]),e("tr",null,[Zl,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFc??NaN},null,8,["valeur"])])]),e("tr",null,[eo,e("td",null,[_(c,{valeur:r.intervenant.heuresComplReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[to,e("td",null,[_(c,{valeur:r.intervenant.heuresCompl??NaN},null,8,["valeur"])])]),e("tr",null,[no,e("td",null,[_(c,{valeur:r.intervenant.heuresPrimes??NaN},null,8,["valeur"])])]),e("tr",null,[so,io,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFi??NaN},null,8,["valeur"])])]),e("tr",null,[ro,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFa??NaN},null,8,["valeur"])])]),e("tr",null,[ao,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFc??NaN},null,8,["valeur"])])]),e("tr",null,[lo,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[oo,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayable??NaN},null,8,["valeur"])])])])]),uo,e("table",co,[e("thead",null,[e("tr",null,[ho,e("th",{colspan:10+a.vhParamCount,class:"vh-donnees"},"Données",8,mo),_o,e("th",po,[b(e("select",{"onUpdate:modelValue":n[38]||(n[38]=o=>r.resMode=o),class:"form-select res-mode"},go,512),[[N,r.resMode]])])]),e("tr",null,[yo,xo,Co,Vo,So,ko,b(e("th",{colspan:a.vhParamCount},"Paramètres",8,Po),[[y,a.vhParamCount>0]]),Do,b(e("th",Ao,"Service",512),[[y,r.resMode=="attendu"]]),b(e("th",To,"Heures compl.",512),[[y,r.resMode=="attendu"]]),b(e("th",Mo,"Primes",512),[[y,r.resMode=="attendu"]]),b(e("th",Eo,"Heures non payables",512),[[y,r.resMode=="attendu"]]),b(e("th",Uo,"Service",512),[[y,r.resMode=="hetd"]]),b(e("th",Fo,"Heures compl.",512),[[y,r.resMode=="hetd"]]),b(e("th",Io,"Primes",512),[[y,r.resMode=="hetd"]]),b(e("th",$o,"Heures non payables",512),[[y,r.resMode=="hetd"]]),b(e("th",Ro,"Informations de débogage",512),[[y,r.resMode=="debug"]])]),e("tr",null,[wo,Ho,jo,Lo,No,(i(),l(g,null,C([1,2,3,4,5],o=>b(e("th",{key:o},d(r.formule["vhParam"+o+"Libelle"]),1),[[y,r.formule["vhParam"+o+"Libelle"]]])),64)),b(e("th",null,"Fi",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fa",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fc",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Référentiel",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fi",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fa",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fc",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Référentiel",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fi",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fa",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fc",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Référentiel",512),[[y,r.resMode=="attendu"]]),b(e("th",null,"Fi",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Fa",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Fc",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Référentiel",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Fi",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Fa",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Fc",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Référentiel",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Fi",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Fa",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Fc",512),[[y,r.resMode=="hetd"]]),b(e("th",null,"Référentiel",512),[[y,r.resMode=="hetd"]])])]),e("tbody",null,[(i(!0),l(g,null,C(r.volumesHoraires,(o,x)=>(i(),l("tr",{key:x},[e("th",null,d(x+1),1),e("td",null,[b(e("select",{"onUpdate:modelValue":f=>o.structureCode=f,"data-variable":x,class:"dinput",onChange:n[39]||(n[39]=(...f)=>a.selectStructure&&a.selectStructure(...f))},[(i(!0),l(g,null,C(r.structures,(f,P)=>(i(),l("option",{value:P,key:P},d(f),9,qo))),128))],40,Oo),[[N,o.structureCode]])]),e("td",null,[b(e("select",{"onUpdate:modelValue":f=>o.nonPayable=f,class:"dinput"},Go,8,zo),[[N,o.nonPayable],[y,o.structureCode]])]),e("td",null,[b(e("select",{"onUpdate:modelValue":f=>o.serviceStatutaire=f,class:"dinput"},Xo,8,Yo),[[N,o.serviceStatutaire],[y,o.structureCode]])]),e("td",null,[b(e("select",{"onUpdate:modelValue":f=>o.typeInterventionCode=f,class:"dinput"},[(i(!0),l(g,null,C(a.filteredTypesIntervention,f=>(i(),l("option",{value:f,key:f},d(f),9,Zo))),128))],8,Ko),[[N,o.typeInterventionCode],[y,o.structureCode]])]),e("td",null,[b(e("div",null,[_(u,{modelValue:o.tauxFi,"onUpdate:modelValue":f=>o.tauxFi=f,"is-pourc":"",class:"doutput",readonly:"",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),eu],512),[[y,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[b(e("div",null,[_(u,{modelValue:o.tauxFa,"onUpdate:modelValue":f=>o.tauxFa=f,"is-pourc":"",class:"dinput","data-variable":x,onChange:a.majTauxFi,onClick:a.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange","onClick"]),tu],512),[[y,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[b(e("div",null,[_(u,{modelValue:o.tauxFc,"onUpdate:modelValue":f=>o.tauxFc=f,"is-pourc":"",class:"dinput","data-variable":x,onChange:a.majTauxFi,onClick:a.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange","onClick"]),nu],512),[[y,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[b(e("div",null,[_(u,{modelValue:o.ponderationServiceDu,"onUpdate:modelValue":f=>o.ponderationServiceDu=f,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),su],512),[[y,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[b(e("div",null,[_(u,{modelValue:o.ponderationServiceCompl,"onUpdate:modelValue":f=>o.ponderationServiceCompl=f,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),iu],512),[[y,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),b(e("td",null,[b(e("input",{"onUpdate:modelValue":f=>o.param1=f,class:"dinput"},null,8,ru),[[L,o.param1],[y,o.structureCode]])],512),[[y,r.formule.vhParam1Libelle]]),b(e("td",null,[b(e("input",{"onUpdate:modelValue":f=>o.param2=f,class:"dinput"},null,8,au),[[L,o.param2],[y,o.structureCode]])],512),[[y,r.formule.vhParam2Libelle]]),b(e("td",null,[b(e("input",{"onUpdate:modelValue":f=>o.param3=f,class:"dinput"},null,8,lu),[[L,o.param3],[y,o.structureCode]])],512),[[y,r.formule.vhParam3Libelle]]),b(e("td",null,[b(e("input",{"onUpdate:modelValue":f=>o.param4=f,class:"dinput"},null,8,ou),[[L,o.param4],[y,o.structureCode]])],512),[[y,r.formule.vhParam4Libelle]]),b(e("td",null,[b(e("input",{"onUpdate:modelValue":f=>o.param5=f,class:"dinput"},null,8,uu),[[L,o.param5],[y,o.structureCode]])],512),[[y,r.formule.vhParam5Libelle]]),e("td",null,[b(_(u,{modelValue:o.heures,"onUpdate:modelValue":f=>o.heures=f,class:"dinput",onChange:a.calculer},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[y,!["",null].includes(o.typeInterventionCode)]])]),du,b(e("td",null,[_(u,{modelValue:o.heuresAttenduesServiceFi,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesServiceFa,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesServiceFc,"onUpdate:modelValue":f=>o.heuresAttenduesServiceFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesServiceReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesServiceReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesComplFi,"onUpdate:modelValue":f=>o.heuresAttenduesComplFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesComplFa,"onUpdate:modelValue":f=>o.heuresAttenduesComplFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesComplFc,"onUpdate:modelValue":f=>o.heuresAttenduesComplFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesComplReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesComplReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesPrimes,"onUpdate:modelValue":f=>o.heuresAttenduesPrimes=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesNonPayableFi,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFi=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesNonPayableFa,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFa=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesNonPayableFc,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableFc=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresAttenduesNonPayableReferentiel,"onUpdate:modelValue":f=>o.heuresAttenduesNonPayableReferentiel=f,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[y,r.resMode=="attendu"]]),b(e("td",null,[_(u,{modelValue:o.heuresServiceFi,"onUpdate:modelValue":f=>o.heuresServiceFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesServiceFi!=null&&Math.round(o.heuresAttenduesServiceFi*100)!=Math.round(o.heuresServiceFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresServiceFa,"onUpdate:modelValue":f=>o.heuresServiceFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesServiceFa!=null&&Math.round(o.heuresAttenduesServiceFa*100)!=Math.round(o.heuresServiceFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresServiceFc,"onUpdate:modelValue":f=>o.heuresServiceFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesServiceFc!=null&&Math.round(o.heuresAttenduesServiceFc*100)!=Math.round(o.heuresServiceFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresServiceReferentiel,"onUpdate:modelValue":f=>o.heuresServiceReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesServiceReferentiel!=null&&Math.round(o.heuresAttenduesServiceReferentiel*100)!=Math.round(o.heuresServiceReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresComplFi,"onUpdate:modelValue":f=>o.heuresComplFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesComplFi!=null&&Math.round(o.heuresAttenduesComplFi*100)!=Math.round(o.heuresComplFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresComplFa,"onUpdate:modelValue":f=>o.heuresComplFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesComplFa!=null&&Math.round(o.heuresAttenduesComplFa*100)!=Math.round(o.heuresComplFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresComplFc,"onUpdate:modelValue":f=>o.heuresComplFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesComplFc!=null&&Math.round(o.heuresAttenduesComplFc*100)!=Math.round(o.heuresComplFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresComplReferentiel,"onUpdate:modelValue":f=>o.heuresComplReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesComplReferentiel!=null&&Math.round(o.heuresAttenduesComplReferentiel*100)!=Math.round(o.heuresComplReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresPrimes,"onUpdate:modelValue":f=>o.heuresPrimes=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesPrimes!=null&&Math.round(o.heuresAttenduesPrimes*100)!=Math.round(o.heuresPrimes*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresNonPayableFi,"onUpdate:modelValue":f=>o.heuresNonPayableFi=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFi!=null&&Math.round(o.heuresAttenduesNonPayableFi*100)!=Math.round(o.heuresNonPayableFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresNonPayableFa,"onUpdate:modelValue":f=>o.heuresNonPayableFa=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFa!=null&&Math.round(o.heuresAttenduesNonPayableFa*100)!=Math.round(o.heuresNonPayableFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresNonPayableFc,"onUpdate:modelValue":f=>o.heuresNonPayableFc=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFc!=null&&Math.round(o.heuresAttenduesNonPayableFc*100)!=Math.round(o.heuresNonPayableFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",null,[_(u,{modelValue:o.heuresNonPayableReferentiel,"onUpdate:modelValue":f=>o.heuresNonPayableReferentiel=f,"maximum-digits":"2",tabindex:"-1",readonly:"",class:M({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableReferentiel!=null&&Math.round(o.heuresAttenduesNonPayableReferentiel*100)!=Math.round(o.heuresNonPayableReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[y,r.resMode=="hetd"]]),b(e("td",cu,[r.debug.vh&&r.debug.vh[x]?(i(),l("div",hu,[(i(!0),l(g,null,C(r.debug.vh[x],(f,P)=>(i(),l("span",mu,[p(d(P)+" ",1),e("span",_u,d(Math.round(f*100)/100),1)]))),256)),p("  ")])):m("",!0)],512),[[y,r.resMode=="debug"]])]))),128))])]),r.resMode=="debug"&&r.debug.global?(i(),l("div",pu,[fu,(i(!0),l(g,null,C(r.debug.global,(o,x)=>(i(),l("span",vu,[p(d(x)+" ",1),e("span",bu,d(Math.round(o*100)/100),1)]))),256)),p("  ")])):m("",!0),e("div",null,[e("a",{class:"btn btn-secondary",href:r.indexUrl},[yu,p(" Retour à la liste des formules")],8,gu)])])],64)}const Cu=k(na,[["render",xu],["__scopeId","data-v-140dc61b"]]),Vu=Object.freeze(Object.defineProperty({__proto__:null,default:Cu},Symbol.toStringTag,{value:"Module"})),Su={name:"TotauxHetd",props:{intervenant:{type:Number},typeVolumeHoraire:{type:Number}},data(){return{data:{types:[]},serviceLigne:""}},mounted(){this.load(),window.addEventListener("Formule/TotauxHetd.refresh",t=>{this.load()})},methods:{load(){unicaenVue.axios.get(unicaenVue.url("intervenant/formule-totaux-hetd/:intervenant/:typeVolumeHoraire",{intervenant:this.intervenant,typeVolumeHoraire:this.typeVolumeHoraire})).then(t=>{this.data=t.data.data,this.data.serviceStatutaire>0&&(this.data.serviceDu!=this.data.serviceStatutaire?this.serviceLigne="* "+this.data.serviceDu+"h de service dû en tenant compte des modifications de service":this.serviceLigne="* "+this.data.serviceStatutaire+"h de service statutaire")})},tradType(t){switch(t){case"fi":return"FI";case"fa":return"FA";case"fc":return"FC";case"enseignement":return"Enseignement";case"referentiel":return"Référentiel";case"total":return"Total";default:return t}},tradCategorie(t){switch(t){case"service":return"Service*";case"compl":return"Heures complémentaires";case"payable":return"Heures";case"non-payable":return"Non payable";case"primes":return"Primes";case"total":return"Total";default:return t}}}},de=t=>(G("data-v-f852d328"),t=t(),Y(),t),ku=de(()=>e("h2",null,"Totaux en heures équivalent TD",-1)),Pu={class:"table table-bordered"},Du=de(()=>e("th",null," ",-1)),Au=["colspan"],Tu=de(()=>e("br",null,null,-1));function Mu(t,n,s,v,r,a){const u=w("u-heures"),h=ge,c=ye;return i(),l(g,null,[r.data.types.length>0?(i(),H(c,{key:0},{default:R(()=>[_(h,{cols:"6"},{default:R(()=>[ku,e("table",Pu,[e("tr",null,[Du,(i(!0),l(g,null,C(r.data.types,o=>(i(),l("th",{key:o},d(a.tradType(o)),1))),128))]),(i(!0),l(g,null,C(r.data.heures,(o,x)=>(i(),l("tr",{key:x},[e("th",null,d(a.tradCategorie(x)),1),x!=="primes"?(i(!0),l(g,{key:0},C(o,(f,P)=>(i(),l("td",{class:"nombre",key:P},[_(u,{valeur:f},null,8,["valeur"])]))),128)):(i(),l("td",{key:1,class:"nombre",colspan:o.length},[_(u,{valeur:r.data.heures.primes.total},null,8,["valeur"])],8,Au))]))),128))]),p(" "+d(r.serviceLigne),1)]),_:1})]),_:1})):m("",!0),Tu],64)}const Eu=k(Su,[["render",Mu],["__scopeId","data-v-f852d328"]]),Uu=Object.freeze(Object.defineProperty({__proto__:null,default:Eu},Symbol.toStringTag,{value:"Module"})),Fu={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(t){this.formatted=this.formatage(t)}},methods:{formatage(t){if(t===void 0)return;let n=new Date(t);const s=n.getFullYear(),v=(n.getMonth()+1).toString().padStart(2,"0"),r=n.getDate().toString().padStart(2,"0"),a=n.getHours().toString().padStart(2,"0"),u=n.getMinutes().toString().padStart(2,"0"),h=n.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${r}/${v}/${s} à ${a}:${u}`;case"time":return`${a}:${u}:${h}`}return`${r}/${v}/${s}`}}};function Iu(t,n,s,v,r,a){return d(r.formatted)}const W=k(Fu,[["render",Iu]]),$u={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(t){this.searchTerm=t.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(t){return unicaenVue.url("intervenant/code:"+t+"/voir")},reload(){var t=document.getElementById("term");t.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(n=>{let s=n.data,v=[];for(const r in s){if(s[r].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){v.push(s[r]);continue}if(s[r].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){v.push(s[r]);continue}if(s[r].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){v.push(s[r]);continue}}this.intervenants=v,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(n=>{console.log(n.message)})},800)}}},Ru=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),wu={class:"intervenant-recherche"},Hu={class:"critere"},ju=e("br",null,null,-1),Lu=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),Nu=e("br",null,null,-1),Ou={key:0,class:"table table-bordered table-hover"},qu=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),zu=["title"],Bu={style:{}},Ju=["href"],Gu=e("i",{class:"fas fa-eye"},null,-1),Yu={key:1,class:"table table-bordered table-hover"},Qu=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),Wu=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),Xu=[Qu,Wu];function Ku(t,n,s,v,r,a){const u=W;return i(),l(g,null,[Ru,e("div",wu,[e("div",Hu,[e("div",null,[e("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:n[0]||(n[0]=(...h)=>a.rechercher&&a.rechercher(...h))},null,32),ju]),e("div",null,[Lu,b(e("input",{"onUpdate:modelValue":n[1]||(n[1]=h=>r.checkedTypes=h),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:n[2]||(n[2]=h=>a.reload())},null,544),[[ee,r.checkedTypes]]),p(" Permanent "),b(e("input",{"onUpdate:modelValue":n[3]||(n[3]=h=>r.checkedTypes=h),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:n[4]||(n[4]=h=>a.reload())},null,544),[[ee,r.checkedTypes]]),p(" Vacataire "),b(e("input",{"onUpdate:modelValue":n[5]||(n[5]=h=>r.checkedTypes=h),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:n[6]||(n[6]=h=>a.reload())},null,544),[[ee,r.checkedTypes]]),p(" Etudiant ")]),Nu])]),r.intervenants.length>0?(i(),l("table",Ou,[qu,e("tbody",null,[(i(!0),l(g,null,C(r.intervenants,(h,c)=>(i(),l("tr",{class:M({"bg-danger":h.destruction!==null}),title:h.destruction!==null?"Fiche historisé":""},[e("td",Bu,[e("a",{href:a.urlFiche(h.code)},[Gu,p(" Fiche")],8,Ju)]),e("td",null,d(h.civilite),1),e("td",null,d(h.nom),1),e("td",null,d(h.prenom),1),e("td",null,d(h.structure),1),e("td",null,d(h.statut),1),e("td",null,[_(u,{value:h["date-naissance"]},null,8,["value"])]),e("td",null,d(h["numero-personnel"]),1)],10,zu))),256))])])):m("",!0),r.intervenants.length==0&&r.noResult==1?(i(),l("table",Yu,Xu)):m("",!0)],64)}const Zu=k($u,[["render",Ku]]),ed=Object.freeze(Object.defineProperty({__proto__:null,default:Zu},Symbol.toStringTag,{value:"Module"})),td={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return Object.keys(this.structure.structures).length>0}},methods:{saisie(t){modAjax(t.currentTarget,n=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.refresh()})},refresh(){this.liste.reload()}}},Q=t=>(G("data-v-046af32d"),t=t(),Y(),t),nd={class:"accordion-item"},sd={class:"accordion-header"},id=["aria-controls","data-bs-target"],rd=["href"],ad=Q(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),ld=[ad],od=["href"],ud=Q(()=>e("i",{class:"fas fa-trash-can"},null,-1)),dd=[ud],cd=["id"],hd={class:"accordion-body"},md={class:"row"},_d=Q(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),p(" :")],-1)),pd={class:"col-md-5"},fd={class:"row"},vd=Q(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),p(" :")],-1)),bd={class:"col-md-5"},gd={class:"row"},yd=Q(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),p(" :")],-1)),xd={class:"col-md-5"},Cd={key:0,class:"fas fa-check text-success"},Vd={key:1,class:"fas fa-xmark text-danger"},Sd={class:"row"},kd=Q(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),p(" :")],-1)),Pd={class:"col-md-5"},Dd={key:0,class:"fas fa-check text-success"},Ad={key:1,class:"fas fa-xmark text-danger"},Td={class:"row"},Md=Q(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),p(" :")],-1)),Ed={class:"col-md-5"},Ud={key:0,class:"sous-structures"},Fd=Q(()=>e("h4",null,"Sous-structures",-1)),Id={class:"accordion"};function $d(t,n,s,v,r,a){const u=w("structure",!0);return i(),l("div",nd,[e("h2",sd,[e("button",{"aria-controls":s.structure.id,"data-bs-target":`#str${s.structure.id}`,"aria-expanded":"true",class:"accordion-button","data-bs-toggle":"collapse",type:"button"},[s.structure.canEdit?(i(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary btn-sm",title:"Modifier la structure",onClick:n[0]||(n[0]=A((...h)=>a.saisie&&a.saisie(...h),["prevent"]))},ld,8,rd)):m("",!0),s.structure.canDelete?(i(),l("a",{key:1,href:r.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",title:"Supprimer la structure",onClick:n[1]||(n[1]=A((...h)=>a.supprimer&&a.supprimer(...h),["prevent"]))},dd,8,od)):m("",!0),p("   "+d(s.structure.libelleLong)+" ("+d(s.structure.libelleCourt)+") ",1)],8,id)]),e("div",{id:`str${s.structure.id}`,class:"accordion-collapse collapse show"},[e("div",hd,[e("div",md,[_d,e("div",pd,d(s.structure.code),1)]),e("div",fd,[vd,e("div",bd,d(s.structure.source.libelle),1)]),e("div",gd,[yd,e("div",xd,[s.structure.enseignement?(i(),l("i",Cd)):s.structure.enseignement?m("",!0):(i(),l("i",Vd))])]),e("div",Sd,[kd,e("div",Pd,[s.structure.affAdresseContrat?(i(),l("i",Dd)):s.structure.affAdresseContrat?m("",!0):(i(),l("i",Ad))])]),e("div",Td,[Md,e("div",Ed,[e("pre",null,d(s.structure.adresse),1)])]),a.hasSousStructures?(i(),l("div",Ud,[Fd,e("div",Id,[(i(!0),l(g,null,C(s.structure.structures,h=>(i(),H(u,{key:h.id,structure:h,onRefresh:a.refresh},null,8,["structure","onRefresh"]))),128))])])):m("",!0)])],8,cd)])}const Me=k(td,[["render",$d],["__scopeId","data-v-046af32d"]]),Rd=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"})),wd={components:{structure:Me},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(t=>{this.structures=t.data})}}},Hd=e("h1",null,"Administration des structures",-1),jd={class:"accordion no-intranavigation"},Ld=["href"],Nd=e("i",{class:"fas fa-pen-to-square"},null,-1);function Od(t,n,s,v,r,a){const u=w("structure");return i(),l(g,null,[Hd,e("div",jd,[(i(!0),l(g,null,C(r.structures,h=>(i(),H(u,{key:h.id,structure:h},null,8,["structure"]))),128))]),s.canAdd?(i(),l("a",{key:0,class:"btn btn-primary no-intranavigation",href:r.ajoutUrl,onClick:n[0]||(n[0]=A((...h)=>a.ajout&&a.ajout(...h),["prevent"])),title:"Ajouter une structure"},[Nd,p(" Ajouter une structure ")],8,Ld)):m("",!0)],64)}const qd=k(wd,[["render",Od]]),zd=Object.freeze(Object.defineProperty({__proto__:null,default:qd},Symbol.toStringTag,{value:"Module"})),Bd={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},Jd=["id"],Gd={class:"modal-dialog"},Yd={class:"modal-content"},Qd={class:"modal-header"},Wd={class:"modal-title"},Xd=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Kd={class:"modal-body"},Zd={class:"modal-footer"},ec=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function tc(t,n,s,v,r,a){return i(),l("div",{class:"modal fade",id:s.id,tabindex:"-1","aria-hidden":"true"},[e("div",Gd,[e("div",Yd,[e("div",Qd,[e("h5",Wd,d(s.title),1),Xd]),e("div",Kd,[ie(t.$slots,"body")]),e("div",Zd,[ie(t.$slots,"footer"),ec])])])],8,Jd)}const nc=k(Bd,[["render",tc]]),sc={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},ic=["id"];function rc(t,n,s,v,r,a){return i(),l("i",{class:M(`fas fa-${s.name} text-${s.variant} fa-rotate-${s.rotate}`),id:`${s.id}`},null,10,ic)}const B=k(sc,[["render",rc]]),ac={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(t){this.validationText=this.calcValidation(t)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(t){return t===null?"A valider":t.id===null?"Autovalidée":"Validation du "+Util.dateToString(t.histoCreation)+" par "},saisie(t){modAjax(t.currentTarget,n=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.$emit("supprimer",this.mission)})},valider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},devalider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireSupprimer(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireValider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireDevalider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(t=>{this.$emit("refresh",t.data)})}}},q=t=>(G("data-v-1735108d"),t=t(),Y(),t),lc=["id"],oc={class:"card-header card-header-h3"},uc={key:0},dc={class:"float-end"},cc={key:1},hc={key:2},mc={class:"float-end"},_c={class:"card-body"},pc={class:"row"},fc={class:"col-md-8"},vc={class:"row"},bc={class:"col-md-12"},gc=q(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),yc={class:"form-control"},xc={class:"row"},Cc={class:"col-md-6"},Vc=q(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),Sc={class:"form-control"},kc={class:"col-md-6"},Pc=q(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),Dc={class:"form-control"},Ac={class:"col-md-7"},Tc=q(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),Mc={class:"input-group mb-3"},Ec=["innerHTML"],Uc=["data-bs-target"],Fc={key:0,class:"col-md-5"},Ic=q(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),$c={class:"form-control"},Rc={class:"row"},wc={class:"col-md-12"},Hc=q(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),jc={class:"form-control"},Lc={key:0,class:"row"},Nc={class:"col-md-12"},Oc=q(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),qc={class:"form-control"},zc=q(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),Bc={class:"row"},Jc={class:"col-md-12"},Gc=["href"],Yc=["href"],Qc=["href"],Wc=["href"],Xc={class:"col-md-4"},Kc=q(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),Zc={class:"table table-bordered table-condensed"},eh=q(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),th={style:{"text-align":"right"}},nh=q(()=>e("br",null,null,-1)),sh={key:0},ih=["data-id"],rh=["data-id"],ah=["data-id"];function lh(t,n,s,v,r,a){const u=W,h=B,c=w("utilisateur"),o=w("u-heures"),x=nc;return i(),l(g,null,[e("div",{id:s.mission.id,class:M([{"bg-success":s.mission.valide,"bg-default":!s.mission.valide},"card"])},[e("form",{onSubmit:n[4]||(n[4]=A((...f)=>t.submitForm&&t.submitForm(...f),["prevent"]))},[e("div",oc,[s.mission.libelleMission?(i(),l("h5",uc,[p(d(s.mission.libelleMission)+" ",1),e("span",dc,[p("Du "),_(u,{value:s.mission.dateDebut},null,8,["value"]),p(" au "),_(u,{value:s.mission.dateFin},null,8,["value"])])])):m("",!0),s.mission.libelleMission?(i(),l("h6",cc,d(s.mission.typeMission.libelle),1)):m("",!0),s.mission.libelleMission?m("",!0):(i(),l("h5",hc,[p(d(s.mission.typeMission.libelle)+" ",1),e("span",mc,[p("Du "),_(u,{value:s.mission.dateDebut},null,8,["value"]),p(" au "),_(u,{value:s.mission.dateFin},null,8,["value"])])]))]),e("div",_c,[e("div",pc,[e("div",fc,[e("div",vc,[e("div",bc,[gc,e("div",yc,d(s.mission.structure.libelle),1)])]),e("div",xc,[e("div",Cc,[Vc,e("div",Sc,d(s.mission.tauxRemu?s.mission.tauxRemu.libelle:null),1)]),e("div",kc,[Pc,e("div",Dc,d(s.mission.tauxRemuMajore?s.mission.tauxRemuMajore.libelle:s.mission.tauxRemu?"Idem ("+s.mission.tauxRemu.libelle+")":null),1)]),e("div",Ac,[Tc,e("div",Mc,[e("div",{class:"form-control",innerHTML:a.heuresLib},null,8,Ec),e("button",{"data-bs-target":`#details-${s.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,Uc)])]),s.mission.typeMission.besoinFormation?(i(),l("div",Fc,[Ic,e("div",$c,d(s.mission.heuresFormation),1)])):m("",!0)]),e("div",Rc,[e("div",wc,[Hc,e("div",jc,d(s.mission.description),1)])]),s.mission.typeMission.accompagnementEtudiants?(i(),l("div",Lc,[e("div",Nc,[Oc,e("div",qc,[e("pre",null,d(s.mission.etudiantsSuivis),1)])])])):m("",!0),zc,e("div",Bc,[e("div",Jc,[s.mission.canSaisie?(i(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=A((...f)=>a.saisie&&a.saisie(...f),["prevent"]))},"Modifier",8,Gc)):m("",!0),s.mission.canValider?(i(),l("a",{key:1,href:r.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:n[1]||(n[1]=A((...f)=>a.valider&&a.valider(...f),["prevent"]))},"Valider",8,Yc)):m("",!0),s.mission.canDevalider?(i(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:n[2]||(n[2]=A((...f)=>a.devalider&&a.devalider(...f),["prevent"]))},"Dévalider",8,Qc)):m("",!0),s.mission.canSupprimer?(i(),l("a",{key:3,href:r.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:n[3]||(n[3]=A((...f)=>a.supprimer&&a.supprimer(...f),["prevent"]))},"Supprimer",8,Wc)):m("",!0)])])]),e("div",Xc,[Kc,e("div",null,[_(h,{name:"thumbs-up",variant:"success"}),p(" Créé le "),_(u,{value:s.mission.histoCreation},null,8,["value"]),p(" par "),_(c,{mail:s.mission.histoCreateur.email,nom:s.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[_(h,{name:s.mission.valide?"thumbs-up":"thumbs-down",variant:s.mission.valide?"success":"info"},null,8,["name","variant"]),p(" "+d(r.validationText)+" ",1),s.mission.validation&&s.mission.validation.histoCreateur?(i(),H(c,{key:0,mail:s.mission.validation.histoCreateur.email,nom:s.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):m("",!0)]),e("div",null,[_(h,{name:s.mission.contrat?"thumbs-up":"thumbs-down",variant:s.mission.contrat?"success":"info"},null,8,["name","variant"]),p(" "+d(s.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,d(s.mission.heuresRealisees)+" heure"+d(s.mission.heuresRealisees<2?"":"s")+" réalisée"+d(s.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,lc),_(x,{id:`details-${s.mission.id}`,title:"Détail des heures prévisionnelles"},{body:R(()=>[e("table",Zc,[eh,e("tbody",null,[(i(!0),l(g,null,C(s.mission.volumesHorairesPrevus,f=>(i(),l("tr",{key:f.id},[e("td",th,[_(o,{valeur:f.heures},null,8,["valeur"])]),e("td",null,[_(h,{name:"thumbs-up",variant:"success"}),p(" Saisi par "),_(c,{mail:f.histoCreateur.email,nom:f.histoCreateur.displayName},null,8,["mail","nom"]),p(" le "),_(u,{value:f.histoCreation},null,8,["value"]),nh,_(h,{name:f.valide?"thumbs-up":"thumbs-down",variant:f.valide?"success":"info"},null,8,["name","variant"]),p(" "+d(f.validation&&f.validation.id==null?"Autovalidé":f.validation?"":"à valider")+" ",1),f.validation&&f.validation.histoCreateur?(i(),l("span",sh,[p(" Validé par "),_(c,{mail:f.validation.histoCreateur.email,nom:f.validation.histoCreateur.displayName},null,8,["mail","nom"]),p(" le "),_(u,{value:f.validation.histoCreation},null,8,["value"])])):m("",!0)]),e("td",null,[f.canValider?(i(),l("a",{key:0,"data-id":f.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:n[5]||(n[5]=A((...P)=>a.volumeHoraireValider&&a.volumeHoraireValider(...P),["prevent"]))},"Valider",8,ih)):m("",!0),f.canDevalider?(i(),l("a",{key:1,"data-id":f.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:n[6]||(n[6]=A((...P)=>a.volumeHoraireDevalider&&a.volumeHoraireDevalider(...P),["prevent"]))},"Dévalider",8,rh)):m("",!0),f.canSupprimer?(i(),l("a",{key:2,"data-id":f.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:n[7]||(n[7]=A((...P)=>a.volumeHoraireSupprimer&&a.volumeHoraireSupprimer(...P),["prevent"]))},"Supprimer",8,ah)):m("",!0)])]))),128))])])]),footer:R(()=>[]),_:1},8,["id"])],64)}const Ee=k(ac,[["render",lh],["__scopeId","data-v-1735108d"]]),oh=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"})),uh={components:{mission:Ee},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},supprimer(t){this.reload()},refresh(t){let n=Util.json.indexById(this.missions,t.id);this.missions[n]=t,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(t=>{this.missions=t.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},dh=["href"];function ch(t,n,s,v,r,a){const u=w("mission");return i(),l(g,null,[(i(!0),l(g,null,C(r.missions,h=>(i(),H(u,{onSupprimer:a.supprimer,onRefresh:a.refresh,key:h.id,mission:h},null,8,["onSupprimer","onRefresh","mission"]))),128)),s.canAddMission?(i(),l("a",{key:0,class:"btn btn-primary",href:r.ajoutUrl,onClick:n[0]||(n[0]=A((...h)=>a.ajout&&a.ajout(...h),["prevent"]))},"Ajout d'une nouvelle mission",8,dh)):m("",!0)],64)}const hh=k(uh,[["render",ch]]),mh=Object.freeze(Object.defineProperty({__proto__:null,default:hh},Symbol.toStringTag,{value:"Module"})),_h={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},renseignerDonneesPersonnelles:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},computed:{urlDonneesPersonnelles:function(){return unicaenVue.url("intervenant/:intervenant/dossier",{intervenant:this.intervenant})}},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(t=>{this.candidatures=t.data})},validerCandidature(t){modAjax(t.currentTarget,n=>{this.reload()})},refuserCandidature(t){popConfirm(t.target,n=>{this.reload()})},urlOffre(t){return unicaenVue.url("offre-emploi/detail/:offre",{offre:t.offre.id})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})}}},ph={key:0,class:"alert alert-primary",role:"alert"},fh=["href"],vh={class:"table table-bordered"},bh=e("thead",null,[e("tr",null,[e("th",null,"Offre d'emploi"),e("th",null,"Composante"),e("th",null,"Etat"),e("th",null,"Date commission"),e("th",null,"Action")])],-1),gh={key:0},yh=e("td",{colspan:"5",style:{"text-align":"center"}},"Aucune candidature",-1),xh=[yh],Ch={style:{"text-align":"center"}},Vh=["href"],Sh={style:{"text-align":"center"}},kh={style:{"text-align":"center"}},Ph={key:0,class:"badge rounded-pill bg-success"},Dh={key:1,class:"badge rounded-pill bg-danger"},Ah={key:2,class:"badge rounded-pill bg-warning"},Th={style:{"text-align":"center"}},Mh=["href"],Eh=e("i",{class:"fa-solid fa-check"},null,-1),Uh=[Eh],Fh=["href"],Ih=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),$h=[Ih],Rh=["href"];function wh(t,n,s,v,r,a){const u=W,h=B;return i(),l("div",null,[this.renseignerDonneesPersonnelles?(i(),l("div",ph,[p(" Afin que vos candidatures soient étudiées, veuillez compléter "),e("a",{href:this.urlDonneesPersonnelles},"vos données personnelles",8,fh),p(" et fournir les pièces justificatives qui vous seront demandées. ")])):m("",!0),e("table",vh,[bh,e("tbody",null,[r.candidatures.length==0?(i(),l("tr",gh,xh)):m("",!0),(i(!0),l(g,null,C(r.candidatures,c=>(i(),l("tr",{key:c.id},[e("td",Ch,[e("a",{href:a.urlOffre(c)},d(c.offre.titre),9,Vh)]),e("td",Sh,d(c.offre.structure.libelleCourt),1),e("td",kh,[c.validation?(i(),l("span",Ph,"Acceptée par "+d(c.validation.histoCreateur.displayName),1)):m("",!0),!c.validation&&c.motif!==null?(i(),l("span",Dh,d(c.motif),1)):m("",!0),!c.validation&&c.motif===null?(i(),l("span",Ah,"En attente d'acceptation")):m("",!0)]),e("td",null,[c.dateCommission?(i(),H(u,{key:0,value:c.dateCommission},null,8,["value"])):m("",!0)]),e("td",Th,[!c.validation&&c.canValider?(i(),l("a",{key:0,href:a.urlAccepterCandidature(c),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:n[0]||(n[0]=A((...o)=>a.validerCandidature&&a.validerCandidature(...o),["prevent"]))},Uh,8,Mh)):m("",!0),p("  "),!c.motif&&c.canRefuser?(i(),l("a",{key:1,href:a.urlRefuserCandidature(c),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:n[1]||(n[1]=A((...o)=>a.refuserCandidature&&a.refuserCandidature(...o),["prevent"]))},$h,8,Fh)):m("",!0)])]))),128))])]),e("a",{href:r.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[_(h,{name:"eye"}),p(" Voir toutes les offres d'emploi ")],8,Rh),p("  ")])}const Hh=k(_h,[["render",wh]]),jh=Object.freeze(Object.defineProperty({__proto__:null,default:Hh},Symbol.toStringTag,{value:"Module"})),Lh={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let t=this.offre.description.substr(0,200);return this.offre.description.length>200&&(t+="..."),t},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let t="auth/connexion?redirect="+window.location.href;return unicaenVue.url(t)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(t){modAjax(t.target,n=>{this.refresh()})},urlVoir:function(t){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+t.intervenant.code})},urlVoirCandidature:function(t){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+t.intervenant.code})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(t=>{this.$emit("refresh",t.data)})},supprimer(t){popConfirm(t.target,n=>{this.$emit("supprimer",this.offre)})},postuler(t){popConfirm(t.target,n=>{this.$emit("postuler",this.offre)})},valider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},devalider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},validerCandidature(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},refuserCandidature(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})}}},Nh={key:0,class:"col"},Oh={class:"card h-100"},qh={class:"card-header"},zh={class:"badge rounded-pill bg-info"},Bh={key:0,class:"badge rounded-pill bg-success"},Jh={key:1,class:"badge rounded-pill bg-warning"},Gh={class:"card-body"},Yh={class:"bg-light",style:{padding:"5px"}},Qh=e("b",null,"Créée le : ",-1),Wh=e("br",null,null,-1),Xh=e("b",null,"Période à pourvoir : ",-1),Kh=e("br",null,null,-1),Zh=e("b",null,"Demandée par la composante :",-1),em=e("br",null,null,-1),tm=e("b",null,"Type de mission :",-1),nm={class:"card-footer"},sm={class:"d-grid gap-2 d-md-flex justify-content-md-end"},im=["href"],rm={key:1},am={class:"page-header"},lm={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},om=e("i",{class:"fa-solid fa-user"},null,-1),um={class:"ms-2"},dm=["href"],cm={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},hm=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),mm=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),_m=[hm,mm],pm={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},fm=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),vm=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),bm=[fm,vm],gm={class:"bg-light",style:{padding:"10px"}},ym=e("b",null,"Créée le : ",-1),xm=e("br",null,null,-1),Cm=e("b",null,"Période à pourvoir : ",-1),Vm=e("br",null,null,-1),Sm=e("b",null,"Date limite de candidature :",-1),km=e("br",null,null,-1),Pm=e("b",null,"Demandé par la composante :",-1),Dm=e("br",null,null,-1),Am=e("b",null,"Type de mission :",-1),Tm=e("br",null,null,-1),Mm=e("b",null,"Nombre d'heures pour la mission :",-1),Em=e("br",null,null,-1),Um=e("b",null,"Nombre de postes à pourvoir :",-1),Fm=e("br",null,null,-1),Im=["innerHTML"],$m={key:3,class:"alert alert-info"},Rm=["innerHTML"],wm=e("br",null,null,-1),Hm={key:4},jm=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),Lm={class:"table table-bordered"},Nm=e("th",null,"Intervenant",-1),Om=e("th",null,"Etat",-1),qm={key:0},zm={key:0},Bm={key:0,colspan:"4",style:{"text-align":"center"}},Jm={key:1,colspan:"3",style:{"text-align":"center"}},Gm=["href"],Ym={key:0,class:"badge rounded-pill bg-success"},Qm={key:1,class:"badge rounded-pill bg-danger"},Wm={key:2,class:"badge rounded-pill bg-warning"},Xm={key:0},Km=["href"],Zm={class:"mt-5"},e_=["href"],t_=["href"],n_=["href"],s_=["href"],i_=["href"],r_=["href"];function a_(t,n,s,v,r,a){const u=W,h=B;return i(),l(g,null,[this.extended?m("",!0):(i(),l("div",Nh,[e("div",Oh,[e("div",qh,[e("h4",null,d(s.offre.titre),1),e("span",zh,d(s.offre.nombreHeures)+" heure(s)",1),p("   "),s.offre.validation?(i(),l("span",Bh,[p("Validée le "),_(u,{value:s.offre.validation.histoCreation},null,8,["value"]),p(" par "+d(s.offre.validation.histoCreateur.displayName),1)])):m("",!0),s.offre.validation?m("",!0):(i(),l("span",Jh," En attente de validation par la DRH")),p("  ")]),e("div",Gh,[e("p",Yh,[Qh,_(u,{value:s.offre.histoCreation},null,8,["value"]),p(" par "+d(s.offre.histoCreateur.displayName),1),Wh,Xh,p("du "),_(u,{value:s.offre.dateDebut},null,8,["value"]),p(" au "),_(u,{value:s.offre.dateFin},null,8,["value"]),Kh,Zh,p(" "+d(s.offre.structure.libelleCourt)+" ",1),em,tm,p(" "+d(s.offre.typeMission.libelle),1)]),p(" "+d(a.shortDesc),1)]),e("div",nm,[e("div",sm,[e("a",{href:r.consulterUrl,class:"btn btn-primary",title:"Consulter "},[_(h,{name:"eye"}),p(" Voir ")],8,im)])])])])),this.extended?(i(),l("div",rm,[e("h1",am,d(s.offre.titre),1),this.utilisateur?m("",!0):(i(),l("div",lm,[om,e("div",um,[p(" Vous devez "),e("a",{href:a.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,dm),p(" pour pouvoir postuler. ")])])),!s.offre.canPostuler&&this.utilisateur?(i(),l("div",cm,_m)):m("",!0),a.isCandidat&&this.utilisateur?(i(),l("div",pm,bm)):m("",!0),e("p",gm,[ym,_(u,{value:s.offre.histoCreation},null,8,["value"]),p(" par "+d(s.offre.histoCreateur.displayName),1),xm,Cm,p("du "),_(u,{value:s.offre.dateDebut},null,8,["value"]),p(" au "),_(u,{value:s.offre.dateFin},null,8,["value"]),Vm,Sm,_(u,{value:s.offre.dateLimite},null,8,["value"]),km,Pm,p(" "+d(s.offre.structure.libelleCourt)+" ",1),Dm,Am,p(" "+d(s.offre.typeMission.libelle)+" ",1),Tm,Mm,p(" "+d(s.offre.nombreHeures)+" heure(s) ",1),Em,Um,p(" "+d(s.offre.nombrePostes)+" poste(s) ",1),Fm]),e("p",{innerHTML:this.descriptionHtml},null,8,Im),this.decretText?(i(),l("p",$m,[b(e("input",{id:"decret","onUpdate:modelValue":n[0]||(n[0]=c=>r.decret=c),name:"decret",type:"checkbox"},null,512),[[ee,r.decret]]),p("  "),e("span",{innerHTML:this.decretText},null,8,Rm)])):m("",!0),wm,this.canValiderCandidature?(i(),l("div",Hm,[jm,e("table",Lm,[e("thead",null,[e("tr",null,[Nm,Om,s.canValiderCandidature?(i(),l("th",qm,"Action")):m("",!0)])]),e("tbody",null,[s.offre.candidatures.length==0?(i(),l("tr",zm,[s.canValiderCandidature?(i(),l("td",Bm,"Aucune candidature")):m("",!0),s.canValiderCandidature?m("",!0):(i(),l("td",Jm,"Aucune candidature"))])):m("",!0),(i(!0),l(g,null,C(s.offre.candidatures,c=>(i(),l("tr",null,[e("td",null,[e("a",{href:a.urlVoir(c)},d(c.intervenant.prenom+" "+c.intervenant.nomUsuel),9,Gm)]),e("td",null,[c.validation?(i(),l("span",Ym,[p("Acceptée le "),_(u,{value:c.validation.histoCreation},null,8,["value"]),p(" par "+d(c.validation.histoCreateur.displayName),1)])):m("",!0),!c.validation&&c.motif!==null?(i(),l("span",Qm,d(c.motif),1)):m("",!0),!c.validation&&c.motif===null?(i(),l("span",Wm,"En attente d'acceptation")):m("",!0)]),this.canValiderCandidature?(i(),l("td",Xm,[e("a",{href:a.urlVoirCandidature(c),class:"btn btn-primary",title:"Consulter "},[_(h,{name:"eye"}),p(" Voir ")],8,Km)])):m("",!0)]))),256))])])])):m("",!0),e("div",Zm,[e("a",{href:r.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,e_),p("  "),this.canPostuler?(i(),l("a",{key:0,class:M([r.decret?"":"disabled","btn btn-primary"]),href:r.postulerUrl,"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,t_)):m("",!0),p("  "),s.offre.canModifier?(i(),l("a",{key:1,href:r.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:n[1]||(n[1]=A((...c)=>a.saisir&&a.saisir(...c),["prevent"]))},[_(h,{name:"pen-to-square"}),p(" Modifier ")],8,n_)):m("",!0),p("  "),s.offre.validation&&s.offre.canValider?(i(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:n[2]||(n[2]=A((...c)=>a.devalider&&a.devalider(...c),["prevent"]))},[_(h,{name:"thumbs-down"}),p(" Devalider ")],8,s_)):m("",!0),p("  "),!s.offre.validation&&s.offre.canValider?(i(),l("a",{key:3,href:r.validerUrl,class:"btn btn-success",title:"Valider",onClick:n[3]||(n[3]=A((...c)=>a.valider&&a.valider(...c),["prevent"]))},[_(h,{name:"thumbs-up"}),p(" Valider ")],8,i_)):m("",!0),p("  "),s.offre.canSupprimer?(i(),l("a",{key:4,href:r.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:n[4]||(n[4]=A((...c)=>a.supprimer&&a.supprimer(...c),["prevent"]))},[_(h,{name:"trash"}),p(" Supprimer ")],8,r_)):m("",!0)])])):m("",!0)],64)}const Ue=k(Lh,[["render",a_]]),l_=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"})),o_={components:{offreEmploi:Ue},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(t){modAjax(t.target,n=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(t){let n=Util.json.indexById(this.offres,t.id);this.offres[n]=t},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(t=>{this.offres=[t.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(t=>{this.offres=t.data})}}},u_={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},d_={key:1},c_=["href"],h_={key:2};function m_(t,n,s,v,r,a){const u=w("offreEmploi");return i(),l(g,null,[a.extended?m("",!0):(i(),l("div",u_,[(i(!0),l(g,null,C(r.offres,h=>(i(),H(u,{key:h.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:h,decretText:h.decretText,onRefresh:a.refresh,onSupprimer:a.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),a.extended?m("",!0):(i(),l("div",d_,[this.canModifier?(i(),l("a",{key:0,href:r.ajoutUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=A((...h)=>a.ajout&&a.ajout(...h),["prevent"]))},"Ajouter une nouvelle offre",8,c_)):m("",!0)])),a.extended?(i(),l("div",h_,[(i(!0),l(g,null,C(r.offres,h=>(i(),H(u,{key:h.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:h.decretText,extended:a.extended,offre:h,utilisateur:this.utilisateur,onRefresh:a.refresh,onSupprimer:a.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):m("",!0)],64)}const __=k(o_,[["render",m_]]),p_=Object.freeze(Object.defineProperty({__proto__:null,default:__},Symbol.toStringTag,{value:"Module"})),f_={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(t){popConfirm(t.target,n=>{this.$emit("reload")})},valider(t){popConfirm(t.target,n=>{this.$emit("reload")})},devalider(t){popConfirm(t.target,n=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(t=>{this.$emit("reload")})},modifierPrime(t){modAjax(t.currentTarget,n=>{this.$emit("reload")})},supprimerPrime(t){popConfirm(t.target,n=>{this.$emit("reload")})}}},v_={key:0},b_=e("br",null,null,-1),g_=e("u",null,"Mission(s) concernée(s)",-1),y_={key:0},x_=["action"],C_={class:"card-body"},V_={class:"row"},S_={key:0,class:"col-md-6"},k_={class:"card text-dark bg-light"},P_=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),D_={class:"card-body"},A_=e("p",{class:"card-text"},[p(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),p(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),p(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),T_=["disabled"],M_={class:"card-footer d-grid gap-2"},E_=["disabled"],U_={key:1,class:"col-md-6"},F_={class:"card text-dark bg-light"},I_=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),$_={class:"card-body"},R_=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),w_=["href"],H_={class:"card-footer",style:{"text-align":"right"}},j_=["href"],L_=["href"],N_=["href"],O_={class:"col-md-6"},q_={key:0},z_=["checked","disabled"],B_=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),J_=e("br",null,null,-1),G_=e("br",null,null,-1),Y_=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),Q_={key:0},W_={key:1},X_={key:2},K_={key:3},Z_={key:4},ep={key:5},tp={key:6},np={class:"row"},sp={class:"col-md-12"},ip={class:"float-end"},rp=["href"],ap=["href"];function lp(t,n,s,v,r,a){const u=W,h=B;return i(),l("div",{class:M([{"bg-success":s.prime.validation,"bg-default":!s.prime.validation&&!s.prime.dateRefus,"bg-danger":s.prime.dateRefus},"card"])},[e("div",{class:M([{"text-white":s.prime.dateRefus},"card-header card-header-h3"])},[s.prime.id?(i(),l("h5",v_,[p(" Indemnité de fin de contrat N°"+d(s.numero+1),1),b_])):m("",!0),e("div",null,[g_,p(" : "),(i(!0),l(g,null,C(s.prime.missions,(c,o)=>(i(),l("span",null,[p(d(c.typeMission.libelle)+" (Pour "+d(c.structure.libelleCourt)+" du ",1),_(u,{value:c.dateDebut},null,8,["value"]),p(" au "),_(u,{value:c.dateFin},null,8,["value"]),p(") "),o!=s.prime.missions.length-1?(i(),l("span",y_,", ")):m("",!0)]))),256))])],2),e("form",{action:r.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",C_,[e("div",V_,[s.prime.declaration?m("",!0):(i(),l("div",S_,[e("div",k_,[P_,e("div",D_,[A_,e("input",{ref:"file",disabled:!!s.prime.dateRefus,name:"files[]",type:"file"},null,8,T_)]),e("div",M_,[e("input",{disabled:!!s.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,E_)])])])),s.prime.declaration?(i(),l("div",U_,[e("div",F_,[I_,e("div",$_,[R_,e("a",{href:r.telechargerUrl},d(s.prime.declaration.nom),9,w_)]),e("div",H_,[s.prime.declaration&&!s.prime.validation&&!s.prime.dateRefus?(i(),l("a",{key:0,href:r.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:n[0]||(n[0]=A((...c)=>a.supprimer&&a.supprimer(...c),["prevent"]))}," Supprimer ",8,j_)):m("",!0),p("  "),s.prime.declaration&&!s.prime.validation&&this.canGerer&&!s.prime.dateRefus?(i(),l("a",{key:1,href:r.validerUrl,class:"btn btn-success",title:"Valider",onClick:n[1]||(n[1]=A((...c)=>a.valider&&a.valider(...c),["prevent"]))}," Valider ",8,L_)):m("",!0),p("  "),s.prime.declaration&&s.prime.validation&&this.canGerer&&!s.prime.dateRefus?(i(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:n[2]||(n[2]=A((...c)=>a.devalider&&a.devalider(...c),["prevent"]))}," Dévalider ",8,N_)):m("",!0),p("  ")])])])):m("",!0),e("div",O_,[s.prime.validation?m("",!0):(i(),l("div",q_,[e("input",{checked:s.prime.dateRefus,disabled:s.prime.validation,name:"prime",type:"checkbox",onChange:n[3]||(n[3]=(...c)=>a.refuser&&a.refuser(...c))},null,40,z_),p("  Ou en cochant cette case, "),B_,p(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),J_,G_])),e("div",null,[Y_,s.prime.dateRefus?(i(),l("div",Q_,[_(h,{name:"thumbs-down",variant:"danger"}),p(" Indemnité refusée le "),_(u,{value:s.prime.dateRefus},null,8,["value"])])):m("",!0),s.prime.declaration&&!s.prime.dateRefus?(i(),l("div",W_,[_(h,{name:"thumbs-up",variant:"success"}),p(" Déclaration déposée le "),_(u,{value:s.prime.declaration.histoCreation},null,8,["value"]),p(" par "+d(s.prime.declaration.histoCreateur.displayName),1)])):m("",!0),!s.prime.declaration&&!s.prime.dateRefus?(i(),l("div",X_,[_(h,{name:"thumbs-down",variant:"info"}),p(" Aucune déclaration déposée ")])):m("",!0),s.prime.validation&&!s.prime.dateRefus?(i(),l("div",K_,[_(h,{name:"thumbs-up",variant:"success"}),p(" Déclaration validée le "),_(u,{value:s.prime.validation.histoCreation},null,8,["value"]),p(" par "+d(s.prime.validation.histoCreateur.displayName),1)])):m("",!0),!s.prime.validation&&!s.prime.dateRefus?(i(),l("div",Z_,[_(h,{name:"thumbs-down",variant:"info"}),p(" Aucune déclaration validée ")])):m("",!0),s.prime.validation&&!s.prime.dateRefus?(i(),l("div",ep,[_(h,{name:"euro-sign",variant:"success"}),p(" Intervenant éligible à une indemnité de fin de contrat ")])):m("",!0),s.prime.dateRefus?(i(),l("div",tp,[_(h,{name:"euro-sign",variant:"info"}),p(" Intervenant non éligible à une indemnité de fin de contrat ")])):m("",!0)])])]),e("div",np,[e("div",sp,[e("span",ip,[!s.prime.validation&&!s.prime.dateRefus&&this.canGerer?(i(),l("a",{key:0,href:r.modifierPrimeUrl,class:"btn btn-primary",onClick:n[4]||(n[4]=A((...c)=>a.modifierPrime&&a.modifierPrime(...c),["prevent"]))},"Modifier",8,rp)):m("",!0),p("   "),!s.prime.validation&&!s.prime.dateRefus&&this.canGerer?(i(),l("a",{key:1,href:r.supprimerPrimeUrl,class:"btn btn-danger",onClick:n[5]||(n[5]=A((...c)=>a.supprimerPrime&&a.supprimerPrime(...c),["prevent"]))},"Supprimer",8,ap)):m("",!0)])])])])],8,x_)],2)}const Fe=k(f_,[["render",lp]]),op=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"})),up={components:{prime:Fe},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(t=>{this.primes=t.data,this.load=!0})}}},dp={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},cp=e("br",null,null,-1),hp=e("br",null,null,-1),mp={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},_p=e("br",null,null,-1),pp=e("br",null,null,-1),fp={key:2},vp=["href"];function bp(t,n,s,v,r,a){const u=w("prime");return i(),l(g,null,[(i(!0),l(g,null,C(r.primes,(h,c)=>(i(),H(u,{canGerer:s.canGerer,intervenant:this.intervenant,numero:c,prime:h,onReload:a.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),r.load?m("",!0):(i(),l("div",dp,[p(" Chargement en cours..."),cp,hp])),r.primes.length==0&&r.load?(i(),l("div",mp,[p(" Aucune indemnité de fin de contrat actuellement..."),_p,pp])):m("",!0),this.missionsWithoutPrime>0&&this.canGerer?(i(),l("div",fp,[e("a",{href:r.ajoutUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=A((...h)=>a.ajout&&a.ajout(...h),["prevent"]))},"Créer une nouvelle indemnité",8,vp)])):m("",!0)],64)}const gp=k(up,[["render",bp]]),yp=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"})),xp={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const t=new Date(this.date);return{mois:t.getMonth()+1,annee:t.getFullYear()}},computed:{listeJours(){const t=new Date(this.date);t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1);let n=t.getDate();return Array.from({length:n},(s,v)=>v+1)}},watch:{date:function(t,n){const s=new Date(this.date);this.mois=s.getMonth()+1,this.annee=s.getFullYear()},mois:function(t,n){const s=new Date(this.date);s.setMonth(t-1),this.$emit("changeDate",s)},annee:function(t,n){const s=new Date(this.date);s.setFullYear(t),this.$emit("changeDate",s)}},methods:{nomJour(t){const n=new Date(this.date);return n.setDate(t),n.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let t=[];const n=new Date(2e3,0,1);for(let s=1;s<=12;s++){n.setMonth(s-1);let v=n.toLocaleString("fr-FR",{month:"long"});t.push({id:s,libelle:v})}return t},listeAnnees(){const n=new Date().getFullYear(),s=1;let v=[];for(let r=n-s;r<=n+s;r++)v.push(r);return v},canAdd(t){if(!this.canAddEvent)return!1;let n=this.addDateDebut;n===void 0?n=new Date("2000-01-01"):n==="now"?n=new Date:n=new Date(n);let s=this.addDateFin;s===void 0?s=new Date("2500-01-01"):s==="now"?s=new Date:s=new Date(s);let v=new Date(this.date);return v.setDate(t),n=this.isoDateOnly(n),s=this.isoDateOnly(s),v=this.isoDateOnly(v),!(v<n||v>s)},addEvent(t){const n=new Date(this.date);n.setDate(t.currentTarget.dataset.jour),this.$emit("addEvent",n,t)},prevMois(){const t=new Date(this.date);t.setMonth(t.getMonth()-1),this.$emit("changeDate",t)},nextMois(){const t=new Date(this.date);t.setMonth(t.getMonth()+1),this.$emit("changeDate",t)},eventsByJour(t){const n=new Date(this.date);let s={};for(let v in this.events){let r=this.events[v];r.date.getFullYear()===n.getFullYear()&&r.date.getMonth()+1===n.getMonth()+1&&r.date.getDate()===t&&(s[v]=r)}return s},isoDateOnly(t){const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),v=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${v}`}}},Cp={class:"calendar"},Vp={class:"recherche"},Sp={class:"recherche btn-group"},kp=["value"],Pp=["value"],Dp={class:"table table-bordered table-hover table-sm"},Ap=["data-jour"],Tp={class:"nom-jour"},Mp={class:"numero-jour"},Ep={class:"num-jour badge bg-secondary rounded-circle"},Up={key:0},Fp=["data-jour"];function Ip(t,n,s,v,r,a){const u=B;return i(),l("div",Cp,[e("div",Vp,[e("div",Sp,[e("button",{class:"btn btn-light",id:"prevMois",onClick:n[0]||(n[0]=(...h)=>a.prevMois&&a.prevMois(...h)),title:"Mois précédant"},[_(u,{name:"chevron-left"})]),b(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":n[1]||(n[1]=h=>r.mois=h)},[(i(!0),l(g,null,C(a.listeMois(),h=>(i(),l("option",{value:h.id},d(h.libelle),9,kp))),256))],512),[[N,r.mois]]),b(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":n[2]||(n[2]=h=>r.annee=h)},[(i(!0),l(g,null,C(a.listeAnnees(),h=>(i(),l("option",{value:h},d(h),9,Pp))),256))],512),[[N,r.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:n[3]||(n[3]=(...h)=>a.nextMois&&a.nextMois(...h)),title:"Mois suivant"},[_(u,{name:"chevron-right"})])])]),e("table",Dp,[(i(!0),l(g,null,C(a.listeJours,h=>(i(),l("tr",{"data-jour":h},[e("th",Tp,d(a.nomJour(h)),1),e("th",Mp,[e("div",Ep,d(h<10?"0"+h.toString():h),1)]),e("td",null,[(i(!0),l(g,null,C(a.eventsByJour(h),(c,o)=>(i(),l("div",{class:"event",style:Ce("border-color:"+c.color+";background-color:"+c.bgcolor),key:o},[(i(),H(Ne(c.component),{event:c},null,8,["event"]))],4))),128)),a.canAdd(h)?(i(),l("div",Up,[e("button",{onClick:n[4]||(n[4]=(...c)=>a.addEvent&&a.addEvent(...c)),"data-jour":h,class:"btn btn-light btn-sm"},[_(u,{name:"plus"}),p(" Nouvel événement ")],8,Fp)])):m("",!0)])],8,Ap))),256))])])}const $p=k(xp,[["render",Ip],["__scopeId","data-v-b803dde7"]]),Rp={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(t){modAjax(t.currentTarget,n=>{this.suivi.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.suivi.refresh()})},valider(t){unicaenVue.axios.get(this.validerUrl).then(n=>{this.suivi.refresh()})},devalider(t){popConfirm(t.currentTarget,n=>{this.suivi.refresh()})}}},wp={class:"event-content"},Hp={class:"mission"},jp={key:0,class:"badge bg-success"},Lp={class:"horaires"},Np={key:0,class:"badge bg-secondary"},Op={key:0,class:"description"},qp={class:"event-actions"},zp={class:"btn-group btn-group-sm"},Bp=["data-url"],Jp=["data-url"],Gp=["data-url"],Yp=["data-url"];function Qp(t,n,s,v,r,a){const u=B;return i(),l(g,null,[e("div",wp,[e("p",Hp,[p(d(s.event.mission.libelleMission||s.event.mission.libelleCourt)+" ",1),s.event.valide?(i(),l("span",jp,"Validé")):m("",!0)]),e("p",Lp,[p(" de "+d(a.heureDebut)+" à "+d(a.heureFin)+", soit "+d(a.heures)+" heure"+d(a.heures<2?"":"s")+" ",1),s.event.formation?(i(),l("span",Np,"En formation")):m("",!0)]),s.event.description?(i(),l("p",Op,d(s.event.description),1)):m("",!0)]),e("div",qp,[e("div",zp,[s.event.canEdit?(i(),l("button",{key:0,class:"btn btn-light",onClick:n[0]||(n[0]=(...h)=>a.modifier&&a.modifier(...h)),title:"Modifier le suivi","data-url":r.modifierUrl},[_(u,{name:"pen-to-square"})],8,Bp)):m("",!0),s.event.canValider?(i(),l("button",{key:1,class:"btn btn-light",onClick:n[1]||(n[1]=(...h)=>a.valider&&a.valider(...h)),title:"Valider le suivi","data-url":r.validerUrl},[_(u,{name:"check",class:"text-success"})],8,Jp)):m("",!0),s.event.canDevalider?(i(),l("button",{key:2,class:"btn btn-light",onClick:n[2]||(n[2]=(...h)=>a.devalider&&a.devalider(...h)),title:"Dévalider le suivi","data-url":r.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[_(u,{name:"xmark",class:"text-danger"})],8,Gp)):m("",!0),s.event.canSupprimer?(i(),l("button",{key:3,class:"btn btn-light",onClick:n[3]||(n[3]=(...h)=>a.supprimer&&a.supprimer(...h)),title:"Supprimer le suivi","data-url":r.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[_(u,{name:"trash-can",class:"text-danger"})],8,Yp)):m("",!0)])])],64)}const Ie=k(Rp,[["render",Qp],["__scopeId","data-v-e888b6fc"]]),Wp=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"})),Xp={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(t){this.date=t},ajouter(t,n){const s={intervenant:this.intervenant,date:t.toISOString().slice(0,10)};n.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",s),modAjax(n.currentTarget,v=>{this.refresh()})},refresh(){const t=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let n=0,s=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(v=>{let r=[];for(let a in v.data){let u=v.data[a];s[u.mission.id]===void 0&&(s[u.mission.id]=t[n],n++),u.valide&&(u.bgcolor="#d0eddb"),u.color=s[u.mission.id],u.component=Oe(Ie),u.date=new Date(u.date),u.intervenant=this.intervenant,r.push(u)}this.suivi=r,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function Kp(t,n,s,v,r,a){const u=$p;return i(),H(u,{date:r.date,onChangeDate:a.changeDate,onAddEvent:a.ajouter,"can-add-event":s.canAddMission,addDateFin:"now",events:r.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const Zp=k(Xp,[["render",Kp]]),ef=Object.freeze(Object.defineProperty({__proto__:null,default:Zp},Symbol.toStringTag,{value:"Module"})),tf={name:"DemandeMiseEnPaiementStructure",props:{datas:{required:!0},intervenant:{required:!0}},computed:{datasBudget(){let t={};return Object.entries(this.datas.budget.dotation).forEach(([n,s])=>{n!="total"&&(t[n]={},t[n].libelle=s.libelle,t[n].dotation=s.heures,t[n].consommation=1001)}),Object.entries(this.datas.budget.consommation).forEach(([n,s])=>{n!="total"&&n in t&&(t[n].consommation=s.heures)}),t}},methods:{heuresStatutToString(t){if(t.heuresAPayer==t.heuresPayees&&t.heuresAPayer>0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-success">Paiement effectué</span>';if(t.heuresAPayer==t.heuresDemandees)return'<span style="font-size:12px;line-height:20px;" class="badge bg-secondary text-dark">Paiement demandé</span>';if(t.heuresDemandees==0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-light text-dark">A payer</span>';if(Number(t.heuresPayees)>Number(t.heuresAPayer)){let n=t.heuresPayees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement effectué - '+parseFloat(n.toFixed(2))+" hetd(s) payées en trop. </span>"}if(Number(t.heuresDemandees)>Number(t.heuresAPayer)){let n=t.heuresDemandees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement demandé - '+parseFloat(n.toFixed(2))+" hetd(s) demandées en trop. </span></span>"}return"indetermine"},supprimerDemandeMiseEnPaiement(t){this.btnState("remove-"+t,"disabled"),unicaenVue.axios.get(unicaenVue.url("paiement/:intervenant/supprimer-demande/:dmep",{intervenant:this.intervenant,dmep:t})).then(n=>{this.$emit("refresh")}).catch(n=>{this.$emit("refresh")})},disabledPaiement(t){return t.missionId!=""||t.formuleResServiceRefId!=""?!(t.centreCoutId&&t.domaineFonctionnel):!1},enabledPaiement(t,n){if(n=="mission"){let s=document.getElementById("add-"+t),v=document.getElementById("centreCout-"+t).value,r=document.getElementById("domaineFonctionnel-"+t).value;v!=""&&r!=""?s.disabled=!1:s.disabled=!0}},ajouterDemandeMiseEnPaiement(t){this.btnState("add-"+t,"disabled");let n={animation:!0,delay:15e3,autohide:!0},s=document.getElementById("heures-"+t),v=document.getElementById("centreCout-"+t),r=document.getElementById("domaineFonctionnel-"+t),a=Number(s.value),u=Number(s.getAttribute("max")),h=r?r.value:"",c=s.hasAttribute("data-type-heures-id")?s.getAttribute("data-type-heures-id"):"",o=s.hasAttribute("data-service-id")?s.getAttribute("data-service-id"):"",x=s.hasAttribute("data-service-referentiel-id")?s.getAttribute("data-service-referentiel-id"):"",f=s.hasAttribute("data-mission-id")?s.getAttribute("data-mission-id"):"",P=v.value;if(P=="")return unicaenVue.flashMessenger.toast("Vous devez sélectionner un centre de coût pour demander la mise en paiement de ces heures","error",n),this.$emit("refresh-btn-state"),!1;if(a>0&&a>u)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible, vous demandez "+a+" hetd(s) alors que vous pouvez demander maximum "+u+" hetd(s)","error",n),this.$emit("refresh-btn-state"),!1;var S=[];let I={heures:a,centreCoutId:P,typeHeuresId:c,serviceId:o,serviceReferentielId:x,domaineFonctionnelId:h,missionId:f,structureId:this.datas.id};S.push(I),unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),S).then(F=>{this.$emit("refresh")}).catch(F=>{this.$emit("refresh"),console.error(F)})},demanderToutesLesHeuresEnPaiement(t,n){this.btnState("add-all-"+t,"disabled");let s=[],r=document.getElementById("demande-mise-en-paiement-"+t).getElementsByTagName("tr");for(var a=0;a<r.length;a++)if(r[a].getElementsByTagName("input").length>0&&r[a].classList.contains("detailHeure")){let u=r[a].getElementsByTagName("input")[0],h=r[a].getElementsByTagName("select")[0],c=r[a].getElementsByTagName("select")[1],o=Number(u.value),x=Number(u.getAttribute("max"));if(o<=0||o>x)console.warn("Le nombre d'heures demandées en paiement n'est pas situé entre le max et min possible.");else{let f=h.value,P=u.hasAttribute("data-type-heures-id")?u.getAttribute("data-type-heures-id"):"",S=u.hasAttribute("data-mission-id")?u.getAttribute("data-mission-id"):"",I=u.hasAttribute("data-service-id")?u.getAttribute("data-service-id"):"",F=u.hasAttribute("data-service-referentiel-id")?u.getAttribute("data-service-referentiel-id"):"",D=c?c.value:"",T={heures:o,centreCoutId:f,typeHeuresId:P,serviceId:I,serviceReferentielId:F,domaineFonctionnelId:D,missionId:S,structureId:this.datas.id};s.push(T)}}unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),s).then(u=>{this.$emit("refresh")}).catch(u=>{this.$emit("refresh")})},filtrerCentresCouts(t,n){let s=[];for(var v in t){let r=v,a=[];t[v].forEach(function(u,h){u[n]==1&&a.push(u)}),a.length!=0&&s.push({group:r,child:a})}return s},notValueCentreCoutValue(t,n){return this.filtrerCentresCouts(t,n).length!=0?"Choisir un centre de coûts":"Aucun centre de coûts disponible: demande de paiement impossible"},totalHeure(t){let n=0;for(var s in t)n+=Number(t[s].heuresAPayer);return parseFloat(n.toFixed(2))},shorten(t,n=20){if(t===null)return t;if(t.length>n){var s='<span title="'+t+'"';return s+='data-bs-placement="top" data-bs-toggle="tooltip">',s+=t.substring(0,n)+"...",s+="</span>",s}else return t},btnState(t,n){let s=document.getElementById(t);return s?(n=="enabled"&&(s.disabled=!1,s.querySelector("#waiting").style.display="none",s.querySelector("#action").style.display="inline-block"),n=="disabled"&&(s.disabled=!0,s.querySelector("#waiting").style.display="inline-block",s.querySelector("#action").style.display="none"),!0):!1},formatDate(t,n){return Util.dateToString(t)},pourcentageBudget(t){return Math.round(t.consommation/t.dotation*100)},bgBudget(t){return Math.round(t.consommation/t.dotation*100)>100?"bg-danger":"bg-success"}}},nf=["id"],sf=["id"],rf=["aria-controls","data-bs-target"],af=["id","aria-labelledby"],lf={class:"accordion-body"},of={key:0},uf=e("div",{class:"cartridge gray bordered",style:{"padding-bottom":"5px","margin-bottom":"20px"}},[e("span",null,"Budget")],-1),df={class:"container"},cf={class:"table table-bordered caption-top",style:{"table-layout":"fixed",width:"100%"}},hf={class:"table-light"},mf={key:0,class:"text-center progress position-relative bg-secondary",style:{height:"30px"}},_f={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},pf=["aria-valuemax","aria-valuenow","title"],ff={key:1,class:"text-center"},vf={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},bf=e("span",null,"Enseignement",-1),gf=["innerHTML"],yf={class:"container"},xf={class:"row"},Cf={class:"col-12"},Vf={class:"table mt-3 table-bordered"},Sf={class:"table-light"},kf={colspan:"2"},Pf={colspan:"2"},Df={class:"table table-sm"},Af=e("thead",null,[e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"40%","font-size":"12px"}},"Centre de coûts "),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),Tf={class:"detailHeure"},Mf={key:0,style:{width:"20%"}},Ef=["title"],Uf={class:"number number-positif"},Ff=["title"],If={class:"number number-positif"},$f={key:1,style:{width:"20%"}},Rf={class:"input-group col-1"},wf=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],Hf=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),jf={key:2},Lf=["id"],Nf={value:""},Of=["label"],qf=["selected","value"],zf=["innerHTML"],Bf=["innerHTML"],Jf={style:{"font-size":"12px"}},Gf={key:0},Yf=["id","onClick"],Qf={key:1},Wf=["id","onClick"],Xf={class:"table-light"},Kf=e("th",{scope:"row"},"Total heures à payer",-1),Zf={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},ev=e("span",null,"Référentiel",-1),tv={class:"container"},nv={class:"row"},sv={class:"col-12"},iv={class:"table mt-3 table-bordered"},rv={colspan:"2"},av={class:"table table-sm"},lv=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),ov={class:"detailHeure"},uv={key:0,style:{width:"20%"}},dv=["title"],cv={class:"number number-positif"},hv=["title"],mv={class:"number number-positif"},_v={key:1,style:{width:"20%"}},pv={class:"input-group col-1"},fv=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],vv=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),bv={key:2},gv=["id"],yv={value:""},xv=["label"],Cv=["selected","value"],Vv=["innerHTML"],Sv={key:4},kv=["id"],Pv=e("option",{value:""},"Aucun domaine fonctionnel",-1),Dv=["selected","value"],Av={key:5},Tv=["innerHTML"],Mv={style:{"font-size":"12px"}},Ev={key:0},Uv=["id","onClick"],Fv={key:1},Iv=["id","onClick"],$v={class:"table-light"},Rv=e("th",{scope:"row"},"Total",-1),wv={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},Hv=e("span",null,"Mission",-1),jv={class:"container"},Lv={class:"row"},Nv={class:"col-12"},Ov={class:"table mt-3 table-bordered"},qv={colspan:"2"},zv={class:"table table-sm"},Bv=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),Jv={class:"detailHeure"},Gv={key:0,style:{width:"20%"}},Yv=["title"],Qv={class:"number number-positif"},Wv=["title"],Xv={class:"number number-positif"},Kv={key:1,style:{width:"20%"}},Zv={class:"input-group col-1"},eb=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],tb=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"heure(s)",-1),nb={key:2},sb=["id","onChange"],ib={value:""},rb=["label"],ab=["selected","value"],lb=["innerHTML"],ob={key:4},ub=["id","onChange"],db=e("option",{value:""},"Aucun domaine fonctionnel",-1),cb=["selected","value"],hb={key:5},mb=["innerHTML"],_b={style:{"font-size":"12px"}},pb={key:0},fb=["id","onClick"],vb={key:1},bb=["id","onClick"],gb={class:"table-light"},yb=e("th",{scope:"row"},"Total",-1),xb={style:{"background-color":"#fbfbfb",padding:"10px","padding-right":"40px","text-align":"right"}},Cb=["id"];function Vb(t,n,s,v,r,a){const u=B;return i(),l("div",{id:"demande-mise-en-paiement-"+s.datas.code,class:"accordion-item"},[e("h2",{id:"dmep-heading-"+s.datas.code,class:"accordion-header"},[e("button",{"aria-controls":"dmep-collapse-"+s.datas.code,"data-bs-target":"#dmep-collapse-"+s.datas.code,"aria-expanded":"true",class:"accordion-button bg-light","data-bs-toggle":"collapse",type:"button"},d(s.datas.code+" - "+s.datas.libelle),9,rf)],8,sf),e("div",{id:"dmep-collapse-"+s.datas.code,"aria-labelledby":"dmep-heading-"+s.datas.code,class:"accordion-collapse collapse show"},[e("div",lf,[this.datas.budget.dotation.total>0?(i(),l("div",of,[uf,e("div",df,[e("table",cf,[e("thead",hf,[e("tr",null,[(i(!0),l(g,null,C(a.datasBudget,(h,c)=>(i(),l("th",{key:c,class:"fw-bold",scope:"col"},d(h.libelle),1))),128))])]),e("tbody",null,[e("tr",null,[(i(!0),l(g,null,C(a.datasBudget,(h,c)=>(i(),l("td",null,[h.dotation>0?(i(),l("div",mf,[e("span",_f,d(h.consommation+" sur "+h.dotation)+" HETD",1),e("div",{"aria-valuemax":h.dotation,"aria-valuenow":h.consommation,class:M("progress-bar progress-bar-striped "+a.bgBudget(h)),style:Ce("width:"+a.pourcentageBudget(h)+"%;"),title:this.pourcentageBudget(h)+"%","aria-valuemin":"0",role:"progressbar"},null,14,pf)])):m("",!0),h.dotation==0?(i(),l("div",ff," Aucune dotation "+d(h.libelle),1)):m("",!0)]))),256))])])])])])):m("",!0),(i(!0),l(g,null,C(s.datas.etapes,(h,c)=>(i(),l("div",null,[(i(!0),l(g,null,C(h.enseignements,(o,x)=>(i(),l("div",null,[e("div",vf,[bf,e("span",{innerHTML:c+" - "+a.shorten(h.libelle,40)},null,8,gf),e("span",null,d(x+" - "+o.libelle),1)]),e("div",yf,[e("div",xf,[(i(!0),l(g,null,C(o.typeHeure,(f,P)=>(i(),l("div",Cf,[e("table",Vf,[e("thead",Sf,[e("tr",null,[e("th",kf,d(f.libelle),1)])]),e("tbody",null,[e("tr",null,[e("td",Pf,[e("table",Df,[Af,e("tbody",null,[(i(!0),l(g,null,C(f.heures,(S,I)=>(i(),l("tr",Tf,[S.heuresDemandees!=0?(i(),l("td",Mf,[S.datePaiement?(i(),l("abbr",{key:0,title:"Payé en "+S.periodeLibelle+" le "+a.formatDate(S.datePaiement)},[e("span",Uf,d(Number(S.heuresPayees))+" hetd(s)",1)],8,Ef)):m("",!0),S.datePaiement?m("",!0):(i(),l("abbr",{key:1,title:"Demandé le "+a.formatDate(S.dateDemande)},[e("span",If,d(Number(S.heuresDemandees))+" hetd(s)",1)],8,Ff))])):m("",!0),S.heuresDemandees==0?(i(),l("td",$f,[e("div",Rf,[e("input",{id:"heures-"+c+"-"+x+"-"+P,"data-domaine-fonctionnel-id":S.domaineFonctionnelId,"data-mission-id":S.missionId,"data-service-id":S.serviceId,"data-service-referentiel-id":S.serviceReferentielId,"data-type-heures-id":S.typeHeureId,max:S.heuresAPayer,value:S.heuresAPayer,class:"form-control form-control-sm",min:"0",type:"number"},null,8,wf),Hf])])):m("",!0),S.heuresDemandees==0?(i(),l("td",jf,[e("select",{id:"centreCout-"+c+"-"+x+"-"+P,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",Nf,d(a.notValueCentreCoutValue(s.datas.centreCoutPaiement,S.typeHeureCode)),1),(i(!0),l(g,null,C(a.filtrerCentresCouts(s.datas.centreCoutPaiement,S.typeHeureCode),F=>(i(),l("optgroup",{key:F.group,label:F.group},[(i(!0),l(g,null,C(F.child,D=>(i(),l("option",{key:D.value,selected:D.centreCoutId==S.centreCout.centreCoutId,value:D.centreCoutId},d(D.centreCoutCode+" - "+D.centreCoutLibelle),9,qf))),128))],8,Of))),128))],8,Lf)])):m("",!0),S.heuresDemandees!=0?(i(),l("td",{key:3,innerHTML:a.shorten(S.centreCout.code+" - "+S.centreCout.libelle,30)},null,8,zf)):m("",!0),e("td",{innerHTML:a.heuresStatutToString(S)},null,8,Bf),e("td",Jf,[S.heuresPayees==0&&S.heuresDemandees>0?(i(),l("span",Gf,[e("button",{id:"remove-"+S.mepId,class:"btn btn-danger",type:"button",onClick:F=>this.supprimerDemandeMiseEnPaiement(S.mepId)},[_(u,{id:"action",name:"trash",style:{color:"white"}}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Yf)])):m("",!0),S.heuresDemandees==0?(i(),l("span",Qf,[e("button",{id:"add-"+c+"-"+x+"-"+P,class:"btn btn-primary",type:"button",onClick:F=>this.ajouterDemandeMiseEnPaiement(c+"-"+x+"-"+P)},[_(u,{id:"action",name:"plus"}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Wf)])):m("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",Xf,[Kf,e("td",null,d(a.totalHeure(f.heures))+" hetd(s)",1)])])])]))),256))])])]))),256))]))),256)),(i(!0),l(g,null,C(s.datas.fonctionsReferentiels,(h,c)=>(i(),l("div",null,[e("div",Zf,[ev,e("span",null,d(c+" - "+h.libelle),1)]),e("div",tv,[e("div",nv,[e("div",sv,[e("table",iv,[e("tbody",null,[e("tr",null,[e("td",rv,[e("table",av,[lv,e("tbody",null,[(i(!0),l(g,null,C(h.heures,(o,x)=>(i(),l("tr",ov,[o.heuresDemandees!=0?(i(),l("td",uv,[o.datePaiement?(i(),l("abbr",{key:0,title:"Payé en "+o.periodeLibelle+" le "+a.formatDate(o.datePaiement)},[e("span",cv,d(Number(o.heuresPayees))+" hetd(s)",1)],8,dv)):m("",!0),o.datePaiement?m("",!0):(i(),l("abbr",{key:1,title:"Demandé le "+a.formatDate(o.dateDemande)},[e("span",mv,d(Number(o.heuresDemandees))+" hetd(s)",1)],8,hv))])):m("",!0),o.heuresDemandees==0?(i(),l("td",_v,[e("div",pv,[e("input",{id:"heures-"+c,"data-domaine-fonctionnel-id":o.domaineFonctionnelId,"data-mission-id":o.missionId,"data-service-id":o.serviceId,"data-service-referentiel-id":o.serviceReferentielId,"data-type-heures-id":o.typeHeureId,max:o.heuresAPayer,value:o.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,fv),vv])])):m("",!0),o.heuresDemandees==0?(i(),l("td",bv,[e("select",{id:"centreCout-"+c,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",yv,d(a.notValueCentreCoutValue(s.datas.centreCoutPaiement,o.typeHeureCode)),1),(i(!0),l(g,null,C(a.filtrerCentresCouts(s.datas.centreCoutPaiement,"referentiel"),f=>(i(),l("optgroup",{key:f.group,label:f.group},[(i(!0),l(g,null,C(f.child,P=>(i(),l("option",{key:P.value,selected:P.centreCoutId==o.centreCout.centreCoutId,value:P.centreCoutId},d(P.centreCoutCode+" - "+P.centreCoutLibelle),9,Cv))),128))],8,xv))),128))],8,gv)])):m("",!0),o.heuresDemandees!=0?(i(),l("td",{key:3,innerHTML:a.shorten(o.centreCout.code+" - "+o.centreCout.libelle,20)},null,8,Vv)):m("",!0),o.heuresDemandees==0?(i(),l("td",Sv,[e("select",{id:"domaineFonctionnel-"+c,class:"selectpicker","data-live-search":"true",name:"centreCout"},[Pv,(i(!0),l(g,null,C(s.datas.domaineFonctionnelPaiement,f=>(i(),l("option",{selected:f.domaineFonctionnelId==o.domaineFonctionnel.domaineFonctionnelId,value:f.domaineFonctionnelId},d(f.domaineFonctionnelLibelle),9,Dv))),256))],8,kv)])):m("",!0),o.heuresDemandees!=0?(i(),l("td",Av,d(o.domaineFonctionnel.libelle),1)):m("",!0),e("td",{innerHTML:a.heuresStatutToString(o)},null,8,Tv),e("td",Mv,[o.heuresPayees==0&&o.heuresDemandees>0?(i(),l("span",Ev,[e("button",{id:"remove-"+o.mepId,class:"btn btn-danger",type:"button",onClick:f=>this.supprimerDemandeMiseEnPaiement(o.mepId)},[_(u,{id:"action",name:"trash",style:{color:"white"}}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Uv)])):m("",!0),o.heuresDemandees==0?(i(),l("span",Fv,[e("button",{id:"add-"+c,class:"btn btn-primary",type:"button",onClick:f=>this.ajouterDemandeMiseEnPaiement(c)},[_(u,{id:"action",name:"plus"}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Iv)])):m("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",$v,[Rv,e("td",null,d(a.totalHeure(h.heures))+" hetd(s)",1)])])])])])])]))),256)),(i(!0),l(g,null,C(s.datas.missions,h=>(i(),l("div",null,[e("div",wv,[Hv,e("span",null,d(h.libelle),1)]),e("div",jv,[e("div",Lv,[e("div",Nv,[e("table",Ov,[e("tbody",null,[e("tr",null,[e("td",qv,[e("table",zv,[Bv,e("tbody",null,[(i(!0),l(g,null,C(h.heures,(c,o)=>(i(),l("tr",Jv,[c.heuresDemandees!=0?(i(),l("td",Gv,[c.datePaiement?(i(),l("abbr",{key:0,title:"Payé en "+c.periodeLibelle+" le "+a.formatDate(c.datePaiement)},[e("span",Qv,d(Number(c.heuresPayees))+" heure(s)",1)],8,Yv)):m("",!0),c.datePaiement?m("",!0):(i(),l("abbr",{key:1,title:"Demandé le "+a.formatDate(c.dateDemande)},[e("span",Xv,d(Number(c.heuresDemandees))+" heure(s)",1)],8,Wv))])):m("",!0),c.heuresDemandees==0?(i(),l("td",Kv,[e("div",Zv,[e("input",{id:"heures-"+h.missionId,"data-domaine-fonctionnel-id":c.domaineFonctionnelId,"data-mission-id":c.missionId,"data-service-id":c.serviceId,"data-service-referentiel-id":c.serviceReferentielId,"data-type-heures-id":c.typeHeureId,max:c.heuresAPayer,value:c.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,eb),tb])])):m("",!0),c.heuresDemandees==0?(i(),l("td",nb,[e("select",{id:"centreCout-"+h.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:x=>a.enabledPaiement(h.missionId,"mission")},[e("option",ib,d(a.notValueCentreCoutValue(s.datas.centreCoutPaiement,c.typeHeureCode)),1),(i(!0),l(g,null,C(a.filtrerCentresCouts(s.datas.centreCoutPaiement,"mission"),x=>(i(),l("optgroup",{key:x.group,label:x.group},[(i(!0),l(g,null,C(x.child,f=>(i(),l("option",{key:f.value,selected:f.centreCoutId==c.centreCout.centreCoutId,value:f.centreCoutId},d(f.centreCoutCode+" - "+f.centreCoutLibelle),9,ab))),128))],8,rb))),128))],40,sb)])):m("",!0),c.heuresDemandees!=0?(i(),l("td",{key:3,innerHTML:a.shorten(c.centreCout.code+" - "+c.centreCout.libelle,20)},null,8,lb)):m("",!0),c.heuresDemandees==0?(i(),l("td",ob,[e("select",{id:"domaineFonctionnel-"+h.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:x=>a.enabledPaiement(h.missionId,"mission")},[db,(i(!0),l(g,null,C(s.datas.domaineFonctionnelPaiement,x=>(i(),l("option",{selected:x.domaineFonctionnelId==c.domaineFonctionnel.domaineFonctionnelId,value:x.domaineFonctionnelId},d(x.domaineFonctionnelLibelle),9,cb))),256))],40,ub)])):m("",!0),c.heuresDemandees!=0?(i(),l("td",hb,d(c.domaineFonctionnel.libelle),1)):m("",!0),e("td",{innerHTML:a.heuresStatutToString(c)},null,8,mb),e("td",_b,[c.heuresPayees==0&&c.heuresDemandees>0?(i(),l("span",pb,[e("button",{id:"remove-"+c.mepId,class:"btn btn-danger",type:"button",onClick:x=>this.supprimerDemandeMiseEnPaiement(c.mepId)},[_(u,{id:"action",name:"trash",style:{color:"white"}}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,fb)])):m("",!0),c.heuresDemandees==0?(i(),l("span",vb,[e("button",{id:"add-"+h.missionId,class:"btn btn-primary",type:"button",onClick:x=>this.ajouterDemandeMiseEnPaiement(h.missionId)},[_(u,{id:"action",name:"plus"}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,bb)])):m("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",gb,[yb,e("td",null,d(a.totalHeure(h.heures))+" heure(s)",1)])])])])])])]))),256))]),e("div",xb,[e("button",{id:"add-all-"+s.datas.code,class:"btn btn-primary",type:"button",onClick:n[0]||(n[0]=h=>a.demanderToutesLesHeuresEnPaiement(s.datas.code,s.datas.libelle))},[_(u,{id:"action",name:"square-plus",style:{color:"white"}}),_(u,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}}),p(" DEMANDER TOUS LES PAIEMENTS POUR "+d(s.datas.libelleCourt),1)],8,Cb)])],8,af)],8,nf)}const $e=k(tf,[["render",Vb]]),Sb=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"})),kb={name:"DemandeMiseEnPaiement",components:{DemandeMiseEnPaiementStructure:$e},props:{intervenant:{required:!1},intervenantStructure:{required:!1}},data(){return{datasDemandesMiseEnPaiement:null,urlGetDemandesMiseEnPaiement:unicaenVue.url("intervenant/:intervenant/mise-en-paiement/get-demandes-mise-en-paiement",{intervenant:this.intervenant})}},methods:{getDemandesMiseEnPaiement(){unicaenVue.axios.get(this.urlGetDemandesMiseEnPaiement).then(t=>{this.datasDemandesMiseEnPaiement=t.data}).then(t=>{this.btnResetState()}).catch(t=>{this.btnResetState(),console.error(t)})},btnResetState(){Array.from(document.querySelectorAll('[id^="remove-"]')).forEach(v=>{v.disabled=!1,v.querySelector("#waiting").style.display="none",v.querySelector("#action").style.display="inline-block"}),Array.from(document.querySelectorAll('[id^="add-"]')).forEach(v=>{v.disabled=!1,v.querySelector("#waiting").style.display="none",v.querySelector("#action").style.display="inline-block"}),Array.from(document.querySelectorAll('[id^="add-all"]')).forEach(v=>{v.disabled=!1,v.querySelector("#waiting").style.display="none",v.querySelector("#action").style.display="inline-block"})}},computed:{haveDemandeMiseEnPaiement:function(){return this.datasDemandesMiseEnPaiement?Object.keys(this.datasDemandesMiseEnPaiement).length>0:!1}},mounted(){this.getDemandesMiseEnPaiement()},updated(){$(".selectpicker").selectpicker("render");var t=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));t.map(function(n){return new bootstrap.Tooltip(n)})}},Pb={key:0,class:"text-center"},Db=e("div",{class:"mt-5 spinner-border spinner-border-sm",role:"status"},[e("span",{class:"visually-hidden"},"Chargement des demandes de mise en paiement en cours...")],-1),Ab={key:1,id:"accordionPanelsStayOpenExample",class:"accordion"},Tb={key:2,class:"text-center alert alert-secondary",role:"alert"};function Mb(t,n,s,v,r,a){const u=w("demande-mise-en-paiement-structure");return i(),l(g,null,[this.datasDemandesMiseEnPaiement?m("",!0):(i(),l("div",Pb,[Db,p(" Chargement des demandes de mise en paiement en cours... ")])),this.datasDemandesMiseEnPaiement?(i(),l("div",Ab,[(i(!0),l(g,null,C(r.datasDemandesMiseEnPaiement,(h,c)=>(i(),H(u,{onRefreshBtnState:a.btnResetState,datas:h,intervenant:s.intervenant,onRefresh:a.getDemandesMiseEnPaiement},null,8,["onRefreshBtnState","datas","intervenant","onRefresh"]))),256))])):m("",!0),!a.haveDemandeMiseEnPaiement&&this.datasDemandesMiseEnPaiement?(i(),l("div",Tb," Les demandes de mises en paiement sont effectuées par la composante : "+d(this.intervenantStructure),1)):m("",!0)],64)}const Eb=k(kb,[["render",Mb]]),Ub=Object.freeze(Object.defineProperty({__proto__:null,default:Eb},Symbol.toStringTag,{value:"Module"}));function Fb(t){for(let n in t)for(let s in t[n])Re(t[n][s],n)}function Ib(){let t=document.getElementById("unicaen-vue-toast-container");return t||(t=document.createElement("div"),t.id="unicaen-vue-toast-container",t.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(t)),t}function $b(t){return t=Rb(t),t=wb(t),t}function Rb(t){const n=document.createElement("div");n.innerHTML=t;const s=n.querySelector(".alert");return s?s.innerHTML:n.innerHTML}function wb(t){const n=document.createElement("div");return n.innerHTML=t,n.querySelectorAll("i.fas").forEach(v=>v.style.display="none"),n.innerHTML}function Re(t,n,s=null){const v={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},r={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},a=document.createElement("button");a.classList.add("btn-close","btn-close-white","h5"),a.style.float="right",a.setAttribute("data-bs-dismiss","toast"),a.setAttribute("aria-label","Close");const u=document.createElement("i");u.classList.add("icon","fas",`fa-${r[n]}`),u.style.float="left",u.style.fontSize="26pt",u.style.paddingLeft=".4rem",u.style.marginTop=".4rem",u.style.paddingRight="1rem";const h=document.createElement("div");h.classList.add("toast-body"),h.innerHTML=$b(t);const c=document.createElement("div");c.appendChild(a),c.appendChild(u),c.appendChild(h);const o=document.createElement("div");o.classList.add("toast","text-white",v[n]?v[n]:"bg-secondary"),o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),n==="error"&&t.length>500&&o.setAttribute("style","width:700px"),o.appendChild(c),Ib().appendChild(o),s==null&&(s={animation:!0,delay:n==="warning"?15e3:5e3,autohide:n!=="error"}),new bootstrap.Toast(o,s).show()}const re={toast:Re,toasts:Fb};let ne={...qe};ne.interceptors.request.use(t=>{if(t.submitter){let n=t.msg?t.msg:"Action en cours";t.popover!=null&&t.popover.dispose(),t.popover=new bootstrap.Popover(t.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+n,html:!0,trigger:"focus"}),t.popover.show()}return t});ne.interceptors.response.use(t=>{if(t.messages=t.data.messages,t.data=t.data.data,t.hasErrors=!!(t.messages&&t.messages.error&&t.messages.error.length>0),t.config.popover){var n=t.config.popover;let s="";for(ns in t.messages)for(mid in t.messages[ns])s+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+t.messages[ns][mid]+"</div>";s?(n._config.content=s,n.setContent(),setTimeout(()=>{n.dispose()},5e3)):n.dispose()}return t.messages&&re.toasts(t.messages),t},t=>{let n=t.response.data;t.response.status==403?n="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":n=t.response.data,re.toast(n,"error")});ne.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Hb={uvAxios:ne},ae={axios:Hb.uvAxios,flashMessenger:re,url:(t,n,s)=>{let v=window.__unicaenVueBaseUrl;if(console.log(n),n)for(let a in n)t=t.replace(`:${a}`,n[a]);let r=s?ae.encodeUrlQueryParam(s):null;return v+t+(r?`?${r}`:"")},encodeUrlQueryParam:(t,n)=>{var s=[];for(var v in t)if(t.hasOwnProperty(v)){var r=t[v],a=n?n+"["+encodeURIComponent(v)+"]":encodeURIComponent(v);if(typeof r=="object"&&r!==null)s.push(ae.encodeUrlQueryParam(r,a));else{var u=encodeURIComponent(r);s.push(a+"="+u)}}return s.join("&")}};window.unicaenVue=ae;const jb={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{type:Array,required:!0},canMiseEnPaiement:{type:Boolean,required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),urlMiseEnPaiement:unicaenVue.url("paiement/etat-demande-paiement"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:!1,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(t){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let n=document.getElementById("formRechercheDemandeMiseEnPaiement"),s=new FormData(n),v=document.getElementById("btn-rdmep"),r=document.getElementById("btn-rdmep-inprogress");r.classList.remove("d-none"),v.classList.add("d-none"),v.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,s,{}).then(a=>{this.dispatchDatas(a.data),v.disabled=!1,r.classList.add("d-none"),v.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(h,c){h.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(h=>{let c=h.data;this.dotation=c.dotation,this.liquidation=c.liquidation,this.refreshTotalConsommation()})}).catch(a=>{console.error(a)})},processDemandeMiseEnPaiement(t){let n=document.getElementById("formProcessDemandeMiseEnPaiement"),s=new FormData(n);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>=this.totalConsommationRessourcePropre||!this.haveDotation){let v=document.getElementById("btn-pdmep"),r=document.getElementById("btn-pdmep-inprogress");r.classList.remove("d-none"),v.classList.add("d-none"),v.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,s,{}).then(a=>{this.findDemandeMiseEnPaiement(),v.disabled=!1,r.classList.add("d-none"),v.classList.remove("d-none")}).catch(a=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let t=0,n=0,s=0;t=parseFloat(this.liquidation.paieEtat),n=parseFloat(this.liquidation.ressourcePropre),s+=parseFloat(this.liquidation.ressourcePropre),s+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(r,a){r.hasAttribute("data-paie-etat")&&r.checked&&(t+=parseFloat(r.getAttribute("data-paie-etat")),s+=parseFloat(r.getAttribute("data-paie-etat"))),r.hasAttribute("data-ressource-propre")&&r.checked&&(n+=parseFloat(r.getAttribute("data-ressource-propre")),s+=parseFloat(r.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=t.toFixed(2),this.totalConsommationRessourcePropre=n.toFixed(2),this.totalConsommation=s.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(t){let n=0;return t.forEach((s,v)=>{s.centreCout.code!=""&&(s.missionId!=""||s.serviceRefId!=""?s.domaineFonctionnel.code!=""&&(n+=s.heuresAPayer):n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalNonPayable(t){let n=0;return t.forEach((s,v)=>{(s.centreCout.code==""||(s.missionId!=""||s.serviceRefId!="")&&s.domaineFonctionnel.code=="")&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePaieEtat(t){let n=0;return t.forEach((s,v)=>{s.centreCout.typeRessourceCode=="paie-etat"&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(t){let n=0;return t.forEach((s,v)=>{s.centreCout.typeRessourceCode=="ressources-propres"&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(t){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[],console.log(t);for(const[n,s]of Object.entries(t))switch(s.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(s),this.intervenants.push(s);break;case"Intervenant permanent":this.permanents.push(s),this.intervenants.push(s);break;case"Étudiant":this.etudiants.push(s),this.intervenants.push(s);break;default:this.autres.push(s),this.intervenants.push(s)}},toggleCheckbox(t){let n=Array.from(document.getElementsByClassName(t.target.className));t.target.checked?n.forEach(function(s,v){s.checked=!0}):n.forEach(function(s,v){s.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(t){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:t.datasIntervenant.code})},formattedHETD(t){return Util.formattedHeures(t,!1)}}},Lb=e("h1",null,"Demande de mise en paiement par lots",-1),Nb={class:"card text-dark bg-light"},Ob=e("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1),qb={class:"card-body"},zb={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},Bb={class:"mb-3"},Jb=e("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1),Gb=["value"],Yb={class:"mb-3"},Qb=e("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),p("  Veuillez patienter... ")],-1),Wb=["disabled"],Xb=e("div",{class:"alert alert-info",role:"alert"},[p(" Seules les HETD "),e("strong",null,"(hors référentiel)"),p(" avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisées. Pour les autres, il faudra passer sur chaque fiches intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ")],-1),Kb={key:0},Zb={key:0,class:"alert alert-danger",role:"alert"},e1={class:"table table-bordered caption-top"},t1=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Budget"),e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressource propre"),e("th",{class:"fw-bold",scope:"col"},"Total")])],-1),n1=e("td",null,"Dotation",-1),s1={class:"fw-bold"},i1=e("td",null,"Consommation",-1),r1={class:"fw-bold"},a1={id:"dmep",class:"accordion"},l1={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},o1={key:0,class:"accordion-item"},u1={id:"dmep-permanents-heading",class:"accordion-header"},d1={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},c1={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},h1={class:"accordion-body"},m1={class:"table"},_1={scope:"col"},p1=e("th",{scope:"col"},"Intervenant",-1),f1=e("th",null,"HETD payables",-1),v1=e("th",null,"HETD non payables",-1),b1=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],g1=["href"],y1=["title"],x1={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},C1={key:1,class:"accordion-item"},V1={id:"dmep-vacataires-heading",class:"accordion-header"},S1={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},k1={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},P1={class:"accordion-body"},D1={class:"table"},A1=e("th",null,"Intervenant",-1),T1=e("th",null,"HETD payables",-1),M1=e("th",null,"HETD non payables",-1),E1=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],U1=["href"],F1=["title"],I1={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},$1={key:2,class:"accordion-item"},R1={id:"dmep-etudiants-heading",class:"accordion-header"},w1={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},H1={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},j1={class:"accordion-body"},L1={class:"table"},N1=e("th",null,"Intervenant",-1),O1=e("th",null,"HETD payables",-1),q1=e("th",null,"HETD non payables",-1),z1=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],B1=["href"],J1=["title"],G1={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Y1={key:3,class:"accordion-item"},Q1={id:"dmep-autres-heading",class:"accordion-header"},W1={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},X1={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},K1={class:"accordion-body"},Z1={class:"table"},eg=e("th",null,"Intervenant",-1),tg=e("th",null,"HETD payables",-1),ng=e("th",null,"HETD non payables",-1),sg=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],ig=["href"],rg=["title"],ag={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},lg=["value"],og={key:4,class:"mt-3"},ug=e("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),p("  Veuillez patienter... ")],-1),dg=["disabled"],cg=["href"];function hg(t,n,s,v,r,a){return i(),l(g,null,[Lb,e("div",Nb,[Ob,e("div",qb,[e("form",zb,[e("div",Bb,[Jb,p("  "),b(e("select",{"onUpdate:modelValue":n[0]||(n[0]=u=>r.selectedStructure=u),class:"form-select",name:"structure"},[(i(!0),l(g,null,C(s.structures,u=>(i(),l("option",{value:u.id},d(u.libelle),9,Gb))),256))],512),[[N,r.selectedStructure]])]),e("div",Yb,[Qb,e("button",{id:"btn-rdmep",disabled:!r.selectedStructure,class:"btn btn-primary",type:"button",onClick:n[1]||(n[1]=(...u)=>a.findDemandeMiseEnPaiement&&a.findDemandeMiseEnPaiement(...u))}," Lancer la recherche ",8,Wb)])])])]),Xb,a.haveDotation?(i(),l("div",Kb,[r.alertDotation?(i(),l("div",Zb," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):m("",!0),e("table",e1,[t1,e("tbody",null,[e("tr",null,[n1,e("td",null,d(a.formattedHETD(this.dotation.paieEtat))+" HETD",1),e("td",null,d(a.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),e("td",s1,d(a.formattedHETD(this.dotation.total))+" HETD",1)]),e("tr",null,[i1,e("td",null,[e("span",{class:M(a.alertPaieEtat)},d(a.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),e("td",null,[e("span",{class:M(a.alertRessourcePropre)},d(a.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),e("td",r1,d(a.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):m("",!0),e("div",a1,[e("form",l1,[this.permanents.length>0?(i(),l("div",o1,[e("h2",u1,[e("button",d1,d(this.permanents.length)+" Permanent(s) ",1)]),e("div",c1,[e("div",h1,[e("table",m1,[e("thead",null,[e("tr",null,[e("th",_1,[e("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:n[2]||(n[2]=(...u)=>a.toggleCheckbox&&a.toggleCheckbox(...u))})]),p1,f1,v1])]),e("tbody",null,[(i(!0),l(g,null,C(this.permanents,u=>(i(),l("tr",null,[e("td",null,[e("input",{id:"permanent-"+u.datasIntervenant.id,"data-paie-etat":a.totalRessourcePaieEtat(u.heures),"data-ressource-propre":a.totalRessourcePropre(u.heures),disabled:a.totalPayable(u.heures)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:a.totalPayable(u.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:n[3]||(n[3]=h=>a.refreshTotalConsommation())},null,40,b1)]),e("td",null,[e("a",{href:a.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,g1)]),e("td",null,[e("span",{title:a.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+a.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(a.totalPayable(u.heures))+" h",9,y1)]),e("td",null,[e("span",x1,d(a.totalNonPayable(u.heures))+" h",1)])]))),256))])])])])])):m("",!0),this.vacataires.length>0?(i(),l("div",C1,[e("h2",V1,[e("button",S1,d(this.vacataires.length)+" Vacataire(s) ",1)]),e("div",k1,[e("div",P1,[e("table",D1,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:n[4]||(n[4]=(...u)=>a.toggleCheckbox&&a.toggleCheckbox(...u))})]),A1,T1,M1])]),e("tbody",null,[(i(!0),l(g,null,C(this.vacataires,u=>(i(),l("tr",null,[e("td",null,[e("input",{id:"vacataire-"+u.datasIntervenant.id,"data-paie-etat":a.totalRessourcePaieEtat(u.heures),"data-ressource-propre":a.totalRessourcePropre(u.heures),disabled:a.totalPayable(u.heures)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:a.totalPayable(u.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:n[5]||(n[5]=h=>a.refreshTotalConsommation())},null,40,E1)]),e("td",null,[e("a",{href:a.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,U1)]),e("td",null,[e("span",{title:a.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+a.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(a.totalPayable(u.heures))+" h",9,F1)]),e("td",null,[e("span",I1,d(a.totalNonPayable(u.heures))+" h",1)])]))),256))])])])])])):m("",!0),this.etudiants.length>0?(i(),l("div",$1,[e("h2",R1,[e("button",w1,d(this.etudiants.length)+" Etudiant(s) ",1)]),e("div",H1,[e("div",j1,[e("table",L1,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:n[6]||(n[6]=(...u)=>a.toggleCheckbox&&a.toggleCheckbox(...u))})]),N1,O1,q1])]),e("tbody",null,[(i(!0),l(g,null,C(this.etudiants,u=>(i(),l("tr",null,[e("td",null,[e("input",{id:"etudiant-"+u.datasIntervenant.id,"data-paie-etat":a.totalRessourcePaieEtat(u.heures),"data-ressource-propre":a.totalRessourcePropre(u.heures),disabled:a.totalPayable(u.heures)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:a.totalPayable(u.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:n[7]||(n[7]=h=>a.refreshTotalConsommation())},null,40,z1)]),e("td",null,[e("a",{href:a.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,B1)]),e("td",null,[e("span",{title:a.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+a.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(a.totalPayable(u.heures))+" h",9,J1)]),e("td",null,[e("span",G1,d(a.totalNonPayable(u.heures))+" h",1)])]))),256))])])])])])):m("",!0),this.autres.length>0?(i(),l("div",Y1,[e("h2",Q1,[e("button",W1,d(this.autres.length)+" Autre(s) ",1)]),e("div",X1,[e("div",K1,[e("table",Z1,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:n[8]||(n[8]=(...u)=>a.toggleCheckbox&&a.toggleCheckbox(...u))})]),eg,tg,ng])]),e("tbody",null,[(i(!0),l(g,null,C(this.etudiants,u=>(i(),l("tr",null,[e("td",null,[e("input",{id:"autre-"+u.datasIntervenant.id,"data-paie-etat":a.totalRessourcePaieEtat(u.heures),"data-ressource-propre":a.totalRessourcePropre(u.heures),disabled:a.totalPayable(u.heures)==0,name:"intervenant["+u.datasIntervenant.id+"]",title:a.totalPayable(u.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:n[9]||(n[9]=h=>a.refreshTotalConsommation())},null,40,sg)]),e("td",null,[e("a",{href:a.urlIntervenant(u),target:"_blank"},d(u.datasIntervenant.nom_usuel.toUpperCase()+" "+u.datasIntervenant.prenom),9,ig)]),e("td",null,[e("span",{title:a.totalRessourcePaieEtat(u.heures)+" HETD en paie état / "+a.totalRessourcePropre(u.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},d(a.totalPayable(u.heures))+" h",9,rg)]),e("td",null,[e("span",ag,d(a.totalNonPayable(u.heures))+" h",1)])]))),256))])])])])])):m("",!0),e("input",{value:r.selectedStructure,name:"selectedStructure",type:"hidden"},null,8,lg),this.intervenants.length>0?(i(),l("div",og,[ug,e("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:n[10]||(n[10]=(...u)=>a.processDemandeMiseEnPaiement&&a.processDemandeMiseEnPaiement(...u))}," Enregistrer les demandes de paiement ",8,dg),this.canMiseEnPaiement?(i(),l("a",{key:0,id:"btn-mep",href:this.urlMiseEnPaiement,class:"ms-2 btn btn-secondary"}," Aller au mise en paiement ",8,cg)):m("",!0)])):m("",!0)])])],64)}const mg=k(jb,[["render",hg]]),_g=Object.freeze(Object.defineProperty({__proto__:null,default:mg},Symbol.toStringTag,{value:"Module"})),pg={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},O=t=>(G("data-v-6001d54b"),t=t(),Y(),t),fg=O(()=>e("h2",null,"Paramètres généraux ou bien selon le statut",-1)),vg={class:"table table-bordered table-condensed table-extra-condensed"},bg=O(()=>e("tr",null,[e("th",null,"Paramètre général"),e("th",null,"Valeur")],-1)),gg=O(()=>e("h2",null,"Services à payer",-1)),yg={class:"card"},xg={class:"card-header"},Cg={class:"badge bg-primary"},Vg={class:"card-body"},Sg={class:"row lap"},kg={class:"col-md-6"},Pg=O(()=>e("h6",null,"Heures à payer",-1)),Dg={class:"table table-bordered table-xs"},Ag={key:0,rowspan:"2"},Tg={key:1,rowspan:"2"},Mg=O(()=>e("th",{colspan:"2"},"Taux de rému.",-1)),Eg=O(()=>e("th",{colspan:"3"},"Heures",-1)),Ug=O(()=>e("tr",null,[e("th",null,"Nom"),e("th",null,"Valeur"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")],-1)),Fg=["title"],Ig={class:"col-md-6"},$g=O(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),p(" correspondantes")],-1)),Rg={class:"table table-bordered table-xs"},wg=O(()=>e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{colspan:"3"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")])],-1)),Hg=["title"],jg=["title"],Lg={key:0},Ng={class:"badge bg-info"},Og={key:0,class:"row"},qg=O(()=>e("div",{class:"col-md-6"},null,-1)),zg={class:"col-md-6"},Bg=O(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),p(" en trop")],-1)),Jg={class:"table table-bordered table-xs"},Gg=O(()=>e("thead",{class:"bg-danger"},[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{rowspan:"2"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date")])],-1)),Yg=["title"],Qg=["title"];function Wg(t,n,s,v,r,a){return i(),l(g,null,[fg,e("table",vg,[bg,(i(!0),l(g,null,C(s.parametres,(u,h)=>(i(),l("tr",{key:h},[e("th",null,d(h),1),e("td",null,d(u),1)]))),128))]),gg,(i(!0),l(g,null,C(s.servicesAPayer,(u,h)=>(i(),l("div",{key:h},[e("div",yg,[e("div",xg,[e("span",Cg,d(u.type),1),p(" "+d(u.libelle),1)]),e("div",Vg,[e("ul",null,[(i(!0),l(g,null,C(u.parametres,(c,o)=>(i(),l("li",{key:o},d(o)+" : "+d(c),1))),128))]),(i(!0),l(g,null,C(u.laps,c=>(i(),l("div",Sg,[e("div",kg,[Pg,e("table",Dg,[e("thead",null,[e("tr",null,[u.type!="Référentiel"?(i(),l("th",Ag,"Volume horaire")):(i(),l("th",Tg,"Volumes horaires")),Mg,Eg]),Ug]),e("tbody",null,[e("tr",null,[e("td",null,[e("abbr",{class:"badge bg-secondary",title:c.volumeHoraireHisto},d(c.volumeHoraireId),9,Fg),p(" "+d(c.volumeHoraire),1)]),e("td",null,d(c.tauxRemu),1),e("td",null,d(c.tauxValeur)+"€",1),e("td",null,d(c.heures),1),e("td",null,d(c.heuresAA),1),e("td",null,d(c.heuresAC),1)])])])]),e("div",Ig,[$g,e("table",Rg,[wg,e("tbody",null,[(i(!0),l(g,null,C(c.misesEnPaiement,o=>(i(),l("tr",{key:o.id},[e("td",null,[e("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+o.heuresTotal+`
Domaine fonctionnel : `+o.domaineFonctionnel+`
`+o.historique},d(o.id),9,Hg)]),e("td",null,[e("abbr",{title:o.centreCoutLibelle},d(o.centreCoutCode),9,jg)]),e("td",null,d(o.periodePaiement),1),e("td",null,d(o.date),1),e("td",null,d(o.heures),1),e("td",null,d(o.heuresAA),1),e("td",null,d(o.heuresAC),1)]))),128))])]),c.heuresRestantes!="0,00"?(i(),l("div",Lg,[e("span",Ng,d(c.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):m("",!0)])]))),256)),u.misesEnPaiement&&u.misesEnPaiement.length>0?(i(),l("div",Og,[qg,e("div",zg,[Bg,e("table",Jg,[Gg,e("tbody",null,[(i(!0),l(g,null,C(u.misesEnPaiement,c=>(i(),l("tr",{key:c.id},[e("td",null,[e("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+c.domaineFonctionnel+`
`+c.historique},d(c.id),9,Yg)]),e("td",null,[e("abbr",{title:c.centreCoutLibelle},d(c.centreCoutCode),9,Qg)]),e("td",null,d(c.periodePaiement),1),e("td",null,d(c.date),1),e("td",null,d(c.heures),1)]))),128))])])])])):m("",!0)])])]))),128))],64)}const Xg=k(pg,[["render",Wg],["__scopeId","data-v-6001d54b"]]),Kg=Object.freeze(Object.defineProperty({__proto__:null,default:Xg},Symbol.toStringTag,{value:"Module"})),Zg={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(t){this.selectedFile=t.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(t){t.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let n=document.getElementById("btn-import"),s=document.getElementById("btn-import-inprogress");s.classList.remove("d-none"),n.classList.add("d-none"),n.disabled=!0;let v=document.getElementById("formImport"),r=new FormData(v);unicaenVue.axios.post(this.importUrl,r,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{let u=a.data;this.fileErrors=u.file,this.intervenantMissing=u.intervenant,u.message.length!=0?this.messageErrors=u.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",n.disabled=!1,s.classList.add("d-none"),n.classList.remove("d-none")}).catch(a=>{console.error("Error uploading")})}}},ey={class:"card text-dark bg-light"},ty=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),ny={class:"card-body"},sy={key:0,class:"alert alert-danger",role:"alert"},iy={key:1,class:"alert alert-success",role:"alert"},ry={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},ay=e("p",{class:"fs-9 text"},[p(" Vous pouvez utiliser le modèle directement extrait de winpaie "),e("strong",null,"(format .xlsx ou .ods)"),p(" ou créer votre modèle générique de classeur "),e("strong",null,"(format .xlsx ou .ods)"),p(" incluant 3 colonnes : insee,numero pec, nom. ")],-1),ly={class:"mb-3"},oy=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),uy=oe('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),dy={class:"mb-3"},cy=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),p("  Veuillez patienter... ")],-1),hy={key:0,id:"fileErrors",class:"card text-dark bg-light"},my=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),_y={class:"card-body"},py={key:0},fy=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),vy={key:1},by=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function gy(t,n,s,v,r,a){return i(),l(g,null,[e("div",ey,[ty,e("div",ny,[this.messageErrors?(i(),l("div",sy,d(this.messageErrors),1)):m("",!0),this.messageConfirm?(i(),l("div",iy,d(this.messageConfirm),1)):m("",!0),e("form",ry,[ay,e("div",ly,[oy,p("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:n[0]||(n[0]=(...u)=>a.handleFileUpload&&a.handleFileUpload(...u))},null,32)]),uy,e("div",dy,[cy,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:n[1]||(n[1]=(...u)=>a.importFile&&a.importFile(...u))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(i(),l("div",hy,[my,e("div",_y,[this.fileErrors.length!=0?(i(),l("div",py,[fy,e("ul",null,[(i(!0),l(g,null,C(this.fileErrors,u=>(i(),l("li",null,d(),1))),256))])])):m("",!0),this.intervenantMissing.length!=0?(i(),l("div",vy,[by,e("ul",null,[(i(!0),l(g,null,C(this.intervenantMissing,u=>(i(),l("li",null,d(u),1))),256))])])):m("",!0)])])):m("",!0)],64)}const yy=k(Zg,[["render",gy]]),xy=Object.freeze(Object.defineProperty({__proto__:null,default:yy},Symbol.toStringTag,{value:"Module"})),Cy={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(t){modAjax(t.target,n=>{this.$emit("refreshListe")})},ajoutValeur(t){modAjax(t.target,n=>{this.$emit("refreshListe")})},saisieValeur(t){t.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:t.currentTarget.dataset.id}),modAjax(t.currentTarget,n=>{this.$emit("refreshListe")})},refreshListe(t){this.$emit("refreshListe")},supprimer(t){popConfirm(t.target,n=>{this.$emit("refreshListe")})},supprimerValeur(t){t.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refreshListe")})},refresh(t){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:t.id})).then(n=>{this.$emit("refresh",n.data)})}}},Vy={class:"card-header"},Sy={style:{display:"inline"}},ky={class:"float-end"},Py=["href"],Dy=["href"],Ay={class:"card-body"},Ty={key:0},My=e("br",null,null,-1),Ey={class:""},Uy={class:"row align-items-start"},Fy={class:"col-md-6"},Iy={class:"col"},$y=["data-id"],Ry=["data-id"],wy=["href"],Hy={key:1,class:"row"},jy={class:"col-md-7"},Ly=e("br",null,null,-1),Ny={class:"row align-items-start"},Oy={class:"col-md-8"},qy={class:"col-md-auto"},zy=["data-id"],By=["data-id"],Jy=["href"],Gy={class:"col"},Yy=e("br",null,null,-1),Qy={key:0},Wy={key:0};function Xy(t,n,s,v,r,a){const u=B,h=w("u-heures"),c=W,o=w("taux",!0);return i(),l(g,null,[e("div",{class:M(["card",{"ms-5":s.taux.tauxRemu}])},[e("div",Vy,[e("h3",Sy,d(s.taux.libelle)+" ("+d(s.taux.code)+")",1),e("div",ky,[s.taux.canEdit?(i(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=A((...x)=>a.saisie&&a.saisie(...x),["prevent"]))},[_(u,{name:"pen-to-square"}),p(" Modifier")],8,Py)):m("",!0),p("   "),s.taux.canDelete?(i(),l("a",{key:1,href:r.supprimerUrl,class:"btn btn-danger",onClick:n[1]||(n[1]=A((...x)=>a.supprimer&&a.supprimer(...x),["prevent"]))},[_(u,{name:"trash-can"}),p(" Supprimer")],8,Dy)):m("",!0)])]),e("div",Ay,[s.taux.tauxRemu?m("",!0):(i(),l("div",Ty,[p(" Modification :"),My,e("ul",null,[(i(!0),l(g,null,C(s.taux.tauxRemuValeurs,x=>(i(),l("div",{key:x.id},[e("li",Ey,[e("div",Uy,[e("div",Fy,[_(h,{valeur:x.valeur},null,8,["valeur"]),p("€/h à partir du "),_(c,{value:x.dateEffet},null,8,["value"])]),e("div",Iy,[s.taux.canEdit?(i(),l("a",{key:0,class:"text-primary",onClick:n[2]||(n[2]=A((...f)=>a.saisieValeur&&a.saisieValeur(...f),["prevent"])),"data-id":x.id},[_(u,{name:"pen-to-square"})],8,$y)):m("",!0),p("   "),s.taux.canEdit?(i(),l("a",{key:1,class:"text-primary",onClick:n[3]||(n[3]=A((...f)=>a.supprimerValeur&&a.supprimerValeur(...f),["prevent"])),"data-id":x.id},[_(u,{name:"trash-can"})],8,Ry)):m("",!0)])])])]))),128))]),s.taux.canEdit?(i(),l("a",{key:0,href:r.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:n[4]||(n[4]=A((...x)=>a.ajoutValeur&&a.ajoutValeur(...x),["prevent"]))},[_(u,{name:"plus"}),p(" Ajouter une valeur ")],8,wy)):m("",!0)])),s.taux.tauxRemu?(i(),l("div",Hy,[e("div",jy,[p(" Modification :"),Ly,e("ul",null,[(i(!0),l(g,null,C(s.taux.tauxRemuValeurs,x=>(i(),l("div",null,[e("li",null,[e("div",Ny,[e("div",Oy,[p(" Coéfficient de "),_(h,{valeur:x.valeur},null,8,["valeur"]),p(" à partir du "),_(c,{value:x.dateEffet},null,8,["value"])]),e("div",qy,[s.taux.canEdit?(i(),l("a",{key:0,class:"text-primary",onClick:n[5]||(n[5]=A((...f)=>a.saisieValeur&&a.saisieValeur(...f),["prevent"])),"data-id":x.id},[_(u,{name:"pen-to-square"})],8,zy)):m("",!0),p("   "),s.taux.canEdit?(i(),l("a",{key:1,class:"text-primary",onClick:n[6]||(n[6]=A((...f)=>a.supprimerValeur&&a.supprimerValeur(...f),["prevent"])),"data-id":x.id},[_(u,{name:"trash-can"})],8,By)):m("",!0)])])])]))),256))]),s.taux.canEdit?(i(),l("a",{key:0,href:r.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:n[7]||(n[7]=A((...x)=>a.ajoutValeur&&a.ajoutValeur(...x),["prevent"]))},[_(u,{name:"plus"})],8,Jy)):m("",!0)]),e("div",Gy,[p(" Valeurs calculées (indexées sur le taux "+d(s.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(i(!0),l(g,null,C(s.taux.tauxRemuValeursIndex,x=>(i(),l("div",null,[e("li",null,[_(h,{valeur:x.valeur},null,8,["valeur"]),p("€/h à partir du "),_(c,{value:x.date},null,8,["value"])])]))),256))]),Yy])])):m("",!0)])],2),s.taux.tauxRemu?m("",!0):(i(),l("div",Qy,[(i(!0),l(g,null,C(s.listeTaux,x=>(i(),l("div",{key:x},[x.tauxRemu&&x.tauxRemu.id===s.taux.id?(i(),l("div",Wy,[(i(),H(o,{onSupprimer:a.supprimer,onRefreshListe:a.refreshListe,key:s.taux.id,taux:x,listeTaux:s.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):m("",!0)]))),128))]))],64)}const we=k(Cy,[["render",Xy]]),Ky=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),Zy={components:{taux:we},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(t){let n=Util.json.indexById(this.listeTaux,t.id);this.listeTaux[n]=t},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(t=>{this.listeTaux=t.data})}}},e2=["href"];function t2(t,n,s,v,r,a){const u=w("taux");return i(),l(g,null,[(i(!0),l(g,null,C(r.listeTaux,h=>(i(),l("div",null,[h.tauxRemu?m("",!0):(i(),H(u,{onSupprimer:a.supprimer,onRefreshListe:a.refreshListe,key:h.id,taux:h,listeTaux:r.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),s.canEditTaux?(i(),l("a",{key:0,class:"btn btn-primary",href:r.ajoutUrl,onClick:n[0]||(n[0]=A((...h)=>a.ajout&&a.ajout(...h),["prevent"]))},"Ajout d'un nouveau taux",8,e2)):m("",!0)],64)}const n2=k(Zy,[["render",t2]]),s2=Object.freeze(Object.defineProperty({__proto__:null,default:n2},Symbol.toStringTag,{value:"Module"})),i2={class:"card-header card-header-h3"},r2={class:"validation-bar float-end","data-url":""},a2={key:0},l2=["id","title","data-url"],o2=["id","title","data-url"],u2=["id","title","data-url"],d2={key:0,style:{"font-size":"0.6em"}},c2=e("br",null,null,-1),h2={class:"card-body"},m2={class:"row"},_2={class:"col-md-6"},p2=e("label",null,"Fichiers déposés :",-1),f2={key:0},v2={class:"uploaded-files-div",id:"uploaded-files-div-6851831280ff7"},b2={class:"fichier-pj"},g2={class:"d-flex"},y2=["href","title"],x2=e("span",{class:"icon icon-file"},null,-1),C2=["title"],V2=["title"],S2=e("span",{class:"icon icon-file"},null,-1),k2=["title"],P2={class:"d-block small upload-date"},D2={key:2,class:"d-block small"},A2=["id","title","data-url"],T2=["id","title","data-url"],M2={key:0,class:"col-md-6"},E2={class:"row"},U2={class:"col-md-8"},F2=["id"],I2={class:"form-label small",for:"importFile"},$2={class:"col-md-4 d-flex align-items-end"},R2=["id","data-url"],w2={__name:"PieceJointe",props:["intervenant","datas","privileges"],emits:["refresh"],setup(t,{emit:n}){const s=t,v=n,r=Ve(null),a=J(()=>{var D;return unicaenVue.url("piece-jointe/intervenant/:intervenant/valider/:pieceJointe",{intervenant:s.intervenant,pieceJointe:((D=s.datas.pieceJointe)==null?void 0:D.id)??0})}),u=J(()=>{var D;return unicaenVue.url("piece-jointe/intervenant/:intervenant/devalider/:pieceJointe",{intervenant:s.intervenant,pieceJointe:((D=s.datas.pieceJointe)==null?void 0:D.id)??0})}),h=J(()=>{var D;return unicaenVue.url("piece-jointe/intervenant/:intervenant/refuser/:pieceJointe",{intervenant:s.intervenant,pieceJointe:((D=s.datas.pieceJointe)==null?void 0:D.id)??0})}),c=J(()=>{var D;return unicaenVue.url("piece-jointe/intervenant/:intervenant/fichier/televerser/:typePieceJointe",{intervenant:s.intervenant,typePieceJointe:((D=s.datas.typePieceJointe)==null?void 0:D.id)??0})}),o=J(()=>{var T;return`form-import-${((T=s.datas.typePieceJointe)==null?void 0:T.id)??"unknown"}`}),x=J(()=>{var T;return`btn-import-${((T=s.datas.typePieceJointe)==null?void 0:T.id)??"unknown"}`}),f=J(()=>{var D,T;return(D=s.datas.pieceJointe)!=null&&D.validation&&s.datas.annee!=((T=s.datas.pieceJointe)==null?void 0:T.anneeOrigine)?"Déposez un document pour le mettre à jour :":"Déposez un document : "});function P(D){console.log(x.value),r.value=D.target.files;const T=document.getElementById(x.value);T&&(T.disabled=!1)}function S(D){D.preventDefault();const T=document.getElementById(x.value);document.getElementById("btn-import-inprogress"),T.disabled=!0;const z=document.getElementById(o.value),X=new FormData(z),K=D.currentTarget.dataset.url;unicaenVue.axios.post(K,X,{headers:{"Content-Type":"multipart/form-data"}}).then(Z=>{v("refresh")}).catch(Z=>{console.error("Error uploading")})}function I(D,T=!1){if(T)modAjax(D.currentTarget,()=>{v("refresh")});else{const z=D.currentTarget.dataset.url;unicaenVue.axios.get(z).then(()=>v("refresh")).catch(()=>v("refresh"))}}function F(D,T){return D?D.length>T?D.slice(0,T)+"…":D:""}return(D,T)=>{var X,K,Z,ce,he,me,_e,pe,fe;const z=B;return i(),l("div",{class:M(["tpj","card","upload-container",(X=t.datas.pieceJointe)!=null&&X.validation?"bg-success":"bg-default",(K=t.datas.pieceJointe)!=null&&K.id?"tpj-"+t.datas.pieceJointe.id:""])},[e("div",i2,[e("h5",null,[e("div",r2,[t.datas.pieceJointe?(i(),l("div",a2,[!t.datas.pieceJointe.validation&&t.privileges.canValider?(i(),l("button",{key:0,id:"valider-"+((Z=t.datas.pieceJointe)==null?void 0:Z.id),class:"btn btn-success me-2",type:"button",title:"Valider la pièce justificative '"+t.datas.typePieceJointe.libelle+"'",onClick:T[0]||(T[0]=E=>I(E)),"data-url":a.value},[_(z,{id:"action",name:"thumbs-up",style:{color:"black"}}),p(" VALIDER ")],8,l2)):m("",!0),!t.datas.pieceJointe.validation&&t.privileges.canRefuser?(i(),l("button",{key:1,id:"refuser-"+((ce=t.datas.pieceJointe)==null?void 0:ce.id),class:"btn btn-danger",type:"button",title:"Refuser la pièce justificative '"+t.datas.typePieceJointe.libelle+"'",onClick:T[1]||(T[1]=E=>I(E,!0)),"data-url":h.value},[_(z,{id:"action",name:"trash",style:{color:"black"}}),p(" REFUSER ")],8,o2)):m("",!0),this.datas.pieceJointe.validation&&t.datas.annee==((he=t.datas.pieceJointe)==null?void 0:he.anneeOrigine)&&t.privileges.canValider?(i(),l("button",{key:2,id:"devalider-"+((me=t.datas.pieceJointe)==null?void 0:me.id),class:"btn btn-danger",type:"button",title:"Dévalider la pièce justificative '"+t.datas.typePieceJointe.libelle+"'",onClick:T[2]||(T[2]=E=>I(E)),"data-url":u.value},[_(z,{id:"action",name:"thumbs-up",style:{color:"black"}}),p(" DÉVALIDER ")],8,u2)):m("",!0)])):m("",!0)]),p(" "+d(t.datas.typePieceJointe.libelle)+" ",1),t.datas.annee!=(((_e=t.datas.pieceJointe)==null?void 0:_e.anneeOrigine)??t.datas.annee)?(i(),l("span",d2,"Fourni(e) en "+d((pe=t.datas.pieceJointe)==null?void 0:pe.anneeOrigine),1)):m("",!0),c2])]),e("div",h2,[e("div",m2,[e("div",_2,[p2,this.datas.pieceJointe?m("",!0):(i(),l("p",f2,"Aucun")),e("div",v2,[e("ul",null,[(i(!0),l(g,null,C((fe=t.datas.pieceJointe)==null?void 0:fe.fichier,(E,ux)=>{var ve,be;return i(),l("li",b2,[e("div",g2,[e("div",null,[t.privileges.canTelecharger?(i(),l("a",{key:0,class:"download-file",href:"/piece-jointe/intervenant/"+t.intervenant+"/fichier/telecharger/"+E.id+"/"+E.nom,title:"Télécharger le fichier déposé '"+E.nom+"'"},[x2,p(" "+d(F(E.nom,15))+" (",1),e("abbr",{title:E.poids},d(E.poids),9,C2),p(")")],8,y2)):m("",!0),t.privileges.canTelecharger?m("",!0):(i(),l("a",{key:1,class:"disabled download-file",tabindex:"-1","aria-disabled":"true",onclick:"return false;",title:"Vous n'avez pas les droits pour télécharge le fichier déposé '"+E.nom+"'"},[S2,p(" "+d(F(E.nom,15))+" (",1),e("abbr",{title:E.poids},d(E.poids),9,k2),p(")")],8,V2)),e("span",P2,[e("i",null,"Déposé le "+d(E.date),1)]),E.validation?(i(),l("span",D2,[e("i",null,"Validé le "+d((ve=E.validation)==null?void 0:ve.date),1)])):m("",!0)]),e("div",null,[!E.validation&&t.privileges.canEditer?(i(),l("button",{key:0,id:"supprimer-fichier-"+E.id,class:"delete-file btn btn-sm btn-danger ms-2 p-1 py-0",type:"button",title:"Supprimer le fichier déposé '"+E.nom+"'",onClick:T[3]||(T[3]=se=>I(se)),"data-url":"/piece-jointe/intervenant/"+t.intervenant+"/fichier/supprimer/"+t.datas.pieceJointe.id+"/"+E.id},[_(z,{id:"action",name:"trash",style:{color:"black"}})],8,A2)):m("",!0),!E.validation&&((be=t.datas.pieceJointe)!=null&&be.validation)&&t.privileges.canValider?(i(),l("button",{key:1,id:"valider-fichier-"+E.id,class:"validate-file btn btn-sm btn-success ms-2 p-1 py-0",type:"button",title:"Valider le fichier déposé '"+E.nom+"'",onClick:T[4]||(T[4]=se=>I(se)),"data-url":"/piece-jointe/intervenant/"+t.intervenant+"/fichier/valider/"+t.datas.pieceJointe.id+"/"+E.id},[_(z,{id:"action",name:"thumbs-up",style:{color:"black"}})],8,T2)):m("",!0)])])])}),256))])])]),t.privileges.canEditer?(i(),l("div",M2,[e("div",E2,[e("div",U2,[e("form",{id:o.value,action:"",enctype:"multipart/form-data",method:"post"},[e("div",null,[e("label",I2,d(f.value),1),e("input",{class:"form-control form-control-sm",name:"importFile",type:"file",onChange:P,multiple:""},null,32)])],8,F2)]),e("div",$2,[e("button",{id:x.value,class:"btn btn-primary btn-sm w-100",disabled:"",type:"button",onClick:T[5]||(T[5]=E=>S(E)),onChange:P,"data-url":c.value},[_(z,{id:"action",name:"upload"}),p(" Déposer ")],40,R2)])])])):m("",!0)])])],2)}}},H2=Object.freeze(Object.defineProperty({__proto__:null,default:w2},Symbol.toStringTag,{value:"Module"})),j2=e("span",{class:"fas fa-info-circle"},null,-1),L2=e("button",{type:"button",class:"btn-close alert-dismissible",title:"Fermer cette alerte","data-bs-dismiss":"alert"},null,-1),N2={__name:"ListePiecesJointes",props:["intervenant"],setup(t){const n=t,s=Ve(null),v=J(()=>unicaenVue.url("piece-jointe/intervenant/:intervenant/get-pieces-jointes",{intervenant:n.intervenant,test:"test"}));function r(){unicaenVue.axios.get(v.value).then(a=>{s.value=a.data}).catch(a=>{console.error(a)})}return ze(()=>{r()}),(a,u)=>{var h,c,o;return i(),l(g,null,[(i(!0),l(g,null,C(((h=s.value)==null?void 0:h.messagesPiecesJointes)||[],(x,f)=>(i(),l("div",{key:"msg-"+f,class:M("messenger alert alert-dismissible alert-"+x.type)},[j2,p(" "+d(x.text)+" ",1),L2],2))),128)),(c=s.value)!=null&&c.privileges?(i(!0),l(g,{key:0},C(((o=s.value)==null?void 0:o.piecesJointes)||[],(x,f)=>(i(),H(x,{datas:x,privileges:s.value.privileges,intervenant:t.intervenant,onRefresh:r},null,8,["datas","privileges","intervenant"]))),256)):m("",!0)],64)}}},O2=Object.freeze(Object.defineProperty({__proto__:null,default:N2},Symbol.toStringTag,{value:"Module"})),q2={name:"listeContrat",data(){return{dataUrl:unicaenVue.url("signature/data-contrat"),lines:[]}},methods:{contratUrl(t){return unicaenVue.url("intervenant/:intervenant/contrat",{intervenant:t})},getDocumentUrl(t){return unicaenVue.url("signature/:signature/get-document",{signature:t})},updateSignatureUrl(t){return unicaenVue.url("signature/:signature/update-signature",{signature:t})}}},z2=e("h1",{class:"page-header"},"Liste des signatures électroniques de contrat",-1),B2=e("thead",null,[e("tr",null,[e("th",{column:"ID_SIGNATURE"},"Id"),e("th",{column:"NOM"},"Nom"),e("th",{column:"PRENOM"},"Prénom"),e("th",{column:"DATE_CREATION_SIGNATURE_ELECTRONIQUE"},"Date signature électronique"),e("th",{column:"STATUT_SIGNATURE_ELECTRONIQUE"},"Statut"),e("th",null," ")])],-1),J2=["href"],G2=e("i",{class:"fas fa-download"},null,-1),Y2=[G2],Q2=["href"],W2=e("i",{class:"fas fa-eye"},null,-1),X2=[W2],K2=["href"],Z2=e("i",{class:"fas fa-rotate"},null,-1),ex=[Z2];function tx(t,n,s,v,r,a){const u=W,h=ue;return i(),l(g,null,[z2,_(h,{ref:"signatures",modelValue:r.lines,"onUpdate:modelValue":n[0]||(n[0]=c=>r.lines=c),"data-url":this.dataUrl},{default:R(()=>[B2,e("tbody",null,[(i(!0),l(g,null,C(r.lines,(c,o)=>(i(),l("tr",{key:o},[e("td",null,d(c.ID_SIGNATURE),1),e("td",null,d(c.NOM),1),e("td",null,d(c.PRENOM),1),e("td",null,[_(u,{value:c.DATE_CREATION_SIGNATURE_ELECTRONIQUE},null,8,["value"])]),e("td",null,d(c.STATUT_SIGNATURE_ELECTRONIQUE),1),e("td",null,[e("a",{href:a.getDocumentUrl(c.ID_SIGNATURE),class:"btn btn-info"},Y2,8,J2),p("   "),e("a",{href:a.contratUrl(c.ID_INTERVENANT),class:"btn btn-info"},X2,8,Q2),p("   "),e("a",{href:a.updateSignatureUrl(c.ID_SIGNATURE),class:"btn btn-info"},ex,8,K2)])]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const nx=k(q2,[["render",tx]]),sx=Object.freeze(Object.defineProperty({__proto__:null,default:nx},Symbol.toStringTag,{value:"Module"})),ix={UHeures:"Application/UI/UHeures",UInputFloat:"Application/UI/UInputFloat",Utilisateur:"Application/Utilisateur"};function rx(t,n){const s={};n===void 0&&(n={});for(const a in t){let h=a.slice(2,-4).replaceAll("/","");s[h]=t[a].default}function v(a){let u=Be({template:a.innerHTML,components:s});if(n.beforeMount!==void 0&&n.beforeMount(u),n.autoloads!==void 0)for(const h in n.autoloads){let c=n.autoloads[h].replaceAll("/","");u.component(h,s[c])}u.use(Je({components:!0,directives:!0})),u.mount(a),n.afterMount!==void 0&&n.afterMount(u)}for(const a of document.getElementsByClassName("vue-app"))v(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList"){for(const h of u.addedNodes)if(h.nodeType===Node.ELEMENT_NODE){const c=h.querySelectorAll?h.querySelectorAll(".vue-app"):[];for(const o of c)v(o);h.classList.contains("vue-app")&&v(h)}}}).observe(document.body,{childList:!0,subtree:!0})}const ax={init:rx},lx=Object.assign({"./Application/Connexion.vue":pt,"./Application/UI/UHeures.vue":yt,"./Application/UI/UInputFloat.vue":kt,"./Application/Utilisateur.vue":Mt,"./Employeur/ListeEmployeur.vue":Yt,"./Formule/Administration/Details.vue":nn,"./Formule/Administration/Formulator.vue":gn,"./Formule/Administration/Index.vue":ys,"./Formule/Details.vue":Ir,"./Formule/DetailsHetd.vue":xi,"./Formule/DetailsHetds.vue":Si,"./Formule/DetailsServiceEnseignement.vue":Ms,"./Formule/DetailsServiceReferentiel.vue":$s,"./Formule/DetailsVolumeHoraireEnseignement.vue":Zs,"./Formule/DetailsVolumeHoraireReferentiel.vue":vi,"./Formule/Test/Index.vue":ta,"./Formule/Test/Test.vue":Vu,"./Formule/TotauxHetd.vue":Uu,"./Intervenant/Recherche.vue":ed,"./Lieu/Structure.vue":Rd,"./Lieu/StructuresAdmin.vue":zd,"./Mission/Liste.vue":mh,"./Mission/ListeCandidatures.vue":jh,"./Mission/ListeOffreEmploi.vue":p_,"./Mission/ListePrime.vue":yp,"./Mission/Mission.vue":oh,"./Mission/OffreEmploi.vue":l_,"./Mission/Prime.vue":op,"./Mission/Suivi.vue":ef,"./Mission/SuiviEvent.vue":Wp,"./Paiement/DemandeMiseEnPaiement.vue":Ub,"./Paiement/DemandeMiseEnPaiementLot.vue":_g,"./Paiement/DemandeMiseEnPaiementStructure.vue":Sb,"./Paiement/DetailsCalculs.vue":Kg,"./Paiement/ImportNumeroPec.vue":xy,"./Paiement/ListeTaux.vue":s2,"./Paiement/Taux.vue":Ky,"./PieceJointe/ListePiecesJointes.vue":O2,"./PieceJointe/PieceJointe.vue":H2,"./Signature/ListeContrat.vue":sx}),ox={autoloads:ix};ax.init(lx,ox);
