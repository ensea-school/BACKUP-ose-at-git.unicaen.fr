import{c as l,o as a,w as v,v as E,n as D,t as u,a as _,b as U,d as f,e,F as y,r as C,f as T,g as Q,U as ue,h as ce,i as me,j as P,k as h,p as z,l as B,m as K,B as te,q as F,s as g,u as J,x as R,y as W,z as he,A as _e,C as pe,D as fe,_ as be}from"./vendor-BvGfWhUA.js";const S=(t,n)=>{const s=t.__vccOpts||t;for(const[b,r]of n)s[b]=r;return s},ve={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},ge=["innerHTML"];function ye(t,n,s,b,r,i){return a(),l("span",{class:"heures",innerHTML:i.affichage},null,8,ge)}const xe=S(ve,[["render",ye]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"})),Ve={name:"UInputFloat",props:{modelValue:{},isPourc:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},class:{type:String,required:!1,default:""},fraction:{type:Boolean,required:!1,default:!1},maximumDigits:{required:!1,default:8}},data(){return{fractions:{.333333:"1/3",.166667:"1/6",.142857:"1/7",.111111:"1/9",.666667:"2/3",.285714:"2/7",.222222:"2/9",.428571:"3/7",1.333333:"4/3",.571429:"4/7",.444444:"4/9",1.666667:"5/3",.833333:"5/6",.714286:"5/7",.555556:"5/9",.857143:"6/7",2.333333:"7/3",1.166667:"7/6",.777778:"7/9",2.666667:"8/3",1.142857:"8/7",.888889:"8/9",1.285714:"9/7"},inError:!1}},emits:["update:modelValue"],computed:{value:{get(){let t=this.modelValue;return this.isPourc&&(t*=100),this.floatToString(t)},set(t){const n=/^-?\d*\.?\d+$/;if(this.inError=t!==void 0&&t!==""&&!n.test(t.replace("/","").replace(",","").replace(".","")),!this.inError){let s=this.stringToFloat(t);this.isPourc&&(s/=100),(s===void 0||!isNaN(s)&&isFinite(s))&&this.$emit("update:modelValue",s)}}},cclass(){let t=this.class;return this.inError&&(t+=" is-invalid"),t}},methods:{floatToString(t){if(t==null)return;const n=Math.round(t*1e6)/1e6;if(this.fraction&&this.fractions[n]!==void 0)return this.fractions[n];var s="fr",b={minimumFractionDigits:0,maximumFractionDigits:this.maximumDigits,useGrouping:!1},r=new Intl.NumberFormat(s,b);return r.format(t)},stringToFloat(t){if(!(t===null||t===""||t===void 0))return t.indexOf("/")!==-1?(t=t.split("/"),t=Util.stringToFloat(t[0])/Util.stringToFloat(t[1])):t=parseFloat(t.replace(",",".")),t}},mounted(){}},Pe=["disabled"];function Se(t,n,s,b,r,i){return v((a(),l("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>i.value=d),disabled:s.disabled,ref:"inputFloat",class:D(i.cclass)},null,10,Pe)),[[E,i.value]])}const ke=S(Ve,[["render",Se],["__scopeId","data-v-29c90e6d"]]),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"})),Me={name:"Utilisateur",props:{nom:String,mail:String}},De=["href"];function Ee(t,n,s,b,r,i){return a(),l("a",{href:`mailto:${s.mail}`},u(s.nom),9,De)}const Te=S(Me,[["render",Ee]]),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),Fe={name:"UTableAjax",emits:["update:modelValue"],props:{modelValue:{required:!0},id:{required:!1,type:String},size:{required:!1,default:10},count:{required:!1},search:{required:!1},dataUrl:{required:!0,type:String}},data(){return{page:1,pageSizes:[10,25,50,100,"Tous"],defaultSize:10,dSize:this.size,dCount:this.count,dSearch:this.search,searchTimer:null,columns:{},loading:!1,orderCol:void 0,orderDir:"asc"}},computed:{cSize(){return isNaN(this.dSize)?9999999999999:this.dSize},storageIdentifier(){return"UTableAjax-"+this.id+"-"+window.location.href},elStart(){return isNaN(this.dSize)?1:(this.page-1)*this.dSize+1},elEnd(){return isNaN(this.dCount)?(this.page-1)*this.dSize+this.dSize:isNaN(this.dSize)?this.dCount:Math.min(this.dCount,(this.page-1)*this.dSize+this.dSize)}},watch:{dSize(t){localStorage.setItem(this.storageIdentifier,t),this.getData()},dSearch(t){const n=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.page>1?this.page=1:n.getData()},500)},page(t){this.getData()}},methods:{getData(){unicaenVue.axios.post(this.dataUrl,{page:this.page,size:this.dSize,elStart:this.elStart,elEnd:this.elEnd,search:this.dSearch,orderCol:this.orderCol,orderDir:this.orderDir}).then(t=>{let n=t.data;this.dCount=n.count,this.$emit("update:modelValue",n.data)})},orderBy(t){const n=this.columns[t];for(let b in this.columns)b!=t&&(this.columns[b].classList.contains("sorting_asc")&&this.columns[b].classList.remove("sorting_asc"),this.columns[b].classList.contains("sorting_desc")&&this.columns[b].classList.remove("sorting_desc"),console.log(b));let s="asc";n.classList.contains("sorting_asc")?(s="desc",n.classList.remove("sorting_asc"),n.classList.add("sorting_desc")):(n.classList.contains("sorting_desc")&&n.classList.remove("sorting_desc"),n.classList.add("sorting_asc")),this.orderCol=t,this.orderDir=s,this.getData()}},mounted(){this.dSize=parseInt(localStorage.getItem(this.storageIdentifier))||this.defaultSize,this.page=1,this.dSize=this.size,this.dCount=this.count;const t=this.$refs.tableRef,n=this;t&&t.querySelectorAll("th[column]").forEach(b=>{Array.from(b.attributes).forEach(r=>{r.name=="column"&&(this.columns[r.value]=b,b.dataset.column=r.value,b.onclick=function(){n.orderBy(this.dataset.column)},b.removeAttribute(r.name),b.classList.add("sorting"))})}),this.getData()}},Re={class:"dt-bootstrap5"},Ie=["value"],we={class:"float-end"},$e={class:"table table-bordered dataTable mb-2",ref:"tableRef"},Le={class:"dataTables_paginate paging_simple_numbers"};function Ne(t,n,s,b,r,i){const d=ue,m=ce,c=me;return a(),l("div",Re,[_(m,null,{default:U(()=>[_(d,null,{default:U(()=>[f(" Afficher "),e("label",null,[v(e("select",{"onUpdate:modelValue":n[0]||(n[0]=o=>r.dSize=o),class:"form-select form-select-sm"},[(a(!0),l(y,null,C(r.pageSizes,o=>(a(),l("option",{key:o,value:o},u(o),9,Ie))),128))],512),[[T,r.dSize]])]),f(" éléments ")]),_:1}),_(d,null,{default:U(()=>[e("div",we,[f(" Rechercher : "),e("label",null,[v(e("input",{"onUpdate:modelValue":n[1]||(n[1]=o=>r.dSearch=o),class:"form-control form-inline form-control-sm"},null,512),[[E,r.dSearch]])])])]),_:1})]),_:1}),e("table",$e,[Q(t.$slots,"default")],512),_(m,null,{default:U(()=>[_(d,null,{default:U(()=>[f("Affichage de l'élément "+u(i.elStart)+" à "+u(i.elEnd)+" sur "+u(r.dCount)+" éléments",1)]),_:1}),_(d,null,{default:U(()=>[e("div",Le,[_(c,{align:"end",page:r.page,modelValue:r.page,"onUpdate:modelValue":n[2]||(n[2]=o=>r.page=o),"total-rows":r.dCount,"per-page":i.cSize,"last-number":"true",firstNumber:"true","prev-text":"Précédent","next-text":"Suivant"},null,8,["page","modelValue","total-rows","per-page"])])]),_:1})]),_:1})])}const ee=S(Fe,[["render",Ne]]),He={name:"listeEmployeur",data(){return{dataUrl:unicaenVue.url("employeur/get-data"),lines:[]}},methods:{saisie(t){modAjax(t.currentTarget,n=>{this.$refs.employeurs.getData()})},editUrl(t){return unicaenVue.url("employeur/saisie/:id",{id:t})}}},je=e("h1",{class:"page-header"},"Gestion des employeurs",-1),Oe=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"RAISON_SOCIALE"},"Raison sociale"),e("th",{column:"NOM_COMMERCIAL"},"Nom commercial"),e("th",null,"Siren"),e("th",null," ")])],-1),qe={key:0},ze=["href"],Be={key:1};function Ge(t,n,s,b,r,i){const d=ee;return a(),l(y,null,[je,_(d,{ref:"employeurs",modelValue:r.lines,"onUpdate:modelValue":n[1]||(n[1]=m=>r.lines=m),"data-url":this.dataUrl},{default:U(()=>[Oe,e("tbody",null,[(a(!0),l(y,null,C(r.lines,(m,c)=>(a(),l("tr",{key:c},[e("td",null,u(m.ID),1),e("td",null,u(m.RAISON_SOCIALE),1),e("td",null,u(m.NOM_COMMERCIAL),1),e("td",null,u(m.SIREN),1),m.IMPORTABLE==0?(a(),l("td",qe,[m.IMPORTABLE==0?(a(),l("a",{key:0,href:i.editUrl(m.ID),onClick:n[0]||(n[0]=P((...o)=>i.saisie&&i.saisie(...o),["prevent"]))},"Modifier",8,ze)):h("",!0)])):h("",!0),m.IMPORTABLE==1?(a(),l("td",Be," NON MODIFIABLE ")):h("",!0)]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const Je=S(He,[["render",Ge]]),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),Qe={name:"Details",components:{},props:{formule:{type:Object},phpClass:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},We=["innerHTML"],Xe={class:"mb-2"},Ze=["href"],Ke=e("i",{class:"fas fa-rotate-left"},null,-1);function et(t,n,s,b,r,i){return a(),l(y,null,[e("h1",null,"Code source de "+u(s.formule.code),1),e("div",{innerHTML:s.phpClass,class:"code"},null,8,We),e("div",Xe,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[Ke,f(" Retour à l'administration des formules")],8,Ze)])],64)}const tt=S(Qe,[["render",et]]),nt=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),st={name:"Formulator",components:{},props:{phpClass:{type:String},error:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},rt=e("h1",null,"Formulator",-1),it={class:"mb-2"},at=["href"],lt=e("i",{class:"fas fa-rotate-left"},null,-1),ot={key:0},dt={class:"alert alert-danger"},ut={key:1},ct=e("div",{class:"alert alert-success"},"Formule bien intégrée",-1),mt=[ct],ht={key:2},_t=e("h3",null,"Code généré :",-1),pt=["innerHTML"];function ft(t,n,s,b,r,i){return a(),l(y,null,[rt,e("div",it,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[lt,f(" Retour à l'administration des formules")],8,at)]),s.error?(a(),l("div",ot,[e("div",dt,u(s.error),1)])):(a(),l("div",ut,mt)),s.phpClass?(a(),l("div",ht,[_t,e("div",{innerHTML:s.phpClass},null,8,pt)])):h("",!0),f(" "+u(s.error),1)],64)}const bt=S(st,[["render",ft]]),vt=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"})),gt={name:"Index",components:{},props:{formules:{required:!0,type:Array},canEdit:{required:!0,type:Boolean}},methods:{telechargementUrl(t){return unicaenVue.url("formule/administration/telecharger-tableur/"+t)},televersementUrl(){return unicaenVue.url("formule/administration/televerser-tableur")},detailsUrl(t){return unicaenVue.url("formule/administration/details/"+t)}}},A=t=>(z("data-v-ba77464f"),t=t(),B(),t),yt=A(()=>e("h1",null,"Formules de calcul",-1)),xt={class:"table table-bordered table-hover table-sort"},Ct=A(()=>e("thead",null,[e("tr",null,[e("th",null,"Libellé"),e("th",null,"Paramètres"),e("th",null,"Règle de délégation"),e("th",null,"Ressources")])],-1)),Vt=["title"],Pt=A(()=>e("br",null,null,-1)),St={key:0,class:"cartridge"},kt=A(()=>e("span",null,"intervenant",-1)),At=A(()=>e("span",null,"param1",-1)),Mt={key:1,class:"cartridge"},Dt=A(()=>e("span",null,"intervenant",-1)),Et=A(()=>e("span",null,"param2",-1)),Tt={key:2,class:"cartridge"},Ut=A(()=>e("span",null,"intervenant",-1)),Ft=A(()=>e("span",null,"param3",-1)),Rt={key:3,class:"cartridge"},It=A(()=>e("span",null,"intervenant",-1)),wt=A(()=>e("span",null,"param4",-1)),$t={key:4,class:"cartridge"},Lt=A(()=>e("span",null,"intervenant",-1)),Nt=A(()=>e("span",null,"param5",-1)),Ht={key:5,class:"cartridge"},jt=A(()=>e("span",null,"volume horaire",-1)),Ot=A(()=>e("span",null,"param1",-1)),qt={key:6,class:"cartridge"},zt=A(()=>e("span",null,"volume horaire",-1)),Bt=A(()=>e("span",null,"param2",-1)),Gt={key:7,class:"cartridge"},Jt=A(()=>e("span",null,"volume horaire",-1)),Yt=A(()=>e("span",null,"param3",-1)),Qt={key:8,class:"cartridge"},Wt=A(()=>e("span",null,"volume horaire",-1)),Xt=A(()=>e("span",null,"param4",-1)),Zt={key:9,class:"cartridge"},Kt=A(()=>e("span",null,"volume horaire",-1)),en=A(()=>e("span",null,"param5",-1)),tn={key:0},nn={key:1},sn=["href"],rn=A(()=>e("i",{class:"fas fa-table-cells"},null,-1)),an=A(()=>e("br",null,null,-1)),ln=["href"],on=A(()=>e("i",{class:"fas fa-table-cells"},null,-1)),dn=A(()=>e("br",null,null,-1)),un={key:0,class:"card bg-warning"},cn=A(()=>e("div",{class:"card-header"},[e("h3",null,"Création/Modification d'une formule à partir d'un tableur")],-1)),mn={class:"card-body"},hn=A(()=>e("div",{class:"alert alert-warning"},[e("span",{class:"icon iconly icon-attention"}),e("strong",null,"Attention :"),f(" cette opération peut avoir un impact déterminant sur le calcul de vos heures complémentaires et par extension sur tous vos paiements. En outre, le fichier doit être bâti selon un modèle bien précis. Vous êtes invités à ne téléverser que des tableurs préparés ou validés par l'équipe OSE. ")],-1)),_n=["action"],pn=K('<div class="form-group mb-3" data-v-ba77464f><label for="formule-name" data-v-ba77464f>Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier" data-v-ba77464f></div><div class="form-group" data-v-ba77464f><button type="submit" class="btn btn-primary" data-v-ba77464f>Ajout/Modification à partir d&#39;un tableur</button></div>',2),fn=[pn];function bn(t,n,s,b,r,i){return a(),l(y,null,[yt,e("table",xt,[Ct,e("tbody",null,[(a(!0),l(y,null,C(s.formules,d=>(a(),l("tr",{key:t.id,class:D({desactivee:!d.active}),title:d.active?"":"Cette formule est désactivée"},[e("td",null,[f(u(d.libelle),1),Pt,e("i",null,u(d.code),1)]),e("td",null,[d.iParam1Libelle?(a(),l("div",St,[kt,At,f(" "+u(d.iParam1Libelle),1)])):h("",!0),d.iParam2Libelle?(a(),l("div",Mt,[Dt,Et,f(" "+u(d.iParam2Libelle),1)])):h("",!0),d.iParam3Libelle?(a(),l("div",Tt,[Ut,Ft,f(" "+u(d.iParam3Libelle),1)])):h("",!0),d.iParam4Libelle?(a(),l("div",Rt,[It,wt,f(" "+u(d.iParam4Libelle),1)])):h("",!0),d.iParam5Libelle?(a(),l("div",$t,[Lt,Nt,f(" "+u(d.iParam5Libelle),1)])):h("",!0),d.vhParam1Libelle?(a(),l("div",Ht,[jt,Ot,f(" "+u(d.vhParam1Libelle),1)])):h("",!0),d.vhParam2Libelle?(a(),l("div",qt,[zt,Bt,f(" "+u(d.vhParam2Libelle),1)])):h("",!0),d.vhParam3Libelle?(a(),l("div",Gt,[Jt,Yt,f(" "+u(d.vhParam3Libelle),1)])):h("",!0),d.vhParam4Libelle?(a(),l("div",Qt,[Wt,Xt,f(" "+u(d.vhParam4Libelle),1)])):h("",!0),d.vhParam5Libelle?(a(),l("div",Zt,[Kt,en,f(" "+u(d.vhParam5Libelle),1)])):h("",!0)]),d.delegationAnnee?(a(),l("td",tn,[f("Avant "+u(d.delegationAnnee)+"/"+u(d.delegationAnnee+1)+", utilise ",1),e("i",null,u(d.delegationFormule),1)])):(a(),l("td",nn)),e("td",null,[e("a",{href:this.telechargementUrl(d.id)},[rn,f(" tableur")],8,sn),an,this.canEdit?(a(),l("a",{key:0,href:this.detailsUrl(d.id)},[on,f(" code PHP")],8,ln)):h("",!0)])],10,Vt))),128))])]),dn,this.canEdit?(a(),l("div",un,[cn,e("div",mn,[hn,e("form",{method:"post",enctype:"multipart/form-data",action:this.televersementUrl()},fn,8,_n)])])):h("",!0)],64)}const vn=S(gt,[["render",bn],["__scopeId","data-v-ba77464f"]]),gn=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),yn={name:"Details",components:{},props:{intervenant:{type:Number},data:{type:Object}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}};function xn(t,n,s,b,r,i){return" Coucou "+u(s.intervenant)+" "+u(s.data)}const Cn=S(yn,[["render",xn]]),Vn=Object.freeze(Object.defineProperty({__proto__:null,default:Cn},Symbol.toStringTag,{value:"Module"})),Pn={data(){return{dataUrl:unicaenVue.url("formule-test/data"),lines:[]}},methods:{addUrl(){return unicaenVue.url("formule-test/saisir")},editUrl(t){return unicaenVue.url("formule-test/saisir/:id",{id:t})},deleteUrl(t){return unicaenVue.url("formule-test/supprimer/:id",{id:t})},importUrl(){return unicaenVue.url("formule-test/import")},supprimerTest(t){return popConfirm(t.currentTarget,n=>{this.$refs.testsFormules.getData()}),!1}}},Sn=e("h1",{class:"page-header"},"Page de tests de formule de calcul des HETD",-1),kn=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"LIBELLE"},"Libellé"),e("th",{column:"FORMULE"},"Formule"),e("th",{column:"ANNEE"},"Année"),e("th",null," ")])],-1),An={style:{width:"1%","white-space":"nowrap"}},Mn=["href"],Dn=e("i",{class:"fas fa-pencil"},null,-1),En=[Dn],Tn=["href"],Un=e("i",{class:"fas fa-trash-can"},null,-1),Fn=[Un],Rn=e("br",null,null,-1),In=e("br",null,null,-1),wn={class:"card bg-warning"},$n=e("div",{class:"card-header"},[e("h3",null,"Import d'un nouveau test à partir d'un tableur")],-1),Ln={class:"card-body"},Nn=["action"],Hn=K('<div class="form-group mb-3"><label for="formule-name">Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier"></div><div class="form-group"><button type="submit" class="btn btn-primary">Import d&#39;un test à partir d&#39;un tableur</button></div>',2),jn=[Hn];function On(t,n,s,b,r,i){const d=ee,m=te;return a(),l(y,null,[Sn,_(d,{"data-url":this.dataUrl,modelValue:r.lines,"onUpdate:modelValue":n[1]||(n[1]=c=>r.lines=c),ref:"testsFormules"},{default:U(()=>[kn,e("tbody",null,[(a(!0),l(y,null,C(r.lines,(c,o)=>(a(),l("tr",{key:o},[e("td",null,u(c.ID),1),e("td",null,u(c.LIBELLE),1),e("td",null,u(c.FORMULE),1),e("td",null,u(c.ANNEE),1),e("td",An,[e("a",{href:i.editUrl(c.ID),title:"Modification du test de formule"},En,8,Mn),f("   "),e("a",{href:i.deleteUrl(c.ID),title:"Suppression du test de formule","data-content":"Êtes-vous sur de vouloir supprimer ce test ?","data-title":"Suppression du test de formule",onClick:n[0]||(n[0]=P((...V)=>i.supprimerTest&&i.supprimerTest(...V),["prevent"]))},Fn,8,Tn)])]))),128))])]),_:1},8,["data-url","modelValue"]),_(m,{variant:"primary",href:i.addUrl()},{default:U(()=>[f("Ajout d'un nouveau test")]),_:1},8,["href"]),Rn,In,e("div",wn,[$n,e("div",Ln,[e("form",{method:"post",enctype:"multipart/form-data",action:this.importUrl()},jn,8,Nn)])])],64)}const qn=S(Pn,[["render",On]]),zn=Object.freeze(Object.defineProperty({__proto__:null,default:qn},Symbol.toStringTag,{value:"Module"})),Bn={props:{id:{type:Number},formules:{type:Object},annees:{type:Object},typesIntervenants:{type:Object},typesVolumesHoraires:{type:Object},etatsVolumesHoraires:{type:Object},defaultFormule:{type:Number}},data(){return{indexUrl:unicaenVue.url("formule-test"),dataUrl:unicaenVue.url("formule-test/data"),tauxAutre1Visibility:!0,tauxAutre2Visibility:!1,tauxAutre3Visibility:!1,tauxAutre4Visibility:!1,tauxAutre5Visibility:!1,resMode:"hetd",debug:{},intervenant:{formule:void 0,tauxCmServiceDu:1.5,tauxCmServiceCompl:1.5,tauxTpServiceDu:1,tauxTpServiceCompl:.6666666666667},volumesHoraires:[],formule:{iParam1Libelle:void 0,iParam2Libelle:void 0,iParam3Libelle:void 0,iParam4Libelle:void 0,iParam5Libelle:void 0,vhParam1Libelle:void 0,vhParam2Libelle:void 0,vhParam3Libelle:void 0,vhParam4Libelle:void 0,vhParam5Libelle:void 0},structures:{},typesIntervention:["CM","TD","TP",void 0,void 0,void 0,void 0,void 0,"Référentiel"]}},watch:{"intervenant.tauxAutre1Code"(t){this.tauxAutre2Visibility=t||this.intervenant.tauxAutre1Code||this.intervenant.tauxAutre2ServiceDu||this.intervenant.tauxAutre2ServiceCompl,this.typesIntervention[3]=t},"intervenant.tauxAutre2Code"(t){this.tauxAutre3Visibility=t||this.intervenant.tauxAutre2Code||this.intervenant.tauxAutre3ServiceDu||this.intervenant.tauxAutre3ServiceCompl,this.typesIntervention[4]=t},"intervenant.tauxAutre3Code"(t){this.tauxAutre4Visibility=t||this.intervenant.tauxAutre3Code||this.intervenant.tauxAutre4ServiceDu||this.intervenant.tauxAutre4ServiceCompl,this.typesIntervention[5]=t},"intervenant.tauxAutre4Code"(t){this.tauxAutre5Visibility=t||this.intervenant.tauxAutre4Code||this.intervenant.tauxAutre5ServiceDu||this.intervenant.tauxAutre5ServiceCompl,this.typesIntervention[6]=t},"intervenant.tauxAutre5Code"(t){this.typesIntervention[7]=t},"intervenant.formule"(t){t&&(this.formule=this.formules[t])}},computed:{filteredTypesIntervention(){let t=Object.values(this.typesIntervention).filter(n=>n);return t.unshift(""),t},vhParamCount(){let t=0;for(let n=1;n<6;n++)this.formule["vhParam"+n+"Libelle"]&&t++;return t}},methods:{charger(){unicaenVue.axios.get(unicaenVue.url("formule-test/saisir-data/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0})).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,this.debug={},this.addVolumeHoraire(),this.updateStructures()})},enregistrer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,t.data.debug?this.debug=t.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},calculer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires,simpleCalcul:!0}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,t.data.debug?this.debug=t.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},exporter:function(){const t={intervenant:this.intervenant,volumesHoraires:this.volumesHoraires},n=this.intervenant.libelle;var s=document.createElement("a"),b=new Blob([JSON.stringify(t)],{type:"text/json"});s.href=window.URL.createObjectURL(b),s.download="Test de formule "+n+".json",s.click()},exporterCsv:function(){let t=`Structure;Compte dans le service statutaire;Heures non payables;Type d’intervention;Taux FI;Taux FA;Taux FC;Modulation service dû;Modulation service compl.;Param 1;Param 2;Param 3;Param 4;Param 5;Heures;Service FI;Service FA;Service FC;Service Référentiel;HC FI;HC FA;HC FC;HC Référentiel;Primes;Non payable FI;Non payable FA;Non payable FC;Non payable Référentiel
`;for(const r in this.volumesHoraires){const i=this.volumesHoraires[r];t+=(i.structureCode?i.structureCode:"")+";"+(i.serviceStatutaire?"Oui":"Non")+";"+(i.nonPayable?"Oui":"Non")+";"+(i.referentiel?"Référentiel":i.typeInterventionCode?i.typeInterventionCode:"")+";"+(i.tauxFi?i.tauxFi.toLocaleString("fr-FR"):"")+";"+(i.tauxFa?i.tauxFa.toLocaleString("fr-FR"):"")+";"+(i.tauxFc?i.tauxFc.toLocaleString("fr-FR"):"")+";"+(i.ponderationServiceDu?i.ponderationServiceDu.toLocaleString("fr-FR"):"")+";"+(i.ponderationServiceCompl?i.ponderationServiceCompl.toLocaleString("fr-FR"):"")+";"+(i.param1?i.param1:"")+";"+(i.param2?i.param2:"")+";"+(i.param3?i.param3:"")+";"+(i.param4?i.param4:"")+";"+(i.param5?i.param5:"")+";"+(i.heures?i.heures.toLocaleString("fr-FR"):"")+";"+(i.heuresServiceFi?i.heuresServiceFi.toLocaleString("fr-FR"):"")+";"+(i.heuresServiceFa?i.heuresServiceFa.toLocaleString("fr-FR"):"")+";"+(i.heuresServiceFc?i.heuresServiceFc.toLocaleString("fr-FR"):"")+";"+(i.heuresServiceReferentiel?i.heuresServiceReferentiel.toLocaleString("fr-FR"):"")+";"+(i.heuresComplFi?i.heuresComplFi.toLocaleString("fr-FR"):"")+";"+(i.heuresComplFa?i.heuresComplFa.toLocaleString("fr-FR"):"")+";"+(i.heuresComplFc?i.heuresComplFc.toLocaleString("fr-FR"):"")+";"+(i.heuresComplReferentiel?i.heuresComplReferentiel.toLocaleString("fr-FR"):"")+";"+(i.heuresPrimes?i.heuresPrimes.toLocaleString("fr-FR"):"")+";"+(i.heuresNonPayableFi?i.heuresNonPayableFi.toLocaleString("fr-FR"):"")+";"+(i.heuresNonPayableFa?i.heuresNonPayableFa.toLocaleString("fr-FR"):"")+";"+(i.heuresNonPayableFc?i.heuresNonPayableFc.toLocaleString("fr-FR"):"")+";"+(i.heuresNonPayableReferentiel?i.heuresNonPayableReferentiel.toLocaleString("fr-FR"):"")+`;
`}const n=this.intervenant.libelle;var s=document.createElement("a"),b=new Blob([t],{type:"text/csv"});s.href=window.URL.createObjectURL(b),s.download="Test de formule "+n+".csv",s.click()},importer:function(t){const n=t.target.files[0];if(!n.type.match("application/json")){console.error("Le fichier n'est pas de type JSON.");return}const s=new FileReader;s.onload=b=>{try{const r=JSON.parse(b.target.result);this.intervenant=r.intervenant,this.volumesHoraires=r.volumesHoraires,this.updateStructures()}catch(r){console.error("Erreur lors de l'analyse du contenu JSON :",r)}},s.readAsText(n)},dropTauxNonUtilises(t){return t.tauxAutre1Code||(t.tauxAutre1ServiceDu=void 0,t.tauxAutre1ServiceCompl=void 0),t.tauxAutre2Code||(t.tauxAutre2ServiceDu=void 0,t.tauxAutre2ServiceCompl=void 0),t.tauxAutre3Code||(t.tauxAutre3ServiceDu=void 0,t.tauxAutre3ServiceCompl=void 0),t.tauxAutre4Code||(t.tauxAutre4ServiceDu=void 0,t.tauxAutre4ServiceCompl=void 0),t.tauxAutre5Code||(t.tauxAutre5ServiceDu=void 0,t.tauxAutre5ServiceCompl=void 0),t},updateStructures(){let t={"":""};this.intervenant.structureCode&&(t[this.intervenant.structureCode]=this.intervenant.structureCode);for(let n in this.volumesHoraires){const s=this.volumesHoraires[n].structureCode;s&&(t[s]=s)}t.__UNIV__="Université (établissement)",t.__EXTERIEUR__="Extérieur (autre établissement)",t.__new_structure__="- Ajout d'une nouvelle structure -",this.structures=t},selectStructure(t){if(t.target.value=="__new_structure__"&&this.addStructure(t.target),t.target.dataset.variable!="intervenant"){const n=parseInt(t.target.dataset.variable);n==this.lastVolumeHoraireIndex()&&this.volumesHoraires[n].structureCode&&this.addVolumeHoraire()}},majTauxFi(t){const n=t.target.dataset.variable;this.volumesHoraires[n].tauxFi=1-this.volumesHoraires[n].tauxFa-this.volumesHoraires[n].tauxFc},lastVolumeHoraireIndex(){return this.volumesHoraires.length==0?-1:parseInt(Object.keys(this.volumesHoraires).pop())},addVolumeHoraire(){this.volumesHoraires.push({structureCode:null,typeInterventionCode:null,tauxFi:1,tauxFa:0,tauxFc:0,ponderationServiceDu:1,ponderationServiceCompl:1,serviceStatutaire:!0,heures:null})},addStructure(t){const n=prompt("Ajout d'une nouvelle structure");this.structures[n]=n,setTimeout(()=>{const s=t.dataset.variable;s=="intervenant"?this.intervenant.structureCode=n:this.volumesHoraires[s].structureCode=n},200)}},mounted(){this.charger()}},x=t=>(z("data-v-3894f4a0"),t=t(),B(),t),Gn=x(()=>e("h1",{class:"page-header"},"Modification d'un test de formule",-1)),Jn={class:"row"},Yn={class:"col-md-6"},Qn=x(()=>e("h2",null,"Intervenant",-1)),Wn={class:"table table-xs table-bordered fti"},Xn=x(()=>e("th",null,"Libellé",-1)),Zn={class:"saisie"},Kn=x(()=>e("th",null,"Formule",-1)),es={class:"saisie"},ts=["value"],ss=x(()=>e("th",null,"Année",-1)),rs={class:"saisie"},is=["value"],as=x(()=>e("th",null,"Type",-1)),ls={class:"saisie"},os=["value"],ds=x(()=>e("th",null,"Structure",-1)),us={class:"saisie"},cs=["value"],ms=x(()=>e("th",null,"Type de volume horaire",-1)),hs={class:"saisie"},_s=["value"],ps=x(()=>e("th",null,"État de volume horaire",-1)),fs={class:"saisie"},bs=["value"],vs=x(()=>e("th",null,"Heures de service statutaire",-1)),gs={class:"saisie"},ys=x(()=>e("th",null,"Heures de service modifié",-1)),xs={class:"saisie"},Cs=x(()=>e("th",null,"Dépassement de service dû sans HC",-1)),Vs={class:"saisie"},Ps=x(()=>e("option",{value:!0},"Oui",-1)),Ss=x(()=>e("option",{value:!1},"Non",-1)),ks=[Ps,Ss],As={class:"i-param i-param-1"},Ms={class:"i-param"},Ds={class:"saisie"},Es={class:"i-param i-param-2"},Ts={class:"i-param"},Us={class:"saisie"},Fs={class:"i-param i-param-3"},Rs={class:"i-param"},Is={class:"saisie"},ws={class:"i-param i-param-4"},$s={class:"i-param"},Ls={class:"saisie"},Ns={class:"i-param i-param-5"},Hs={class:"i-param"},js={class:"saisie"},Os={class:"actions"},qs={class:"row mb-4"},zs={class:"col-md-6"},Bs={class:"col-md-6"},Gs={class:"row mb-4"},Js={class:"col-md-6"},Ys={class:"col-md-6"},Qs={for:"importbtn"},Ws=x(()=>e("span",{class:"btn btn-secondary"},"Téléverser un jeu de données",-1)),Xs={class:"row"},Zs={class:"col-md-6"},Ks={class:"col-md-5"},er=x(()=>e("h2",null,"Types d'intervention (HETD)",-1)),tr={class:"types-interventions"},nr={class:"table table-bordered table-xs"},sr=x(()=>e("tr",null,[e("th"),e("th",{colspan:"3"},"Standards"),e("th",{colspan:"5"},"Personnalisés")],-1)),rr=x(()=>e("th",{style:{width:"20%"}},null,-1)),ir=x(()=>e("th",{style:{width:"5%"}},"CM",-1)),ar=x(()=>e("th",{style:{width:"5%"}},"TD",-1)),lr=x(()=>e("th",{style:{width:"5%"}},"TP",-1)),or={style:{width:"10%"}},dr={style:{width:"10%"}},ur={style:{width:"10%"}},cr={style:{width:"10%"}},mr={style:{width:"10%"}},hr=x(()=>e("th",null,"En service",-1)),_r={class:"saisie"},pr=x(()=>e("td",null,"1",-1)),fr={class:"saisie"},br={class:"saisie"},vr={class:"saisie"},gr={class:"saisie"},yr={class:"saisie"},xr={class:"saisie"},Cr=x(()=>e("th",null,"Au-delà du service",-1)),Vr={class:"saisie"},Pr=x(()=>e("td",null,"1",-1)),Sr={class:"saisie"},kr={class:"saisie"},Ar={class:"saisie"},Mr={class:"saisie"},Dr={class:"saisie"},Er={class:"saisie"},Tr=x(()=>e("h2",null,"Résultat",-1)),Ur={class:"table table-xs table-bordered resultats"},Fr=x(()=>e("th",{colspan:"2"},"Service dû",-1)),Rr=x(()=>e("th",{rowspan:"4"},"Service",-1)),Ir=x(()=>e("th",null,"FI",-1)),wr=x(()=>e("th",null,"FA",-1)),$r=x(()=>e("th",null,"FC",-1)),Lr=x(()=>e("th",null,"Référentiel",-1)),Nr=x(()=>e("th",{colspan:"2"},"Total service dû assuré",-1)),Hr=x(()=>e("th",{rowspan:"4"},"Heures compl.",-1)),jr=x(()=>e("th",null,"FI",-1)),Or=x(()=>e("th",null,"FA",-1)),qr=x(()=>e("th",null,"FC",-1)),zr=x(()=>e("th",null,"Référentiel",-1)),Br=x(()=>e("th",{colspan:"2"},"Total heures compl. à payer",-1)),Gr=x(()=>e("th",{colspan:"2"},"Primes",-1)),Jr=x(()=>e("th",{rowspan:"4"},"Heures non payables",-1)),Yr=x(()=>e("th",null,"FI",-1)),Qr=x(()=>e("th",null,"FA",-1)),Wr=x(()=>e("th",null,"FC",-1)),Xr=x(()=>e("th",null,"Référentiel",-1)),Zr=x(()=>e("th",{colspan:"2"},"Total heures non payables",-1)),Kr=x(()=>e("h2",null,"Heures effectuées (A saisir de manière chronologique)",-1)),ei={class:"table table-bordered table-xs table-hover fvh"},ti=x(()=>e("th",{rowspan:"3"},null,-1)),ni=["colspan"],si=x(()=>e("th",{rowspan:"3",class:"spacer"}," ",-1)),ri={colspan:"13"},ii=x(()=>e("option",{value:"attendu"},"Résultats attendus (en HETD)",-1)),ai=x(()=>e("option",{value:"hetd",selected:"selected"},"Résultats calculés (en HETD)",-1)),li=x(()=>e("option",{value:"debug"},"Informations de débogage",-1)),oi=[ii,ai,li],di=x(()=>e("th",{rowspan:"2",style:{"min-width":"10em"}},"Structure",-1)),ui=x(()=>e("th",{rowspan:"2"},"Compte dans le service statutaire",-1)),ci=x(()=>e("th",{rowspan:"2",style:{"min-width":"5em"}},"Type d'intervention",-1)),mi=x(()=>e("th",{colspan:"3"},"Répartition",-1)),hi=x(()=>e("th",{colspan:"2"},"Modulation",-1)),_i=["colspan"],pi=x(()=>e("th",{rowspan:"2"},"Heures",-1)),fi={colspan:"4"},bi={colspan:"4"},vi={rowspan:"2"},gi={colspan:"4"},yi={colspan:"4"},xi={colspan:"4"},Ci={rowspan:"2"},Vi={colspan:"4"},Pi={rowspan:"2"},Si=x(()=>e("th",null,"Fi",-1)),ki=x(()=>e("th",null,"Fa",-1)),Ai=x(()=>e("th",null,"Fc",-1)),Mi=x(()=>e("th",null,"Service dû",-1)),Di=x(()=>e("th",null,"Service compl.",-1)),Ei=["onUpdate:modelValue","data-variable"],Ti=["value"],Ui=["onUpdate:modelValue"],Fi=x(()=>e("option",{value:!0},"Oui",-1)),Ri=x(()=>e("option",{value:!1},"Non",-1)),Ii=[Fi,Ri],wi=["onUpdate:modelValue"],$i=["value"],Li=x(()=>e("span",{class:"pourc"},"%",-1)),Ni=x(()=>e("span",{class:"pourc"},"%",-1)),Hi=x(()=>e("span",{class:"pourc"},"%",-1)),ji=x(()=>e("span",{class:"pourc"},"%",-1)),Oi=x(()=>e("span",{class:"pourc"},"%",-1)),qi=["onUpdate:modelValue"],zi=["onUpdate:modelValue"],Bi=["onUpdate:modelValue"],Gi=["onUpdate:modelValue"],Ji=["onUpdate:modelValue"],Yi=x(()=>e("td",{class:"spacer"},null,-1)),Qi={class:"debug-td"},Wi={key:0},Xi={class:"debug-cell"},Zi={class:"debug-val"},Ki={key:0},ea=x(()=>e("h4",null,"Débogage : calculs globaux",-1)),ta={class:"debug-cell"},na={class:"debug-val"},sa=["href"],ra=x(()=>e("i",{class:"fas fa-rotate-left","aria-hidden":"true"},null,-1));function ia(t,n,s,b,r,i){const d=F("u-input-float"),m=te,c=F("u-heures");return a(),l(y,null,[Gn,e("div",Jn,[e("div",Yn,[Qn,e("table",Wn,[e("tr",null,[Xn,e("td",Zn,[v(e("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>r.intervenant.libelle=o),class:"dinput"},null,512),[[E,r.intervenant.libelle]])])]),e("tr",null,[Kn,e("td",es,[v(e("select",{"onUpdate:modelValue":n[1]||(n[1]=o=>r.intervenant.formule=o),class:"dinput"},[(a(!0),l(y,null,C(s.formules,o=>(a(),l("option",{value:o.id},u(o.libelle),9,ts))),256))],512),[[T,r.intervenant.formule]])])]),e("tr",null,[ss,e("td",rs,[v(e("select",{"onUpdate:modelValue":n[2]||(n[2]=o=>r.intervenant.annee=o),class:"dinput"},[(a(!0),l(y,null,C(s.annees,o=>(a(),l("option",{value:o.id},u(o.libelle),9,is))),256))],512),[[T,r.intervenant.annee]])])]),e("tr",null,[as,e("td",ls,[v(e("select",{"onUpdate:modelValue":n[3]||(n[3]=o=>r.intervenant.typeIntervenant=o),class:"dinput"},[(a(!0),l(y,null,C(s.typesIntervenants,o=>(a(),l("option",{value:o.id},u(o.libelle),9,os))),256))],512),[[T,r.intervenant.typeIntervenant]])])]),e("tr",null,[ds,e("td",us,[v(e("select",{"onUpdate:modelValue":n[4]||(n[4]=o=>r.intervenant.structureCode=o),"data-variable":"intervenant",class:"dinput",onChange:n[5]||(n[5]=(...o)=>i.selectStructure&&i.selectStructure(...o))},[(a(!0),l(y,null,C(r.structures,(o,V)=>(a(),l("option",{value:V,key:V},u(o),9,cs))),128))],544),[[T,r.intervenant.structureCode]])])]),e("tr",null,[ms,e("td",hs,[v(e("select",{"onUpdate:modelValue":n[6]||(n[6]=o=>r.intervenant.typeVolumeHoraire=o),class:"dinput"},[(a(!0),l(y,null,C(s.typesVolumesHoraires,o=>(a(),l("option",{value:o.id},u(o.libelle),9,_s))),256))],512),[[T,r.intervenant.typeVolumeHoraire]])])]),e("tr",null,[ps,e("td",fs,[v(e("select",{"onUpdate:modelValue":n[7]||(n[7]=o=>r.intervenant.etatVolumeHoraire=o),class:"dinput"},[(a(!0),l(y,null,C(s.etatsVolumesHoraires,o=>(a(),l("option",{value:o.id},u(o.libelle),9,bs))),256))],512),[[T,r.intervenant.etatVolumeHoraire]])])]),e("tr",null,[vs,e("td",gs,[_(d,{modelValue:r.intervenant.heuresServiceStatutaire,"onUpdate:modelValue":n[8]||(n[8]=o=>r.intervenant.heuresServiceStatutaire=o),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[ys,e("td",xs,[_(d,{modelValue:r.intervenant.heuresServiceModifie,"onUpdate:modelValue":n[9]||(n[9]=o=>r.intervenant.heuresServiceModifie=o),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[Cs,e("td",Vs,[v(e("select",{"onUpdate:modelValue":n[10]||(n[10]=o=>r.intervenant.depassementServiceDuSansHC=o),class:"dinput"},ks,512),[[T,r.intervenant.depassementServiceDuSansHC]])])]),v(e("tr",As,[e("th",Ms,u(r.formule.iParam1Libelle),1),e("td",Ds,[v(e("input",{"onUpdate:modelValue":n[11]||(n[11]=o=>r.intervenant.param1=o),class:"dinput"},null,512),[[E,r.intervenant.param1]])])],512),[[g,r.formule.iParam1Libelle]]),v(e("tr",Es,[e("th",Ts,u(r.formule.iParam2Libelle),1),e("td",Us,[v(e("input",{"onUpdate:modelValue":n[12]||(n[12]=o=>r.intervenant.param2=o),class:"dinput"},null,512),[[E,r.intervenant.param2]])])],512),[[g,r.formule.iParam2Libelle]]),v(e("tr",Fs,[e("th",Rs,u(r.formule.iParam3Libelle),1),e("td",Is,[v(e("input",{"onUpdate:modelValue":n[13]||(n[13]=o=>r.intervenant.param3=o),class:"dinput"},null,512),[[E,r.intervenant.param3]])])],512),[[g,r.formule.iParam3Libelle]]),v(e("tr",ws,[e("th",$s,u(r.formule.iParam4Libelle),1),e("td",Ls,[v(e("input",{"onUpdate:modelValue":n[14]||(n[14]=o=>r.intervenant.param4=o),class:"dinput"},null,512),[[E,r.intervenant.param4]])])],512),[[g,r.formule.iParam4Libelle]]),v(e("tr",Ns,[e("th",Hs,u(r.formule.iParam5Libelle),1),e("td",js,[v(e("input",{"onUpdate:modelValue":n[15]||(n[15]=o=>r.intervenant.param5=o),class:"dinput"},null,512),[[E,r.intervenant.param5]])])],512),[[g,r.formule.iParam5Libelle]])]),e("div",Os,[e("div",qs,[e("div",zs,[_(m,{variant:"primary",onClick:i.enregistrer},{default:U(()=>[f("Enregistrer les données")]),_:1},8,["onClick"])]),e("div",Bs,[_(m,{variant:"secondary",onClick:i.calculer},{default:U(()=>[f("Calculer les HETD")]),_:1},8,["onClick"])])]),e("div",Gs,[e("div",Js,[e("button",{class:"exporter btn btn-secondary",onClick:n[16]||(n[16]=(...o)=>i.exporter&&i.exporter(...o))},"Télécharger les données")]),e("div",Ys,[e("label",Qs,[Ws,e("input",{type:"file",id:"importbtn",class:"importer",onChange:n[17]||(n[17]=(...o)=>i.importer&&i.importer(...o))},null,32)])])]),e("div",Xs,[e("div",Zs,[e("button",{class:"exporter btn btn-secondary",onClick:n[18]||(n[18]=(...o)=>i.exporterCsv&&i.exporterCsv(...o))},"Télécharger les données en CSV ")])])])]),e("div",Ks,[er,e("div",tr,[e("table",nr,[sr,e("tr",null,[rr,ir,ar,lr,v(e("th",or,[v(e("input",{"onUpdate:modelValue":n[19]||(n[19]=o=>r.intervenant.tauxAutre1Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre1Code]])],512),[[g,r.tauxAutre1Visibility]]),v(e("th",dr,[v(e("input",{"onUpdate:modelValue":n[20]||(n[20]=o=>r.intervenant.tauxAutre2Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre2Code]])],512),[[g,r.tauxAutre2Visibility]]),v(e("th",ur,[v(e("input",{"onUpdate:modelValue":n[21]||(n[21]=o=>r.intervenant.tauxAutre3Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre3Code]])],512),[[g,r.tauxAutre3Visibility]]),v(e("th",cr,[v(e("input",{"onUpdate:modelValue":n[22]||(n[22]=o=>r.intervenant.tauxAutre4Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre4Code]])],512),[[g,r.tauxAutre4Visibility]]),v(e("th",mr,[v(e("input",{"onUpdate:modelValue":n[23]||(n[23]=o=>r.intervenant.tauxAutre5Code=o),class:"dinput"},null,512),[[E,r.intervenant.tauxAutre5Code]])],512),[[g,r.tauxAutre5Visibility]])]),e("tr",null,[hr,e("td",_r,[_(d,{modelValue:r.intervenant.tauxCmServiceDu,"onUpdate:modelValue":n[24]||(n[24]=o=>r.intervenant.tauxCmServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),pr,e("td",fr,[_(d,{modelValue:r.intervenant.tauxTpServiceDu,"onUpdate:modelValue":n[25]||(n[25]=o=>r.intervenant.tauxTpServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),v(e("td",br,[_(d,{modelValue:r.intervenant.tauxAutre1ServiceDu,"onUpdate:modelValue":n[26]||(n[26]=o=>r.intervenant.tauxAutre1ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre1Visibility]]),v(e("td",vr,[_(d,{modelValue:r.intervenant.tauxAutre2ServiceDu,"onUpdate:modelValue":n[27]||(n[27]=o=>r.intervenant.tauxAutre2ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre2Visibility]]),v(e("td",gr,[_(d,{modelValue:r.intervenant.tauxAutre3ServiceDu,"onUpdate:modelValue":n[28]||(n[28]=o=>r.intervenant.tauxAutre3ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre3Visibility]]),v(e("td",yr,[_(d,{modelValue:r.intervenant.tauxAutre4ServiceDu,"onUpdate:modelValue":n[29]||(n[29]=o=>r.intervenant.tauxAutre4ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre4Visibility]]),v(e("td",xr,[_(d,{modelValue:r.intervenant.tauxAutre5ServiceDu,"onUpdate:modelValue":n[30]||(n[30]=o=>r.intervenant.tauxAutre5ServiceDu=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre5Visibility]])]),e("tr",null,[Cr,e("td",Vr,[_(d,{modelValue:r.intervenant.tauxCmServiceCompl,"onUpdate:modelValue":n[31]||(n[31]=o=>r.intervenant.tauxCmServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),Pr,e("td",Sr,[_(d,{modelValue:r.intervenant.tauxTpServiceCompl,"onUpdate:modelValue":n[32]||(n[32]=o=>r.intervenant.tauxTpServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])]),v(e("td",kr,[_(d,{modelValue:r.intervenant.tauxAutre1ServiceCompl,"onUpdate:modelValue":n[33]||(n[33]=o=>r.intervenant.tauxAutre1ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre1Visibility]]),v(e("td",Ar,[_(d,{modelValue:r.intervenant.tauxAutre2ServiceCompl,"onUpdate:modelValue":n[34]||(n[34]=o=>r.intervenant.tauxAutre2ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre2Visibility]]),v(e("td",Mr,[_(d,{modelValue:r.intervenant.tauxAutre3ServiceCompl,"onUpdate:modelValue":n[35]||(n[35]=o=>r.intervenant.tauxAutre3ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre3Visibility]]),v(e("td",Dr,[_(d,{modelValue:r.intervenant.tauxAutre4ServiceCompl,"onUpdate:modelValue":n[36]||(n[36]=o=>r.intervenant.tauxAutre4ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre4Visibility]]),v(e("td",Er,[_(d,{modelValue:r.intervenant.tauxAutre5ServiceCompl,"onUpdate:modelValue":n[37]||(n[37]=o=>r.intervenant.tauxAutre5ServiceCompl=o),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,r.tauxAutre5Visibility]])])])]),Tr,e("table",Ur,[e("tr",null,[Fr,e("td",null,[_(c,{valeur:r.intervenant.serviceDu??NaN},null,8,["valeur"])])]),e("tr",null,[Rr,Ir,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFi??NaN},null,8,["valeur"])])]),e("tr",null,[wr,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFa??NaN},null,8,["valeur"])])]),e("tr",null,[$r,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceFc??NaN},null,8,["valeur"])])]),e("tr",null,[Lr,e("td",null,[_(c,{valeur:r.intervenant.heuresServiceReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[Nr,e("td",null,[_(c,{valeur:r.intervenant.heuresService??NaN},null,8,["valeur"])])]),e("tr",null,[Hr,jr,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFi??NaN},null,8,["valeur"])])]),e("tr",null,[Or,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFa??NaN},null,8,["valeur"])])]),e("tr",null,[qr,e("td",null,[_(c,{valeur:r.intervenant.heuresComplFc??NaN},null,8,["valeur"])])]),e("tr",null,[zr,e("td",null,[_(c,{valeur:r.intervenant.heuresComplReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[Br,e("td",null,[_(c,{valeur:r.intervenant.heuresCompl??NaN},null,8,["valeur"])])]),e("tr",null,[Gr,e("td",null,[_(c,{valeur:r.intervenant.heuresPrimes??NaN},null,8,["valeur"])])]),e("tr",null,[Jr,Yr,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFi??NaN},null,8,["valeur"])])]),e("tr",null,[Qr,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFa??NaN},null,8,["valeur"])])]),e("tr",null,[Wr,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableFc??NaN},null,8,["valeur"])])]),e("tr",null,[Xr,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayableReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[Zr,e("td",null,[_(c,{valeur:r.intervenant.heuresNonPayable??NaN},null,8,["valeur"])])])])]),Kr,e("table",ei,[e("thead",null,[e("tr",null,[ti,e("th",{colspan:9+i.vhParamCount,class:"vh-donnees"},"Données",8,ni),si,e("th",ri,[v(e("select",{"onUpdate:modelValue":n[38]||(n[38]=o=>r.resMode=o),class:"form-select res-mode"},oi,512),[[T,r.resMode]])])]),e("tr",null,[di,ui,ci,mi,hi,v(e("th",{colspan:i.vhParamCount},"Paramètres",8,_i),[[g,i.vhParamCount>0]]),pi,v(e("th",fi,"Service",512),[[g,r.resMode=="attendu"]]),v(e("th",bi,"Heures compl.",512),[[g,r.resMode=="attendu"]]),v(e("th",vi,"Primes",512),[[g,r.resMode=="attendu"]]),v(e("th",gi,"Heures non payables",512),[[g,r.resMode=="attendu"]]),v(e("th",yi,"Service",512),[[g,r.resMode=="hetd"]]),v(e("th",xi,"Heures compl.",512),[[g,r.resMode=="hetd"]]),v(e("th",Ci,"Primes",512),[[g,r.resMode=="hetd"]]),v(e("th",Vi,"Heures non payables",512),[[g,r.resMode=="hetd"]]),v(e("th",Pi,"Informations de débogage",512),[[g,r.resMode=="debug"]])]),e("tr",null,[Si,ki,Ai,Mi,Di,(a(),l(y,null,C([1,2,3,4,5],o=>v(e("th",{key:o},u(r.formule["vhParam"+o+"Libelle"]),1),[[g,r.formule["vhParam"+o+"Libelle"]]])),64)),v(e("th",null,"Fi",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fi",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,r.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,r.resMode=="hetd"]])])]),e("tbody",null,[(a(!0),l(y,null,C(r.volumesHoraires,(o,V)=>(a(),l("tr",{key:V},[e("th",null,u(V+1),1),e("td",null,[v(e("select",{"onUpdate:modelValue":p=>o.structureCode=p,"data-variable":V,class:"dinput",onChange:n[39]||(n[39]=(...p)=>i.selectStructure&&i.selectStructure(...p))},[(a(!0),l(y,null,C(r.structures,(p,M)=>(a(),l("option",{value:M,key:M},u(p),9,Ti))),128))],40,Ei),[[T,o.structureCode]])]),e("td",null,[v(e("select",{"onUpdate:modelValue":p=>o.serviceStatutaire=p,class:"dinput"},Ii,8,Ui),[[T,o.serviceStatutaire],[g,o.structureCode]])]),e("td",null,[v(e("select",{"onUpdate:modelValue":p=>o.typeInterventionCode=p,class:"dinput"},[(a(!0),l(y,null,C(i.filteredTypesIntervention,p=>(a(),l("option",{value:p,key:p},u(p),9,$i))),128))],8,wi),[[T,o.typeInterventionCode],[g,o.structureCode]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:o.tauxFi,"onUpdate:modelValue":p=>o.tauxFi=p,"is-pourc":"",class:"doutput",readonly:"",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),Li],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:o.tauxFa,"onUpdate:modelValue":p=>o.tauxFa=p,"is-pourc":"",class:"dinput","data-variable":V,onChange:i.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange"]),Ni],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:o.tauxFc,"onUpdate:modelValue":p=>o.tauxFc=p,"is-pourc":"",class:"dinput","data-variable":V,onChange:i.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange"]),Hi],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:o.ponderationServiceDu,"onUpdate:modelValue":p=>o.ponderationServiceDu=p,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),ji],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:o.ponderationServiceCompl,"onUpdate:modelValue":p=>o.ponderationServiceCompl=p,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),Oi],512),[[g,!["",null,"Référentiel"].includes(o.typeInterventionCode)]])]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>o.param1=p,class:"dinput"},null,8,qi),[[E,o.param1],[g,o.structureCode]])],512),[[g,r.formule.vhParam1Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>o.param2=p,class:"dinput"},null,8,zi),[[E,o.param2],[g,o.structureCode]])],512),[[g,r.formule.vhParam2Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>o.param3=p,class:"dinput"},null,8,Bi),[[E,o.param3],[g,o.structureCode]])],512),[[g,r.formule.vhParam3Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>o.param4=p,class:"dinput"},null,8,Gi),[[E,o.param4],[g,o.structureCode]])],512),[[g,r.formule.vhParam4Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>o.param5=p,class:"dinput"},null,8,Ji),[[E,o.param5],[g,o.structureCode]])],512),[[g,r.formule.vhParam5Libelle]]),e("td",null,[v(_(d,{modelValue:o.heures,"onUpdate:modelValue":p=>o.heures=p,class:"dinput",onChange:i.calculer},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[g,!["",null].includes(o.typeInterventionCode)]])]),Yi,v(e("td",null,[_(d,{modelValue:o.heuresAttenduesServiceFi,"onUpdate:modelValue":p=>o.heuresAttenduesServiceFi=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesServiceFa,"onUpdate:modelValue":p=>o.heuresAttenduesServiceFa=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesServiceFc,"onUpdate:modelValue":p=>o.heuresAttenduesServiceFc=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesServiceReferentiel,"onUpdate:modelValue":p=>o.heuresAttenduesServiceReferentiel=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesComplFi,"onUpdate:modelValue":p=>o.heuresAttenduesComplFi=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesComplFa,"onUpdate:modelValue":p=>o.heuresAttenduesComplFa=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesComplFc,"onUpdate:modelValue":p=>o.heuresAttenduesComplFc=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesComplReferentiel,"onUpdate:modelValue":p=>o.heuresAttenduesComplReferentiel=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesPrimes,"onUpdate:modelValue":p=>o.heuresAttenduesPrimes=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesNonPayableFi,"onUpdate:modelValue":p=>o.heuresAttenduesNonPayableFi=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesNonPayableFa,"onUpdate:modelValue":p=>o.heuresAttenduesNonPayableFa=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesNonPayableFc,"onUpdate:modelValue":p=>o.heuresAttenduesNonPayableFc=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresAttenduesNonPayableReferentiel,"onUpdate:modelValue":p=>o.heuresAttenduesNonPayableReferentiel=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,r.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:o.heuresServiceFi,"onUpdate:modelValue":p=>o.heuresServiceFi=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesServiceFi!=null&&Math.round(o.heuresAttenduesServiceFi*100)!=Math.round(o.heuresServiceFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresServiceFa,"onUpdate:modelValue":p=>o.heuresServiceFa=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesServiceFa!=null&&Math.round(o.heuresAttenduesServiceFa*100)!=Math.round(o.heuresServiceFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresServiceFc,"onUpdate:modelValue":p=>o.heuresServiceFc=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesServiceFc!=null&&Math.round(o.heuresAttenduesServiceFc*100)!=Math.round(o.heuresServiceFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresServiceReferentiel,"onUpdate:modelValue":p=>o.heuresServiceReferentiel=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesServiceReferentiel!=null&&Math.round(o.heuresAttenduesServiceReferentiel*100)!=Math.round(o.heuresServiceReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresComplFi,"onUpdate:modelValue":p=>o.heuresComplFi=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesComplFi!=null&&Math.round(o.heuresAttenduesComplFi*100)!=Math.round(o.heuresComplFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresComplFa,"onUpdate:modelValue":p=>o.heuresComplFa=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesComplFa!=null&&Math.round(o.heuresAttenduesComplFa*100)!=Math.round(o.heuresComplFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresComplFc,"onUpdate:modelValue":p=>o.heuresComplFc=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesComplFc!=null&&Math.round(o.heuresAttenduesComplFc*100)!=Math.round(o.heuresComplFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresComplReferentiel,"onUpdate:modelValue":p=>o.heuresComplReferentiel=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesComplReferentiel!=null&&Math.round(o.heuresAttenduesComplReferentiel*100)!=Math.round(o.heuresComplReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresPrimes,"onUpdate:modelValue":p=>o.heuresPrimes=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesPrimes!=null&&Math.round(o.heuresAttenduesPrimes*100)!=Math.round(o.heuresPrimes*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresNonPayableFi,"onUpdate:modelValue":p=>o.heuresNonPayableFi=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFi!=null&&Math.round(o.heuresAttenduesNonPayableFi*100)!=Math.round(o.heuresNonPayableFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresNonPayableFa,"onUpdate:modelValue":p=>o.heuresNonPayableFa=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFa!=null&&Math.round(o.heuresAttenduesNonPayableFa*100)!=Math.round(o.heuresNonPayableFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresNonPayableFc,"onUpdate:modelValue":p=>o.heuresNonPayableFc=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableFc!=null&&Math.round(o.heuresAttenduesNonPayableFc*100)!=Math.round(o.heuresNonPayableFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:o.heuresNonPayableReferentiel,"onUpdate:modelValue":p=>o.heuresNonPayableReferentiel=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":o.heuresAttenduesNonPayableReferentiel!=null&&Math.round(o.heuresAttenduesNonPayableReferentiel*100)!=Math.round(o.heuresNonPayableReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,r.resMode=="hetd"]]),v(e("td",Qi,[r.debug.vh&&r.debug.vh[V]?(a(),l("div",Wi,[(a(!0),l(y,null,C(r.debug.vh[V],(p,M)=>(a(),l("span",Xi,[f(u(M)+" ",1),e("span",Zi,u(Math.round(p*100)/100),1)]))),256)),f("  ")])):h("",!0)],512),[[g,r.resMode=="debug"]])]))),128))])]),r.resMode=="debug"&&r.debug.global?(a(),l("div",Ki,[ea,(a(!0),l(y,null,C(r.debug.global,(o,V)=>(a(),l("span",ta,[f(u(V)+" ",1),e("span",na,u(Math.round(o*100)/100),1)]))),256)),f("  ")])):h("",!0),e("div",null,[e("a",{class:"btn btn-secondary",href:r.indexUrl},[ra,f(" Retour à la liste des formules")],8,sa)])])],64)}const aa=S(Bn,[["render",ia],["__scopeId","data-v-3894f4a0"]]),la=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"})),oa={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(t){this.formatted=this.formatage(t)}},methods:{formatage(t){if(t===void 0)return;let n=new Date(t);const s=n.getFullYear(),b=(n.getMonth()+1).toString().padStart(2,"0"),r=n.getDate().toString().padStart(2,"0"),i=n.getHours().toString().padStart(2,"0"),d=n.getMinutes().toString().padStart(2,"0"),m=n.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${r}/${b}/${s} à ${i}:${d}`;case"time":return`${i}:${d}:${m}`}return`${r}/${b}/${s}`}}};function da(t,n,s,b,r,i){return u(r.formatted)}const O=S(oa,[["render",da]]),ua={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(t){this.searchTerm=t.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(t){return unicaenVue.url("intervenant/code:"+t+"/voir")},reload(){var t=document.getElementById("term");t.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(n=>{let s=n.data,b=[];for(const r in s){if(s[r].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){b.push(s[r]);continue}if(s[r].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){b.push(s[r]);continue}if(s[r].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){b.push(s[r]);continue}}this.intervenants=b,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(n=>{console.log(n.message)})},800)}}},ca=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),ma={class:"intervenant-recherche"},ha={class:"critere"},_a=e("br",null,null,-1),pa=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),fa=e("br",null,null,-1),ba={key:0,class:"table table-bordered table-hover"},va=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),ga=["title"],ya={style:{}},xa=["href"],Ca=e("i",{class:"fas fa-eye"},null,-1),Va={key:1,class:"table table-bordered table-hover"},Pa=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),Sa=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),ka=[Pa,Sa];function Aa(t,n,s,b,r,i){const d=O;return a(),l(y,null,[ca,e("div",ma,[e("div",ha,[e("div",null,[e("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:n[0]||(n[0]=(...m)=>i.rechercher&&i.rechercher(...m))},null,32),_a]),e("div",null,[pa,v(e("input",{"onUpdate:modelValue":n[1]||(n[1]=m=>r.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:n[2]||(n[2]=m=>i.reload())},null,544),[[J,r.checkedTypes]]),f(" Permanent "),v(e("input",{"onUpdate:modelValue":n[3]||(n[3]=m=>r.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:n[4]||(n[4]=m=>i.reload())},null,544),[[J,r.checkedTypes]]),f(" Vacataire "),v(e("input",{"onUpdate:modelValue":n[5]||(n[5]=m=>r.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:n[6]||(n[6]=m=>i.reload())},null,544),[[J,r.checkedTypes]]),f(" Etudiant ")]),fa])]),r.intervenants.length>0?(a(),l("table",ba,[va,e("tbody",null,[(a(!0),l(y,null,C(r.intervenants,(m,c)=>(a(),l("tr",{class:D({"bg-danger":m.destruction!==null}),title:m.destruction!==null?"Fiche historisé":""},[e("td",ya,[e("a",{href:i.urlFiche(m.code)},[Ca,f(" Fiche")],8,xa)]),e("td",null,u(m.civilite),1),e("td",null,u(m.nom),1),e("td",null,u(m.prenom),1),e("td",null,u(m.structure),1),e("td",null,u(m.statut),1),e("td",null,[_(d,{value:m["date-naissance"]},null,8,["value"])]),e("td",null,u(m["numero-personnel"]),1)],10,ga))),256))])])):h("",!0),r.intervenants.length==0&&r.noResult==1?(a(),l("table",Va,ka)):h("",!0)],64)}const Ma=S(ua,[["render",Aa]]),Da=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"})),Ea={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return Object.keys(this.structure.structures).length>0}},methods:{saisie(t){modAjax(t.currentTarget,n=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.refresh()})},refresh(){this.liste.reload()}}},H=t=>(z("data-v-046af32d"),t=t(),B(),t),Ta={class:"accordion-item"},Ua={class:"accordion-header"},Fa=["aria-controls","data-bs-target"],Ra=["href"],Ia=H(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),wa=[Ia],$a=["href"],La=H(()=>e("i",{class:"fas fa-trash-can"},null,-1)),Na=[La],Ha=["id"],ja={class:"accordion-body"},Oa={class:"row"},qa=H(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),f(" :")],-1)),za={class:"col-md-5"},Ba={class:"row"},Ga=H(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),f(" :")],-1)),Ja={class:"col-md-5"},Ya={class:"row"},Qa=H(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),f(" :")],-1)),Wa={class:"col-md-5"},Xa={key:0,class:"fas fa-check text-success"},Za={key:1,class:"fas fa-xmark text-danger"},Ka={class:"row"},el=H(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),f(" :")],-1)),tl={class:"col-md-5"},nl={key:0,class:"fas fa-check text-success"},sl={key:1,class:"fas fa-xmark text-danger"},rl={class:"row"},il=H(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),f(" :")],-1)),al={class:"col-md-5"},ll={key:0,class:"sous-structures"},ol=H(()=>e("h4",null,"Sous-structures",-1)),dl={class:"accordion"};function ul(t,n,s,b,r,i){const d=F("structure",!0);return a(),l("div",Ta,[e("h2",Ua,[e("button",{"aria-controls":s.structure.id,"data-bs-target":`#str${s.structure.id}`,"aria-expanded":"true",class:"accordion-button","data-bs-toggle":"collapse",type:"button"},[s.structure.canEdit?(a(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary btn-sm",title:"Modifier la structure",onClick:n[0]||(n[0]=P((...m)=>i.saisie&&i.saisie(...m),["prevent"]))},wa,8,Ra)):h("",!0),s.structure.canDelete?(a(),l("a",{key:1,href:r.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",title:"Supprimer la structure",onClick:n[1]||(n[1]=P((...m)=>i.supprimer&&i.supprimer(...m),["prevent"]))},Na,8,$a)):h("",!0),f("   "+u(s.structure.libelleLong)+" ("+u(s.structure.libelleCourt)+") ",1)],8,Fa)]),e("div",{id:`str${s.structure.id}`,class:"accordion-collapse collapse show"},[e("div",ja,[e("div",Oa,[qa,e("div",za,u(s.structure.code),1)]),e("div",Ba,[Ga,e("div",Ja,u(s.structure.source.libelle),1)]),e("div",Ya,[Qa,e("div",Wa,[s.structure.enseignement?(a(),l("i",Xa)):s.structure.enseignement?h("",!0):(a(),l("i",Za))])]),e("div",Ka,[el,e("div",tl,[s.structure.affAdresseContrat?(a(),l("i",nl)):s.structure.affAdresseContrat?h("",!0):(a(),l("i",sl))])]),e("div",rl,[il,e("div",al,[e("pre",null,u(s.structure.adresse),1)])]),i.hasSousStructures?(a(),l("div",ll,[ol,e("div",dl,[(a(!0),l(y,null,C(s.structure.structures,m=>(a(),R(d,{key:m.id,structure:m,onRefresh:i.refresh},null,8,["structure","onRefresh"]))),128))])])):h("",!0)])],8,Ha)])}const ne=S(Ea,[["render",ul],["__scopeId","data-v-046af32d"]]),cl=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),ml={components:{structure:ne},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{console.log("coucou"),this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(t=>{this.structures=t.data})}}},hl=e("h1",null,"Administration des structures",-1),_l={class:"accordion"},pl=["href"],fl=e("i",{class:"fas fa-pen-to-square"},null,-1);function bl(t,n,s,b,r,i){const d=F("structure");return a(),l(y,null,[hl,e("div",_l,[(a(!0),l(y,null,C(r.structures,m=>(a(),R(d,{key:m.id,structure:m},null,8,["structure"]))),128))]),s.canAdd?(a(),l("a",{key:0,class:"btn btn-primary",href:r.ajoutUrl,onClick:n[0]||(n[0]=P((...m)=>i.ajout&&i.ajout(...m),["prevent"])),title:"Ajouter une structure"},[fl,f(" Ajouter une structure ")],8,pl)):h("",!0)],64)}const vl=S(ml,[["render",bl]]),gl=Object.freeze(Object.defineProperty({__proto__:null,default:vl},Symbol.toStringTag,{value:"Module"})),yl={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},xl=["id"],Cl={class:"modal-dialog"},Vl={class:"modal-content"},Pl={class:"modal-header"},Sl={class:"modal-title"},kl=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Al={class:"modal-body"},Ml={class:"modal-footer"},Dl=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function El(t,n,s,b,r,i){return a(),l("div",{class:"modal fade",id:s.id,tabindex:"-1","aria-hidden":"true"},[e("div",Cl,[e("div",Vl,[e("div",Pl,[e("h5",Sl,u(s.title),1),kl]),e("div",Al,[Q(t.$slots,"body")]),e("div",Ml,[Q(t.$slots,"footer"),Dl])])])],8,xl)}const Tl=S(yl,[["render",El]]),Ul={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},Fl=["id"];function Rl(t,n,s,b,r,i){return a(),l("i",{class:D(`fas fa-${s.name} text-${s.variant} fa-rotate-${s.rotate}`),id:`${s.id}`},null,10,Fl)}const j=S(Ul,[["render",Rl]]),Il={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(t){this.validationText=this.calcValidation(t)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(t){return t===null?"A valider":t.id===null?"Autovalidée":"Validation du "+Util.dateToString(t.histoCreation)+" par "},saisie(t){modAjax(t.currentTarget,n=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.$emit("supprimer",this.mission)})},valider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},devalider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireSupprimer(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireValider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},volumeHoraireDevalider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(t=>{this.$emit("refresh",t.data)})}}},L=t=>(z("data-v-1735108d"),t=t(),B(),t),wl=["id"],$l={class:"card-header card-header-h3"},Ll={key:0},Nl={class:"float-end"},Hl={key:1},jl={key:2},Ol={class:"float-end"},ql={class:"card-body"},zl={class:"row"},Bl={class:"col-md-8"},Gl={class:"row"},Jl={class:"col-md-12"},Yl=L(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),Ql={class:"form-control"},Wl={class:"row"},Xl={class:"col-md-6"},Zl=L(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),Kl={class:"form-control"},eo={class:"col-md-6"},to=L(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),no={class:"form-control"},so={class:"col-md-7"},ro=L(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),io={class:"input-group mb-3"},ao=["innerHTML"],lo=["data-bs-target"],oo={key:0,class:"col-md-5"},uo=L(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),co={class:"form-control"},mo={class:"row"},ho={class:"col-md-12"},_o=L(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),po={class:"form-control"},fo={key:0,class:"row"},bo={class:"col-md-12"},vo=L(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),go={class:"form-control"},yo=L(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),xo={class:"row"},Co={class:"col-md-12"},Vo=["href"],Po=["href"],So=["href"],ko=["href"],Ao={class:"col-md-4"},Mo=L(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),Do={class:"table table-bordered table-condensed"},Eo=L(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),To={style:{"text-align":"right"}},Uo=L(()=>e("br",null,null,-1)),Fo={key:0},Ro=["data-id"],Io=["data-id"],wo=["data-id"];function $o(t,n,s,b,r,i){const d=O,m=j,c=F("utilisateur"),o=F("u-heures"),V=Tl;return a(),l(y,null,[e("div",{id:s.mission.id,class:D([{"bg-success":s.mission.valide,"bg-default":!s.mission.valide},"card"])},[e("form",{onSubmit:n[4]||(n[4]=P((...p)=>t.submitForm&&t.submitForm(...p),["prevent"]))},[e("div",$l,[s.mission.libelleMission?(a(),l("h5",Ll,[f(u(s.mission.libelleMission)+" ",1),e("span",Nl,[f("Du "),_(d,{value:s.mission.dateDebut},null,8,["value"]),f(" au "),_(d,{value:s.mission.dateFin},null,8,["value"])])])):h("",!0),s.mission.libelleMission?(a(),l("h6",Hl,u(s.mission.typeMission.libelle),1)):h("",!0),s.mission.libelleMission?h("",!0):(a(),l("h5",jl,[f(u(s.mission.typeMission.libelle)+" ",1),e("span",Ol,[f("Du "),_(d,{value:s.mission.dateDebut},null,8,["value"]),f(" au "),_(d,{value:s.mission.dateFin},null,8,["value"])])]))]),e("div",ql,[e("div",zl,[e("div",Bl,[e("div",Gl,[e("div",Jl,[Yl,e("div",Ql,u(s.mission.structure.libelle),1)])]),e("div",Wl,[e("div",Xl,[Zl,e("div",Kl,u(s.mission.tauxRemu?s.mission.tauxRemu.libelle:null),1)]),e("div",eo,[to,e("div",no,u(s.mission.tauxRemuMajore?s.mission.tauxRemuMajore.libelle:s.mission.tauxRemu?"Idem ("+s.mission.tauxRemu.libelle+")":null),1)]),e("div",so,[ro,e("div",io,[e("div",{class:"form-control",innerHTML:i.heuresLib},null,8,ao),e("button",{"data-bs-target":`#details-${s.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,lo)])]),s.mission.typeMission.besoinFormation?(a(),l("div",oo,[uo,e("div",co,u(s.mission.heuresFormation),1)])):h("",!0)]),e("div",mo,[e("div",ho,[_o,e("div",po,u(s.mission.description),1)])]),s.mission.typeMission.accompagnementEtudiants?(a(),l("div",fo,[e("div",bo,[vo,e("div",go,[e("pre",null,u(s.mission.etudiantsSuivis),1)])])])):h("",!0),yo,e("div",xo,[e("div",Co,[s.mission.canSaisie?(a(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=P((...p)=>i.saisie&&i.saisie(...p),["prevent"]))},"Modifier",8,Vo)):h("",!0),s.mission.canValider?(a(),l("a",{key:1,href:r.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:n[1]||(n[1]=P((...p)=>i.valider&&i.valider(...p),["prevent"]))},"Valider",8,Po)):h("",!0),s.mission.canDevalider?(a(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:n[2]||(n[2]=P((...p)=>i.devalider&&i.devalider(...p),["prevent"]))},"Dévalider",8,So)):h("",!0),s.mission.canSupprimer?(a(),l("a",{key:3,href:r.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:n[3]||(n[3]=P((...p)=>i.supprimer&&i.supprimer(...p),["prevent"]))},"Supprimer",8,ko)):h("",!0)])])]),e("div",Ao,[Mo,e("div",null,[_(m,{name:"thumbs-up",variant:"success"}),f(" Créé le "),_(d,{value:s.mission.histoCreation},null,8,["value"]),f(" par "),_(c,{mail:s.mission.histoCreateur.email,nom:s.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[_(m,{name:s.mission.valide?"thumbs-up":"thumbs-down",variant:s.mission.valide?"success":"info"},null,8,["name","variant"]),f(" "+u(r.validationText)+" ",1),s.mission.validation&&s.mission.validation.histoCreateur?(a(),R(c,{key:0,mail:s.mission.validation.histoCreateur.email,nom:s.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):h("",!0)]),e("div",null,[_(m,{name:s.mission.contrat?"thumbs-up":"thumbs-down",variant:s.mission.contrat?"success":"info"},null,8,["name","variant"]),f(" "+u(s.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,u(s.mission.heuresRealisees)+" heure"+u(s.mission.heuresRealisees<2?"":"s")+" réalisée"+u(s.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,wl),_(V,{id:`details-${s.mission.id}`,title:"Détail des heures prévisionnelles"},{body:U(()=>[e("table",Do,[Eo,e("tbody",null,[(a(!0),l(y,null,C(s.mission.volumesHorairesPrevus,p=>(a(),l("tr",{key:p.id},[e("td",To,[_(o,{valeur:p.heures},null,8,["valeur"])]),e("td",null,[_(m,{name:"thumbs-up",variant:"success"}),f(" Saisi par "),_(c,{mail:p.histoCreateur.email,nom:p.histoCreateur.displayName},null,8,["mail","nom"]),f(" le "),_(d,{value:p.histoCreation},null,8,["value"]),Uo,_(m,{name:p.valide?"thumbs-up":"thumbs-down",variant:p.valide?"success":"info"},null,8,["name","variant"]),f(" "+u(p.validation&&p.validation.id==null?"Autovalidé":p.validation?"":"à valider")+" ",1),p.validation&&p.validation.histoCreateur?(a(),l("span",Fo,[f(" Validé par "),_(c,{mail:p.validation.histoCreateur.email,nom:p.validation.histoCreateur.displayName},null,8,["mail","nom"]),f(" le "),_(d,{value:p.validation.histoCreation},null,8,["value"])])):h("",!0)]),e("td",null,[p.canValider?(a(),l("a",{key:0,"data-id":p.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:n[5]||(n[5]=P((...M)=>i.volumeHoraireValider&&i.volumeHoraireValider(...M),["prevent"]))},"Valider",8,Ro)):h("",!0),p.canDevalider?(a(),l("a",{key:1,"data-id":p.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:n[6]||(n[6]=P((...M)=>i.volumeHoraireDevalider&&i.volumeHoraireDevalider(...M),["prevent"]))},"Dévalider",8,Io)):h("",!0),p.canSupprimer?(a(),l("a",{key:2,"data-id":p.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:n[7]||(n[7]=P((...M)=>i.volumeHoraireSupprimer&&i.volumeHoraireSupprimer(...M),["prevent"]))},"Supprimer",8,wo)):h("",!0)])]))),128))])])]),footer:U(()=>[]),_:1},8,["id"])],64)}const se=S(Il,[["render",$o],["__scopeId","data-v-1735108d"]]),Lo=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),No={components:{mission:se},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},supprimer(t){this.reload()},refresh(t){let n=Util.json.indexById(this.missions,t.id);this.missions[n]=t,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(t=>{this.missions=t.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},Ho=["href"];function jo(t,n,s,b,r,i){const d=F("mission");return a(),l(y,null,[(a(!0),l(y,null,C(r.missions,m=>(a(),R(d,{onSupprimer:i.supprimer,onRefresh:i.refresh,key:m.id,mission:m},null,8,["onSupprimer","onRefresh","mission"]))),128)),s.canAddMission?(a(),l("a",{key:0,class:"btn btn-primary",href:r.ajoutUrl,onClick:n[0]||(n[0]=P((...m)=>i.ajout&&i.ajout(...m),["prevent"]))},"Ajout d'une nouvelle mission",8,Ho)):h("",!0)],64)}const Oo=S(No,[["render",jo]]),qo=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),zo={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},canValiderCandidature:{type:Boolean,required:!1},canRefuserCandidature:{type:Boolean,required:!1},renseignerDonneesPersonnelles:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},computed:{urlDonneesPersonnelles:function(){return unicaenVue.url("intervenant/:intervenant/dossier",{intervenant:this.intervenant})}},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(t=>{this.candidatures=t.data})},validerCandidature(t){modAjax(t.currentTarget,n=>{this.reload()})},refuserCandidature(t){popConfirm(t.target,n=>{this.reload()})},urlOffre(t){return unicaenVue.url("offre-emploi/detail/:offre",{offre:t.offre.id})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})}}},Bo={key:0,class:"alert alert-primary",role:"alert"},Go=["href"],Jo={class:"table table-bordered"},Yo=e("th",null,"Offre d'emploi",-1),Qo=e("th",null,"Composante",-1),Wo=e("th",null,"Etat",-1),Xo=e("th",null,"Date commission",-1),Zo={key:0},Ko={key:0},ed={key:0,colspan:"5",style:{"text-align":"center"}},td={style:{"text-align":"center"}},nd=["href"],sd={style:{"text-align":"center"}},rd={style:{"text-align":"center"}},id={key:0,class:"badge rounded-pill bg-success"},ad={key:1,class:"badge rounded-pill bg-danger"},ld={key:2,class:"badge rounded-pill bg-warning"},od={key:0,style:{"text-align":"center"}},dd=["href"],ud=e("i",{class:"fa-solid fa-check"},null,-1),cd=[ud],md=["href"],hd=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),_d=[hd],pd=["href"];function fd(t,n,s,b,r,i){const d=O,m=j;return a(),l("div",null,[this.renseignerDonneesPersonnelles?(a(),l("div",Bo,[f(" Afin que vos candidatures soient étudiées, veuillez compléter "),e("a",{href:this.urlDonneesPersonnelles},"vos données personnelles",8,Go),f(" et fournir les pièces justificatives qui vous seront demandées. ")])):h("",!0),e("table",Jo,[e("thead",null,[e("tr",null,[Yo,Qo,Wo,Xo,s.canValiderCandidature||s.canRefuserCandidature?(a(),l("th",Zo,"Action")):h("",!0)])]),e("tbody",null,[r.candidatures.length==0?(a(),l("tr",Ko,[s.canValiderCandidature?(a(),l("td",ed,"Aucune candidature")):h("",!0)])):h("",!0),(a(!0),l(y,null,C(r.candidatures,c=>(a(),l("tr",{key:c.id},[e("td",td,[e("a",{href:i.urlOffre(c)},u(c.offre.titre),9,nd)]),e("td",sd,u(c.offre.structure.libelleCourt),1),e("td",rd,[c.validation?(a(),l("span",id,"Acceptée par "+u(c.validation.histoCreateur.displayName),1)):h("",!0),!c.validation&&c.motif!==null?(a(),l("span",ad,u(c.motif),1)):h("",!0),!c.validation&&c.motif===null?(a(),l("span",ld,"En attente d'acceptation")):h("",!0)]),e("td",null,[c.dateCommission?(a(),R(d,{key:0,value:c.dateCommission},null,8,["value"])):h("",!0)]),this.canValiderCandidature||this.canRefuserCandidature?(a(),l("td",od,[!c.validation&&this.canValiderCandidature?(a(),l("a",{key:0,href:i.urlAccepterCandidature(c),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:n[0]||(n[0]=P((...o)=>i.validerCandidature&&i.validerCandidature(...o),["prevent"]))},cd,8,dd)):h("",!0),f("  "),this.canRefuserCandidature?(a(),l("a",{key:1,href:i.urlRefuserCandidature(c),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:n[1]||(n[1]=P((...o)=>i.refuserCandidature&&i.refuserCandidature(...o),["prevent"]))},_d,8,md)):h("",!0)])):h("",!0)]))),128))])]),e("a",{href:r.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[_(m,{name:"eye"}),f(" Voir toutes les offres d'emploi ")],8,pd),f("  ")])}const bd=S(zo,[["render",fd]]),vd=Object.freeze(Object.defineProperty({__proto__:null,default:bd},Symbol.toStringTag,{value:"Module"})),gd={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let t=this.offre.description.substr(0,200);return this.offre.description.length>200&&(t+="..."),t},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let t="auth/connexion?redirect="+window.location.href;return unicaenVue.url(t)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(t){modAjax(t.target,n=>{this.refresh()})},urlVoir:function(t){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+t.intervenant.code})},urlVoirCandidature:function(t){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+t.intervenant.code})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(t=>{this.$emit("refresh",t.data)})},supprimer(t){popConfirm(t.target,n=>{this.$emit("supprimer",this.offre)})},postuler(t){popConfirm(t.target,n=>{this.$emit("postuler",this.offre)})},valider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},devalider(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},validerCandidature(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})},refuserCandidature(t){popConfirm(t.currentTarget,n=>{this.$emit("refresh",n.data)})}}},yd={key:0,class:"col"},xd={class:"card h-100"},Cd={class:"card-header"},Vd={class:"badge rounded-pill bg-info"},Pd={key:0,class:"badge rounded-pill bg-success"},Sd={key:1,class:"badge rounded-pill bg-warning"},kd={class:"card-body"},Ad={class:"bg-light",style:{padding:"5px"}},Md=e("b",null,"Créée le : ",-1),Dd=e("br",null,null,-1),Ed=e("b",null,"Période à pourvoir : ",-1),Td=e("br",null,null,-1),Ud=e("b",null,"Demandée par la composante :",-1),Fd=e("br",null,null,-1),Rd=e("b",null,"Type de mission :",-1),Id={class:"card-footer"},wd={class:"d-grid gap-2 d-md-flex justify-content-md-end"},$d=["href"],Ld={key:1},Nd={class:"page-header"},Hd={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},jd=e("i",{class:"fa-solid fa-user"},null,-1),Od={class:"ms-2"},qd=["href"],zd={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},Bd=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),Gd=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),Jd=[Bd,Gd],Yd={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},Qd=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),Wd=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),Xd=[Qd,Wd],Zd={class:"bg-light",style:{padding:"10px"}},Kd=e("b",null,"Créée le : ",-1),eu=e("br",null,null,-1),tu=e("b",null,"Période à pourvoir : ",-1),nu=e("br",null,null,-1),su=e("b",null,"Date limite de candidature :",-1),ru=e("br",null,null,-1),iu=e("b",null,"Demandé par la composante :",-1),au=e("br",null,null,-1),lu=e("b",null,"Type de mission :",-1),ou=e("br",null,null,-1),du=e("b",null,"Nombre d'heures pour la mission :",-1),uu=e("br",null,null,-1),cu=e("b",null,"Nombre de postes à pourvoir :",-1),mu=e("br",null,null,-1),hu=["innerHTML"],_u={key:3,class:"alert alert-info"},pu=["innerHTML"],fu=e("br",null,null,-1),bu={key:4},vu=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),gu={class:"table table-bordered"},yu=e("th",null,"Intervenant",-1),xu=e("th",null,"Etat",-1),Cu={key:0},Vu={key:0},Pu={key:0,colspan:"4",style:{"text-align":"center"}},Su={key:1,colspan:"3",style:{"text-align":"center"}},ku=["href"],Au={key:0,class:"badge rounded-pill bg-success"},Mu={key:1,class:"badge rounded-pill bg-danger"},Du={key:2,class:"badge rounded-pill bg-warning"},Eu={key:0},Tu=["href"],Uu={class:"mt-5"},Fu=["href"],Ru=["href"],Iu=["href"],wu=["href"],$u=["href"],Lu=["href"];function Nu(t,n,s,b,r,i){const d=O,m=j;return a(),l(y,null,[this.extended?h("",!0):(a(),l("div",yd,[e("div",xd,[e("div",Cd,[e("h4",null,u(s.offre.titre),1),e("span",Vd,u(s.offre.nombreHeures)+" heure(s)",1),f("   "),s.offre.validation?(a(),l("span",Pd,[f("Validée le "),_(d,{value:s.offre.validation.histoCreation},null,8,["value"]),f(" par "+u(s.offre.validation.histoCreateur.displayName),1)])):h("",!0),s.offre.validation?h("",!0):(a(),l("span",Sd," En attente de validation par la DRH")),f("  ")]),e("div",kd,[e("p",Ad,[Md,_(d,{value:s.offre.histoCreation},null,8,["value"]),f(" par "+u(s.offre.histoCreateur.displayName),1),Dd,Ed,f("du "),_(d,{value:s.offre.dateDebut},null,8,["value"]),f(" au "),_(d,{value:s.offre.dateFin},null,8,["value"]),Td,Ud,f(" "+u(s.offre.structure.libelleCourt)+" ",1),Fd,Rd,f(" "+u(s.offre.typeMission.libelle),1)]),f(" "+u(i.shortDesc),1)]),e("div",Id,[e("div",wd,[e("a",{href:r.consulterUrl,class:"btn btn-primary",title:"Consulter "},[_(m,{name:"eye"}),f(" Voir ")],8,$d)])])])])),this.extended?(a(),l("div",Ld,[e("h1",Nd,u(s.offre.titre),1),this.utilisateur?h("",!0):(a(),l("div",Hd,[jd,e("div",Od,[f(" Vous devez "),e("a",{href:i.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,qd),f(" pour pouvoir postuler. ")])])),!s.offre.canPostuler&&this.utilisateur?(a(),l("div",zd,Jd)):h("",!0),i.isCandidat&&this.utilisateur?(a(),l("div",Yd,Xd)):h("",!0),e("p",Zd,[Kd,_(d,{value:s.offre.histoCreation},null,8,["value"]),f(" par "+u(s.offre.histoCreateur.displayName),1),eu,tu,f("du "),_(d,{value:s.offre.dateDebut},null,8,["value"]),f(" au "),_(d,{value:s.offre.dateFin},null,8,["value"]),nu,su,_(d,{value:s.offre.dateLimite},null,8,["value"]),ru,iu,f(" "+u(s.offre.structure.libelleCourt)+" ",1),au,lu,f(" "+u(s.offre.typeMission.libelle)+" ",1),ou,du,f(" "+u(s.offre.nombreHeures)+" heure(s) ",1),uu,cu,f(" "+u(s.offre.nombrePostes)+" poste(s) ",1),mu]),e("p",{innerHTML:this.descriptionHtml},null,8,hu),this.decretText?(a(),l("p",_u,[v(e("input",{id:"decret","onUpdate:modelValue":n[0]||(n[0]=c=>r.decret=c),name:"decret",type:"checkbox"},null,512),[[J,r.decret]]),f("  "),e("span",{innerHTML:this.decretText},null,8,pu)])):h("",!0),fu,this.canVoirCandidature?(a(),l("div",bu,[vu,e("table",gu,[e("thead",null,[e("tr",null,[yu,xu,s.canValiderCandidature?(a(),l("th",Cu,"Action")):h("",!0)])]),e("tbody",null,[s.offre.candidatures.length==0?(a(),l("tr",Vu,[s.canValiderCandidature?(a(),l("td",Pu,"Aucune candidature")):h("",!0),s.canValiderCandidature?h("",!0):(a(),l("td",Su,"Aucune candidature"))])):h("",!0),(a(!0),l(y,null,C(s.offre.candidatures,c=>(a(),l("tr",null,[e("td",null,[e("a",{href:i.urlVoir(c)},u(c.intervenant.prenom+" "+c.intervenant.nomUsuel),9,ku)]),e("td",null,[c.validation?(a(),l("span",Au,[f("Acceptée le "),_(d,{value:c.validation.histoCreation},null,8,["value"]),f(" par "+u(c.validation.histoCreateur.displayName),1)])):h("",!0),!c.validation&&c.motif!==null?(a(),l("span",Mu,u(c.motif),1)):h("",!0),!c.validation&&c.motif===null?(a(),l("span",Du,"En attente d'acceptation")):h("",!0)]),this.canValiderCandidature?(a(),l("td",Eu,[e("a",{href:i.urlVoirCandidature(c),class:"btn btn-primary",title:"Consulter "},[_(m,{name:"eye"}),f(" Voir ")],8,Tu)])):h("",!0)]))),256))])])])):h("",!0),e("div",Uu,[e("a",{href:r.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,Fu),f("  "),this.canPostuler?(a(),l("a",{key:0,class:D([r.decret?"":"disabled","btn btn-primary"]),href:r.postulerUrl,"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,Ru)):h("",!0),f("  "),s.offre.canModifier?(a(),l("a",{key:1,href:r.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:n[1]||(n[1]=P((...c)=>i.saisir&&i.saisir(...c),["prevent"]))},[_(m,{name:"pen-to-square"}),f(" Modifier ")],8,Iu)):h("",!0),f("  "),s.offre.validation&&s.offre.canValider?(a(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:n[2]||(n[2]=P((...c)=>i.devalider&&i.devalider(...c),["prevent"]))},[_(m,{name:"thumbs-down"}),f(" Devalider ")],8,wu)):h("",!0),f("  "),!s.offre.validation&&s.offre.canValider?(a(),l("a",{key:3,href:r.validerUrl,class:"btn btn-success",title:"Valider",onClick:n[3]||(n[3]=P((...c)=>i.valider&&i.valider(...c),["prevent"]))},[_(m,{name:"thumbs-up"}),f(" Valider ")],8,$u)):h("",!0),f("  "),s.offre.canSupprimer?(a(),l("a",{key:4,href:r.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:n[4]||(n[4]=P((...c)=>i.supprimer&&i.supprimer(...c),["prevent"]))},[_(m,{name:"trash"}),f(" Supprimer ")],8,Lu)):h("",!0)])])):h("",!0)],64)}const re=S(gd,[["render",Nu]]),Hu=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),ju={components:{offreEmploi:re},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(t){modAjax(t.target,n=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(t){let n=Util.json.indexById(this.offres,t.id);this.offres[n]=t},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(t=>{this.offres=[t.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(t=>{this.offres=t.data})}}},Ou={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},qu={key:1},zu=["href"],Bu={key:2};function Gu(t,n,s,b,r,i){const d=F("offreEmploi");return a(),l(y,null,[i.extended?h("",!0):(a(),l("div",Ou,[(a(!0),l(y,null,C(r.offres,m=>(a(),R(d,{key:m.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:m,decretText:m.decretText,onRefresh:i.refresh,onSupprimer:i.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),i.extended?h("",!0):(a(),l("div",qu,[this.canModifier?(a(),l("a",{key:0,href:r.ajoutUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=P((...m)=>i.ajout&&i.ajout(...m),["prevent"]))},"Ajouter une nouvelle offre",8,zu)):h("",!0)])),i.extended?(a(),l("div",Bu,[(a(!0),l(y,null,C(r.offres,m=>(a(),R(d,{key:m.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:m.decretText,extended:i.extended,offre:m,utilisateur:this.utilisateur,onRefresh:i.refresh,onSupprimer:i.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):h("",!0)],64)}const Ju=S(ju,[["render",Gu]]),Yu=Object.freeze(Object.defineProperty({__proto__:null,default:Ju},Symbol.toStringTag,{value:"Module"})),Qu={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(t){popConfirm(t.target,n=>{this.$emit("reload")})},valider(t){popConfirm(t.target,n=>{this.$emit("reload")})},devalider(t){popConfirm(t.target,n=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(t=>{this.$emit("reload")})},modifierPrime(t){modAjax(t.currentTarget,n=>{this.$emit("reload")})},supprimerPrime(t){popConfirm(t.target,n=>{this.$emit("reload")})}}},Wu={key:0},Xu=e("br",null,null,-1),Zu=e("u",null,"Mission(s) concernée(s)",-1),Ku={key:0},ec=["action"],tc={class:"card-body"},nc={class:"row"},sc={key:0,class:"col-md-6"},rc={class:"card text-dark bg-light"},ic=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),ac={class:"card-body"},lc=e("p",{class:"card-text"},[f(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),f(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),f(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),oc=["disabled"],dc={class:"card-footer d-grid gap-2"},uc=["disabled"],cc={key:1,class:"col-md-6"},mc={class:"card text-dark bg-light"},hc=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),_c={class:"card-body"},pc=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),fc=["href"],bc={class:"card-footer",style:{"text-align":"right"}},vc=["href"],gc=["href"],yc=["href"],xc={class:"col-md-6"},Cc={key:0},Vc=["checked","disabled"],Pc=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),Sc=e("br",null,null,-1),kc=e("br",null,null,-1),Ac=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),Mc={key:0},Dc={key:1},Ec={key:2},Tc={key:3},Uc={key:4},Fc={key:5},Rc={key:6},Ic={class:"row"},wc={class:"col-md-12"},$c={class:"float-end"},Lc=["href"],Nc=["href"];function Hc(t,n,s,b,r,i){const d=O,m=j;return a(),l("div",{class:D([{"bg-success":s.prime.validation,"bg-default":!s.prime.validation&&!s.prime.dateRefus,"bg-danger":s.prime.dateRefus},"card"])},[e("div",{class:D([{"text-white":s.prime.dateRefus},"card-header card-header-h3"])},[s.prime.id?(a(),l("h5",Wu,[f(" Indemnité de fin de contrat N°"+u(s.numero+1),1),Xu])):h("",!0),e("div",null,[Zu,f(" : "),(a(!0),l(y,null,C(s.prime.missions,(c,o)=>(a(),l("span",null,[f(u(c.typeMission.libelle)+" (Pour "+u(c.structure.libelleCourt)+" du ",1),_(d,{value:c.dateDebut},null,8,["value"]),f(" au "),_(d,{value:c.dateFin},null,8,["value"]),f(") "),o!=s.prime.missions.length-1?(a(),l("span",Ku,", ")):h("",!0)]))),256))])],2),e("form",{action:r.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",tc,[e("div",nc,[s.prime.declaration?h("",!0):(a(),l("div",sc,[e("div",rc,[ic,e("div",ac,[lc,e("input",{ref:"file",disabled:!!s.prime.dateRefus,name:"files[]",type:"file"},null,8,oc)]),e("div",dc,[e("input",{disabled:!!s.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,uc)])])])),s.prime.declaration?(a(),l("div",cc,[e("div",mc,[hc,e("div",_c,[pc,e("a",{href:r.telechargerUrl},u(s.prime.declaration.nom),9,fc)]),e("div",bc,[s.prime.declaration&&!s.prime.validation&&!s.prime.dateRefus?(a(),l("a",{key:0,href:r.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:n[0]||(n[0]=P((...c)=>i.supprimer&&i.supprimer(...c),["prevent"]))}," Supprimer ",8,vc)):h("",!0),f("  "),s.prime.declaration&&!s.prime.validation&&this.canGerer&&!s.prime.dateRefus?(a(),l("a",{key:1,href:r.validerUrl,class:"btn btn-success",title:"Valider",onClick:n[1]||(n[1]=P((...c)=>i.valider&&i.valider(...c),["prevent"]))}," Valider ",8,gc)):h("",!0),f("  "),s.prime.declaration&&s.prime.validation&&this.canGerer&&!s.prime.dateRefus?(a(),l("a",{key:2,href:r.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:n[2]||(n[2]=P((...c)=>i.devalider&&i.devalider(...c),["prevent"]))}," Dévalider ",8,yc)):h("",!0),f("  ")])])])):h("",!0),e("div",xc,[s.prime.validation?h("",!0):(a(),l("div",Cc,[e("input",{checked:s.prime.dateRefus,disabled:s.prime.validation,name:"prime",type:"checkbox",onChange:n[3]||(n[3]=(...c)=>i.refuser&&i.refuser(...c))},null,40,Vc),f("  Ou en cochant cette case, "),Pc,f(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),Sc,kc])),e("div",null,[Ac,s.prime.dateRefus?(a(),l("div",Mc,[_(m,{name:"thumbs-down",variant:"danger"}),f(" Indemnité refusée le "),_(d,{value:s.prime.dateRefus},null,8,["value"])])):h("",!0),s.prime.declaration&&!s.prime.dateRefus?(a(),l("div",Dc,[_(m,{name:"thumbs-up",variant:"success"}),f(" Déclaration déposée le "),_(d,{value:s.prime.declaration.histoCreation},null,8,["value"]),f(" par "+u(s.prime.declaration.histoCreateur.displayName),1)])):h("",!0),!s.prime.declaration&&!s.prime.dateRefus?(a(),l("div",Ec,[_(m,{name:"thumbs-down",variant:"info"}),f(" Aucune déclaration déposée ")])):h("",!0),s.prime.validation&&!s.prime.dateRefus?(a(),l("div",Tc,[_(m,{name:"thumbs-up",variant:"success"}),f(" Déclaration validée le "),_(d,{value:s.prime.validation.histoCreation},null,8,["value"]),f(" par "+u(s.prime.validation.histoCreateur.displayName),1)])):h("",!0),!s.prime.validation&&!s.prime.dateRefus?(a(),l("div",Uc,[_(m,{name:"thumbs-down",variant:"info"}),f(" Aucune déclaration validée ")])):h("",!0),s.prime.validation&&!s.prime.dateRefus?(a(),l("div",Fc,[_(m,{name:"euro-sign",variant:"success"}),f(" Intervenant éligible à une indemnité de fin de contrat ")])):h("",!0),s.prime.dateRefus?(a(),l("div",Rc,[_(m,{name:"euro-sign",variant:"info"}),f(" Intervenant non éligible à une indemnité de fin de contrat ")])):h("",!0)])])]),e("div",Ic,[e("div",wc,[e("span",$c,[!s.prime.validation&&!s.prime.dateRefus&&this.canGerer?(a(),l("a",{key:0,href:r.modifierPrimeUrl,class:"btn btn-primary",onClick:n[4]||(n[4]=P((...c)=>i.modifierPrime&&i.modifierPrime(...c),["prevent"]))},"Modifier",8,Lc)):h("",!0),f("   "),!s.prime.validation&&!s.prime.dateRefus&&this.canGerer?(a(),l("a",{key:1,href:r.supprimerPrimeUrl,class:"btn btn-danger",onClick:n[5]||(n[5]=P((...c)=>i.supprimerPrime&&i.supprimerPrime(...c),["prevent"]))},"Supprimer",8,Nc)):h("",!0)])])])])],8,ec)],2)}const ie=S(Qu,[["render",Hc]]),jc=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),Oc={components:{prime:ie},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(t=>{this.primes=t.data,this.load=!0})}}},qc={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},zc=e("br",null,null,-1),Bc=e("br",null,null,-1),Gc={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Jc=e("br",null,null,-1),Yc=e("br",null,null,-1),Qc={key:2},Wc=["href"];function Xc(t,n,s,b,r,i){const d=F("prime");return a(),l(y,null,[(a(!0),l(y,null,C(r.primes,(m,c)=>(a(),R(d,{canGerer:s.canGerer,intervenant:this.intervenant,numero:c,prime:m,onReload:i.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),r.load?h("",!0):(a(),l("div",qc,[f(" Chargement en cours..."),zc,Bc])),r.primes.length==0&&r.load?(a(),l("div",Gc,[f(" Aucune indemnité de fin de contrat actuellement..."),Jc,Yc])):h("",!0),this.missionsWithoutPrime>0&&this.canGerer?(a(),l("div",Qc,[e("a",{href:r.ajoutUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=P((...m)=>i.ajout&&i.ajout(...m),["prevent"]))},"Créer une nouvelle indemnité",8,Wc)])):h("",!0)],64)}const Zc=S(Oc,[["render",Xc]]),Kc=Object.freeze(Object.defineProperty({__proto__:null,default:Zc},Symbol.toStringTag,{value:"Module"})),em={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const t=new Date(this.date);return{mois:t.getMonth()+1,annee:t.getFullYear()}},computed:{listeJours(){const t=new Date(this.date);t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1);let n=t.getDate();return Array.from({length:n},(s,b)=>b+1)}},watch:{date:function(t,n){const s=new Date(this.date);this.mois=s.getMonth()+1,this.annee=s.getFullYear()},mois:function(t,n){const s=new Date(this.date);s.setMonth(t-1),this.$emit("changeDate",s)},annee:function(t,n){const s=new Date(this.date);s.setFullYear(t),this.$emit("changeDate",s)}},methods:{nomJour(t){const n=new Date(this.date);return n.setDate(t),n.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let t=[];const n=new Date;for(let s=1;s<=12;s++){n.setMonth(s-1);let b=n.toLocaleString("fr-FR",{month:"long"});t.push({id:s,libelle:b})}return t},listeAnnees(){const n=new Date().getFullYear(),s=1;let b=[];for(let r=n-s;r<=n+s;r++)b.push(r);return b},canAdd(t){if(!this.canAddEvent)return!1;let n=this.addDateDebut;n===void 0?n=new Date("2000-01-01"):n==="now"?n=new Date:n=new Date(n);let s=this.addDateFin;s===void 0?s=new Date("2500-01-01"):s==="now"?s=new Date:s=new Date(s);let b=new Date(this.date);return b.setDate(t),n=this.isoDateOnly(n),s=this.isoDateOnly(s),b=this.isoDateOnly(b),!(b<n||b>s)},addEvent(t){const n=new Date(this.date);n.setDate(t.currentTarget.dataset.jour),this.$emit("addEvent",n,t)},prevMois(){const t=new Date(this.date);t.setMonth(t.getMonth()-1),this.$emit("changeDate",t)},nextMois(){const t=new Date(this.date);t.setMonth(t.getMonth()+1),this.$emit("changeDate",t)},eventsByJour(t){const n=new Date(this.date);let s={};for(let b in this.events){let r=this.events[b];r.date.getFullYear()===n.getFullYear()&&r.date.getMonth()+1===n.getMonth()+1&&r.date.getDate()===t&&(s[b]=r)}return s},isoDateOnly(t){const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),b=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${b}`}}},tm={class:"calendar"},nm={class:"recherche"},sm={class:"recherche btn-group"},rm=["value"],im=["value"],am={class:"table table-bordered table-hover table-sm"},lm=["data-jour"],om={class:"nom-jour"},dm={class:"numero-jour"},um={class:"num-jour badge bg-secondary rounded-circle"},cm={key:0},mm=["data-jour"];function hm(t,n,s,b,r,i){const d=j;return a(),l("div",tm,[e("div",nm,[e("div",sm,[e("button",{class:"btn btn-light",id:"prevMois",onClick:n[0]||(n[0]=(...m)=>i.prevMois&&i.prevMois(...m)),title:"Mois précédant"},[_(d,{name:"chevron-left"})]),v(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":n[1]||(n[1]=m=>r.mois=m)},[(a(!0),l(y,null,C(i.listeMois(),m=>(a(),l("option",{value:m.id},u(m.libelle),9,rm))),256))],512),[[T,r.mois]]),v(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":n[2]||(n[2]=m=>r.annee=m)},[(a(!0),l(y,null,C(i.listeAnnees(),m=>(a(),l("option",{value:m},u(m),9,im))),256))],512),[[T,r.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:n[3]||(n[3]=(...m)=>i.nextMois&&i.nextMois(...m)),title:"Mois suivant"},[_(d,{name:"chevron-right"})])])]),e("table",am,[(a(!0),l(y,null,C(i.listeJours,m=>(a(),l("tr",{"data-jour":m},[e("th",om,u(i.nomJour(m)),1),e("th",dm,[e("div",um,u(m<10?"0"+m.toString():m),1)]),e("td",null,[(a(!0),l(y,null,C(i.eventsByJour(m),(c,o)=>(a(),l("div",{class:"event",style:W("border-color:"+c.color+";background-color:"+c.bgcolor),key:o},[(a(),R(he(c.component),{event:c},null,8,["event"]))],4))),128)),i.canAdd(m)?(a(),l("div",cm,[e("button",{onClick:n[4]||(n[4]=(...c)=>i.addEvent&&i.addEvent(...c)),"data-jour":m,class:"btn btn-light btn-sm"},[_(d,{name:"plus"}),f(" Nouvel événement ")],8,mm)])):h("",!0)])],8,lm))),256))])])}const _m=S(em,[["render",hm],["__scopeId","data-v-51bbc42d"]]),pm={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(t){modAjax(t.currentTarget,n=>{this.suivi.refresh()})},supprimer(t){popConfirm(t.currentTarget,n=>{this.suivi.refresh()})},valider(t){unicaenVue.axios.get(this.validerUrl).then(n=>{this.suivi.refresh()})},devalider(t){popConfirm(t.currentTarget,n=>{this.suivi.refresh()})}}},fm={class:"event-content"},bm={class:"mission"},vm={key:0,class:"badge bg-success"},gm={class:"horaires"},ym={key:0,class:"badge bg-secondary"},xm={key:0,class:"description"},Cm={class:"event-actions"},Vm={class:"btn-group btn-group-sm"},Pm=["data-url"],Sm=["data-url"],km=["data-url"],Am=["data-url"];function Mm(t,n,s,b,r,i){const d=j;return a(),l(y,null,[e("div",fm,[e("p",bm,[f(u(s.event.mission.libelleCourt)+" ",1),s.event.valide?(a(),l("span",vm,"Validé")):h("",!0)]),e("p",gm,[f(" de "+u(i.heureDebut)+" à "+u(i.heureFin)+", soit "+u(i.heures)+" heure"+u(i.heures<2?"":"s")+" ",1),s.event.formation?(a(),l("span",ym,"En formation")):h("",!0)]),s.event.description?(a(),l("p",xm,u(s.event.description),1)):h("",!0)]),e("div",Cm,[e("div",Vm,[s.event.canEdit?(a(),l("button",{key:0,class:"btn btn-light",onClick:n[0]||(n[0]=(...m)=>i.modifier&&i.modifier(...m)),title:"Modifier le suivi","data-url":r.modifierUrl},[_(d,{name:"pen-to-square"})],8,Pm)):h("",!0),s.event.canValider?(a(),l("button",{key:1,class:"btn btn-light",onClick:n[1]||(n[1]=(...m)=>i.valider&&i.valider(...m)),title:"Valider le suivi","data-url":r.validerUrl},[_(d,{name:"check",class:"text-success"})],8,Sm)):h("",!0),s.event.canDevalider?(a(),l("button",{key:2,class:"btn btn-light",onClick:n[2]||(n[2]=(...m)=>i.devalider&&i.devalider(...m)),title:"Dévalider le suivi","data-url":r.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[_(d,{name:"xmark",class:"text-danger"})],8,km)):h("",!0),s.event.canSupprimer?(a(),l("button",{key:3,class:"btn btn-light",onClick:n[3]||(n[3]=(...m)=>i.supprimer&&i.supprimer(...m)),title:"Supprimer le suivi","data-url":r.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[_(d,{name:"trash-can",class:"text-danger"})],8,Am)):h("",!0)])])],64)}const ae=S(pm,[["render",Mm],["__scopeId","data-v-17cb1f29"]]),Dm=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"})),Em={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(t){this.date=t},ajouter(t,n){const s={intervenant:this.intervenant,date:t.toISOString().slice(0,10)};n.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",s),modAjax(n.currentTarget,b=>{this.refresh()})},refresh(){const t=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let n=0,s=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(b=>{let r=[];for(let i in b.data){let d=b.data[i];s[d.mission.id]===void 0&&(s[d.mission.id]=t[n],n++),d.valide&&(d.bgcolor="#d0eddb"),d.color=s[d.mission.id],d.component=_e(ae),d.date=new Date(d.date),d.intervenant=this.intervenant,r.push(d)}this.suivi=r,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function Tm(t,n,s,b,r,i){const d=_m;return a(),R(d,{date:r.date,onChangeDate:i.changeDate,onAddEvent:i.ajouter,"can-add-event":s.canAddMission,addDateFin:"now",events:r.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const Um=S(Em,[["render",Tm]]),Fm=Object.freeze(Object.defineProperty({__proto__:null,default:Um},Symbol.toStringTag,{value:"Module"})),Rm={name:"DemandeMiseEnPaiementStructure",props:{datas:{required:!0},intervenant:{required:!0}},data(){return{dotationPaieEtat:this.datas.budget.dotation.paieEtat,dotationRessourcesPropres:this.datas.budget.dotation.ressourcePropre,consommationPaieEtat:this.datas.budget.liquidation.paieEtat,consommationRessourcesPropres:this.datas.budget.liquidation.ressourcePropre}},watch:{datas:function(){this.dotationPaieEtat=this.datas.budget.dotation.paieEtat,this.dotationRessourcesPropres=this.datas.budget.dotation.ressourcePropre,this.consommationPaieEtat=this.datas.budget.liquidation.paieEtat,this.consommationRessourcesPropres=this.datas.budget.liquidation.ressourcePropre}},computed:{pourcentagePaieEtat(){return Math.round(this.consommationPaieEtat/this.dotationPaieEtat*100)},pourcentageRessourcePropre(){return Math.round(this.consommationRessourcesPropres/this.dotationRessourcesPropres*100)},bgPaieEtat(){return Math.round(this.consommationPaieEtat/this.dotationPaieEtat*100)>100?"bg-warning":"bg-success"},bgRessourcesPropres(){return Math.round(this.consommationRessourcesPropres/this.dotationRessourcesPropres*100)>100?"bg-warning":"bg-success"}},methods:{heuresStatutToString(t){if(t.heuresAPayer==t.heuresPayees&&t.heuresAPayer>0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-success">Paiement effectué</span>';if(t.heuresAPayer==t.heuresDemandees)return'<span style="font-size:12px;line-height:20px;" class="badge bg-secondary text-dark">Paiement demandé</span>';if(t.heuresDemandees==0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-light text-dark">A payer</span>';if(Number(t.heuresPayees)>Number(t.heuresAPayer)){let n=t.heuresPayees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement effectué - '+parseFloat(n.toFixed(2))+" hetd(s) payées en trop. </span>"}if(Number(t.heuresDemandees)>Number(t.heuresAPayer)){let n=t.heuresDemandees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement demandé - '+parseFloat(n.toFixed(2))+" hetd(s) demandées en trop. </span></span>"}return"indetermine"},supprimerDemandeMiseEnPaiement(t){this.btnState("remove-"+t,"disabled"),unicaenVue.axios.get(unicaenVue.url("paiement/:intervenant/supprimer-demande/:dmep",{intervenant:this.intervenant,dmep:t})).then(n=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("remove-"+t,"enabled")},4500)}).catch(n=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("remove-"+t,"enabled")},2500)})},disabledPaiement(t){return t.missionId!=""||t.formuleResServiceRefId!=""?!(t.centreCoutId&&t.domaineFonctionnel):!1},enabledPaiement(t,n){if(n=="mission"){let s=document.getElementById("add-"+t),b=document.getElementById("centreCout-"+t).value,r=document.getElementById("domaineFonctionnel-"+t).value;b!=""&&r!=""?s.disabled=!1:s.disabled=!0}},ajouterDemandeMiseEnPaiement(t){this.btnState("add-"+t,"disabled");let n={animation:!0,delay:15e3,autohide:!0},s=document.getElementById("heures-"+t),b=document.getElementById("centreCout-"+t),r=document.getElementById("domaineFonctionnel-"+t),i=Number(s.value),d=Number(s.getAttribute("max")),m=r?r.value:"",c=s.hasAttribute("data-type-heures-id")?s.getAttribute("data-type-heures-id"):"",o=s.hasAttribute("data-service-id")?s.getAttribute("data-service-id"):"",V=s.hasAttribute("data-service-referentiel-id")?s.getAttribute("data-service-referentiel-id"):"",p=s.hasAttribute("data-mission-id")?s.getAttribute("data-mission-id"):"",M=b.value,k=b.options[b.selectedIndex].getAttribute("data-ressources-propres"),G=b.options[b.selectedIndex].getAttribute("data-paie-etat");if(M=="")return unicaenVue.flashMessenger.toast("Vous devez sélectionner un centre de coût pour demander la mise en paiement de ces heures","error",n),this.btnState("add-"+t,"enabled"),!1;if(i>0&&i>d)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible, vous demandez "+i+" hetd(s) alors que vous pouvez demander maximum "+d+" hetd(s)","error",n),this.btnState("add-"+t,"enabled"),!1;if(G==1&&this.dotationPaieEtat>0&&this.dotationPaieEtat-(this.consommationPaieEtat+i)<=0)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible manque de dotation 'paie etat' pour ces heures","error",n),this.btnState("add-"+t,"enabled"),!1;if(k==1&&this.dotationRessourcesPropres>0&&this.dotationRessourcesPropres-(this.consommationRessourcesPropres+i)<=0)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible manque de dotation 'ressources propres' pour ces heures","error",n),this.btnState("add-"+t,"enabled"),!1;var N=[];let w={heures:i,centreCoutId:M,typeHeuresId:c,serviceId:o,serviceReferentielId:V,domaineFonctionnelId:m,missionId:p,structureId:this.datas.id};N.push(w),unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),N).then(q=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("add-"+t,"enabled")},4e3)}).catch(q=>{console.error(q),setTimeout(()=>{this.btnState("add-"+t,"enabled")},2500)})},demanderToutesLesHeuresEnPaiement(t,n){this.btnState("add-all-"+t,"disabled");let s=[],r=document.getElementById("demande-mise-en-paiement-"+t).getElementsByTagName("tr");for(var i=0;i<r.length;i++)if(r[i].getElementsByTagName("input").length>0&&r[i].classList.contains("detailHeure")){let d=r[i].getElementsByTagName("input")[0],m=r[i].getElementsByTagName("select")[0],c=r[i].getElementsByTagName("select")[1],o=Number(d.value),V=Number(d.getAttribute("max"));if(o<=0||o>V)console.warn("Le nombre d'heures demandées en paiement n'est pas situé entre le max et min possible.");else{let p=m.value,M=d.hasAttribute("data-type-heures-id")?d.getAttribute("data-type-heures-id"):"",k=d.hasAttribute("data-mission-id")?d.getAttribute("data-mission-id"):"",G=d.hasAttribute("data-service-id")?d.getAttribute("data-service-id"):"",N=d.hasAttribute("data-service-referentiel-id")?d.getAttribute("data-service-referentiel-id"):"",w=c?c.value:"",q={heures:o,centreCoutId:p,typeHeuresId:M,serviceId:G,serviceReferentielId:N,domaineFonctionnelId:w,missionId:k,structureId:this.datas.id};s.push(q)}}unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),s).then(d=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("add-all-"+t,"enabled")},2500)}).catch(d=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("add-all-"+t,"enabled")},2500)})},filtrerCentresCouts(t,n){let s=[];for(var b in t){let r=b,i=[];t[b].forEach(function(d,m){d[n]==1&&i.push(d)}),i.length!=0&&s.push({group:r,child:i})}return s},notValueCentreCoutValue(t,n){return this.filtrerCentresCouts(t,n).length!=0?"Choisir un centre de coût":"Aucun centre de coût disponible demande de paiement impossible"},totalHeure(t){let n=0;for(var s in t)n+=Number(t[s].heuresAPayer);return parseFloat(n.toFixed(2))},shorten(t,n=20){if(t.length>n){var s='<span title="'+t+'"';return s+='data-bs-placement="top" data-bs-toggle="tooltip">',s+=t.substring(0,n)+"...",s+="</span>",s}else return t},btnState(t,n){let s=document.getElementById(t);return s?(n=="enabled"&&(s.disabled=!1,s.querySelector("#waiting").style.display="none",s.querySelector("#action").style.display="inline-block"),n=="disabled"&&(s.disabled=!0,s.querySelector("#waiting").style.display="inline-block",s.querySelector("#action").style.display="none"),!0):!1},formatDate(t,n){return Util.dateToString(t)}}},Im=["id"],wm=["id"],$m=["aria-controls","data-bs-target"],Lm=["id","aria-labelledby"],Nm={class:"accordion-body"},Hm={key:0},jm=e("div",{class:"cartridge gray bordered",style:{"padding-bottom":"5px","margin-bottom":"20px"}},[e("span",null,"Budget")],-1),Om={class:"container"},qm={class:"table table-bordered caption-top"},zm=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Paie état"),e("th",{class:"fw-bold",scope:"col"},"Ressources propres")])],-1),Bm={style:{width:"50%"}},Gm={key:0,class:"text-center progress position-relative bg-secondary",style:{height:"30px"}},Jm={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},Ym=["aria-valuemax","aria-valuenow","title"],Qm={key:1,class:"text-center"},Wm={style:{width:"50%"}},Xm={key:0,class:"progress position-relative bg-secondary",style:{height:"30px"}},Zm={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},Km=["aria-valuemax","aria-valuenow","title"],eh={key:1,class:"text-center"},th={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},nh=e("span",null,"Enseignement",-1),sh=["innerHTML"],rh={class:"container"},ih={class:"row"},ah={class:"col-12"},lh={class:"table mt-3 table-bordered"},oh={class:"table-light"},dh={colspan:"2"},uh={colspan:"2"},ch={class:"table table-sm"},mh=e("thead",null,[e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"40%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),hh={class:"detailHeure"},_h={key:0,style:{width:"20%"}},ph=["title"],fh={class:"number number-positif"},bh=["title"],vh={class:"number number-positif"},gh={key:1,style:{width:"20%"}},yh={class:"input-group col-1"},xh=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],Ch=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),Vh={key:2},Ph=["id"],Sh={value:""},kh=["label"],Ah=["data-paie-etat","data-ressources-propres","selected","value"],Mh=["innerHTML"],Dh=["innerHTML"],Eh={style:{"font-size":"12px"}},Th={key:0},Uh=["id","onClick"],Fh={key:1},Rh=["id","onClick"],Ih={class:"table-light"},wh=e("th",{scope:"row"},"Total heures à payer",-1),$h={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},Lh=e("span",null,"Référentiel",-1),Nh={class:"container"},Hh={class:"row"},jh={class:"col-12"},Oh={class:"table mt-3 table-bordered"},qh={colspan:"2"},zh={class:"table table-sm"},Bh=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),Gh={class:"detailHeure"},Jh={key:0,style:{width:"20%"}},Yh=["title"],Qh={class:"number number-positif"},Wh=["title"],Xh={class:"number number-positif"},Zh={key:1,style:{width:"20%"}},Kh={class:"input-group col-1"},e_=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],t_=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),n_={key:2},s_=["id"],r_={value:""},i_=["label"],a_=["data-paie-etat","data-ressources-propres","selected","value"],l_=["innerHTML"],o_={key:4},d_=["id"],u_=e("option",{value:""},"Aucun domaine fonctionnel",-1),c_=["selected","value"],m_={key:5},h_=["innerHTML"],__={style:{"font-size":"12px"}},p_={key:0},f_=["id","onClick"],b_={key:1},v_=["id","onClick"],g_={class:"table-light"},y_=e("th",{scope:"row"},"Total",-1),x_={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},C_=e("span",null,"Mission",-1),V_={class:"container"},P_={class:"row"},S_={class:"col-12"},k_={class:"table mt-3 table-bordered"},A_={colspan:"2"},M_={class:"table table-sm"},D_=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),E_={class:"detailHeure"},T_={key:0,style:{width:"20%"}},U_=["title"],F_={class:"number number-positif"},R_=["title"],I_={class:"number number-positif"},w_={key:1,style:{width:"20%"}},$_={class:"input-group col-1"},L_=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],N_=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"heure(s)",-1),H_={key:2},j_=["id","onChange"],O_={value:""},q_=["label"],z_=["data-paie-etat","data-ressources-propres","selected","value"],B_=["innerHTML"],G_={key:4},J_=["id","onChange"],Y_=e("option",{value:""},"Aucun domaine fonctionnel",-1),Q_=["selected","value"],W_={key:5},X_=["innerHTML"],Z_={style:{"font-size":"12px"}},K_={key:0},ep=["id","onClick"],tp={key:1},np=["id","onClick"],sp={class:"table-light"},rp=e("th",{scope:"row"},"Total",-1),ip={style:{"background-color":"#fbfbfb",padding:"10px","padding-right":"40px","text-align":"right"}},ap=["id"];function lp(t,n,s,b,r,i){const d=j;return a(),l("div",{id:"demande-mise-en-paiement-"+s.datas.code,class:"accordion-item"},[e("h2",{id:"dmep-heading-"+s.datas.code,class:"accordion-header"},[e("button",{"aria-controls":"dmep-collapse-"+s.datas.code,"data-bs-target":"#dmep-collapse-"+s.datas.code,"aria-expanded":"true",class:"accordion-button bg-light","data-bs-toggle":"collapse",type:"button"},u(s.datas.code+" - "+s.datas.libelle),9,$m)],8,wm),e("div",{id:"dmep-collapse-"+s.datas.code,"aria-labelledby":"dmep-heading-"+s.datas.code,class:"accordion-collapse collapse show"},[e("div",Nm,[this.dotationPaieEtat+r.dotationRessourcesPropres>0?(a(),l("div",Hm,[jm,e("div",Om,[e("table",qm,[zm,e("tbody",null,[e("tr",null,[e("td",Bm,[this.dotationPaieEtat>0?(a(),l("div",Gm,[e("span",Jm,u(this.consommationPaieEtat+" sur "+this.dotationPaieEtat)+" HETD",1),e("div",{"aria-valuemax":this.dotationPaieEtat,"aria-valuenow":this.consommationPaieEtat,class:D("progress-bar progress-bar-striped "+this.bgPaieEtat),style:W("width:"+this.pourcentagePaieEtat+"%;"),title:this.pourcentagePaieEtat+"%","aria-valuemin":"0",role:"progressbar"},null,14,Ym)])):h("",!0),this.dotationPaieEtat==0?(a(),l("div",Qm," Aucune dotation paie état ")):h("",!0)]),e("td",Wm,[this.dotationRessourcesPropres>0?(a(),l("div",Xm,[e("span",Zm,u(this.consommationRessourcesPropres+" sur "+this.dotationRessourcesPropres)+" HETD",1),e("div",{"aria-valuemax":this.dotationRessourcesPropres,"aria-valuenow":this.consommationRessourcesPropres,class:D("progress-bar progress-bar-striped "+this.bgRessourcesPropres),style:W("width:"+this.pourcentageRessourcePropre+"%;"),title:this.pourcentageRessourcePropre+"%","aria-valuemin":"0",role:"progressbar"},null,14,Km)])):h("",!0),this.dotationRessourcesPropres==0?(a(),l("div",eh," Aucune dotation ressources propres ")):h("",!0)])])])])])])):h("",!0),(a(!0),l(y,null,C(s.datas.etapes,(m,c)=>(a(),l("div",null,[(a(!0),l(y,null,C(m.enseignements,(o,V)=>(a(),l("div",null,[e("div",th,[nh,e("span",{innerHTML:i.shorten(m.libelle,50)},null,8,sh),e("span",null,u(o.libelle),1)]),e("div",rh,[e("div",ih,[(a(!0),l(y,null,C(o.typeHeure,(p,M)=>(a(),l("div",ah,[e("table",lh,[e("thead",oh,[e("tr",null,[e("th",dh,u(p.libelle),1)])]),e("tbody",null,[e("tr",null,[e("td",uh,[e("table",ch,[mh,e("tbody",null,[(a(!0),l(y,null,C(p.heures,(k,G)=>(a(),l("tr",hh,[k.heuresDemandees!=0?(a(),l("td",_h,[k.datePaiement?(a(),l("abbr",{key:0,title:"Payé en "+k.periodeLibelle+" le "+i.formatDate(k.datePaiement)},[e("span",fh,u(Number(k.heuresPayees))+" hetd(s)",1)],8,ph)):h("",!0),k.datePaiement?h("",!0):(a(),l("abbr",{key:1,title:"Demandé le "+i.formatDate(k.dateDemande)},[e("span",vh,u(Number(k.heuresDemandees))+" hetd(s)",1)],8,bh))])):h("",!0),k.heuresDemandees==0?(a(),l("td",gh,[e("div",yh,[e("input",{id:"heures-"+c+"-"+V+"-"+M,"data-domaine-fonctionnel-id":k.domaineFonctionnelId,"data-mission-id":k.missionId,"data-service-id":k.serviceId,"data-service-referentiel-id":k.serviceReferentielId,"data-type-heures-id":k.typeHeureId,max:k.heuresAPayer,value:k.heuresAPayer,class:"form-control form-control-sm",min:"0",type:"number"},null,8,xh),Ch])])):h("",!0),k.heuresDemandees==0?(a(),l("td",Vh,[e("select",{id:"centreCout-"+c+"-"+V+"-"+M,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",Sh,u(i.notValueCentreCoutValue(s.datas.centreCoutPaiement,k.typeHeureCode)),1),(a(!0),l(y,null,C(i.filtrerCentresCouts(s.datas.centreCoutPaiement,k.typeHeureCode),N=>(a(),l("optgroup",{key:N.group,label:N.group},[(a(!0),l(y,null,C(N.child,w=>(a(),l("option",{key:w.value,"data-paie-etat":w.paieEtat,"data-ressources-propres":w.ressourcesPropres,selected:w.centreCoutId==k.centreCout.centreCoutId,value:w.centreCoutId},u(w.centreCoutCode+" - "+w.centreCoutLibelle),9,Ah))),128))],8,kh))),128))],8,Ph)])):h("",!0),k.heuresDemandees!=0?(a(),l("td",{key:3,innerHTML:i.shorten(k.centreCout.code+" - "+k.centreCout.libelle,30)},null,8,Mh)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(k)},null,8,Dh),e("td",Eh,[k.heuresPayees==0&&k.heuresDemandees>0?(a(),l("span",Th,[e("button",{id:"remove-"+k.mepId,class:"btn btn-danger",type:"button",onClick:N=>this.supprimerDemandeMiseEnPaiement(k.mepId)},[_(d,{id:"action",name:"trash",style:{color:"white"}}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Uh)])):h("",!0),k.heuresDemandees==0?(a(),l("span",Fh,[e("button",{id:"add-"+c+"-"+V+"-"+M,class:"btn btn-primary",type:"button",onClick:N=>this.ajouterDemandeMiseEnPaiement(c+"-"+V+"-"+M)},[_(d,{id:"action",name:"plus"}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Rh)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",Ih,[wh,e("td",null,u(i.totalHeure(p.heures))+" hetd(s)",1)])])])]))),256))])])]))),256))]))),256)),(a(!0),l(y,null,C(s.datas.fonctionsReferentiels,(m,c)=>(a(),l("div",null,[e("div",$h,[Lh,e("span",null,u(m.libelle),1)]),e("div",Nh,[e("div",Hh,[e("div",jh,[e("table",Oh,[e("tbody",null,[e("tr",null,[e("td",qh,[e("table",zh,[Bh,e("tbody",null,[(a(!0),l(y,null,C(m.heures,(o,V)=>(a(),l("tr",Gh,[o.heuresDemandees!=0?(a(),l("td",Jh,[o.datePaiement?(a(),l("abbr",{key:0,title:"Payé en "+o.periodeLibelle+" le "+i.formatDate(o.datePaiement)},[e("span",Qh,u(Number(o.heuresPayees))+" hetd(s)",1)],8,Yh)):h("",!0),o.datePaiement?h("",!0):(a(),l("abbr",{key:1,title:"Demandé le "+i.formatDate(o.dateDemande)},[e("span",Xh,u(Number(o.heuresDemandees))+" hetd(s)",1)],8,Wh))])):h("",!0),o.heuresDemandees==0?(a(),l("td",Zh,[e("div",Kh,[e("input",{id:"heures-"+c,"data-domaine-fonctionnel-id":o.domaineFonctionnelId,"data-mission-id":o.missionId,"data-service-id":o.serviceId,"data-service-referentiel-id":o.serviceReferentielId,"data-type-heures-id":o.typeHeureId,max:o.heuresAPayer,value:o.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,e_),t_])])):h("",!0),o.heuresDemandees==0?(a(),l("td",n_,[e("select",{id:"centreCout-"+c,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",r_,u(i.notValueCentreCoutValue(s.datas.centreCoutPaiement,o.typeHeureCode)),1),(a(!0),l(y,null,C(i.filtrerCentresCouts(s.datas.centreCoutPaiement,"referentiel"),p=>(a(),l("optgroup",{key:p.group,label:p.group},[(a(!0),l(y,null,C(p.child,M=>(a(),l("option",{key:M.value,"data-paie-etat":M.paieEtat,"data-ressources-propres":M.ressourcesPropres,selected:M.centreCoutId==o.centreCout.centreCoutId,value:M.centreCoutId},u(M.centreCoutCode+" - "+M.centreCoutLibelle),9,a_))),128))],8,i_))),128))],8,s_)])):h("",!0),o.heuresDemandees!=0?(a(),l("td",{key:3,innerHTML:i.shorten(o.centreCout.code+" - "+o.centreCout.libelle,20)},null,8,l_)):h("",!0),o.heuresDemandees==0?(a(),l("td",o_,[e("select",{id:"domaineFonctionnel-"+c,class:"selectpicker","data-live-search":"true",name:"centreCout"},[u_,(a(!0),l(y,null,C(s.datas.domaineFonctionnelPaiement,p=>(a(),l("option",{selected:p.domaineFonctionnelId==o.domaineFonctionnel.domaineFonctionnelId,value:p.domaineFonctionnelId},u(p.domaineFonctionnelLibelle),9,c_))),256))],8,d_)])):h("",!0),o.heuresDemandees!=0?(a(),l("td",m_,u(o.domaineFonctionnel.libelle),1)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(o)},null,8,h_),e("td",__,[o.heuresPayees==0&&o.heuresDemandees>0?(a(),l("span",p_,[e("button",{id:"remove-"+o.mepId,class:"btn btn-danger",type:"button",onClick:p=>this.supprimerDemandeMiseEnPaiement(o.mepId)},[_(d,{id:"action",name:"trash",style:{color:"white"}}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,f_)])):h("",!0),o.heuresDemandees==0?(a(),l("span",b_,[e("button",{id:"add-"+c,class:"btn btn-primary",type:"button",onClick:p=>this.ajouterDemandeMiseEnPaiement(c)},[_(d,{id:"action",name:"plus"}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,v_)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",g_,[y_,e("td",null,u(i.totalHeure(m.heures))+" hetd(s)",1)])])])])])])]))),256)),(a(!0),l(y,null,C(s.datas.missions,m=>(a(),l("div",null,[e("div",x_,[C_,e("span",null,u(m.libelle),1)]),e("div",V_,[e("div",P_,[e("div",S_,[e("table",k_,[e("tbody",null,[e("tr",null,[e("td",A_,[e("table",M_,[D_,e("tbody",null,[(a(!0),l(y,null,C(m.heures,(c,o)=>(a(),l("tr",E_,[c.heuresDemandees!=0?(a(),l("td",T_,[c.datePaiement?(a(),l("abbr",{key:0,title:"Payé en "+c.periodeLibelle+" le "+i.formatDate(c.datePaiement)},[e("span",F_,u(Number(c.heuresPayees))+" heure(s)",1)],8,U_)):h("",!0),c.datePaiement?h("",!0):(a(),l("abbr",{key:1,title:"Demandé le "+i.formatDate(c.dateDemande)},[e("span",I_,u(Number(c.heuresDemandees))+" heure(s)",1)],8,R_))])):h("",!0),c.heuresDemandees==0?(a(),l("td",w_,[e("div",$_,[e("input",{id:"heures-"+m.missionId,"data-domaine-fonctionnel-id":c.domaineFonctionnelId,"data-mission-id":c.missionId,"data-service-id":c.serviceId,"data-service-referentiel-id":c.serviceReferentielId,"data-type-heures-id":c.typeHeureId,max:c.heuresAPayer,value:c.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,L_),N_])])):h("",!0),c.heuresDemandees==0?(a(),l("td",H_,[e("select",{id:"centreCout-"+m.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:V=>i.enabledPaiement(m.missionId,"mission")},[e("option",O_,u(i.notValueCentreCoutValue(s.datas.centreCoutPaiement,c.typeHeureCode)),1),(a(!0),l(y,null,C(i.filtrerCentresCouts(s.datas.centreCoutPaiement,"mission"),V=>(a(),l("optgroup",{key:V.group,label:V.group},[(a(!0),l(y,null,C(V.child,p=>(a(),l("option",{key:p.value,"data-paie-etat":p.paieEtat,"data-ressources-propres":p.ressourcesPropres,selected:p.centreCoutId==c.centreCout.centreCoutId,value:p.centreCoutId},u(p.centreCoutCode+" - "+p.centreCoutLibelle),9,z_))),128))],8,q_))),128))],40,j_)])):h("",!0),c.heuresDemandees!=0?(a(),l("td",{key:3,innerHTML:i.shorten(c.centreCout.code+" - "+c.centreCout.libelle,20)},null,8,B_)):h("",!0),c.heuresDemandees==0?(a(),l("td",G_,[e("select",{id:"domaineFonctionnel-"+m.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:V=>i.enabledPaiement(m.missionId,"mission")},[Y_,(a(!0),l(y,null,C(s.datas.domaineFonctionnelPaiement,V=>(a(),l("option",{selected:V.domaineFonctionnelId==c.domaineFonctionnel.domaineFonctionnelId,value:V.domaineFonctionnelId},u(V.domaineFonctionnelLibelle),9,Q_))),256))],40,J_)])):h("",!0),c.heuresDemandees!=0?(a(),l("td",W_,u(c.domaineFonctionnel.libelle),1)):h("",!0),e("td",{innerHTML:i.heuresStatutToString(c)},null,8,X_),e("td",Z_,[c.heuresPayees==0&&c.heuresDemandees>0?(a(),l("span",K_,[e("button",{id:"remove-"+c.mepId,class:"btn btn-danger",type:"button",onClick:V=>this.supprimerDemandeMiseEnPaiement(c.mepId)},[_(d,{id:"action",name:"trash",style:{color:"white"}}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,ep)])):h("",!0),c.heuresDemandees==0?(a(),l("span",tp,[e("button",{id:"add-"+m.missionId,class:"btn btn-primary",type:"button",onClick:V=>this.ajouterDemandeMiseEnPaiement(m.missionId)},[_(d,{id:"action",name:"plus"}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,np)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",sp,[rp,e("td",null,u(i.totalHeure(m.heures))+" heure(s)",1)])])])])])])]))),256))]),e("div",ip,[e("button",{id:"add-all-"+s.datas.code,class:"btn btn-primary",type:"button",onClick:n[0]||(n[0]=m=>i.demanderToutesLesHeuresEnPaiement(s.datas.code,s.datas.libelle))},[_(d,{id:"action",name:"square-plus",style:{color:"white"}}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}}),f(" DEMANDER TOUS LES PAIEMENTS POUR "+u(s.datas.libelleCourt),1)],8,ap)])],8,Lm)],8,Im)}const le=S(Rm,[["render",lp]]),op=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),dp={name:"DemandeMiseEnPaiement",components:{DemandeMiseEnPaiementStructure:le},props:{intervenant:{required:!1}},data(){return{datasDemandesMiseEnPaiement:null,urlGetDemandesMiseEnPaiement:unicaenVue.url("intervenant/:intervenant/mise-en-paiement/get-demandes-mise-en-paiement",{intervenant:this.intervenant})}},methods:{getDemandesMiseEnPaiement(){unicaenVue.axios.get(this.urlGetDemandesMiseEnPaiement).then(t=>{this.datasDemandesMiseEnPaiement=t.data}).catch(t=>{console.error(t)})}},mounted(){this.getDemandesMiseEnPaiement()},updated(){$(".selectpicker").selectpicker("render");var t=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));t.map(function(n){return new bootstrap.Tooltip(n)})}},up={key:0,class:"text-center"},cp=e("div",{class:"mt-5 spinner-border spinner-border-sm",role:"status"},[e("span",{class:"visually-hidden"},"Chargement des demandes de mise en paiement en cours...")],-1),mp={id:"accordionPanelsStayOpenExample",class:"accordion"};function hp(t,n,s,b,r,i){const d=F("demande-mise-en-paiement-structure");return a(),l(y,null,[this.datasDemandesMiseEnPaiement?h("",!0):(a(),l("div",up,[cp,f(" Chargement des demandes de mise en paiement en cours... ")])),e("div",mp,[(a(!0),l(y,null,C(r.datasDemandesMiseEnPaiement,(m,c)=>(a(),R(d,{datas:m,intervenant:s.intervenant,onRefresh:i.getDemandesMiseEnPaiement},null,8,["datas","intervenant","onRefresh"]))),256))])],64)}const _p=S(dp,[["render",hp]]),pp=Object.freeze(Object.defineProperty({__proto__:null,default:_p},Symbol.toStringTag,{value:"Module"}));function fp(t){for(let n in t)for(let s in t[n])oe(t[n][s],n)}function bp(){let t=document.getElementById("unicaen-vue-toast-container");return t||(t=document.createElement("div"),t.id="unicaen-vue-toast-container",t.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(t)),t}function vp(t){return t=gp(t),t=yp(t),t}function gp(t){const n=document.createElement("div");n.innerHTML=t;const s=n.querySelector(".alert");return s?s.innerHTML:n.innerHTML}function yp(t){const n=document.createElement("div");return n.innerHTML=t,n.querySelectorAll("i.fas").forEach(b=>b.style.display="none"),n.innerHTML}function oe(t,n,s=null){const b={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},r={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},i=document.createElement("button");i.classList.add("btn-close","btn-close-white","h5"),i.style.float="right",i.setAttribute("data-bs-dismiss","toast"),i.setAttribute("aria-label","Close");const d=document.createElement("i");d.classList.add("icon","fas",`fa-${r[n]}`),d.style.float="left",d.style.fontSize="26pt",d.style.paddingLeft=".4rem",d.style.marginTop=".4rem",d.style.paddingRight="1rem";const m=document.createElement("div");m.classList.add("toast-body"),m.innerHTML=vp(t);const c=document.createElement("div");c.appendChild(i),c.appendChild(d),c.appendChild(m);const o=document.createElement("div");o.classList.add("toast","text-white",b[n]?b[n]:"bg-secondary"),o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),n==="error"&&t.length>500&&o.setAttribute("style","width:700px"),o.appendChild(c),bp().appendChild(o),s==null&&(s={animation:!0,delay:n==="warning"?15e3:5e3,autohide:n!=="error"}),new bootstrap.Toast(o,s).show()}const X={toast:oe,toasts:fp};let Y={...pe};Y.interceptors.request.use(t=>{if(t.submitter){let n=t.msg?t.msg:"Action en cours";t.popover!=null&&t.popover.dispose(),t.popover=new bootstrap.Popover(t.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+n,html:!0,trigger:"focus"}),t.popover.show()}return t});Y.interceptors.response.use(t=>{if(t.messages=t.data.messages,t.data=t.data.data,t.hasErrors=!!(t.messages&&t.messages.error&&t.messages.error.length>0),t.config.popover){var n=t.config.popover;let s="";for(ns in t.messages)for(mid in t.messages[ns])s+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+t.messages[ns][mid]+"</div>";s?(n._config.content=s,n.setContent(),setTimeout(()=>{n.dispose()},5e3)):n.dispose()}return t.messages&&X.toasts(t.messages),t},t=>{let n=t.response.data;t.response.status==403?n="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":n=t.response.data,X.toast(n,"error")});Y.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const xp={uvAxios:Y},Z={axios:xp.uvAxios,flashMessenger:X,url:(t,n,s)=>{let b=window.__unicaenVueBaseUrl;if(n)for(let i in n)t=t.replace(`:${i}`,n[i]);let r=s?Z.encodeUrlQueryParam(s):null;return b+t+(r?`?${r}`:"")},encodeUrlQueryParam:(t,n)=>{var s=[];for(var b in t)if(t.hasOwnProperty(b)){var r=t[b],i=n?n+"["+encodeURIComponent(b)+"]":encodeURIComponent(b);if(typeof r=="object"&&r!==null)s.push(Z.encodeUrlQueryParam(r,i));else{var d=encodeURIComponent(r);s.push(i+"="+d)}}return s.join("&")}};window.unicaenVue=Z;const Cp={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{type:Array,required:!0},canMiseEnPaiement:{type:Boolean,required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),urlMiseEnPaiement:unicaenVue.url("paiement/etat-demande-paiement"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:!1,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(t){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let n=document.getElementById("formRechercheDemandeMiseEnPaiement"),s=new FormData(n),b=document.getElementById("btn-rdmep"),r=document.getElementById("btn-rdmep-inprogress");r.classList.remove("d-none"),b.classList.add("d-none"),b.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,s,{}).then(i=>{this.dispatchDatas(i.data),b.disabled=!1,r.classList.add("d-none"),b.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(m,c){m.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(m=>{let c=m.data;this.dotation=c.dotation,this.liquidation=c.liquidation,this.refreshTotalConsommation()})}).catch(i=>{console.error(i)})},processDemandeMiseEnPaiement(t){let n=document.getElementById("formProcessDemandeMiseEnPaiement"),s=new FormData(n);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>=this.totalConsommationRessourcePropre||!this.haveDotation){let b=document.getElementById("btn-pdmep"),r=document.getElementById("btn-pdmep-inprogress");r.classList.remove("d-none"),b.classList.add("d-none"),b.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,s,{}).then(i=>{this.findDemandeMiseEnPaiement(),b.disabled=!1,r.classList.add("d-none"),b.classList.remove("d-none")}).catch(i=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let t=0,n=0,s=0;t=parseFloat(this.liquidation.paieEtat),n=parseFloat(this.liquidation.ressourcePropre),s+=parseFloat(this.liquidation.ressourcePropre),s+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(r,i){r.hasAttribute("data-paie-etat")&&r.checked&&(t+=parseFloat(r.getAttribute("data-paie-etat")),s+=parseFloat(r.getAttribute("data-paie-etat"))),r.hasAttribute("data-ressource-propre")&&r.checked&&(n+=parseFloat(r.getAttribute("data-ressource-propre")),s+=parseFloat(r.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=t.toFixed(2),this.totalConsommationRessourcePropre=n.toFixed(2),this.totalConsommation=s.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(t){let n=0;return t.forEach((s,b)=>{s.centreCout.code!=""&&(s.missionId!=""||s.serviceRefId!=""?s.domaineFonctionnel.code!=""&&(n+=s.heuresAPayer):n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalNonPayable(t){let n=0;return t.forEach((s,b)=>{(s.centreCout.code==""||(s.missionId!=""||s.serviceRefId!="")&&s.domaineFonctionnel.code=="")&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePaieEtat(t){let n=0;return t.forEach((s,b)=>{s.centreCout.typeRessourceCode=="paie-etat"&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(t){let n=0;return t.forEach((s,b)=>{s.centreCout.typeRessourceCode=="ressources-propres"&&(n+=s.heuresAPayer)}),n.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(t){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[],console.log(t);for(const[n,s]of Object.entries(t))switch(s.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(s),this.intervenants.push(s);break;case"Intervenant permanent":this.permanents.push(s),this.intervenants.push(s);break;case"Étudiant":this.etudiants.push(s),this.intervenants.push(s);break;default:this.autres.push(s),this.intervenants.push(s)}},toggleCheckbox(t){let n=Array.from(document.getElementsByClassName(t.target.className));t.target.checked?n.forEach(function(s,b){s.checked=!0}):n.forEach(function(s,b){s.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(t){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:t.datasIntervenant.code})},formattedHETD(t){return Util.formattedHeures(t,!1)}}},Vp=e("h1",null,"Demande de mise en paiement par lots",-1),Pp={class:"card text-dark bg-light"},Sp=e("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1),kp={class:"card-body"},Ap={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},Mp={class:"mb-3"},Dp=e("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1),Ep=["value"],Tp={class:"mb-3"},Up=e("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),f("  Veuillez patienter... ")],-1),Fp=["disabled"],Rp=e("div",{class:"alert alert-info",role:"alert"},[f(" Seules les HETD "),e("strong",null,"(hors référentiel)"),f(" avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisées. Pour les autres, il faudra passer sur chaque fiches intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ")],-1),Ip={key:0},wp={key:0,class:"alert alert-danger",role:"alert"},$p={class:"table table-bordered caption-top"},Lp=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Budget"),e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressource propre"),e("th",{class:"fw-bold",scope:"col"},"Total")])],-1),Np=e("td",null,"Dotation",-1),Hp={class:"fw-bold"},jp=e("td",null,"Consommation",-1),Op={class:"fw-bold"},qp={id:"dmep",class:"accordion"},zp={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},Bp={key:0,class:"accordion-item"},Gp={id:"dmep-permanents-heading",class:"accordion-header"},Jp={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},Yp={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},Qp={class:"accordion-body"},Wp={class:"table"},Xp={scope:"col"},Zp=e("th",{scope:"col"},"Intervenant",-1),Kp=e("th",null,"HETD payables",-1),ef=e("th",null,"HETD non payables",-1),tf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],nf=["href"],sf=["title"],rf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},af={key:1,class:"accordion-item"},lf={id:"dmep-vacataires-heading",class:"accordion-header"},of={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},df={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},uf={class:"accordion-body"},cf={class:"table"},mf=e("th",null,"Intervenant",-1),hf=e("th",null,"HETD payables",-1),_f=e("th",null,"HETD non payables",-1),pf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],ff=["href"],bf=["title"],vf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},gf={key:2,class:"accordion-item"},yf={id:"dmep-etudiants-heading",class:"accordion-header"},xf={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},Cf={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},Vf={class:"accordion-body"},Pf={class:"table"},Sf=e("th",null,"Intervenant",-1),kf=e("th",null,"HETD payables",-1),Af=e("th",null,"HETD non payables",-1),Mf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Df=["href"],Ef=["title"],Tf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Uf={key:3,class:"accordion-item"},Ff={id:"dmep-autres-heading",class:"accordion-header"},Rf={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},If={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},wf={class:"accordion-body"},$f={class:"table"},Lf=e("th",null,"Intervenant",-1),Nf=e("th",null,"HETD payables",-1),Hf=e("th",null,"HETD non payables",-1),jf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Of=["href"],qf=["title"],zf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Bf=["value"],Gf={key:4,class:"mt-3"},Jf=e("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),f("  Veuillez patienter... ")],-1),Yf=["disabled"],Qf=["href"];function Wf(t,n,s,b,r,i){return a(),l(y,null,[Vp,e("div",Pp,[Sp,e("div",kp,[e("form",Ap,[e("div",Mp,[Dp,f("  "),v(e("select",{"onUpdate:modelValue":n[0]||(n[0]=d=>r.selectedStructure=d),class:"form-select",name:"structure"},[(a(!0),l(y,null,C(s.structures,d=>(a(),l("option",{value:d.id},u(d.libelle),9,Ep))),256))],512),[[T,r.selectedStructure]])]),e("div",Tp,[Up,e("button",{id:"btn-rdmep",disabled:!r.selectedStructure,class:"btn btn-primary",type:"button",onClick:n[1]||(n[1]=(...d)=>i.findDemandeMiseEnPaiement&&i.findDemandeMiseEnPaiement(...d))}," Lancer la recherche ",8,Fp)])])])]),Rp,i.haveDotation?(a(),l("div",Ip,[r.alertDotation?(a(),l("div",wp," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):h("",!0),e("table",$p,[Lp,e("tbody",null,[e("tr",null,[Np,e("td",null,u(i.formattedHETD(this.dotation.paieEtat))+" HETD",1),e("td",null,u(i.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),e("td",Hp,u(i.formattedHETD(this.dotation.total))+" HETD",1)]),e("tr",null,[jp,e("td",null,[e("span",{class:D(i.alertPaieEtat)},u(i.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),e("td",null,[e("span",{class:D(i.alertRessourcePropre)},u(i.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),e("td",Op,u(i.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):h("",!0),e("div",qp,[e("form",zp,[this.permanents.length>0?(a(),l("div",Bp,[e("h2",Gp,[e("button",Jp,u(this.permanents.length)+" Permanent(s) ",1)]),e("div",Yp,[e("div",Qp,[e("table",Wp,[e("thead",null,[e("tr",null,[e("th",Xp,[e("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:n[2]||(n[2]=(...d)=>i.toggleCheckbox&&i.toggleCheckbox(...d))})]),Zp,Kp,ef])]),e("tbody",null,[(a(!0),l(y,null,C(this.permanents,d=>(a(),l("tr",null,[e("td",null,[e("input",{id:"permanent-"+d.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(d.heures),"data-ressource-propre":i.totalRessourcePropre(d.heures),disabled:i.totalPayable(d.heures)==0,name:"intervenant["+d.datasIntervenant.id+"]",title:i.totalPayable(d.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:n[3]||(n[3]=m=>i.refreshTotalConsommation())},null,40,tf)]),e("td",null,[e("a",{href:i.urlIntervenant(d),target:"_blank"},u(d.datasIntervenant.nom_usuel.toUpperCase()+" "+d.datasIntervenant.prenom),9,nf)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(d.heures)+" HETD en paie état / "+i.totalRessourcePropre(d.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(i.totalPayable(d.heures))+" h",9,sf)]),e("td",null,[e("span",rf,u(i.totalNonPayable(d.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.vacataires.length>0?(a(),l("div",af,[e("h2",lf,[e("button",of,u(this.vacataires.length)+" Vacataire(s) ",1)]),e("div",df,[e("div",uf,[e("table",cf,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:n[4]||(n[4]=(...d)=>i.toggleCheckbox&&i.toggleCheckbox(...d))})]),mf,hf,_f])]),e("tbody",null,[(a(!0),l(y,null,C(this.vacataires,d=>(a(),l("tr",null,[e("td",null,[e("input",{id:"vacataire-"+d.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(d.heures),"data-ressource-propre":i.totalRessourcePropre(d.heures),disabled:i.totalPayable(d.heures)==0,name:"intervenant["+d.datasIntervenant.id+"]",title:i.totalPayable(d.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:n[5]||(n[5]=m=>i.refreshTotalConsommation())},null,40,pf)]),e("td",null,[e("a",{href:i.urlIntervenant(d),target:"_blank"},u(d.datasIntervenant.nom_usuel.toUpperCase()+" "+d.datasIntervenant.prenom),9,ff)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(d.heures)+" HETD en paie état / "+i.totalRessourcePropre(d.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(i.totalPayable(d.heures))+" h",9,bf)]),e("td",null,[e("span",vf,u(i.totalNonPayable(d.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.etudiants.length>0?(a(),l("div",gf,[e("h2",yf,[e("button",xf,u(this.etudiants.length)+" Etudiant(s) ",1)]),e("div",Cf,[e("div",Vf,[e("table",Pf,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:n[6]||(n[6]=(...d)=>i.toggleCheckbox&&i.toggleCheckbox(...d))})]),Sf,kf,Af])]),e("tbody",null,[(a(!0),l(y,null,C(this.etudiants,d=>(a(),l("tr",null,[e("td",null,[e("input",{id:"etudiant-"+d.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(d.heures),"data-ressource-propre":i.totalRessourcePropre(d.heures),disabled:i.totalPayable(d.heures)==0,name:"intervenant["+d.datasIntervenant.id+"]",title:i.totalPayable(d.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:n[7]||(n[7]=m=>i.refreshTotalConsommation())},null,40,Mf)]),e("td",null,[e("a",{href:i.urlIntervenant(d),target:"_blank"},u(d.datasIntervenant.nom_usuel.toUpperCase()+" "+d.datasIntervenant.prenom),9,Df)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(d.heures)+" HETD en paie état / "+i.totalRessourcePropre(d.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(i.totalPayable(d.heures))+" h",9,Ef)]),e("td",null,[e("span",Tf,u(i.totalNonPayable(d.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.autres.length>0?(a(),l("div",Uf,[e("h2",Ff,[e("button",Rf,u(this.autres.length)+" Autre(s) ",1)]),e("div",If,[e("div",wf,[e("table",$f,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:n[8]||(n[8]=(...d)=>i.toggleCheckbox&&i.toggleCheckbox(...d))})]),Lf,Nf,Hf])]),e("tbody",null,[(a(!0),l(y,null,C(this.etudiants,d=>(a(),l("tr",null,[e("td",null,[e("input",{id:"autre-"+d.datasIntervenant.id,"data-paie-etat":i.totalRessourcePaieEtat(d.heures),"data-ressource-propre":i.totalRessourcePropre(d.heures),disabled:i.totalPayable(d.heures)==0,name:"intervenant["+d.datasIntervenant.id+"]",title:i.totalPayable(d.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:n[9]||(n[9]=m=>i.refreshTotalConsommation())},null,40,jf)]),e("td",null,[e("a",{href:i.urlIntervenant(d),target:"_blank"},u(d.datasIntervenant.nom_usuel.toUpperCase()+" "+d.datasIntervenant.prenom),9,Of)]),e("td",null,[e("span",{title:i.totalRessourcePaieEtat(d.heures)+" HETD en paie état / "+i.totalRessourcePropre(d.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(i.totalPayable(d.heures))+" h",9,qf)]),e("td",null,[e("span",zf,u(i.totalNonPayable(d.heures))+" h",1)])]))),256))])])])])])):h("",!0),e("input",{value:r.selectedStructure,name:"selectedStructure",type:"hidden"},null,8,Bf),this.intervenants.length>0?(a(),l("div",Gf,[Jf,e("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:n[10]||(n[10]=(...d)=>i.processDemandeMiseEnPaiement&&i.processDemandeMiseEnPaiement(...d))}," Enregistrer les demandes de paiement ",8,Yf),this.canMiseEnPaiement?(a(),l("a",{key:0,id:"btn-mep",href:this.urlMiseEnPaiement,class:"ms-2 btn btn-secondary"}," Aller au mise en paiement ",8,Qf)):h("",!0)])):h("",!0)])])],64)}const Xf=S(Cp,[["render",Wf]]),Zf=Object.freeze(Object.defineProperty({__proto__:null,default:Xf},Symbol.toStringTag,{value:"Module"})),Kf={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},I=t=>(z("data-v-d4a24889"),t=t(),B(),t),eb=I(()=>e("h2",null,"Paramètres généraux ou bien selon le statut",-1)),tb={class:"table table-bordered table-condensed table-extra-condensed"},nb=I(()=>e("tr",null,[e("th",null,"Paramètre général"),e("th",null,"Valeur")],-1)),sb=I(()=>e("h2",null,"Services à payer",-1)),rb={class:"card"},ib={class:"card-header"},ab={class:"badge bg-primary"},lb={class:"card-body"},ob={class:"row lap"},db={class:"col-md-6"},ub=I(()=>e("h6",null,"Heures à payer",-1)),cb={class:"table table-bordered table-xs"},mb={key:0,rowspan:"2"},hb={key:1,rowspan:"2"},_b=I(()=>e("th",{colspan:"2"},"Taux de rému.",-1)),pb=I(()=>e("th",{colspan:"3"},"Heures",-1)),fb=I(()=>e("tr",null,[e("th",null,"Nom"),e("th",null,"Valeur"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")],-1)),bb={key:0},vb=["title"],gb={key:1},yb=["title"],xb={class:"col-md-6"},Cb=I(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),f(" correspondantes")],-1)),Vb={class:"table table-bordered table-xs"},Pb=I(()=>e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{colspan:"3"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")])],-1)),Sb=["title"],kb=["title"],Ab={key:0},Mb={class:"badge bg-info"},Db={key:0,class:"row"},Eb=I(()=>e("div",{class:"col-md-6"},null,-1)),Tb={class:"col-md-6"},Ub=I(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),f(" en trop")],-1)),Fb={class:"table table-bordered table-xs"},Rb=I(()=>e("thead",{class:"bg-danger"},[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{rowspan:"2"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date")])],-1)),Ib=["title"],wb=["title"];function $b(t,n,s,b,r,i){return a(),l(y,null,[eb,e("table",tb,[nb,(a(!0),l(y,null,C(s.parametres,(d,m)=>(a(),l("tr",{key:m},[e("th",null,u(m),1),e("td",null,u(d),1)]))),128))]),sb,(a(!0),l(y,null,C(s.servicesAPayer,(d,m)=>(a(),l("div",{key:m},[e("div",rb,[e("div",ib,[e("span",ab,u(d.type),1),f(" "+u(d.libelle),1)]),e("div",lb,[e("ul",null,[(a(!0),l(y,null,C(d.parametres,(c,o)=>(a(),l("li",{key:o},u(o)+" : "+u(c),1))),128))]),(a(!0),l(y,null,C(d.laps,c=>(a(),l("div",ob,[e("div",db,[ub,e("table",cb,[e("thead",null,[e("tr",null,[d.type!="Référentiel"?(a(),l("th",mb,"Volume horaire")):(a(),l("th",hb,"Volumes horaires")),_b,pb]),fb]),e("tbody",null,[e("tr",null,[d.type!="Référentiel"?(a(),l("td",bb,[e("abbr",{class:"badge bg-secondary",title:c.volumeHoraireHisto},u(c.volumeHoraireId),9,vb),f(" "+u(c.volumeHoraire),1)])):(a(),l("td",gb,[(a(!0),l(y,null,C(c.volumeHoraireId,o=>(a(),l("div",null,[e("abbr",{class:"badge bg-secondary",title:o.HISTO},u(o.ID),9,yb),f(" "+u(o.HEURES)+"h ",1)]))),256))])),e("td",null,u(c.tauxRemu),1),e("td",null,u(c.tauxValeur)+"€",1),e("td",null,u(c.heures),1),e("td",null,u(c.heuresAA),1),e("td",null,u(c.heuresAC),1)])])])]),e("div",xb,[Cb,e("table",Vb,[Pb,e("tbody",null,[(a(!0),l(y,null,C(c.misesEnPaiement,o=>(a(),l("tr",{key:o.id},[e("td",null,[e("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+o.heuresTotal+`
Domaine fonctionnel : `+o.domaineFonctionnel+`
`+o.historique},u(o.id),9,Sb)]),e("td",null,[e("abbr",{title:o.centreCoutLibelle},u(o.centreCoutCode),9,kb)]),e("td",null,u(o.periodePaiement),1),e("td",null,u(o.date),1),e("td",null,u(o.heures),1),e("td",null,u(o.heuresAA),1),e("td",null,u(o.heuresAC),1)]))),128))])]),c.heuresRestantes!="0,00"?(a(),l("div",Ab,[e("span",Mb,u(c.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):h("",!0)])]))),256)),d.misesEnPaiement&&d.misesEnPaiement.length>0?(a(),l("div",Db,[Eb,e("div",Tb,[Ub,e("table",Fb,[Rb,e("tbody",null,[(a(!0),l(y,null,C(d.misesEnPaiement,c=>(a(),l("tr",{key:c.id},[e("td",null,[e("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+c.domaineFonctionnel+`
`+c.historique},u(c.id),9,Ib)]),e("td",null,[e("abbr",{title:c.centreCoutLibelle},u(c.centreCoutCode),9,wb)]),e("td",null,u(c.periodePaiement),1),e("td",null,u(c.date),1),e("td",null,u(c.heures),1)]))),128))])])])])):h("",!0)])])]))),128))],64)}const Lb=S(Kf,[["render",$b],["__scopeId","data-v-d4a24889"]]),Nb=Object.freeze(Object.defineProperty({__proto__:null,default:Lb},Symbol.toStringTag,{value:"Module"})),Hb={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(t){this.selectedFile=t.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(t){t.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let n=document.getElementById("btn-import"),s=document.getElementById("btn-import-inprogress");s.classList.remove("d-none"),n.classList.add("d-none"),n.disabled=!0;let b=document.getElementById("formImport"),r=new FormData(b);unicaenVue.axios.post(this.importUrl,r,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{let d=i.data;this.fileErrors=d.file,this.intervenantMissing=d.intervenant,d.message.length!=0?this.messageErrors=d.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",n.disabled=!1,s.classList.add("d-none"),n.classList.remove("d-none")}).catch(i=>{console.error("Error uploading")})}}},jb={class:"card text-dark bg-light"},Ob=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),qb={class:"card-body"},zb={key:0,class:"alert alert-danger",role:"alert"},Bb={key:1,class:"alert alert-success",role:"alert"},Gb={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},Jb=e("p",{class:"fs-9 text"},[f(" Vous pouvez utiliser le modèle directement extrait de winpaie "),e("strong",null,"(format .xlsx ou .ods)"),f(" ou créer votre modèle générique de classeur "),e("strong",null,"(format .xlsx ou .ods)"),f(" incluant 3 colonnes : insee,numero pec, nom. ")],-1),Yb={class:"mb-3"},Qb=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),Wb=K('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),Xb={class:"mb-3"},Zb=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),f("  Veuillez patienter... ")],-1),Kb={key:0,id:"fileErrors",class:"card text-dark bg-light"},e1=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),t1={class:"card-body"},n1={key:0},s1=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),r1={key:1},i1=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function a1(t,n,s,b,r,i){return a(),l(y,null,[e("div",jb,[Ob,e("div",qb,[this.messageErrors?(a(),l("div",zb,u(this.messageErrors),1)):h("",!0),this.messageConfirm?(a(),l("div",Bb,u(this.messageConfirm),1)):h("",!0),e("form",Gb,[Jb,e("div",Yb,[Qb,f("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:n[0]||(n[0]=(...d)=>i.handleFileUpload&&i.handleFileUpload(...d))},null,32)]),Wb,e("div",Xb,[Zb,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:n[1]||(n[1]=(...d)=>i.importFile&&i.importFile(...d))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(a(),l("div",Kb,[e1,e("div",t1,[this.fileErrors.length!=0?(a(),l("div",n1,[s1,e("ul",null,[(a(!0),l(y,null,C(this.fileErrors,d=>(a(),l("li",null,u(),1))),256))])])):h("",!0),this.intervenantMissing.length!=0?(a(),l("div",r1,[i1,e("ul",null,[(a(!0),l(y,null,C(this.intervenantMissing,d=>(a(),l("li",null,u(d),1))),256))])])):h("",!0)])])):h("",!0)],64)}const l1=S(Hb,[["render",a1]]),o1=Object.freeze(Object.defineProperty({__proto__:null,default:l1},Symbol.toStringTag,{value:"Module"})),d1={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(t){modAjax(t.target,n=>{this.$emit("refreshListe")})},ajoutValeur(t){modAjax(t.target,n=>{this.$emit("refreshListe")})},saisieValeur(t){t.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:t.currentTarget.dataset.id}),modAjax(t.currentTarget,n=>{this.$emit("refreshListe")})},refreshListe(t){this.$emit("refreshListe")},supprimer(t){popConfirm(t.target,n=>{this.$emit("refreshListe")})},supprimerValeur(t){t.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,n=>{this.$emit("refreshListe")})},refresh(t){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:t.id})).then(n=>{this.$emit("refresh",n.data)})}}},u1={class:"card-header"},c1={style:{display:"inline"}},m1={class:"float-end"},h1=["href"],_1=["href"],p1={class:"card-body"},f1={key:0},b1=e("br",null,null,-1),v1={class:""},g1={class:"row align-items-start"},y1={class:"col-md-6"},x1={class:"col"},C1=["data-id"],V1=["data-id"],P1=["href"],S1={key:1,class:"row"},k1={class:"col-md-7"},A1=e("br",null,null,-1),M1={class:"row align-items-start"},D1={class:"col-md-8"},E1={class:"col-md-auto"},T1=["data-id"],U1=["data-id"],F1=["href"],R1={class:"col"},I1=e("br",null,null,-1),w1={key:0},$1={key:0};function L1(t,n,s,b,r,i){const d=j,m=F("u-heures"),c=O,o=F("taux",!0);return a(),l(y,null,[e("div",{class:D(["card",{"ms-5":s.taux.tauxRemu}])},[e("div",u1,[e("h3",c1,u(s.taux.libelle)+" ("+u(s.taux.code)+")",1),e("div",m1,[s.taux.canEdit?(a(),l("a",{key:0,href:r.saisieUrl,class:"btn btn-primary",onClick:n[0]||(n[0]=P((...V)=>i.saisie&&i.saisie(...V),["prevent"]))},[_(d,{name:"pen-to-square"}),f(" Modifier")],8,h1)):h("",!0),f("   "),s.taux.canDelete?(a(),l("a",{key:1,href:r.supprimerUrl,class:"btn btn-danger",onClick:n[1]||(n[1]=P((...V)=>i.supprimer&&i.supprimer(...V),["prevent"]))},[_(d,{name:"trash-can"}),f(" Supprimer")],8,_1)):h("",!0)])]),e("div",p1,[s.taux.tauxRemu?h("",!0):(a(),l("div",f1,[f(" Modification :"),b1,e("ul",null,[(a(!0),l(y,null,C(s.taux.tauxRemuValeurs,V=>(a(),l("div",{key:V.id},[e("li",v1,[e("div",g1,[e("div",y1,[_(m,{valeur:V.valeur},null,8,["valeur"]),f("€/h à partir du "),_(c,{value:V.dateEffet},null,8,["value"])]),e("div",x1,[s.taux.canEdit?(a(),l("a",{key:0,class:"text-primary",onClick:n[2]||(n[2]=P((...p)=>i.saisieValeur&&i.saisieValeur(...p),["prevent"])),"data-id":V.id},[_(d,{name:"pen-to-square"})],8,C1)):h("",!0),f("   "),s.taux.canEdit?(a(),l("a",{key:1,class:"text-primary",onClick:n[3]||(n[3]=P((...p)=>i.supprimerValeur&&i.supprimerValeur(...p),["prevent"])),"data-id":V.id},[_(d,{name:"trash-can"})],8,V1)):h("",!0)])])])]))),128))]),s.taux.canEdit?(a(),l("a",{key:0,href:r.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:n[4]||(n[4]=P((...V)=>i.ajoutValeur&&i.ajoutValeur(...V),["prevent"]))},[_(d,{name:"plus"}),f(" Ajouter une valeur ")],8,P1)):h("",!0)])),s.taux.tauxRemu?(a(),l("div",S1,[e("div",k1,[f(" Modification :"),A1,e("ul",null,[(a(!0),l(y,null,C(s.taux.tauxRemuValeurs,V=>(a(),l("div",null,[e("li",null,[e("div",M1,[e("div",D1,[f(" Coéfficient de "),_(m,{valeur:V.valeur},null,8,["valeur"]),f(" à partir du "),_(c,{value:V.dateEffet},null,8,["value"])]),e("div",E1,[s.taux.canEdit?(a(),l("a",{key:0,class:"text-primary",onClick:n[5]||(n[5]=P((...p)=>i.saisieValeur&&i.saisieValeur(...p),["prevent"])),"data-id":V.id},[_(d,{name:"pen-to-square"})],8,T1)):h("",!0),f("   "),s.taux.canEdit?(a(),l("a",{key:1,class:"text-primary",onClick:n[6]||(n[6]=P((...p)=>i.supprimerValeur&&i.supprimerValeur(...p),["prevent"])),"data-id":V.id},[_(d,{name:"trash-can"})],8,U1)):h("",!0)])])])]))),256))]),s.taux.canEdit?(a(),l("a",{key:0,href:r.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:n[7]||(n[7]=P((...V)=>i.ajoutValeur&&i.ajoutValeur(...V),["prevent"]))},[_(d,{name:"plus"})],8,F1)):h("",!0)]),e("div",R1,[f(" Valeurs calculées (indexées sur le taux "+u(s.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(a(!0),l(y,null,C(s.taux.tauxRemuValeursIndex,V=>(a(),l("div",null,[e("li",null,[_(m,{valeur:V.valeur},null,8,["valeur"]),f("€/h à partir du "),_(c,{value:V.date},null,8,["value"])])]))),256))]),I1])])):h("",!0)])],2),s.taux.tauxRemu?h("",!0):(a(),l("div",w1,[(a(!0),l(y,null,C(s.listeTaux,V=>(a(),l("div",{key:V},[V.tauxRemu&&V.tauxRemu.id===s.taux.id?(a(),l("div",$1,[(a(),R(o,{onSupprimer:i.supprimer,onRefreshListe:i.refreshListe,key:s.taux.id,taux:V,listeTaux:s.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):h("",!0)]))),128))]))],64)}const de=S(d1,[["render",L1]]),N1=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),H1={components:{taux:de},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,n=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(t){let n=Util.json.indexById(this.listeTaux,t.id);this.listeTaux[n]=t},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(t=>{this.listeTaux=t.data})}}},j1=["href"];function O1(t,n,s,b,r,i){const d=F("taux");return a(),l(y,null,[(a(!0),l(y,null,C(r.listeTaux,m=>(a(),l("div",null,[m.tauxRemu?h("",!0):(a(),R(d,{onSupprimer:i.supprimer,onRefreshListe:i.refreshListe,key:m.id,taux:m,listeTaux:r.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),s.canEditTaux?(a(),l("a",{key:0,class:"btn btn-primary",href:r.ajoutUrl,onClick:n[0]||(n[0]=P((...m)=>i.ajout&&i.ajout(...m),["prevent"]))},"Ajout d'un nouveau taux",8,j1)):h("",!0)],64)}const q1=S(H1,[["render",O1]]),z1=Object.freeze(Object.defineProperty({__proto__:null,default:q1},Symbol.toStringTag,{value:"Module"})),B1={name:"listeContrat",data(){return{dataUrl:unicaenVue.url("signature/data-contrat"),lines:[]}},methods:{contratUrl(t){return unicaenVue.url("intervenant/:intervenant/contrat",{intervenant:t})},getDocumentUrl(t){return unicaenVue.url("signature/:signature/get-document",{signature:t})},updateSignatureUrl(t){return unicaenVue.url("signature/:signature/update-signature",{signature:t})}}},G1=e("h1",{class:"page-header"},"Liste des signatures électroniques de contrat",-1),J1=e("thead",null,[e("tr",null,[e("th",{column:"ID_SIGNATURE"},"Id"),e("th",{column:"NOM"},"Nom"),e("th",{column:"PRENOM"},"Prénom"),e("th",{column:"DATE_CREATION_SIGNATURE_ELECTRONIQUE"},"Date signature électronique"),e("th",{column:"STATUT_SIGNATURE_ELECTRONIQUE"},"Statut"),e("th",null," ")])],-1),Y1=["href"],Q1=e("i",{class:"fas fa-download"},null,-1),W1=[Q1],X1=["href"],Z1=e("i",{class:"fas fa-eye"},null,-1),K1=[Z1],ev=["href"],tv=e("i",{class:"fas fa-rotate"},null,-1),nv=[tv];function sv(t,n,s,b,r,i){const d=O,m=ee;return a(),l(y,null,[G1,_(m,{ref:"signatures",modelValue:r.lines,"onUpdate:modelValue":n[0]||(n[0]=c=>r.lines=c),"data-url":this.dataUrl},{default:U(()=>[J1,e("tbody",null,[(a(!0),l(y,null,C(r.lines,(c,o)=>(a(),l("tr",{key:o},[e("td",null,u(c.ID_SIGNATURE),1),e("td",null,u(c.NOM),1),e("td",null,u(c.PRENOM),1),e("td",null,[_(d,{value:c.DATE_CREATION_SIGNATURE_ELECTRONIQUE},null,8,["value"])]),e("td",null,u(c.STATUT_SIGNATURE_ELECTRONIQUE),1),e("td",null,[e("a",{href:i.getDocumentUrl(c.ID_SIGNATURE),class:"btn btn-info"},W1,8,Y1),f("   "),e("a",{href:i.contratUrl(c.ID_INTERVENANT),class:"btn btn-info"},K1,8,X1),f("   "),e("a",{href:i.updateSignatureUrl(c.ID_SIGNATURE),class:"btn btn-info"},nv,8,ev)])]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const rv=S(B1,[["render",sv]]),iv=Object.freeze(Object.defineProperty({__proto__:null,default:rv},Symbol.toStringTag,{value:"Module"})),av={UHeures:"Application/UI/UHeures",UInputFloat:"Application/UI/UInputFloat",Utilisateur:"Application/Utilisateur"};function lv(t,n){const s={};n===void 0&&(n={});for(const b in t){let i=b.slice(2,-4).replaceAll("/","");s[i]=t[b].default}for(const b of document.getElementsByClassName("vue-app")){let r=fe({template:b.innerHTML,components:s});if(n.beforeMount!==void 0&&n.beforeMount(r),n.autoloads!==void 0)for(const i in n.autoloads){let d=n.autoloads[i].replaceAll("/","");r.component(i,s[d])}r.use(be({components:!0,directives:!0})),r.mount(b),n.afterMount!==void 0&&n.afterMount(r)}}const ov={init:lv},dv=Object.assign({"./Application/UI/UHeures.vue":Ce,"./Application/UI/UInputFloat.vue":Ae,"./Application/Utilisateur.vue":Ue,"./Employeur/ListeEmployeur.vue":Ye,"./Formule/Administration/Details.vue":nt,"./Formule/Administration/Formulator.vue":vt,"./Formule/Administration/Index.vue":gn,"./Formule/Details.vue":Vn,"./Formule/Test/Index.vue":zn,"./Formule/Test/Test.vue":la,"./Intervenant/Recherche.vue":Da,"./Lieu/Structure.vue":cl,"./Lieu/StructuresAdmin.vue":gl,"./Mission/Liste.vue":qo,"./Mission/ListeCandidatures.vue":vd,"./Mission/ListeOffreEmploi.vue":Yu,"./Mission/ListePrime.vue":Kc,"./Mission/Mission.vue":Lo,"./Mission/OffreEmploi.vue":Hu,"./Mission/Prime.vue":jc,"./Mission/Suivi.vue":Fm,"./Mission/SuiviEvent.vue":Dm,"./Paiement/DemandeMiseEnPaiement.vue":pp,"./Paiement/DemandeMiseEnPaiementLot.vue":Zf,"./Paiement/DemandeMiseEnPaiementStructure.vue":op,"./Paiement/DetailsCalculs.vue":Nb,"./Paiement/ImportNumeroPec.vue":o1,"./Paiement/ListeTaux.vue":z1,"./Paiement/Taux.vue":N1,"./Signature/ListeContrat.vue":iv}),uv={autoloads:av};ov.init(dv,uv);
