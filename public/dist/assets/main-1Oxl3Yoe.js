import{c as o,o as a,w as v,v as E,n as D,t as u,a as _,b as T,d as f,e,F as y,r as C,f as F,g as W,U as ue,h as ce,i as me,j as P,k as h,p as z,l as B,m as K,B as ee,q as U,s as g,u as J,x as R,y as Q,z as he,A as _e,C as pe,D as fe,_ as be}from"./vendor-BvGfWhUA.js";const k=(t,s)=>{const n=t.__vccOpts||t;for(const[b,i]of s)n[b]=i;return n},ve={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},ge=["innerHTML"];function ye(t,s,n,b,i,r){return a(),o("span",{class:"heures",innerHTML:r.affichage},null,8,ge)}const xe=k(ve,[["render",ye]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"})),Ve={name:"UInputFloat",props:{modelValue:{},isPourc:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},class:{type:String,required:!1,default:""},fraction:{type:Boolean,required:!1,default:!1},maximumDigits:{required:!1,default:8}},data(){return{fractions:{.333333:"1/3",.166667:"1/6",.142857:"1/7",.111111:"1/9",.666667:"2/3",.285714:"2/7",.222222:"2/9",.428571:"3/7",1.333333:"4/3",.571429:"4/7",.444444:"4/9",1.666667:"5/3",.833333:"5/6",.714286:"5/7",.555556:"5/9",.857143:"6/7",2.333333:"7/3",1.166667:"7/6",.777778:"7/9",2.666667:"8/3",1.142857:"8/7",.888889:"8/9",1.285714:"9/7"},inError:!1}},emits:["update:modelValue"],computed:{value:{get(){let t=this.modelValue;return this.isPourc&&(t*=100),this.floatToString(t)},set(t){const s=/^-?\d*\.?\d+$/;if(this.inError=t!==void 0&&t!==""&&!s.test(t.replace("/","").replace(",","").replace(".","")),!this.inError){let n=this.stringToFloat(t);this.isPourc&&(n/=100),(n===void 0||!isNaN(n)&&isFinite(n))&&this.$emit("update:modelValue",n)}}},cclass(){let t=this.class;return this.inError&&(t+=" is-invalid"),t}},methods:{floatToString(t){if(t==null)return;const s=Math.round(t*1e6)/1e6;if(this.fraction&&this.fractions[s]!==void 0)return this.fractions[s];var n="fr",b={minimumFractionDigits:0,maximumFractionDigits:this.maximumDigits,useGrouping:!1},i=new Intl.NumberFormat(n,b);return i.format(t)},stringToFloat(t){if(!(t===null||t===""||t===void 0))return t.indexOf("/")!==-1?(t=t.split("/"),t=Util.stringToFloat(t[0])/Util.stringToFloat(t[1])):t=parseFloat(t.replace(",",".")),t}},mounted(){}},Pe=["disabled"];function Se(t,s,n,b,i,r){return v((a(),o("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>r.value=d),disabled:n.disabled,ref:"inputFloat",class:D(r.cclass)},null,10,Pe)),[[E,r.value]])}const ke=k(Ve,[["render",Se],["__scopeId","data-v-29c90e6d"]]),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"})),Me={name:"Utilisateur",props:{nom:String,mail:String}},De=["href"];function Ee(t,s,n,b,i,r){return a(),o("a",{href:`mailto:${n.mail}`},u(n.nom),9,De)}const Fe=k(Me,[["render",Ee]]),Te=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"})),Ue={name:"UTableAjax",emits:["update:modelValue"],props:{modelValue:{required:!0},id:{required:!1,type:String},size:{required:!1,default:10},count:{required:!1},search:{required:!1},dataUrl:{required:!0,type:String}},data(){return{page:1,pageSizes:[10,25,50,100,"Tous"],defaultSize:10,dSize:this.size,dCount:this.count,dSearch:this.search,searchTimer:null,columns:{},loading:!1,orderCol:void 0,orderDir:"asc"}},computed:{cSize(){return isNaN(this.dSize)?9999999999999:this.dSize},storageIdentifier(){return"UTableAjax-"+this.id+"-"+window.location.href},elStart(){return isNaN(this.dSize)?1:(this.page-1)*this.dSize+1},elEnd(){return isNaN(this.dCount)?(this.page-1)*this.dSize+this.dSize:isNaN(this.dSize)?this.dCount:Math.min(this.dCount,(this.page-1)*this.dSize+this.dSize)}},watch:{dSize(t){localStorage.setItem(this.storageIdentifier,t),this.getData()},dSearch(t){const s=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.page>1?this.page=1:s.getData()},500)},page(t){this.getData()}},methods:{getData(){unicaenVue.axios.post(this.dataUrl,{page:this.page,size:this.dSize,elStart:this.elStart,elEnd:this.elEnd,search:this.dSearch,orderCol:this.orderCol,orderDir:this.orderDir}).then(t=>{let s=t.data;this.dCount=s.count,this.$emit("update:modelValue",s.data)})},orderBy(t){const s=this.columns[t];for(let b in this.columns)b!=t&&(this.columns[b].classList.contains("sorting_asc")&&this.columns[b].classList.remove("sorting_asc"),this.columns[b].classList.contains("sorting_desc")&&this.columns[b].classList.remove("sorting_desc"),console.log(b));let n="asc";s.classList.contains("sorting_asc")?(n="desc",s.classList.remove("sorting_asc"),s.classList.add("sorting_desc")):(s.classList.contains("sorting_desc")&&s.classList.remove("sorting_desc"),s.classList.add("sorting_asc")),this.orderCol=t,this.orderDir=n,this.getData()}},mounted(){this.dSize=parseInt(localStorage.getItem(this.storageIdentifier))||this.defaultSize,this.page=1,this.dSize=this.size,this.dCount=this.count;const t=this.$refs.tableRef,s=this;t&&t.querySelectorAll("th[column]").forEach(b=>{Array.from(b.attributes).forEach(i=>{i.name=="column"&&(this.columns[i.value]=b,b.dataset.column=i.value,b.onclick=function(){s.orderBy(this.dataset.column)},b.removeAttribute(i.name),b.classList.add("sorting"))})}),this.getData()}},Re={class:"dt-bootstrap5"},Ie=["value"],we={class:"float-end"},$e={class:"table table-bordered dataTable mb-2",ref:"tableRef"},Le={class:"dataTables_paginate paging_simple_numbers"};function He(t,s,n,b,i,r){const d=ue,m=ce,c=me;return a(),o("div",Re,[_(m,null,{default:T(()=>[_(d,null,{default:T(()=>[f(" Afficher "),e("label",null,[v(e("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>i.dSize=l),class:"form-select form-select-sm"},[(a(!0),o(y,null,C(i.pageSizes,l=>(a(),o("option",{key:l,value:l},u(l),9,Ie))),128))],512),[[F,i.dSize]])]),f(" éléments ")]),_:1}),_(d,null,{default:T(()=>[e("div",we,[f(" Rechercher : "),e("label",null,[v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>i.dSearch=l),class:"form-control form-inline form-control-sm"},null,512),[[E,i.dSearch]])])])]),_:1})]),_:1}),e("table",$e,[W(t.$slots,"default")],512),_(m,null,{default:T(()=>[_(d,null,{default:T(()=>[f("Affichage de l'élément "+u(r.elStart)+" à "+u(r.elEnd)+" sur "+u(i.dCount)+" éléments",1)]),_:1}),_(d,null,{default:T(()=>[e("div",Le,[_(c,{align:"end",page:i.page,modelValue:i.page,"onUpdate:modelValue":s[2]||(s[2]=l=>i.page=l),"total-rows":i.dCount,"per-page":r.cSize,"last-number":"true",firstNumber:"true","prev-text":"Précédent","next-text":"Suivant"},null,8,["page","modelValue","total-rows","per-page"])])]),_:1})]),_:1})])}const te=k(Ue,[["render",He]]),Ne={name:"listeEmployeur",data(){return{dataUrl:unicaenVue.url("employeur/get-data"),lines:[]}},methods:{saisie(t){modAjax(t.currentTarget,s=>{this.$refs.employeurs.getData()})},editUrl(t){return unicaenVue.url("employeur/saisie/:id",{id:t})}}},je=e("h1",{class:"page-header"},"Gestion des employeurs",-1),qe=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"RAISON_SOCIALE"},"Raison sociale"),e("th",{column:"NOM_COMMERCIAL"},"Nom commercial"),e("th",null,"Siren"),e("th",null," ")])],-1),Oe={key:0},ze=["href"],Be={key:1};function Ge(t,s,n,b,i,r){const d=te;return a(),o(y,null,[je,_(d,{ref:"employeurs",modelValue:i.lines,"onUpdate:modelValue":s[1]||(s[1]=m=>i.lines=m),"data-url":this.dataUrl},{default:T(()=>[qe,e("tbody",null,[(a(!0),o(y,null,C(i.lines,(m,c)=>(a(),o("tr",{key:c},[e("td",null,u(m.ID),1),e("td",null,u(m.RAISON_SOCIALE),1),e("td",null,u(m.NOM_COMMERCIAL),1),e("td",null,u(m.SIREN),1),m.IMPORTABLE==0?(a(),o("td",Oe,[m.IMPORTABLE==0?(a(),o("a",{key:0,href:r.editUrl(m.ID),onClick:s[0]||(s[0]=P((...l)=>r.saisie&&r.saisie(...l),["prevent"]))},"Modifier",8,ze)):h("",!0)])):h("",!0),m.IMPORTABLE==1?(a(),o("td",Be," NON MODIFIABLE ")):h("",!0)]))),128))])]),_:1},8,["modelValue","data-url"])],64)}const Je=k(Ne,[["render",Ge]]),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),We={name:"Details",components:{},props:{formule:{type:Object},phpClass:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},Qe=["innerHTML"],Xe={class:"mb-2"},Ze=["href"],Ke=e("i",{class:"fas fa-rotate-left"},null,-1);function et(t,s,n,b,i,r){return a(),o(y,null,[e("h1",null,"Code source de "+u(n.formule.code),1),e("div",{innerHTML:n.phpClass,class:"code"},null,8,Qe),e("div",Xe,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[Ke,f(" Retour à l'administration des formules")],8,Ze)])],64)}const tt=k(We,[["render",et]]),st=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),nt={name:"Formulator",components:{},props:{phpClass:{type:String},error:{type:String}},methods:{indexUrl(){return unicaenVue.url("formule/administration")}}},it=e("h1",null,"Formulator",-1),rt={class:"mb-2"},at=["href"],ot=e("i",{class:"fas fa-rotate-left"},null,-1),lt={key:0},dt={class:"alert alert-danger"},ut={key:1},ct=e("div",{class:"alert alert-success"},"Formule bien intégrée",-1),mt=[ct],ht={key:2},_t=e("h3",null,"Code généré :",-1),pt=["innerHTML"];function ft(t,s,n,b,i,r){return a(),o(y,null,[it,e("div",rt,[e("a",{class:"btn btn-secondary",href:this.indexUrl()},[ot,f(" Retour à l'administration des formules")],8,at)]),n.error?(a(),o("div",lt,[e("div",dt,u(n.error),1)])):(a(),o("div",ut,mt)),n.phpClass?(a(),o("div",ht,[_t,e("div",{innerHTML:n.phpClass},null,8,pt)])):h("",!0),f(" "+u(n.error),1)],64)}const bt=k(nt,[["render",ft]]),vt=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"})),gt={name:"Index",components:{},props:{formules:{required:!0,type:Array},canEdit:{required:!0,type:Boolean}},methods:{telechargementUrl(t){return unicaenVue.url("formule/administration/telecharger-tableur/"+t)},televersementUrl(){return unicaenVue.url("formule/administration/televerser-tableur")},detailsUrl(t){return unicaenVue.url("formule/administration/details/"+t)}}},A=t=>(z("data-v-ba77464f"),t=t(),B(),t),yt=A(()=>e("h1",null,"Formules de calcul",-1)),xt={class:"table table-bordered table-hover table-sort"},Ct=A(()=>e("thead",null,[e("tr",null,[e("th",null,"Libellé"),e("th",null,"Paramètres"),e("th",null,"Règle de délégation"),e("th",null,"Ressources")])],-1)),Vt=["title"],Pt=A(()=>e("br",null,null,-1)),St={key:0,class:"cartridge"},kt=A(()=>e("span",null,"intervenant",-1)),At=A(()=>e("span",null,"param1",-1)),Mt={key:1,class:"cartridge"},Dt=A(()=>e("span",null,"intervenant",-1)),Et=A(()=>e("span",null,"param2",-1)),Ft={key:2,class:"cartridge"},Tt=A(()=>e("span",null,"intervenant",-1)),Ut=A(()=>e("span",null,"param3",-1)),Rt={key:3,class:"cartridge"},It=A(()=>e("span",null,"intervenant",-1)),wt=A(()=>e("span",null,"param4",-1)),$t={key:4,class:"cartridge"},Lt=A(()=>e("span",null,"intervenant",-1)),Ht=A(()=>e("span",null,"param5",-1)),Nt={key:5,class:"cartridge"},jt=A(()=>e("span",null,"volume horaire",-1)),qt=A(()=>e("span",null,"param1",-1)),Ot={key:6,class:"cartridge"},zt=A(()=>e("span",null,"volume horaire",-1)),Bt=A(()=>e("span",null,"param2",-1)),Gt={key:7,class:"cartridge"},Jt=A(()=>e("span",null,"volume horaire",-1)),Yt=A(()=>e("span",null,"param3",-1)),Wt={key:8,class:"cartridge"},Qt=A(()=>e("span",null,"volume horaire",-1)),Xt=A(()=>e("span",null,"param4",-1)),Zt={key:9,class:"cartridge"},Kt=A(()=>e("span",null,"volume horaire",-1)),es=A(()=>e("span",null,"param5",-1)),ts={key:0},ss={key:1},is=["href"],rs=A(()=>e("i",{class:"fas fa-table-cells"},null,-1)),as=A(()=>e("br",null,null,-1)),os=["href"],ls=A(()=>e("i",{class:"fas fa-table-cells"},null,-1)),ds=A(()=>e("br",null,null,-1)),us={key:0,class:"card bg-warning"},cs=A(()=>e("div",{class:"card-header"},[e("h3",null,"Création/Modification d'une formule à partir d'un tableur")],-1)),ms={class:"card-body"},hs=A(()=>e("div",{class:"alert alert-warning"},[e("span",{class:"icon iconly icon-attention"}),e("strong",null,"Attention :"),f(" cette opération peut avoir un impact déterminant sur le calcul de vos heures complémentaires et par extension sur tous vos paiements. En outre, le fichier doit être bâti selon un modèle bien précis. Vous êtes invités à ne téléverser que des tableurs préparés ou validés par l'équipe OSE. ")],-1)),_s=["action"],ps=K('<div class="form-group mb-3" data-v-ba77464f><label for="formule-name" data-v-ba77464f>Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier" data-v-ba77464f></div><div class="form-group" data-v-ba77464f><button type="submit" class="btn btn-primary" data-v-ba77464f>Ajout/Modification à partir d&#39;un tableur</button></div>',2),fs=[ps];function bs(t,s,n,b,i,r){return a(),o(y,null,[yt,e("table",xt,[Ct,e("tbody",null,[(a(!0),o(y,null,C(n.formules,d=>(a(),o("tr",{key:t.id,class:D({desactivee:!d.active}),title:d.active?"":"Cette formule est désactivée"},[e("td",null,[f(u(d.libelle),1),Pt,e("i",null,u(d.code),1)]),e("td",null,[d.iParam1Libelle?(a(),o("div",St,[kt,At,f(" "+u(d.iParam1Libelle),1)])):h("",!0),d.iParam2Libelle?(a(),o("div",Mt,[Dt,Et,f(" "+u(d.iParam2Libelle),1)])):h("",!0),d.iParam3Libelle?(a(),o("div",Ft,[Tt,Ut,f(" "+u(d.iParam3Libelle),1)])):h("",!0),d.iParam4Libelle?(a(),o("div",Rt,[It,wt,f(" "+u(d.iParam4Libelle),1)])):h("",!0),d.iParam5Libelle?(a(),o("div",$t,[Lt,Ht,f(" "+u(d.iParam5Libelle),1)])):h("",!0),d.vhParam1Libelle?(a(),o("div",Nt,[jt,qt,f(" "+u(d.vhParam1Libelle),1)])):h("",!0),d.vhParam2Libelle?(a(),o("div",Ot,[zt,Bt,f(" "+u(d.vhParam2Libelle),1)])):h("",!0),d.vhParam3Libelle?(a(),o("div",Gt,[Jt,Yt,f(" "+u(d.vhParam3Libelle),1)])):h("",!0),d.vhParam4Libelle?(a(),o("div",Wt,[Qt,Xt,f(" "+u(d.vhParam4Libelle),1)])):h("",!0),d.vhParam5Libelle?(a(),o("div",Zt,[Kt,es,f(" "+u(d.vhParam5Libelle),1)])):h("",!0)]),d.delegationAnnee?(a(),o("td",ts,[f("Avant "+u(d.delegationAnnee)+"/"+u(d.delegationAnnee+1)+", utilise ",1),e("i",null,u(d.delegationFormule),1)])):(a(),o("td",ss)),e("td",null,[e("a",{href:this.telechargementUrl(d.id)},[rs,f(" tableur")],8,is),as,this.canEdit?(a(),o("a",{key:0,href:this.detailsUrl(d.id)},[ls,f(" code PHP")],8,os)):h("",!0)])],10,Vt))),128))])]),ds,this.canEdit?(a(),o("div",us,[cs,e("div",ms,[hs,e("form",{method:"post",enctype:"multipart/form-data",action:this.televersementUrl()},fs,8,_s)])])):h("",!0)],64)}const vs=k(gt,[["render",bs],["__scopeId","data-v-ba77464f"]]),gs=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"})),ys={data(){return{dataUrl:unicaenVue.url("formule-test/data"),lines:[]}},methods:{addUrl(){return unicaenVue.url("formule-test/saisir")},editUrl(t){return unicaenVue.url("formule-test/saisir/:id",{id:t})},deleteUrl(t){return unicaenVue.url("formule-test/supprimer/:id",{id:t})},importUrl(){return unicaenVue.url("formule-test/import")},supprimerTest(t){return popConfirm(t.currentTarget,s=>{this.$refs.testsFormules.getData()}),!1}}},xs=e("h1",{class:"page-header"},"Page de tests de formule de calcul des HETD",-1),Cs=e("thead",null,[e("tr",null,[e("th",{column:"ID"},"Id"),e("th",{column:"LIBELLE"},"Libellé"),e("th",{column:"FORMULE"},"Formule"),e("th",{column:"ANNEE"},"Année"),e("th",null," ")])],-1),Vs={style:{width:"1%","white-space":"nowrap"}},Ps=["href"],Ss=e("i",{class:"fas fa-pencil"},null,-1),ks=[Ss],As=["href"],Ms=e("i",{class:"fas fa-trash-can"},null,-1),Ds=[Ms],Es=e("br",null,null,-1),Fs=e("br",null,null,-1),Ts={class:"card bg-warning"},Us=e("div",{class:"card-header"},[e("h3",null,"Import d'un nouveau test à partir d'un tableur")],-1),Rs={class:"card-body"},Is=["action"],ws=K('<div class="form-group mb-3"><label for="formule-name">Feuille de calcul (format Excel ou Calc)</label><input class="form-control" id="formule-fichier" type="file" name="fichier"></div><div class="form-group"><button type="submit" class="btn btn-primary">Import d&#39;un test à partir d&#39;un tableur</button></div>',2),$s=[ws];function Ls(t,s,n,b,i,r){const d=te,m=ee;return a(),o(y,null,[xs,_(d,{"data-url":this.dataUrl,modelValue:i.lines,"onUpdate:modelValue":s[1]||(s[1]=c=>i.lines=c),ref:"testsFormules"},{default:T(()=>[Cs,e("tbody",null,[(a(!0),o(y,null,C(i.lines,(c,l)=>(a(),o("tr",{key:l},[e("td",null,u(c.ID),1),e("td",null,u(c.LIBELLE),1),e("td",null,u(c.FORMULE),1),e("td",null,u(c.ANNEE),1),e("td",Vs,[e("a",{href:r.editUrl(c.ID),title:"Modification du test de formule"},ks,8,Ps),f("   "),e("a",{href:r.deleteUrl(c.ID),title:"Suppression du test de formule","data-content":"Êtes-vous sur de vouloir supprimer ce test ?","data-title":"Suppression du test de formule",onClick:s[0]||(s[0]=P((...V)=>r.supprimerTest&&r.supprimerTest(...V),["prevent"]))},Ds,8,As)])]))),128))])]),_:1},8,["data-url","modelValue"]),_(m,{variant:"primary",href:r.addUrl()},{default:T(()=>[f("Ajout d'un nouveau test")]),_:1},8,["href"]),Es,Fs,e("div",Ts,[Us,e("div",Rs,[e("form",{method:"post",enctype:"multipart/form-data",action:this.importUrl()},$s,8,Is)])])],64)}const Hs=k(ys,[["render",Ls]]),Ns=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"})),js={props:{id:{type:Number},formules:{type:Object},annees:{type:Object},typesIntervenants:{type:Object},typesVolumesHoraires:{type:Object},etatsVolumesHoraires:{type:Object},defaultFormule:{type:Number}},data(){return{indexUrl:unicaenVue.url("formule-test"),dataUrl:unicaenVue.url("formule-test/data"),tauxAutre1Visibility:!0,tauxAutre2Visibility:!1,tauxAutre3Visibility:!1,tauxAutre4Visibility:!1,tauxAutre5Visibility:!1,resMode:"hetd",debug:{},intervenant:{formule:void 0,tauxCmServiceDu:1.5,tauxCmServiceCompl:1.5,tauxTpServiceDu:1,tauxTpServiceCompl:.6666666666667},volumesHoraires:[],formule:{iParam1Libelle:void 0,iParam2Libelle:void 0,iParam3Libelle:void 0,iParam4Libelle:void 0,iParam5Libelle:void 0,vhParam1Libelle:void 0,vhParam2Libelle:void 0,vhParam3Libelle:void 0,vhParam4Libelle:void 0,vhParam5Libelle:void 0},structures:{},typesIntervention:["CM","TD","TP",void 0,void 0,void 0,void 0,void 0,"Référentiel"]}},watch:{"intervenant.tauxAutre1Code"(t){this.tauxAutre2Visibility=t||this.intervenant.tauxAutre1Code||this.intervenant.tauxAutre2ServiceDu||this.intervenant.tauxAutre2ServiceCompl,this.typesIntervention[3]=t},"intervenant.tauxAutre2Code"(t){this.tauxAutre3Visibility=t||this.intervenant.tauxAutre2Code||this.intervenant.tauxAutre3ServiceDu||this.intervenant.tauxAutre3ServiceCompl,this.typesIntervention[4]=t},"intervenant.tauxAutre3Code"(t){this.tauxAutre4Visibility=t||this.intervenant.tauxAutre3Code||this.intervenant.tauxAutre4ServiceDu||this.intervenant.tauxAutre4ServiceCompl,this.typesIntervention[5]=t},"intervenant.tauxAutre4Code"(t){this.tauxAutre5Visibility=t||this.intervenant.tauxAutre4Code||this.intervenant.tauxAutre5ServiceDu||this.intervenant.tauxAutre5ServiceCompl,this.typesIntervention[6]=t},"intervenant.tauxAutre5Code"(t){this.typesIntervention[7]=t},"intervenant.formule"(t){t&&(this.formule=this.formules[t])}},computed:{filteredTypesIntervention(){let t=Object.values(this.typesIntervention).filter(s=>s);return t.unshift(""),t},vhParamCount(){let t=0;for(let s=1;s<6;s++)this.formule["vhParam"+s+"Libelle"]&&t++;return t}},methods:{charger(){unicaenVue.axios.get(unicaenVue.url("formule-test/saisir-data/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0})).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,this.debug={},this.addVolumeHoraire(),this.updateStructures()})},enregistrer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,t.data.debug?this.debug=t.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},calculer(){unicaenVue.axios.post(unicaenVue.url("formule-test/enregistrer/:id",{id:this.id?this.id:this.intervenant.id?this.intervenant.id:0}),{intervenant:this.intervenant,volumesHoraires:this.volumesHoraires,simpleCalcul:!0}).then(t=>{this.intervenant=this.dropTauxNonUtilises(t.data.intervenant),this.volumesHoraires=t.data.volumesHoraires,t.data.debug?this.debug=t.data.debug:this.debug={},this.addVolumeHoraire(),this.updateStructures()})},exporter:function(){const t={intervenant:this.intervenant,volumesHoraires:this.volumesHoraires},s=this.intervenant.libelle;var n=document.createElement("a"),b=new Blob([JSON.stringify(t)],{type:"text/json"});n.href=window.URL.createObjectURL(b),n.download="Test de formule "+s+".json",n.click()},exporterCsv:function(){let t=`Structure;Compte dans le service statutaire;Heures non payables;Type d’intervention;Taux FI;Taux FA;Taux FC;Modulation service dû;Modulation service compl.;Param 1;Param 2;Param 3;Param 4;Param 5;Heures;Service FI;Service FA;Service FC;Service Référentiel;HC FI;HC FA;HC FC;HC Référentiel;Primes;Non payable FI;Non payable FA;Non payable FC;Non payable Référentiel
`;for(const i in this.volumesHoraires){const r=this.volumesHoraires[i];t+=(r.structureCode?r.structureCode:"")+";"+(r.serviceStatutaire?"Oui":"Non")+";"+(r.nonPayable?"Oui":"Non")+";"+(r.referentiel?"Référentiel":r.typeInterventionCode?r.typeInterventionCode:"")+";"+(r.tauxFi?r.tauxFi.toLocaleString("fr-FR"):"")+";"+(r.tauxFa?r.tauxFa.toLocaleString("fr-FR"):"")+";"+(r.tauxFc?r.tauxFc.toLocaleString("fr-FR"):"")+";"+(r.ponderationServiceDu?r.ponderationServiceDu.toLocaleString("fr-FR"):"")+";"+(r.ponderationServiceCompl?r.ponderationServiceCompl.toLocaleString("fr-FR"):"")+";"+(r.param1?r.param1:"")+";"+(r.param2?r.param2:"")+";"+(r.param3?r.param3:"")+";"+(r.param4?r.param4:"")+";"+(r.param5?r.param5:"")+";"+(r.heures?r.heures.toLocaleString("fr-FR"):"")+";"+(r.heuresServiceFi?r.heuresServiceFi.toLocaleString("fr-FR"):"")+";"+(r.heuresServiceFa?r.heuresServiceFa.toLocaleString("fr-FR"):"")+";"+(r.heuresServiceFc?r.heuresServiceFc.toLocaleString("fr-FR"):"")+";"+(r.heuresServiceReferentiel?r.heuresServiceReferentiel.toLocaleString("fr-FR"):"")+";"+(r.heuresComplFi?r.heuresComplFi.toLocaleString("fr-FR"):"")+";"+(r.heuresComplFa?r.heuresComplFa.toLocaleString("fr-FR"):"")+";"+(r.heuresComplFc?r.heuresComplFc.toLocaleString("fr-FR"):"")+";"+(r.heuresComplReferentiel?r.heuresComplReferentiel.toLocaleString("fr-FR"):"")+";"+(r.heuresPrimes?r.heuresPrimes.toLocaleString("fr-FR"):"")+";"+(r.heuresNonPayableFi?r.heuresNonPayableFi.toLocaleString("fr-FR"):"")+";"+(r.heuresNonPayableFa?r.heuresNonPayableFa.toLocaleString("fr-FR"):"")+";"+(r.heuresNonPayableFc?r.heuresNonPayableFc.toLocaleString("fr-FR"):"")+";"+(r.heuresNonPayableReferentiel?r.heuresNonPayableReferentiel.toLocaleString("fr-FR"):"")+`;
`}const s=this.intervenant.libelle;var n=document.createElement("a"),b=new Blob([t],{type:"text/csv"});n.href=window.URL.createObjectURL(b),n.download="Test de formule "+s+".csv",n.click()},importer:function(t){const s=t.target.files[0];if(!s.type.match("application/json")){console.error("Le fichier n'est pas de type JSON.");return}const n=new FileReader;n.onload=b=>{try{const i=JSON.parse(b.target.result);this.intervenant=i.intervenant,this.volumesHoraires=i.volumesHoraires,this.updateStructures()}catch(i){console.error("Erreur lors de l'analyse du contenu JSON :",i)}},n.readAsText(s)},dropTauxNonUtilises(t){return t.tauxAutre1Code||(t.tauxAutre1ServiceDu=void 0,t.tauxAutre1ServiceCompl=void 0),t.tauxAutre2Code||(t.tauxAutre2ServiceDu=void 0,t.tauxAutre2ServiceCompl=void 0),t.tauxAutre3Code||(t.tauxAutre3ServiceDu=void 0,t.tauxAutre3ServiceCompl=void 0),t.tauxAutre4Code||(t.tauxAutre4ServiceDu=void 0,t.tauxAutre4ServiceCompl=void 0),t.tauxAutre5Code||(t.tauxAutre5ServiceDu=void 0,t.tauxAutre5ServiceCompl=void 0),t},updateStructures(){let t={"":""};this.intervenant.structureCode&&(t[this.intervenant.structureCode]=this.intervenant.structureCode);for(let s in this.volumesHoraires){const n=this.volumesHoraires[s].structureCode;n&&(t[n]=n)}t.__UNIV__="Université (établissement)",t.__EXTERIEUR__="Extérieur (autre établissement)",t.__new_structure__="- Ajout d'une nouvelle structure -",this.structures=t},selectStructure(t){if(t.target.value=="__new_structure__"&&this.addStructure(t.target),t.target.dataset.variable!="intervenant"){const s=parseInt(t.target.dataset.variable);s==this.lastVolumeHoraireIndex()&&this.volumesHoraires[s].structureCode&&this.addVolumeHoraire()}},majTauxFi(t){const s=t.target.dataset.variable;this.volumesHoraires[s].tauxFi=1-this.volumesHoraires[s].tauxFa-this.volumesHoraires[s].tauxFc},lastVolumeHoraireIndex(){return this.volumesHoraires.length==0?-1:parseInt(Object.keys(this.volumesHoraires).pop())},addVolumeHoraire(){this.volumesHoraires.push({structureCode:null,typeInterventionCode:null,tauxFi:1,tauxFa:0,tauxFc:0,ponderationServiceDu:1,ponderationServiceCompl:1,serviceStatutaire:!0,heures:null})},addStructure(t){const s=prompt("Ajout d'une nouvelle structure");this.structures[s]=s,setTimeout(()=>{const n=t.dataset.variable;n=="intervenant"?this.intervenant.structureCode=s:this.volumesHoraires[n].structureCode=s},200)}},mounted(){this.charger()}},x=t=>(z("data-v-3894f4a0"),t=t(),B(),t),qs=x(()=>e("h1",{class:"page-header"},"Modification d'un test de formule",-1)),Os={class:"row"},zs={class:"col-md-6"},Bs=x(()=>e("h2",null,"Intervenant",-1)),Gs={class:"table table-xs table-bordered fti"},Js=x(()=>e("th",null,"Libellé",-1)),Ys={class:"saisie"},Ws=x(()=>e("th",null,"Formule",-1)),Qs={class:"saisie"},Xs=["value"],Zs=x(()=>e("th",null,"Année",-1)),Ks={class:"saisie"},en=["value"],tn=x(()=>e("th",null,"Type",-1)),sn={class:"saisie"},nn=["value"],rn=x(()=>e("th",null,"Structure",-1)),an={class:"saisie"},on=["value"],ln=x(()=>e("th",null,"Type de volume horaire",-1)),dn={class:"saisie"},un=["value"],cn=x(()=>e("th",null,"État de volume horaire",-1)),mn={class:"saisie"},hn=["value"],_n=x(()=>e("th",null,"Heures de service statutaire",-1)),pn={class:"saisie"},fn=x(()=>e("th",null,"Heures de service modifié",-1)),bn={class:"saisie"},vn=x(()=>e("th",null,"Dépassement de service dû sans HC",-1)),gn={class:"saisie"},yn=x(()=>e("option",{value:!0},"Oui",-1)),xn=x(()=>e("option",{value:!1},"Non",-1)),Cn=[yn,xn],Vn={class:"i-param i-param-1"},Pn={class:"i-param"},Sn={class:"saisie"},kn={class:"i-param i-param-2"},An={class:"i-param"},Mn={class:"saisie"},Dn={class:"i-param i-param-3"},En={class:"i-param"},Fn={class:"saisie"},Tn={class:"i-param i-param-4"},Un={class:"i-param"},Rn={class:"saisie"},In={class:"i-param i-param-5"},wn={class:"i-param"},$n={class:"saisie"},Ln={class:"actions"},Hn={class:"row mb-4"},Nn={class:"col-md-6"},jn={class:"col-md-6"},qn={class:"row mb-4"},On={class:"col-md-6"},zn={class:"col-md-6"},Bn={for:"importbtn"},Gn=x(()=>e("span",{class:"btn btn-secondary"},"Téléverser un jeu de données",-1)),Jn={class:"row"},Yn={class:"col-md-6"},Wn={class:"col-md-5"},Qn=x(()=>e("h2",null,"Types d'intervention (HETD)",-1)),Xn={class:"types-interventions"},Zn={class:"table table-bordered table-xs"},Kn=x(()=>e("tr",null,[e("th"),e("th",{colspan:"3"},"Standards"),e("th",{colspan:"5"},"Personnalisés")],-1)),ei=x(()=>e("th",{style:{width:"20%"}},null,-1)),ti=x(()=>e("th",{style:{width:"5%"}},"CM",-1)),si=x(()=>e("th",{style:{width:"5%"}},"TD",-1)),ni=x(()=>e("th",{style:{width:"5%"}},"TP",-1)),ii={style:{width:"10%"}},ri={style:{width:"10%"}},ai={style:{width:"10%"}},oi={style:{width:"10%"}},li={style:{width:"10%"}},di=x(()=>e("th",null,"En service",-1)),ui={class:"saisie"},ci=x(()=>e("td",null,"1",-1)),mi={class:"saisie"},hi={class:"saisie"},_i={class:"saisie"},pi={class:"saisie"},fi={class:"saisie"},bi={class:"saisie"},vi=x(()=>e("th",null,"Au-delà du service",-1)),gi={class:"saisie"},yi=x(()=>e("td",null,"1",-1)),xi={class:"saisie"},Ci={class:"saisie"},Vi={class:"saisie"},Pi={class:"saisie"},Si={class:"saisie"},ki={class:"saisie"},Ai=x(()=>e("h2",null,"Résultat",-1)),Mi={class:"table table-xs table-bordered resultats"},Di=x(()=>e("th",{colspan:"2"},"Service dû",-1)),Ei=x(()=>e("th",{rowspan:"4"},"Service",-1)),Fi=x(()=>e("th",null,"FI",-1)),Ti=x(()=>e("th",null,"FA",-1)),Ui=x(()=>e("th",null,"FC",-1)),Ri=x(()=>e("th",null,"Référentiel",-1)),Ii=x(()=>e("th",{colspan:"2"},"Total service dû assuré",-1)),wi=x(()=>e("th",{rowspan:"4"},"Heures compl.",-1)),$i=x(()=>e("th",null,"FI",-1)),Li=x(()=>e("th",null,"FA",-1)),Hi=x(()=>e("th",null,"FC",-1)),Ni=x(()=>e("th",null,"Référentiel",-1)),ji=x(()=>e("th",{colspan:"2"},"Total heures compl. à payer",-1)),qi=x(()=>e("th",{colspan:"2"},"Primes",-1)),Oi=x(()=>e("th",{rowspan:"4"},"Heures non payables",-1)),zi=x(()=>e("th",null,"FI",-1)),Bi=x(()=>e("th",null,"FA",-1)),Gi=x(()=>e("th",null,"FC",-1)),Ji=x(()=>e("th",null,"Référentiel",-1)),Yi=x(()=>e("th",{colspan:"2"},"Total heures non payables",-1)),Wi=x(()=>e("h2",null,"Heures effectuées (A saisir de manière chronologique)",-1)),Qi={class:"table table-bordered table-xs table-hover fvh"},Xi=x(()=>e("th",{rowspan:"3"},null,-1)),Zi=["colspan"],Ki=x(()=>e("th",{rowspan:"3",class:"spacer"}," ",-1)),er={colspan:"13"},tr=x(()=>e("option",{value:"attendu"},"Résultats attendus (en HETD)",-1)),sr=x(()=>e("option",{value:"hetd",selected:"selected"},"Résultats calculés (en HETD)",-1)),nr=x(()=>e("option",{value:"debug"},"Informations de débogage",-1)),ir=[tr,sr,nr],rr=x(()=>e("th",{rowspan:"2",style:{"min-width":"10em"}},"Structure",-1)),ar=x(()=>e("th",{rowspan:"2"},"Compte dans le service statutaire",-1)),or=x(()=>e("th",{rowspan:"2",style:{"min-width":"5em"}},"Type d'intervention",-1)),lr=x(()=>e("th",{colspan:"3"},"Répartition",-1)),dr=x(()=>e("th",{colspan:"2"},"Modulation",-1)),ur=["colspan"],cr=x(()=>e("th",{rowspan:"2"},"Heures",-1)),mr={colspan:"4"},hr={colspan:"4"},_r={rowspan:"2"},pr={colspan:"4"},fr={colspan:"4"},br={colspan:"4"},vr={rowspan:"2"},gr={colspan:"4"},yr={rowspan:"2"},xr=x(()=>e("th",null,"Fi",-1)),Cr=x(()=>e("th",null,"Fa",-1)),Vr=x(()=>e("th",null,"Fc",-1)),Pr=x(()=>e("th",null,"Service dû",-1)),Sr=x(()=>e("th",null,"Service compl.",-1)),kr=["onUpdate:modelValue","data-variable"],Ar=["value"],Mr=["onUpdate:modelValue"],Dr=x(()=>e("option",{value:!0},"Oui",-1)),Er=x(()=>e("option",{value:!1},"Non",-1)),Fr=[Dr,Er],Tr=["onUpdate:modelValue"],Ur=["value"],Rr=x(()=>e("span",{class:"pourc"},"%",-1)),Ir=x(()=>e("span",{class:"pourc"},"%",-1)),wr=x(()=>e("span",{class:"pourc"},"%",-1)),$r=x(()=>e("span",{class:"pourc"},"%",-1)),Lr=x(()=>e("span",{class:"pourc"},"%",-1)),Hr=["onUpdate:modelValue"],Nr=["onUpdate:modelValue"],jr=["onUpdate:modelValue"],qr=["onUpdate:modelValue"],Or=["onUpdate:modelValue"],zr=x(()=>e("td",{class:"spacer"},null,-1)),Br={class:"debug-td"},Gr={key:0},Jr={class:"debug-cell"},Yr={class:"debug-val"},Wr={key:0},Qr=x(()=>e("h4",null,"Débogage : calculs globaux",-1)),Xr={class:"debug-cell"},Zr={class:"debug-val"},Kr=["href"],ea=x(()=>e("i",{class:"fas fa-rotate-left","aria-hidden":"true"},null,-1));function ta(t,s,n,b,i,r){const d=U("u-input-float"),m=ee,c=U("u-heures");return a(),o(y,null,[qs,e("div",Os,[e("div",zs,[Bs,e("table",Gs,[e("tr",null,[Js,e("td",Ys,[v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>i.intervenant.libelle=l),class:"dinput"},null,512),[[E,i.intervenant.libelle]])])]),e("tr",null,[Ws,e("td",Qs,[v(e("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>i.intervenant.formule=l),class:"dinput"},[(a(!0),o(y,null,C(n.formules,l=>(a(),o("option",{value:l.id},u(l.libelle),9,Xs))),256))],512),[[F,i.intervenant.formule]])])]),e("tr",null,[Zs,e("td",Ks,[v(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>i.intervenant.annee=l),class:"dinput"},[(a(!0),o(y,null,C(n.annees,l=>(a(),o("option",{value:l.id},u(l.libelle),9,en))),256))],512),[[F,i.intervenant.annee]])])]),e("tr",null,[tn,e("td",sn,[v(e("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>i.intervenant.typeIntervenant=l),class:"dinput"},[(a(!0),o(y,null,C(n.typesIntervenants,l=>(a(),o("option",{value:l.id},u(l.libelle),9,nn))),256))],512),[[F,i.intervenant.typeIntervenant]])])]),e("tr",null,[rn,e("td",an,[v(e("select",{"onUpdate:modelValue":s[4]||(s[4]=l=>i.intervenant.structureCode=l),"data-variable":"intervenant",class:"dinput",onChange:s[5]||(s[5]=(...l)=>r.selectStructure&&r.selectStructure(...l))},[(a(!0),o(y,null,C(i.structures,(l,V)=>(a(),o("option",{value:V,key:V},u(l),9,on))),128))],544),[[F,i.intervenant.structureCode]])])]),e("tr",null,[ln,e("td",dn,[v(e("select",{"onUpdate:modelValue":s[6]||(s[6]=l=>i.intervenant.typeVolumeHoraire=l),class:"dinput"},[(a(!0),o(y,null,C(n.typesVolumesHoraires,l=>(a(),o("option",{value:l.id},u(l.libelle),9,un))),256))],512),[[F,i.intervenant.typeVolumeHoraire]])])]),e("tr",null,[cn,e("td",mn,[v(e("select",{"onUpdate:modelValue":s[7]||(s[7]=l=>i.intervenant.etatVolumeHoraire=l),class:"dinput"},[(a(!0),o(y,null,C(n.etatsVolumesHoraires,l=>(a(),o("option",{value:l.id},u(l.libelle),9,hn))),256))],512),[[F,i.intervenant.etatVolumeHoraire]])])]),e("tr",null,[_n,e("td",pn,[_(d,{modelValue:i.intervenant.heuresServiceStatutaire,"onUpdate:modelValue":s[8]||(s[8]=l=>i.intervenant.heuresServiceStatutaire=l),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[fn,e("td",bn,[_(d,{modelValue:i.intervenant.heuresServiceModifie,"onUpdate:modelValue":s[9]||(s[9]=l=>i.intervenant.heuresServiceModifie=l),class:"dinput"},null,8,["modelValue"])])]),e("tr",null,[vn,e("td",gn,[v(e("select",{"onUpdate:modelValue":s[10]||(s[10]=l=>i.intervenant.depassementServiceDuSansHC=l),class:"dinput"},Cn,512),[[F,i.intervenant.depassementServiceDuSansHC]])])]),v(e("tr",Vn,[e("th",Pn,u(i.formule.iParam1Libelle),1),e("td",Sn,[v(e("input",{"onUpdate:modelValue":s[11]||(s[11]=l=>i.intervenant.param1=l),class:"dinput"},null,512),[[E,i.intervenant.param1]])])],512),[[g,i.formule.iParam1Libelle]]),v(e("tr",kn,[e("th",An,u(i.formule.iParam2Libelle),1),e("td",Mn,[v(e("input",{"onUpdate:modelValue":s[12]||(s[12]=l=>i.intervenant.param2=l),class:"dinput"},null,512),[[E,i.intervenant.param2]])])],512),[[g,i.formule.iParam2Libelle]]),v(e("tr",Dn,[e("th",En,u(i.formule.iParam3Libelle),1),e("td",Fn,[v(e("input",{"onUpdate:modelValue":s[13]||(s[13]=l=>i.intervenant.param3=l),class:"dinput"},null,512),[[E,i.intervenant.param3]])])],512),[[g,i.formule.iParam3Libelle]]),v(e("tr",Tn,[e("th",Un,u(i.formule.iParam4Libelle),1),e("td",Rn,[v(e("input",{"onUpdate:modelValue":s[14]||(s[14]=l=>i.intervenant.param4=l),class:"dinput"},null,512),[[E,i.intervenant.param4]])])],512),[[g,i.formule.iParam4Libelle]]),v(e("tr",In,[e("th",wn,u(i.formule.iParam5Libelle),1),e("td",$n,[v(e("input",{"onUpdate:modelValue":s[15]||(s[15]=l=>i.intervenant.param5=l),class:"dinput"},null,512),[[E,i.intervenant.param5]])])],512),[[g,i.formule.iParam5Libelle]])]),e("div",Ln,[e("div",Hn,[e("div",Nn,[_(m,{variant:"primary",onClick:r.enregistrer},{default:T(()=>[f("Enregistrer les données")]),_:1},8,["onClick"])]),e("div",jn,[_(m,{variant:"secondary",onClick:r.calculer},{default:T(()=>[f("Calculer les HETD")]),_:1},8,["onClick"])])]),e("div",qn,[e("div",On,[e("button",{class:"exporter btn btn-secondary",onClick:s[16]||(s[16]=(...l)=>r.exporter&&r.exporter(...l))},"Télécharger les données")]),e("div",zn,[e("label",Bn,[Gn,e("input",{type:"file",id:"importbtn",class:"importer",onChange:s[17]||(s[17]=(...l)=>r.importer&&r.importer(...l))},null,32)])])]),e("div",Jn,[e("div",Yn,[e("button",{class:"exporter btn btn-secondary",onClick:s[18]||(s[18]=(...l)=>r.exporterCsv&&r.exporterCsv(...l))},"Télécharger les données en CSV ")])])])]),e("div",Wn,[Qn,e("div",Xn,[e("table",Zn,[Kn,e("tr",null,[ei,ti,si,ni,v(e("th",ii,[v(e("input",{"onUpdate:modelValue":s[19]||(s[19]=l=>i.intervenant.tauxAutre1Code=l),class:"dinput"},null,512),[[E,i.intervenant.tauxAutre1Code]])],512),[[g,i.tauxAutre1Visibility]]),v(e("th",ri,[v(e("input",{"onUpdate:modelValue":s[20]||(s[20]=l=>i.intervenant.tauxAutre2Code=l),class:"dinput"},null,512),[[E,i.intervenant.tauxAutre2Code]])],512),[[g,i.tauxAutre2Visibility]]),v(e("th",ai,[v(e("input",{"onUpdate:modelValue":s[21]||(s[21]=l=>i.intervenant.tauxAutre3Code=l),class:"dinput"},null,512),[[E,i.intervenant.tauxAutre3Code]])],512),[[g,i.tauxAutre3Visibility]]),v(e("th",oi,[v(e("input",{"onUpdate:modelValue":s[22]||(s[22]=l=>i.intervenant.tauxAutre4Code=l),class:"dinput"},null,512),[[E,i.intervenant.tauxAutre4Code]])],512),[[g,i.tauxAutre4Visibility]]),v(e("th",li,[v(e("input",{"onUpdate:modelValue":s[23]||(s[23]=l=>i.intervenant.tauxAutre5Code=l),class:"dinput"},null,512),[[E,i.intervenant.tauxAutre5Code]])],512),[[g,i.tauxAutre5Visibility]])]),e("tr",null,[di,e("td",ui,[_(d,{modelValue:i.intervenant.tauxCmServiceDu,"onUpdate:modelValue":s[24]||(s[24]=l=>i.intervenant.tauxCmServiceDu=l),fraction:!0,class:"dinput"},null,8,["modelValue"])]),ci,e("td",mi,[_(d,{modelValue:i.intervenant.tauxTpServiceDu,"onUpdate:modelValue":s[25]||(s[25]=l=>i.intervenant.tauxTpServiceDu=l),fraction:!0,class:"dinput"},null,8,["modelValue"])]),v(e("td",hi,[_(d,{modelValue:i.intervenant.tauxAutre1ServiceDu,"onUpdate:modelValue":s[26]||(s[26]=l=>i.intervenant.tauxAutre1ServiceDu=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre1Visibility]]),v(e("td",_i,[_(d,{modelValue:i.intervenant.tauxAutre2ServiceDu,"onUpdate:modelValue":s[27]||(s[27]=l=>i.intervenant.tauxAutre2ServiceDu=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre2Visibility]]),v(e("td",pi,[_(d,{modelValue:i.intervenant.tauxAutre3ServiceDu,"onUpdate:modelValue":s[28]||(s[28]=l=>i.intervenant.tauxAutre3ServiceDu=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre3Visibility]]),v(e("td",fi,[_(d,{modelValue:i.intervenant.tauxAutre4ServiceDu,"onUpdate:modelValue":s[29]||(s[29]=l=>i.intervenant.tauxAutre4ServiceDu=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre4Visibility]]),v(e("td",bi,[_(d,{modelValue:i.intervenant.tauxAutre5ServiceDu,"onUpdate:modelValue":s[30]||(s[30]=l=>i.intervenant.tauxAutre5ServiceDu=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre5Visibility]])]),e("tr",null,[vi,e("td",gi,[_(d,{modelValue:i.intervenant.tauxCmServiceCompl,"onUpdate:modelValue":s[31]||(s[31]=l=>i.intervenant.tauxCmServiceCompl=l),fraction:!0,class:"dinput"},null,8,["modelValue"])]),yi,e("td",xi,[_(d,{modelValue:i.intervenant.tauxTpServiceCompl,"onUpdate:modelValue":s[32]||(s[32]=l=>i.intervenant.tauxTpServiceCompl=l),fraction:!0,class:"dinput"},null,8,["modelValue"])]),v(e("td",Ci,[_(d,{modelValue:i.intervenant.tauxAutre1ServiceCompl,"onUpdate:modelValue":s[33]||(s[33]=l=>i.intervenant.tauxAutre1ServiceCompl=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre1Visibility]]),v(e("td",Vi,[_(d,{modelValue:i.intervenant.tauxAutre2ServiceCompl,"onUpdate:modelValue":s[34]||(s[34]=l=>i.intervenant.tauxAutre2ServiceCompl=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre2Visibility]]),v(e("td",Pi,[_(d,{modelValue:i.intervenant.tauxAutre3ServiceCompl,"onUpdate:modelValue":s[35]||(s[35]=l=>i.intervenant.tauxAutre3ServiceCompl=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre3Visibility]]),v(e("td",Si,[_(d,{modelValue:i.intervenant.tauxAutre4ServiceCompl,"onUpdate:modelValue":s[36]||(s[36]=l=>i.intervenant.tauxAutre4ServiceCompl=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre4Visibility]]),v(e("td",ki,[_(d,{modelValue:i.intervenant.tauxAutre5ServiceCompl,"onUpdate:modelValue":s[37]||(s[37]=l=>i.intervenant.tauxAutre5ServiceCompl=l),fraction:!0,class:"dinput"},null,8,["modelValue"])],512),[[g,i.tauxAutre5Visibility]])])])]),Ai,e("table",Mi,[e("tr",null,[Di,e("td",null,[_(c,{valeur:i.intervenant.serviceDu??NaN},null,8,["valeur"])])]),e("tr",null,[Ei,Fi,e("td",null,[_(c,{valeur:i.intervenant.heuresServiceFi??NaN},null,8,["valeur"])])]),e("tr",null,[Ti,e("td",null,[_(c,{valeur:i.intervenant.heuresServiceFa??NaN},null,8,["valeur"])])]),e("tr",null,[Ui,e("td",null,[_(c,{valeur:i.intervenant.heuresServiceFc??NaN},null,8,["valeur"])])]),e("tr",null,[Ri,e("td",null,[_(c,{valeur:i.intervenant.heuresServiceReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[Ii,e("td",null,[_(c,{valeur:i.intervenant.heuresService??NaN},null,8,["valeur"])])]),e("tr",null,[wi,$i,e("td",null,[_(c,{valeur:i.intervenant.heuresComplFi??NaN},null,8,["valeur"])])]),e("tr",null,[Li,e("td",null,[_(c,{valeur:i.intervenant.heuresComplFa??NaN},null,8,["valeur"])])]),e("tr",null,[Hi,e("td",null,[_(c,{valeur:i.intervenant.heuresComplFc??NaN},null,8,["valeur"])])]),e("tr",null,[Ni,e("td",null,[_(c,{valeur:i.intervenant.heuresComplReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[ji,e("td",null,[_(c,{valeur:i.intervenant.heuresCompl??NaN},null,8,["valeur"])])]),e("tr",null,[qi,e("td",null,[_(c,{valeur:i.intervenant.heuresPrimes??NaN},null,8,["valeur"])])]),e("tr",null,[Oi,zi,e("td",null,[_(c,{valeur:i.intervenant.heuresNonPayableFi??NaN},null,8,["valeur"])])]),e("tr",null,[Bi,e("td",null,[_(c,{valeur:i.intervenant.heuresNonPayableFa??NaN},null,8,["valeur"])])]),e("tr",null,[Gi,e("td",null,[_(c,{valeur:i.intervenant.heuresNonPayableFc??NaN},null,8,["valeur"])])]),e("tr",null,[Ji,e("td",null,[_(c,{valeur:i.intervenant.heuresNonPayableReferentiel??NaN},null,8,["valeur"])])]),e("tr",null,[Yi,e("td",null,[_(c,{valeur:i.intervenant.heuresNonPayable??NaN},null,8,["valeur"])])])])]),Wi,e("table",Qi,[e("thead",null,[e("tr",null,[Xi,e("th",{colspan:9+r.vhParamCount,class:"vh-donnees"},"Données",8,Zi),Ki,e("th",er,[v(e("select",{"onUpdate:modelValue":s[38]||(s[38]=l=>i.resMode=l),class:"form-select res-mode"},ir,512),[[F,i.resMode]])])]),e("tr",null,[rr,ar,or,lr,dr,v(e("th",{colspan:r.vhParamCount},"Paramètres",8,ur),[[g,r.vhParamCount>0]]),cr,v(e("th",mr,"Service",512),[[g,i.resMode=="attendu"]]),v(e("th",hr,"Heures compl.",512),[[g,i.resMode=="attendu"]]),v(e("th",_r,"Primes",512),[[g,i.resMode=="attendu"]]),v(e("th",pr,"Heures non payables",512),[[g,i.resMode=="attendu"]]),v(e("th",fr,"Service",512),[[g,i.resMode=="hetd"]]),v(e("th",br,"Heures compl.",512),[[g,i.resMode=="hetd"]]),v(e("th",vr,"Primes",512),[[g,i.resMode=="hetd"]]),v(e("th",gr,"Heures non payables",512),[[g,i.resMode=="hetd"]]),v(e("th",yr,"Informations de débogage",512),[[g,i.resMode=="debug"]])]),e("tr",null,[xr,Cr,Vr,Pr,Sr,(a(),o(y,null,C([1,2,3,4,5],l=>v(e("th",{key:l},u(i.formule["vhParam"+l+"Libelle"]),1),[[g,i.formule["vhParam"+l+"Libelle"]]])),64)),v(e("th",null,"Fi",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="attendu"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fi",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fa",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Fc",512),[[g,i.resMode=="hetd"]]),v(e("th",null,"Référentiel",512),[[g,i.resMode=="hetd"]])])]),e("tbody",null,[(a(!0),o(y,null,C(i.volumesHoraires,(l,V)=>(a(),o("tr",{key:V},[e("th",null,u(V+1),1),e("td",null,[v(e("select",{"onUpdate:modelValue":p=>l.structureCode=p,"data-variable":V,class:"dinput",onChange:s[39]||(s[39]=(...p)=>r.selectStructure&&r.selectStructure(...p))},[(a(!0),o(y,null,C(i.structures,(p,M)=>(a(),o("option",{value:M,key:M},u(p),9,Ar))),128))],40,kr),[[F,l.structureCode]])]),e("td",null,[v(e("select",{"onUpdate:modelValue":p=>l.serviceStatutaire=p,class:"dinput"},Fr,8,Mr),[[F,l.serviceStatutaire],[g,l.structureCode]])]),e("td",null,[v(e("select",{"onUpdate:modelValue":p=>l.typeInterventionCode=p,class:"dinput"},[(a(!0),o(y,null,C(r.filteredTypesIntervention,p=>(a(),o("option",{value:p,key:p},u(p),9,Ur))),128))],8,Tr),[[F,l.typeInterventionCode],[g,l.structureCode]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:l.tauxFi,"onUpdate:modelValue":p=>l.tauxFi=p,"is-pourc":"",class:"doutput",readonly:"",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),Rr],512),[[g,!["",null,"Référentiel"].includes(l.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:l.tauxFa,"onUpdate:modelValue":p=>l.tauxFa=p,"is-pourc":"",class:"dinput","data-variable":V,onChange:r.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange"]),Ir],512),[[g,!["",null,"Référentiel"].includes(l.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:l.tauxFc,"onUpdate:modelValue":p=>l.tauxFc=p,"is-pourc":"",class:"dinput","data-variable":V,onChange:r.majTauxFi,style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue","data-variable","onChange"]),wr],512),[[g,!["",null,"Référentiel"].includes(l.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:l.ponderationServiceDu,"onUpdate:modelValue":p=>l.ponderationServiceDu=p,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),$r],512),[[g,!["",null,"Référentiel"].includes(l.typeInterventionCode)]])]),e("td",null,[v(e("div",null,[_(d,{modelValue:l.ponderationServiceCompl,"onUpdate:modelValue":p=>l.ponderationServiceCompl=p,"is-pourc":"",class:"dinput",style:{width:"3em"}},null,8,["modelValue","onUpdate:modelValue"]),Lr],512),[[g,!["",null,"Référentiel"].includes(l.typeInterventionCode)]])]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>l.param1=p,class:"dinput"},null,8,Hr),[[E,l.param1],[g,l.structureCode]])],512),[[g,i.formule.vhParam1Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>l.param2=p,class:"dinput"},null,8,Nr),[[E,l.param2],[g,l.structureCode]])],512),[[g,i.formule.vhParam2Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>l.param3=p,class:"dinput"},null,8,jr),[[E,l.param3],[g,l.structureCode]])],512),[[g,i.formule.vhParam3Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>l.param4=p,class:"dinput"},null,8,qr),[[E,l.param4],[g,l.structureCode]])],512),[[g,i.formule.vhParam4Libelle]]),v(e("td",null,[v(e("input",{"onUpdate:modelValue":p=>l.param5=p,class:"dinput"},null,8,Or),[[E,l.param5],[g,l.structureCode]])],512),[[g,i.formule.vhParam5Libelle]]),e("td",null,[v(_(d,{modelValue:l.heures,"onUpdate:modelValue":p=>l.heures=p,class:"dinput",onChange:r.calculer},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[g,!["",null].includes(l.typeInterventionCode)]])]),zr,v(e("td",null,[_(d,{modelValue:l.heuresAttenduesServiceFi,"onUpdate:modelValue":p=>l.heuresAttenduesServiceFi=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesServiceFa,"onUpdate:modelValue":p=>l.heuresAttenduesServiceFa=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesServiceFc,"onUpdate:modelValue":p=>l.heuresAttenduesServiceFc=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesServiceReferentiel,"onUpdate:modelValue":p=>l.heuresAttenduesServiceReferentiel=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesComplFi,"onUpdate:modelValue":p=>l.heuresAttenduesComplFi=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesComplFa,"onUpdate:modelValue":p=>l.heuresAttenduesComplFa=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesComplFc,"onUpdate:modelValue":p=>l.heuresAttenduesComplFc=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesComplReferentiel,"onUpdate:modelValue":p=>l.heuresAttenduesComplReferentiel=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesPrimes,"onUpdate:modelValue":p=>l.heuresAttenduesPrimes=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesNonPayableFi,"onUpdate:modelValue":p=>l.heuresAttenduesNonPayableFi=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesNonPayableFa,"onUpdate:modelValue":p=>l.heuresAttenduesNonPayableFa=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesNonPayableFc,"onUpdate:modelValue":p=>l.heuresAttenduesNonPayableFc=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresAttenduesNonPayableReferentiel,"onUpdate:modelValue":p=>l.heuresAttenduesNonPayableReferentiel=p,"maximum-digits":"2",class:"dinput"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,i.resMode=="attendu"]]),v(e("td",null,[_(d,{modelValue:l.heuresServiceFi,"onUpdate:modelValue":p=>l.heuresServiceFi=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesServiceFi!=null&&Math.round(l.heuresAttenduesServiceFi*100)!=Math.round(l.heuresServiceFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresServiceFa,"onUpdate:modelValue":p=>l.heuresServiceFa=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesServiceFa!=null&&Math.round(l.heuresAttenduesServiceFa*100)!=Math.round(l.heuresServiceFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresServiceFc,"onUpdate:modelValue":p=>l.heuresServiceFc=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesServiceFc!=null&&Math.round(l.heuresAttenduesServiceFc*100)!=Math.round(l.heuresServiceFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresServiceReferentiel,"onUpdate:modelValue":p=>l.heuresServiceReferentiel=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesServiceReferentiel!=null&&Math.round(l.heuresAttenduesServiceReferentiel*100)!=Math.round(l.heuresServiceReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresComplFi,"onUpdate:modelValue":p=>l.heuresComplFi=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesComplFi!=null&&Math.round(l.heuresAttenduesComplFi*100)!=Math.round(l.heuresComplFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresComplFa,"onUpdate:modelValue":p=>l.heuresComplFa=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesComplFa!=null&&Math.round(l.heuresAttenduesComplFa*100)!=Math.round(l.heuresComplFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresComplFc,"onUpdate:modelValue":p=>l.heuresComplFc=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesComplFc!=null&&Math.round(l.heuresAttenduesComplFc*100)!=Math.round(l.heuresComplFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresComplReferentiel,"onUpdate:modelValue":p=>l.heuresComplReferentiel=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesComplReferentiel!=null&&Math.round(l.heuresAttenduesComplReferentiel*100)!=Math.round(l.heuresComplReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresPrimes,"onUpdate:modelValue":p=>l.heuresPrimes=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesPrimes!=null&&Math.round(l.heuresAttenduesPrimes*100)!=Math.round(l.heuresPrimes*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresNonPayableFi,"onUpdate:modelValue":p=>l.heuresNonPayableFi=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesNonPayableFi!=null&&Math.round(l.heuresAttenduesNonPayableFi*100)!=Math.round(l.heuresNonPayableFi*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresNonPayableFa,"onUpdate:modelValue":p=>l.heuresNonPayableFa=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesNonPayableFa!=null&&Math.round(l.heuresAttenduesNonPayableFa*100)!=Math.round(l.heuresNonPayableFa*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresNonPayableFc,"onUpdate:modelValue":p=>l.heuresNonPayableFc=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesNonPayableFc!=null&&Math.round(l.heuresAttenduesNonPayableFc*100)!=Math.round(l.heuresNonPayableFc*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",null,[_(d,{modelValue:l.heuresNonPayableReferentiel,"onUpdate:modelValue":p=>l.heuresNonPayableReferentiel=p,"maximum-digits":"2",tabindex:"-1",readonly:"",class:D({doutput:!0,"bg-danger":l.heuresAttenduesNonPayableReferentiel!=null&&Math.round(l.heuresAttenduesNonPayableReferentiel*100)!=Math.round(l.heuresNonPayableReferentiel*100)})},null,8,["modelValue","onUpdate:modelValue","class"])],512),[[g,i.resMode=="hetd"]]),v(e("td",Br,[i.debug.vh&&i.debug.vh[V]?(a(),o("div",Gr,[(a(!0),o(y,null,C(i.debug.vh[V],(p,M)=>(a(),o("span",Jr,[f(u(M)+" ",1),e("span",Yr,u(Math.round(p*100)/100),1)]))),256)),f("  ")])):h("",!0)],512),[[g,i.resMode=="debug"]])]))),128))])]),i.resMode=="debug"&&i.debug.global?(a(),o("div",Wr,[Qr,(a(!0),o(y,null,C(i.debug.global,(l,V)=>(a(),o("span",Xr,[f(u(V)+" ",1),e("span",Zr,u(Math.round(l*100)/100),1)]))),256)),f("  ")])):h("",!0),e("div",null,[e("a",{class:"btn btn-secondary",href:i.indexUrl},[ea,f(" Retour à la liste des formules")],8,Kr)])])],64)}const sa=k(js,[["render",ta],["__scopeId","data-v-3894f4a0"]]),na=Object.freeze(Object.defineProperty({__proto__:null,default:sa},Symbol.toStringTag,{value:"Module"})),ia={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(t){this.formatted=this.formatage(t)}},methods:{formatage(t){if(t===void 0)return;let s=new Date(t);const n=s.getFullYear(),b=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0"),r=s.getHours().toString().padStart(2,"0"),d=s.getMinutes().toString().padStart(2,"0"),m=s.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${i}/${b}/${n} à ${r}:${d}`;case"time":return`${r}:${d}:${m}`}return`${i}/${b}/${n}`}}};function ra(t,s,n,b,i,r){return u(i.formatted)}const O=k(ia,[["render",ra]]),aa={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(t){this.searchTerm=t.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(t){return unicaenVue.url("intervenant/code:"+t+"/voir")},reload(){var t=document.getElementById("term");t.focus(),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(s=>{let n=s.data,b=[];for(const i in n){if(n[i].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){b.push(n[i]);continue}if(n[i].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){b.push(n[i]);continue}if(n[i].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){b.push(n[i]);continue}}this.intervenants=b,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(s=>{console.log(s.message)})},800)}}},oa=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),la={class:"intervenant-recherche"},da={class:"critere"},ua=e("br",null,null,-1),ca=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),ma=e("br",null,null,-1),ha={key:0,class:"table table-bordered table-hover"},_a=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),pa=["title"],fa={style:{}},ba=["href"],va=e("i",{class:"fas fa-eye"},null,-1),ga={key:1,class:"table table-bordered table-hover"},ya=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),xa=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),Ca=[ya,xa];function Va(t,s,n,b,i,r){const d=O;return a(),o(y,null,[oa,e("div",la,[e("div",da,[e("div",null,[e("input",{id:"term",autofocus:"",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:s[0]||(s[0]=(...m)=>r.rechercher&&r.rechercher(...m))},null,32),ua]),e("div",null,[ca,v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=m=>i.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:s[2]||(s[2]=m=>r.reload())},null,544),[[J,i.checkedTypes]]),f(" Permanent "),v(e("input",{"onUpdate:modelValue":s[3]||(s[3]=m=>i.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:s[4]||(s[4]=m=>r.reload())},null,544),[[J,i.checkedTypes]]),f(" Vacataire "),v(e("input",{"onUpdate:modelValue":s[5]||(s[5]=m=>i.checkedTypes=m),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:s[6]||(s[6]=m=>r.reload())},null,544),[[J,i.checkedTypes]]),f(" Etudiant ")]),ma])]),i.intervenants.length>0?(a(),o("table",ha,[_a,e("tbody",null,[(a(!0),o(y,null,C(i.intervenants,(m,c)=>(a(),o("tr",{class:D({"bg-danger":m.destruction!==null}),title:m.destruction!==null?"Fiche historisé":""},[e("td",fa,[e("a",{href:r.urlFiche(m.code)},[va,f(" Fiche")],8,ba)]),e("td",null,u(m.civilite),1),e("td",null,u(m.nom),1),e("td",null,u(m.prenom),1),e("td",null,u(m.structure),1),e("td",null,u(m.statut),1),e("td",null,[_(d,{value:m["date-naissance"]},null,8,["value"])]),e("td",null,u(m["numero-personnel"]),1)],10,pa))),256))])])):h("",!0),i.intervenants.length==0&&i.noResult==1?(a(),o("table",ga,Ca)):h("",!0)],64)}const Pa=k(aa,[["render",Va]]),Sa=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),ka={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return this.structure.structures.length>0}},methods:{saisie(t){modAjax(t.currentTarget,s=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.refresh()})},refresh(){this.liste.reload()}}},N=t=>(z("data-v-a94dbf9e"),t=t(),B(),t),Aa={class:"accordion-item"},Ma={class:"accordion-header"},Da=["data-bs-target","aria-controls"],Ea=["href"],Fa=N(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),Ta=[Fa],Ua=["href"],Ra=N(()=>e("i",{class:"fas fa-trash-can"},null,-1)),Ia=[Ra],wa=["id"],$a={class:"accordion-body"},La={class:"row"},Ha=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),f(" : ")],-1)),Na={class:"col-md-5"},ja={class:"row"},qa=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),f(" : ")],-1)),Oa={class:"col-md-5"},za={class:"row"},Ba=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),f(" : ")],-1)),Ga={class:"col-md-5"},Ja={key:0,class:"fas fa-check text-success"},Ya={key:1,class:"fas fa-xmark text-danger"},Wa={class:"row"},Qa=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),f(" : ")],-1)),Xa={class:"col-md-5"},Za={key:0,class:"fas fa-check text-success"},Ka={key:1,class:"fas fa-xmark text-danger"},eo={class:"row"},to=N(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),f(" : ")],-1)),so={class:"col-md-5"},no={key:0,class:"sous-structures"},io=N(()=>e("h4",null,"Sous-structures",-1)),ro={class:"accordion"};function ao(t,s,n,b,i,r){const d=U("structure",!0);return a(),o("div",Aa,[e("h2",Ma,[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":`#str${n.structure.id}`,"aria-expanded":"true","aria-controls":n.structure.id},[n.structure.canEdit?(a(),o("a",{key:0,title:"Modifier la structure",href:i.saisieUrl,class:"btn btn-primary btn-sm",onClick:s[0]||(s[0]=P((...m)=>r.saisie&&r.saisie(...m),["prevent"]))},Ta,8,Ea)):h("",!0),n.structure.canDelete?(a(),o("a",{key:1,title:"Supprimer la structure",href:i.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",onClick:s[1]||(s[1]=P((...m)=>r.supprimer&&r.supprimer(...m),["prevent"]))},Ia,8,Ua)):h("",!0),f("   "+u(n.structure.libelleLong)+" ("+u(n.structure.libelleCourt)+") ",1)],8,Da)]),e("div",{id:`str${n.structure.id}`,class:"accordion-collapse collapse show"},[e("div",$a,[e("div",La,[Ha,e("div",Na,u(n.structure.code),1)]),e("div",ja,[qa,e("div",Oa,u(n.structure.source.libelle),1)]),e("div",za,[Ba,e("div",Ga,[n.structure.enseignement?(a(),o("i",Ja)):n.structure.enseignement?h("",!0):(a(),o("i",Ya))])]),e("div",Wa,[Qa,e("div",Xa,[n.structure.affAdresseContrat?(a(),o("i",Za)):n.structure.affAdresseContrat?h("",!0):(a(),o("i",Ka))])]),e("div",eo,[to,e("div",so,[e("pre",null,u(n.structure.adresse),1)])]),r.hasSousStructures?(a(),o("div",no,[io,e("div",ro,[(a(!0),o(y,null,C(n.structure.structures,m=>(a(),R(d,{onRefresh:r.refresh,key:m.id,structure:m},null,8,["onRefresh","structure"]))),128))])])):h("",!0)])],8,wa)])}const se=k(ka,[["render",ao],["__scopeId","data-v-a94dbf9e"]]),oo=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),lo={components:{structure:se},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{console.log("coucou"),this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(t=>{this.structures=t.data})}}},uo=e("h1",null,"Administration des structures",-1),co={class:"accordion"},mo=["href"],ho=e("i",{class:"fas fa-pen-to-square"},null,-1);function _o(t,s,n,b,i,r){const d=U("structure");return a(),o(y,null,[uo,e("div",co,[(a(!0),o(y,null,C(i.structures,m=>(a(),R(d,{key:m.id,structure:m},null,8,["structure"]))),128))]),n.canAdd?(a(),o("a",{key:0,class:"btn btn-primary",href:i.ajoutUrl,onClick:s[0]||(s[0]=P((...m)=>r.ajout&&r.ajout(...m),["prevent"])),title:"Ajouter une structure"},[ho,f(" Ajouter une structure ")],8,mo)):h("",!0)],64)}const po=k(lo,[["render",_o]]),fo=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),bo={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},vo=["id"],go={class:"modal-dialog"},yo={class:"modal-content"},xo={class:"modal-header"},Co={class:"modal-title"},Vo=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Po={class:"modal-body"},So={class:"modal-footer"},ko=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function Ao(t,s,n,b,i,r){return a(),o("div",{class:"modal fade",id:n.id,tabindex:"-1","aria-hidden":"true"},[e("div",go,[e("div",yo,[e("div",xo,[e("h5",Co,u(n.title),1),Vo]),e("div",Po,[W(t.$slots,"body")]),e("div",So,[W(t.$slots,"footer"),ko])])])],8,vo)}const Mo=k(bo,[["render",Ao]]),Do={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String},rotate:{required:!1,type:String},id:{required:!1,type:String}}},Eo=["id"];function Fo(t,s,n,b,i,r){return a(),o("i",{class:D(`fas fa-${n.name} text-${n.variant} fa-rotate-${n.rotate}`),id:`${n.id}`},null,10,Eo)}const j=k(Do,[["render",Fo]]),To={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(t){this.validationText=this.calcValidation(t)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(t){return t===null?"A valider":t.id===null?"Autovalidée":"Validation du "+Util.dateToString(t.histoCreation)+" par "},saisie(t){modAjax(t.currentTarget,s=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.$emit("supprimer",this.mission)})},valider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},devalider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireSupprimer(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireValider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},volumeHoraireDevalider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(t=>{this.$emit("refresh",t.data)})}}},L=t=>(z("data-v-1735108d"),t=t(),B(),t),Uo=["id"],Ro={class:"card-header card-header-h3"},Io={key:0},wo={class:"float-end"},$o={key:1},Lo={key:2},Ho={class:"float-end"},No={class:"card-body"},jo={class:"row"},qo={class:"col-md-8"},Oo={class:"row"},zo={class:"col-md-12"},Bo=L(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),Go={class:"form-control"},Jo={class:"row"},Yo={class:"col-md-6"},Wo=L(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),Qo={class:"form-control"},Xo={class:"col-md-6"},Zo=L(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),Ko={class:"form-control"},el={class:"col-md-7"},tl=L(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),sl={class:"input-group mb-3"},nl=["innerHTML"],il=["data-bs-target"],rl={key:0,class:"col-md-5"},al=L(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),ol={class:"form-control"},ll={class:"row"},dl={class:"col-md-12"},ul=L(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),cl={class:"form-control"},ml={key:0,class:"row"},hl={class:"col-md-12"},_l=L(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),pl={class:"form-control"},fl=L(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),bl={class:"row"},vl={class:"col-md-12"},gl=["href"],yl=["href"],xl=["href"],Cl=["href"],Vl={class:"col-md-4"},Pl=L(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),Sl={class:"table table-bordered table-condensed"},kl=L(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),Al={style:{"text-align":"right"}},Ml=L(()=>e("br",null,null,-1)),Dl={key:0},El=["data-id"],Fl=["data-id"],Tl=["data-id"];function Ul(t,s,n,b,i,r){const d=O,m=j,c=U("utilisateur"),l=U("u-heures"),V=Mo;return a(),o(y,null,[e("div",{id:n.mission.id,class:D([{"bg-success":n.mission.valide,"bg-default":!n.mission.valide},"card"])},[e("form",{onSubmit:s[4]||(s[4]=P((...p)=>t.submitForm&&t.submitForm(...p),["prevent"]))},[e("div",Ro,[n.mission.libelleMission?(a(),o("h5",Io,[f(u(n.mission.libelleMission)+" ",1),e("span",wo,[f("Du "),_(d,{value:n.mission.dateDebut},null,8,["value"]),f(" au "),_(d,{value:n.mission.dateFin},null,8,["value"])])])):h("",!0),n.mission.libelleMission?(a(),o("h6",$o,u(n.mission.typeMission.libelle),1)):h("",!0),n.mission.libelleMission?h("",!0):(a(),o("h5",Lo,[f(u(n.mission.typeMission.libelle)+" ",1),e("span",Ho,[f("Du "),_(d,{value:n.mission.dateDebut},null,8,["value"]),f(" au "),_(d,{value:n.mission.dateFin},null,8,["value"])])]))]),e("div",No,[e("div",jo,[e("div",qo,[e("div",Oo,[e("div",zo,[Bo,e("div",Go,u(n.mission.structure.libelle),1)])]),e("div",Jo,[e("div",Yo,[Wo,e("div",Qo,u(n.mission.tauxRemu?n.mission.tauxRemu.libelle:null),1)]),e("div",Xo,[Zo,e("div",Ko,u(n.mission.tauxRemuMajore?n.mission.tauxRemuMajore.libelle:n.mission.tauxRemu?"Idem ("+n.mission.tauxRemu.libelle+")":null),1)]),e("div",el,[tl,e("div",sl,[e("div",{class:"form-control",innerHTML:r.heuresLib},null,8,nl),e("button",{"data-bs-target":`#details-${n.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,il)])]),n.mission.typeMission.besoinFormation?(a(),o("div",rl,[al,e("div",ol,u(n.mission.heuresFormation),1)])):h("",!0)]),e("div",ll,[e("div",dl,[ul,e("div",cl,u(n.mission.description),1)])]),n.mission.typeMission.accompagnementEtudiants?(a(),o("div",ml,[e("div",hl,[_l,e("div",pl,[e("pre",null,u(n.mission.etudiantsSuivis),1)])])])):h("",!0),fl,e("div",bl,[e("div",vl,[n.mission.canSaisie?(a(),o("a",{key:0,href:i.saisieUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=P((...p)=>r.saisie&&r.saisie(...p),["prevent"]))},"Modifier",8,gl)):h("",!0),n.mission.canValider?(a(),o("a",{key:1,href:i.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:s[1]||(s[1]=P((...p)=>r.valider&&r.valider(...p),["prevent"]))},"Valider",8,yl)):h("",!0),n.mission.canDevalider?(a(),o("a",{key:2,href:i.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:s[2]||(s[2]=P((...p)=>r.devalider&&r.devalider(...p),["prevent"]))},"Dévalider",8,xl)):h("",!0),n.mission.canSupprimer?(a(),o("a",{key:3,href:i.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:s[3]||(s[3]=P((...p)=>r.supprimer&&r.supprimer(...p),["prevent"]))},"Supprimer",8,Cl)):h("",!0)])])]),e("div",Vl,[Pl,e("div",null,[_(m,{name:"thumbs-up",variant:"success"}),f(" Créé le "),_(d,{value:n.mission.histoCreation},null,8,["value"]),f(" par "),_(c,{mail:n.mission.histoCreateur.email,nom:n.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[_(m,{name:n.mission.valide?"thumbs-up":"thumbs-down",variant:n.mission.valide?"success":"info"},null,8,["name","variant"]),f(" "+u(i.validationText)+" ",1),n.mission.validation&&n.mission.validation.histoCreateur?(a(),R(c,{key:0,mail:n.mission.validation.histoCreateur.email,nom:n.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):h("",!0)]),e("div",null,[_(m,{name:n.mission.contrat?"thumbs-up":"thumbs-down",variant:n.mission.contrat?"success":"info"},null,8,["name","variant"]),f(" "+u(n.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,u(n.mission.heuresRealisees)+" heure"+u(n.mission.heuresRealisees<2?"":"s")+" réalisée"+u(n.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,Uo),_(V,{id:`details-${n.mission.id}`,title:"Détail des heures prévisionnelles"},{body:T(()=>[e("table",Sl,[kl,e("tbody",null,[(a(!0),o(y,null,C(n.mission.volumesHorairesPrevus,p=>(a(),o("tr",{key:p.id},[e("td",Al,[_(l,{valeur:p.heures},null,8,["valeur"])]),e("td",null,[_(m,{name:"thumbs-up",variant:"success"}),f(" Saisi par "),_(c,{mail:p.histoCreateur.email,nom:p.histoCreateur.displayName},null,8,["mail","nom"]),f(" le "),_(d,{value:p.histoCreation},null,8,["value"]),Ml,_(m,{name:p.valide?"thumbs-up":"thumbs-down",variant:p.valide?"success":"info"},null,8,["name","variant"]),f(" "+u(p.validation&&p.validation.id==null?"Autovalidé":p.validation?"":"à valider")+" ",1),p.validation&&p.validation.histoCreateur?(a(),o("span",Dl,[f(" Validé par "),_(c,{mail:p.validation.histoCreateur.email,nom:p.validation.histoCreateur.displayName},null,8,["mail","nom"]),f(" le "),_(d,{value:p.validation.histoCreation},null,8,["value"])])):h("",!0)]),e("td",null,[p.canValider?(a(),o("a",{key:0,"data-id":p.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:s[5]||(s[5]=P((...M)=>r.volumeHoraireValider&&r.volumeHoraireValider(...M),["prevent"]))},"Valider",8,El)):h("",!0),p.canDevalider?(a(),o("a",{key:1,"data-id":p.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:s[6]||(s[6]=P((...M)=>r.volumeHoraireDevalider&&r.volumeHoraireDevalider(...M),["prevent"]))},"Dévalider",8,Fl)):h("",!0),p.canSupprimer?(a(),o("a",{key:2,"data-id":p.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:s[7]||(s[7]=P((...M)=>r.volumeHoraireSupprimer&&r.volumeHoraireSupprimer(...M),["prevent"]))},"Supprimer",8,Tl)):h("",!0)])]))),128))])])]),footer:T(()=>[]),_:1},8,["id"])],64)}const ne=k(To,[["render",Ul],["__scopeId","data-v-1735108d"]]),Rl=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),Il={components:{mission:ne},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},supprimer(t){this.reload()},refresh(t){let s=Util.json.indexById(this.missions,t.id);this.missions[s]=t,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(t=>{this.missions=t.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},wl=["href"];function $l(t,s,n,b,i,r){const d=U("mission");return a(),o(y,null,[(a(!0),o(y,null,C(i.missions,m=>(a(),R(d,{onSupprimer:r.supprimer,onRefresh:r.refresh,key:m.id,mission:m},null,8,["onSupprimer","onRefresh","mission"]))),128)),n.canAddMission?(a(),o("a",{key:0,class:"btn btn-primary",href:i.ajoutUrl,onClick:s[0]||(s[0]=P((...m)=>r.ajout&&r.ajout(...m),["prevent"]))},"Ajout d'une nouvelle mission",8,wl)):h("",!0)],64)}const Ll=k(Il,[["render",$l]]),Hl=Object.freeze(Object.defineProperty({__proto__:null,default:Ll},Symbol.toStringTag,{value:"Module"})),Nl={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},canValiderCandidature:{type:Boolean,required:!1},canRefuserCandidature:{type:Boolean,required:!1},renseignerDonneesPersonnelles:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},computed:{urlDonneesPersonnelles:function(){return unicaenVue.url("intervenant/:intervenant/dossier",{intervenant:this.intervenant})}},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(t=>{this.candidatures=t.data})},validerCandidature(t){modAjax(t.currentTarget,s=>{this.reload()})},refuserCandidature(t){popConfirm(t.target,s=>{this.reload()})},urlOffre(t){return unicaenVue.url("offre-emploi/detail/:offre",{offre:t.offre.id})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})}}},jl={key:0,class:"alert alert-primary",role:"alert"},ql=["href"],Ol={class:"table table-bordered"},zl=e("th",null,"Offre d'emploi",-1),Bl=e("th",null,"Composante",-1),Gl=e("th",null,"Etat",-1),Jl=e("th",null,"Date commission",-1),Yl={key:0},Wl={key:0},Ql={key:0,colspan:"5",style:{"text-align":"center"}},Xl={style:{"text-align":"center"}},Zl=["href"],Kl={style:{"text-align":"center"}},ed={style:{"text-align":"center"}},td={key:0,class:"badge rounded-pill bg-success"},sd={key:1,class:"badge rounded-pill bg-danger"},nd={key:2,class:"badge rounded-pill bg-warning"},id={key:0,style:{"text-align":"center"}},rd=["href"],ad=e("i",{class:"fa-solid fa-check"},null,-1),od=[ad],ld=["href"],dd=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),ud=[dd],cd=["href"];function md(t,s,n,b,i,r){const d=O,m=j;return a(),o("div",null,[this.renseignerDonneesPersonnelles?(a(),o("div",jl,[f(" Afin que vos candidatures soient étudiées, veuillez compléter "),e("a",{href:this.urlDonneesPersonnelles},"vos données personnelles",8,ql),f(" et fournir les pièces justificatives qui vous seront demandées. ")])):h("",!0),e("table",Ol,[e("thead",null,[e("tr",null,[zl,Bl,Gl,Jl,n.canValiderCandidature||n.canRefuserCandidature?(a(),o("th",Yl,"Action")):h("",!0)])]),e("tbody",null,[i.candidatures.length==0?(a(),o("tr",Wl,[n.canValiderCandidature?(a(),o("td",Ql,"Aucune candidature")):h("",!0)])):h("",!0),(a(!0),o(y,null,C(i.candidatures,c=>(a(),o("tr",{key:c.id},[e("td",Xl,[e("a",{href:r.urlOffre(c)},u(c.offre.titre),9,Zl)]),e("td",Kl,u(c.offre.structure.libelleCourt),1),e("td",ed,[c.validation?(a(),o("span",td,"Acceptée par "+u(c.validation.histoCreateur.displayName),1)):h("",!0),!c.validation&&c.motif!==null?(a(),o("span",sd,u(c.motif),1)):h("",!0),!c.validation&&c.motif===null?(a(),o("span",nd,"En attente d'acceptation")):h("",!0)]),e("td",null,[c.dateCommission?(a(),R(d,{key:0,value:c.dateCommission},null,8,["value"])):h("",!0)]),this.canValiderCandidature||this.canRefuserCandidature?(a(),o("td",id,[!c.validation&&this.canValiderCandidature?(a(),o("a",{key:0,href:r.urlAccepterCandidature(c),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:s[0]||(s[0]=P((...l)=>r.validerCandidature&&r.validerCandidature(...l),["prevent"]))},od,8,rd)):h("",!0),f("  "),this.canRefuserCandidature?(a(),o("a",{key:1,href:r.urlRefuserCandidature(c),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:s[1]||(s[1]=P((...l)=>r.refuserCandidature&&r.refuserCandidature(...l),["prevent"]))},ud,8,ld)):h("",!0)])):h("",!0)]))),128))])]),e("a",{href:i.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[_(m,{name:"eye"}),f(" Voir toutes les offres d'emploi ")],8,cd),f("  ")])}const hd=k(Nl,[["render",md]]),_d=Object.freeze(Object.defineProperty({__proto__:null,default:hd},Symbol.toStringTag,{value:"Module"})),pd={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let t=this.offre.description.substr(0,200);return this.offre.description.length>200&&(t+="..."),t},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let t="auth/connexion?redirect="+window.location.href;return unicaenVue.url(t)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(t){modAjax(t.target,s=>{this.refresh()})},urlVoir:function(t){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+t.intervenant.code})},urlVoirCandidature:function(t){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+t.intervenant.code})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(t=>{this.$emit("refresh",t.data)})},supprimer(t){popConfirm(t.target,s=>{this.$emit("supprimer",this.offre)})},postuler(t){popConfirm(t.target,s=>{this.$emit("postuler",this.offre)})},valider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},devalider(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},validerCandidature(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})},refuserCandidature(t){popConfirm(t.currentTarget,s=>{this.$emit("refresh",s.data)})}}},fd={key:0,class:"col"},bd={class:"card h-100"},vd={class:"card-header"},gd={class:"badge rounded-pill bg-info"},yd={key:0,class:"badge rounded-pill bg-success"},xd={key:1,class:"badge rounded-pill bg-warning"},Cd={class:"card-body"},Vd={class:"bg-light",style:{padding:"5px"}},Pd=e("b",null,"Créée le : ",-1),Sd=e("br",null,null,-1),kd=e("b",null,"Période à pourvoir : ",-1),Ad=e("br",null,null,-1),Md=e("b",null,"Demandée par la composante :",-1),Dd=e("br",null,null,-1),Ed=e("b",null,"Type de mission :",-1),Fd={class:"card-footer"},Td={class:"d-grid gap-2 d-md-flex justify-content-md-end"},Ud=["href"],Rd={key:1},Id={class:"page-header"},wd={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},$d=e("i",{class:"fa-solid fa-user"},null,-1),Ld={class:"ms-2"},Hd=["href"],Nd={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},jd=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),qd=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),Od=[jd,qd],zd={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},Bd=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),Gd=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),Jd=[Bd,Gd],Yd={class:"bg-light",style:{padding:"10px"}},Wd=e("b",null,"Créée le : ",-1),Qd=e("br",null,null,-1),Xd=e("b",null,"Période à pourvoir : ",-1),Zd=e("br",null,null,-1),Kd=e("b",null,"Date limite de candidature :",-1),eu=e("br",null,null,-1),tu=e("b",null,"Demandé par la composante :",-1),su=e("br",null,null,-1),nu=e("b",null,"Type de mission :",-1),iu=e("br",null,null,-1),ru=e("b",null,"Nombre d'heures pour la mission :",-1),au=e("br",null,null,-1),ou=e("b",null,"Nombre de postes à pourvoir :",-1),lu=e("br",null,null,-1),du=["innerHTML"],uu={key:3,class:"alert alert-info"},cu=["innerHTML"],mu=e("br",null,null,-1),hu={key:4},_u=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),pu={class:"table table-bordered"},fu=e("th",null,"Intervenant",-1),bu=e("th",null,"Etat",-1),vu={key:0},gu={key:0},yu={key:0,colspan:"4",style:{"text-align":"center"}},xu={key:1,colspan:"3",style:{"text-align":"center"}},Cu=["href"],Vu={key:0,class:"badge rounded-pill bg-success"},Pu={key:1,class:"badge rounded-pill bg-danger"},Su={key:2,class:"badge rounded-pill bg-warning"},ku={key:0},Au=["href"],Mu={class:"mt-5"},Du=["href"],Eu=["href"],Fu=["href"],Tu=["href"],Uu=["href"],Ru=["href"];function Iu(t,s,n,b,i,r){const d=O,m=j;return a(),o(y,null,[this.extended?h("",!0):(a(),o("div",fd,[e("div",bd,[e("div",vd,[e("h4",null,u(n.offre.titre),1),e("span",gd,u(n.offre.nombreHeures)+" heure(s)",1),f("   "),n.offre.validation?(a(),o("span",yd,[f("Validée le "),_(d,{value:n.offre.validation.histoCreation},null,8,["value"]),f(" par "+u(n.offre.validation.histoCreateur.displayName),1)])):h("",!0),n.offre.validation?h("",!0):(a(),o("span",xd," En attente de validation par la DRH")),f("  ")]),e("div",Cd,[e("p",Vd,[Pd,_(d,{value:n.offre.histoCreation},null,8,["value"]),f(" par "+u(n.offre.histoCreateur.displayName),1),Sd,kd,f("du "),_(d,{value:n.offre.dateDebut},null,8,["value"]),f(" au "),_(d,{value:n.offre.dateFin},null,8,["value"]),Ad,Md,f(" "+u(n.offre.structure.libelleCourt)+" ",1),Dd,Ed,f(" "+u(n.offre.typeMission.libelle),1)]),f(" "+u(r.shortDesc),1)]),e("div",Fd,[e("div",Td,[e("a",{href:i.consulterUrl,class:"btn btn-primary",title:"Consulter "},[_(m,{name:"eye"}),f(" Voir ")],8,Ud)])])])])),this.extended?(a(),o("div",Rd,[e("h1",Id,u(n.offre.titre),1),this.utilisateur?h("",!0):(a(),o("div",wd,[$d,e("div",Ld,[f(" Vous devez "),e("a",{href:r.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,Hd),f(" pour pouvoir postuler. ")])])),!n.offre.canPostuler&&this.utilisateur?(a(),o("div",Nd,Od)):h("",!0),r.isCandidat&&this.utilisateur?(a(),o("div",zd,Jd)):h("",!0),e("p",Yd,[Wd,_(d,{value:n.offre.histoCreation},null,8,["value"]),f(" par "+u(n.offre.histoCreateur.displayName),1),Qd,Xd,f("du "),_(d,{value:n.offre.dateDebut},null,8,["value"]),f(" au "),_(d,{value:n.offre.dateFin},null,8,["value"]),Zd,Kd,_(d,{value:n.offre.dateLimite},null,8,["value"]),eu,tu,f(" "+u(n.offre.structure.libelleCourt)+" ",1),su,nu,f(" "+u(n.offre.typeMission.libelle)+" ",1),iu,ru,f(" "+u(n.offre.nombreHeures)+" heure(s) ",1),au,ou,f(" "+u(n.offre.nombrePostes)+" poste(s) ",1),lu]),e("p",{innerHTML:this.descriptionHtml},null,8,du),this.decretText?(a(),o("p",uu,[v(e("input",{id:"decret","onUpdate:modelValue":s[0]||(s[0]=c=>i.decret=c),name:"decret",type:"checkbox"},null,512),[[J,i.decret]]),f("  "),e("span",{innerHTML:this.decretText},null,8,cu)])):h("",!0),mu,this.canValiderCandidature?(a(),o("div",hu,[_u,e("table",pu,[e("thead",null,[e("tr",null,[fu,bu,n.canValiderCandidature?(a(),o("th",vu,"Action")):h("",!0)])]),e("tbody",null,[n.offre.candidatures.length==0?(a(),o("tr",gu,[n.canValiderCandidature?(a(),o("td",yu,"Aucune candidature")):h("",!0),n.canValiderCandidature?h("",!0):(a(),o("td",xu,"Aucune candidature"))])):h("",!0),(a(!0),o(y,null,C(n.offre.candidatures,c=>(a(),o("tr",null,[e("td",null,[e("a",{href:r.urlVoir(c)},u(c.intervenant.prenom+" "+c.intervenant.nomUsuel),9,Cu)]),e("td",null,[c.validation?(a(),o("span",Vu,[f("Acceptée le "),_(d,{value:c.validation.histoCreation},null,8,["value"]),f(" par "+u(c.validation.histoCreateur.displayName),1)])):h("",!0),!c.validation&&c.motif!==null?(a(),o("span",Pu,u(c.motif),1)):h("",!0),!c.validation&&c.motif===null?(a(),o("span",Su,"En attente d'acceptation")):h("",!0)]),this.canValiderCandidature?(a(),o("td",ku,[e("a",{href:r.urlVoirCandidature(c),class:"btn btn-primary",title:"Consulter "},[_(m,{name:"eye"}),f(" Voir ")],8,Au)])):h("",!0)]))),256))])])])):h("",!0),e("div",Mu,[e("a",{href:i.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,Du),f("  "),this.canPostuler?(a(),o("a",{key:0,class:D([i.decret?"":"disabled","btn btn-primary"]),href:i.postulerUrl,"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,Eu)):h("",!0),f("  "),n.offre.canModifier?(a(),o("a",{key:1,href:i.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:s[1]||(s[1]=P((...c)=>r.saisir&&r.saisir(...c),["prevent"]))},[_(m,{name:"pen-to-square"}),f(" Modifier ")],8,Fu)):h("",!0),f("  "),n.offre.validation&&n.offre.canValider?(a(),o("a",{key:2,href:i.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:s[2]||(s[2]=P((...c)=>r.devalider&&r.devalider(...c),["prevent"]))},[_(m,{name:"thumbs-down"}),f(" Devalider ")],8,Tu)):h("",!0),f("  "),!n.offre.validation&&n.offre.canValider?(a(),o("a",{key:3,href:i.validerUrl,class:"btn btn-success",title:"Valider",onClick:s[3]||(s[3]=P((...c)=>r.valider&&r.valider(...c),["prevent"]))},[_(m,{name:"thumbs-up"}),f(" Valider ")],8,Uu)):h("",!0),f("  "),n.offre.canSupprimer?(a(),o("a",{key:4,href:i.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:s[4]||(s[4]=P((...c)=>r.supprimer&&r.supprimer(...c),["prevent"]))},[_(m,{name:"trash"}),f(" Supprimer ")],8,Ru)):h("",!0)])])):h("",!0)],64)}const ie=k(pd,[["render",Iu]]),wu=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),$u={components:{offreEmploi:ie},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(t){modAjax(t.target,s=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(t){let s=Util.json.indexById(this.offres,t.id);this.offres[s]=t},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(t=>{this.offres=[t.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(t=>{this.offres=t.data})}}},Lu={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},Hu={key:1},Nu=["href"],ju={key:2};function qu(t,s,n,b,i,r){const d=U("offreEmploi");return a(),o(y,null,[r.extended?h("",!0):(a(),o("div",Lu,[(a(!0),o(y,null,C(i.offres,m=>(a(),R(d,{key:m.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:m,decretText:m.decretText,onRefresh:r.refresh,onSupprimer:r.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),r.extended?h("",!0):(a(),o("div",Hu,[this.canModifier?(a(),o("a",{key:0,href:i.ajoutUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=P((...m)=>r.ajout&&r.ajout(...m),["prevent"]))},"Ajouter une nouvelle offre",8,Nu)):h("",!0)])),r.extended?(a(),o("div",ju,[(a(!0),o(y,null,C(i.offres,m=>(a(),R(d,{key:m.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:m.decretText,extended:r.extended,offre:m,utilisateur:this.utilisateur,onRefresh:r.refresh,onSupprimer:r.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):h("",!0)],64)}const Ou=k($u,[["render",qu]]),zu=Object.freeze(Object.defineProperty({__proto__:null,default:Ou},Symbol.toStringTag,{value:"Module"})),Bu={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(t){popConfirm(t.target,s=>{this.$emit("reload")})},valider(t){popConfirm(t.target,s=>{this.$emit("reload")})},devalider(t){popConfirm(t.target,s=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(t=>{this.$emit("reload")})},modifierPrime(t){modAjax(t.currentTarget,s=>{this.$emit("reload")})},supprimerPrime(t){popConfirm(t.target,s=>{this.$emit("reload")})}}},Gu={key:0},Ju=e("br",null,null,-1),Yu=e("u",null,"Mission(s) concernée(s)",-1),Wu={key:0},Qu=["action"],Xu={class:"card-body"},Zu={class:"row"},Ku={key:0,class:"col-md-6"},ec={class:"card text-dark bg-light"},tc=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),sc={class:"card-body"},nc=e("p",{class:"card-text"},[f(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),f(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),f(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),ic=["disabled"],rc={class:"card-footer d-grid gap-2"},ac=["disabled"],oc={key:1,class:"col-md-6"},lc={class:"card text-dark bg-light"},dc=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),uc={class:"card-body"},cc=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),mc=["href"],hc={class:"card-footer",style:{"text-align":"right"}},_c=["href"],pc=["href"],fc=["href"],bc={class:"col-md-6"},vc={key:0},gc=["checked","disabled"],yc=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),xc=e("br",null,null,-1),Cc=e("br",null,null,-1),Vc=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),Pc={key:0},Sc={key:1},kc={key:2},Ac={key:3},Mc={key:4},Dc={key:5},Ec={key:6},Fc={class:"row"},Tc={class:"col-md-12"},Uc={class:"float-end"},Rc=["href"],Ic=["href"];function wc(t,s,n,b,i,r){const d=O,m=j;return a(),o("div",{class:D([{"bg-success":n.prime.validation,"bg-default":!n.prime.validation&&!n.prime.dateRefus,"bg-danger":n.prime.dateRefus},"card"])},[e("div",{class:D([{"text-white":n.prime.dateRefus},"card-header card-header-h3"])},[n.prime.id?(a(),o("h5",Gu,[f(" Indemnité de fin de contrat N°"+u(n.numero+1),1),Ju])):h("",!0),e("div",null,[Yu,f(" : "),(a(!0),o(y,null,C(n.prime.missions,(c,l)=>(a(),o("span",null,[f(u(c.typeMission.libelle)+" (Pour "+u(c.structure.libelleCourt)+" du ",1),_(d,{value:c.dateDebut},null,8,["value"]),f(" au "),_(d,{value:c.dateFin},null,8,["value"]),f(") "),l!=n.prime.missions.length-1?(a(),o("span",Wu,", ")):h("",!0)]))),256))])],2),e("form",{action:i.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",Xu,[e("div",Zu,[n.prime.declaration?h("",!0):(a(),o("div",Ku,[e("div",ec,[tc,e("div",sc,[nc,e("input",{ref:"file",disabled:!!n.prime.dateRefus,name:"files[]",type:"file"},null,8,ic)]),e("div",rc,[e("input",{disabled:!!n.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,ac)])])])),n.prime.declaration?(a(),o("div",oc,[e("div",lc,[dc,e("div",uc,[cc,e("a",{href:i.telechargerUrl},u(n.prime.declaration.nom),9,mc)]),e("div",hc,[n.prime.declaration&&!n.prime.validation&&!n.prime.dateRefus?(a(),o("a",{key:0,href:i.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:s[0]||(s[0]=P((...c)=>r.supprimer&&r.supprimer(...c),["prevent"]))}," Supprimer ",8,_c)):h("",!0),f("  "),n.prime.declaration&&!n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(a(),o("a",{key:1,href:i.validerUrl,class:"btn btn-success",title:"Valider",onClick:s[1]||(s[1]=P((...c)=>r.valider&&r.valider(...c),["prevent"]))}," Valider ",8,pc)):h("",!0),f("  "),n.prime.declaration&&n.prime.validation&&this.canGerer&&!n.prime.dateRefus?(a(),o("a",{key:2,href:i.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:s[2]||(s[2]=P((...c)=>r.devalider&&r.devalider(...c),["prevent"]))}," Dévalider ",8,fc)):h("",!0),f("  ")])])])):h("",!0),e("div",bc,[n.prime.validation?h("",!0):(a(),o("div",vc,[e("input",{checked:n.prime.dateRefus,disabled:n.prime.validation,name:"prime",type:"checkbox",onChange:s[3]||(s[3]=(...c)=>r.refuser&&r.refuser(...c))},null,40,gc),f("  Ou en cochant cette case, "),yc,f(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),xc,Cc])),e("div",null,[Vc,n.prime.dateRefus?(a(),o("div",Pc,[_(m,{name:"thumbs-down",variant:"danger"}),f(" Indemnité refusée le "),_(d,{value:n.prime.dateRefus},null,8,["value"])])):h("",!0),n.prime.declaration&&!n.prime.dateRefus?(a(),o("div",Sc,[_(m,{name:"thumbs-up",variant:"success"}),f(" Déclaration déposée le "),_(d,{value:n.prime.declaration.histoCreation},null,8,["value"]),f(" par "+u(n.prime.declaration.histoCreateur.displayName),1)])):h("",!0),!n.prime.declaration&&!n.prime.dateRefus?(a(),o("div",kc,[_(m,{name:"thumbs-down",variant:"info"}),f(" Aucune déclaration déposée ")])):h("",!0),n.prime.validation&&!n.prime.dateRefus?(a(),o("div",Ac,[_(m,{name:"thumbs-up",variant:"success"}),f(" Déclaration validée le "),_(d,{value:n.prime.validation.histoCreation},null,8,["value"]),f(" par "+u(n.prime.validation.histoCreateur.displayName),1)])):h("",!0),!n.prime.validation&&!n.prime.dateRefus?(a(),o("div",Mc,[_(m,{name:"thumbs-down",variant:"info"}),f(" Aucune déclaration validée ")])):h("",!0),n.prime.validation&&!n.prime.dateRefus?(a(),o("div",Dc,[_(m,{name:"euro-sign",variant:"success"}),f(" Intervenant éligible à une indemnité de fin de contrat ")])):h("",!0),n.prime.dateRefus?(a(),o("div",Ec,[_(m,{name:"euro-sign",variant:"info"}),f(" Intervenant non éligible à une indemnité de fin de contrat ")])):h("",!0)])])]),e("div",Fc,[e("div",Tc,[e("span",Uc,[!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(a(),o("a",{key:0,href:i.modifierPrimeUrl,class:"btn btn-primary",onClick:s[4]||(s[4]=P((...c)=>r.modifierPrime&&r.modifierPrime(...c),["prevent"]))},"Modifier",8,Rc)):h("",!0),f("   "),!n.prime.validation&&!n.prime.dateRefus&&this.canGerer?(a(),o("a",{key:1,href:i.supprimerPrimeUrl,class:"btn btn-danger",onClick:s[5]||(s[5]=P((...c)=>r.supprimerPrime&&r.supprimerPrime(...c),["prevent"]))},"Supprimer",8,Ic)):h("",!0)])])])])],8,Qu)],2)}const re=k(Bu,[["render",wc]]),$c=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),Lc={components:{prime:re},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(t=>{this.primes=t.data,this.load=!0})}}},Hc={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Nc=e("br",null,null,-1),jc=e("br",null,null,-1),qc={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Oc=e("br",null,null,-1),zc=e("br",null,null,-1),Bc={key:2},Gc=["href"];function Jc(t,s,n,b,i,r){const d=U("prime");return a(),o(y,null,[(a(!0),o(y,null,C(i.primes,(m,c)=>(a(),R(d,{canGerer:n.canGerer,intervenant:this.intervenant,numero:c,prime:m,onReload:r.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),i.load?h("",!0):(a(),o("div",Hc,[f(" Chargement en cours..."),Nc,jc])),i.primes.length==0&&i.load?(a(),o("div",qc,[f(" Aucune indemnité de fin de contrat actuellement..."),Oc,zc])):h("",!0),this.missionsWithoutPrime>0&&this.canGerer?(a(),o("div",Bc,[e("a",{href:i.ajoutUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=P((...m)=>r.ajout&&r.ajout(...m),["prevent"]))},"Créer une nouvelle indemnité",8,Gc)])):h("",!0)],64)}const Yc=k(Lc,[["render",Jc]]),Wc=Object.freeze(Object.defineProperty({__proto__:null,default:Yc},Symbol.toStringTag,{value:"Module"})),Qc={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const t=new Date(this.date);return{mois:t.getMonth()+1,annee:t.getFullYear()}},computed:{listeJours(){const t=new Date(this.date);t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1);let s=t.getDate();return Array.from({length:s},(n,b)=>b+1)}},watch:{date:function(t,s){const n=new Date(this.date);this.mois=n.getMonth()+1,this.annee=n.getFullYear()},mois:function(t,s){const n=new Date(this.date);n.setMonth(t-1),this.$emit("changeDate",n)},annee:function(t,s){const n=new Date(this.date);n.setFullYear(t),this.$emit("changeDate",n)}},methods:{nomJour(t){const s=new Date(this.date);return s.setDate(t),s.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let t=[];const s=new Date;for(let n=1;n<=12;n++){s.setMonth(n-1);let b=s.toLocaleString("fr-FR",{month:"long"});t.push({id:n,libelle:b})}return t},listeAnnees(){const s=new Date().getFullYear(),n=1;let b=[];for(let i=s-n;i<=s+n;i++)b.push(i);return b},canAdd(t){if(!this.canAddEvent)return!1;let s=this.addDateDebut;s===void 0?s=new Date("2000-01-01"):s==="now"?s=new Date:s=new Date(s);let n=this.addDateFin;n===void 0?n=new Date("2500-01-01"):n==="now"?n=new Date:n=new Date(n);let b=new Date(this.date);return b.setDate(t),s=this.isoDateOnly(s),n=this.isoDateOnly(n),b=this.isoDateOnly(b),!(b<s||b>n)},addEvent(t){const s=new Date(this.date);s.setDate(t.currentTarget.dataset.jour),this.$emit("addEvent",s,t)},prevMois(){const t=new Date(this.date);t.setMonth(t.getMonth()-1),this.$emit("changeDate",t)},nextMois(){const t=new Date(this.date);t.setMonth(t.getMonth()+1),this.$emit("changeDate",t)},eventsByJour(t){const s=new Date(this.date);let n={};for(let b in this.events){let i=this.events[b];i.date.getFullYear()===s.getFullYear()&&i.date.getMonth()+1===s.getMonth()+1&&i.date.getDate()===t&&(n[b]=i)}return n},isoDateOnly(t){const s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),b=String(t.getDate()).padStart(2,"0");return`${s}-${n}-${b}`}}},Xc={class:"calendar"},Zc={class:"recherche"},Kc={class:"recherche btn-group"},em=["value"],tm=["value"],sm={class:"table table-bordered table-hover table-sm"},nm=["data-jour"],im={class:"nom-jour"},rm={class:"numero-jour"},am={class:"num-jour badge bg-secondary rounded-circle"},om={key:0},lm=["data-jour"];function dm(t,s,n,b,i,r){const d=j;return a(),o("div",Xc,[e("div",Zc,[e("div",Kc,[e("button",{class:"btn btn-light",id:"prevMois",onClick:s[0]||(s[0]=(...m)=>r.prevMois&&r.prevMois(...m)),title:"Mois précédant"},[_(d,{name:"chevron-left"})]),v(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":s[1]||(s[1]=m=>i.mois=m)},[(a(!0),o(y,null,C(r.listeMois(),m=>(a(),o("option",{value:m.id},u(m.libelle),9,em))),256))],512),[[F,i.mois]]),v(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":s[2]||(s[2]=m=>i.annee=m)},[(a(!0),o(y,null,C(r.listeAnnees(),m=>(a(),o("option",{value:m},u(m),9,tm))),256))],512),[[F,i.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:s[3]||(s[3]=(...m)=>r.nextMois&&r.nextMois(...m)),title:"Mois suivant"},[_(d,{name:"chevron-right"})])])]),e("table",sm,[(a(!0),o(y,null,C(r.listeJours,m=>(a(),o("tr",{"data-jour":m},[e("th",im,u(r.nomJour(m)),1),e("th",rm,[e("div",am,u(m<10?"0"+m.toString():m),1)]),e("td",null,[(a(!0),o(y,null,C(r.eventsByJour(m),(c,l)=>(a(),o("div",{class:"event",style:Q("border-color:"+c.color+";background-color:"+c.bgcolor),key:l},[(a(),R(he(c.component),{event:c},null,8,["event"]))],4))),128)),r.canAdd(m)?(a(),o("div",om,[e("button",{onClick:s[4]||(s[4]=(...c)=>r.addEvent&&r.addEvent(...c)),"data-jour":m,class:"btn btn-light btn-sm"},[_(d,{name:"plus"}),f(" Nouvel événement ")],8,lm)])):h("",!0)])],8,nm))),256))])])}const um=k(Qc,[["render",dm],["__scopeId","data-v-51bbc42d"]]),cm={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(t){modAjax(t.currentTarget,s=>{this.suivi.refresh()})},supprimer(t){popConfirm(t.currentTarget,s=>{this.suivi.refresh()})},valider(t){unicaenVue.axios.get(this.validerUrl).then(s=>{this.suivi.refresh()})},devalider(t){popConfirm(t.currentTarget,s=>{this.suivi.refresh()})}}},mm={class:"event-content"},hm={class:"mission"},_m={key:0,class:"badge bg-success"},pm={class:"horaires"},fm={key:0,class:"badge bg-secondary"},bm={key:0,class:"description"},vm={class:"event-actions"},gm={class:"btn-group btn-group-sm"},ym=["data-url"],xm=["data-url"],Cm=["data-url"],Vm=["data-url"];function Pm(t,s,n,b,i,r){const d=j;return a(),o(y,null,[e("div",mm,[e("p",hm,[f(u(n.event.mission.libelleCourt)+" ",1),n.event.valide?(a(),o("span",_m,"Validé")):h("",!0)]),e("p",pm,[f(" de "+u(r.heureDebut)+" à "+u(r.heureFin)+", soit "+u(r.heures)+" heure"+u(r.heures<2?"":"s")+" ",1),n.event.formation?(a(),o("span",fm,"En formation")):h("",!0)]),n.event.description?(a(),o("p",bm,u(n.event.description),1)):h("",!0)]),e("div",vm,[e("div",gm,[n.event.canEdit?(a(),o("button",{key:0,class:"btn btn-light",onClick:s[0]||(s[0]=(...m)=>r.modifier&&r.modifier(...m)),title:"Modifier le suivi","data-url":i.modifierUrl},[_(d,{name:"pen-to-square"})],8,ym)):h("",!0),n.event.canValider?(a(),o("button",{key:1,class:"btn btn-light",onClick:s[1]||(s[1]=(...m)=>r.valider&&r.valider(...m)),title:"Valider le suivi","data-url":i.validerUrl},[_(d,{name:"check",class:"text-success"})],8,xm)):h("",!0),n.event.canDevalider?(a(),o("button",{key:2,class:"btn btn-light",onClick:s[2]||(s[2]=(...m)=>r.devalider&&r.devalider(...m)),title:"Dévalider le suivi","data-url":i.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[_(d,{name:"xmark",class:"text-danger"})],8,Cm)):h("",!0),n.event.canSupprimer?(a(),o("button",{key:3,class:"btn btn-light",onClick:s[3]||(s[3]=(...m)=>r.supprimer&&r.supprimer(...m)),title:"Supprimer le suivi","data-url":i.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[_(d,{name:"trash-can",class:"text-danger"})],8,Vm)):h("",!0)])])],64)}const ae=k(cm,[["render",Pm],["__scopeId","data-v-17cb1f29"]]),Sm=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"})),km={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(t){this.date=t},ajouter(t,s){const n={intervenant:this.intervenant,date:t.toISOString().slice(0,10)};s.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",n),modAjax(s.currentTarget,b=>{this.refresh()})},refresh(){const t=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let s=0,n=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(b=>{let i=[];for(let r in b.data){let d=b.data[r];n[d.mission.id]===void 0&&(n[d.mission.id]=t[s],s++),d.valide&&(d.bgcolor="#d0eddb"),d.color=n[d.mission.id],d.component=_e(ae),d.date=new Date(d.date),d.intervenant=this.intervenant,i.push(d)}this.suivi=i,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function Am(t,s,n,b,i,r){const d=um;return a(),R(d,{date:i.date,onChangeDate:r.changeDate,onAddEvent:r.ajouter,"can-add-event":n.canAddMission,addDateFin:"now",events:i.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const Mm=k(km,[["render",Am]]),Dm=Object.freeze(Object.defineProperty({__proto__:null,default:Mm},Symbol.toStringTag,{value:"Module"})),Em={name:"DemandeMiseEnPaiementStructure",props:{datas:{required:!0},intervenant:{required:!0}},data(){return{dotationPaieEtat:this.datas.budget.dotation.paieEtat,dotationRessourcesPropres:this.datas.budget.dotation.ressourcePropre,consommationPaieEtat:this.datas.budget.liquidation.paieEtat,consommationRessourcesPropres:this.datas.budget.liquidation.ressourcePropre}},watch:{datas:function(){this.dotationPaieEtat=this.datas.budget.dotation.paieEtat,this.dotationRessourcesPropres=this.datas.budget.dotation.ressourcePropre,this.consommationPaieEtat=this.datas.budget.liquidation.paieEtat,this.consommationRessourcesPropres=this.datas.budget.liquidation.ressourcePropre}},computed:{pourcentagePaieEtat(){return Math.round(this.consommationPaieEtat/this.dotationPaieEtat*100)},pourcentageRessourcePropre(){return Math.round(this.consommationRessourcesPropres/this.dotationRessourcesPropres*100)},bgPaieEtat(){return Math.round(this.consommationPaieEtat/this.dotationPaieEtat*100)>100?"bg-warning":"bg-success"},bgRessourcesPropres(){return Math.round(this.consommationRessourcesPropres/this.dotationRessourcesPropres*100)>100?"bg-warning":"bg-success"}},methods:{heuresStatutToString(t){if(t.heuresAPayer==t.heuresPayees&&t.heuresAPayer>0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-success">Paiement effectué</span>';if(t.heuresAPayer==t.heuresDemandees)return'<span style="font-size:12px;line-height:20px;" class="badge bg-secondary text-dark">Paiement demandé</span>';if(t.heuresDemandees==0)return'<span style="font-size:12px;line-height:20px;" class="badge bg-light text-dark">A payer</span>';if(Number(t.heuresPayees)>Number(t.heuresAPayer)){let s=t.heuresPayees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement effectué - '+parseFloat(s.toFixed(2))+" hetd(s) payées en trop. </span>"}if(Number(t.heuresDemandees)>Number(t.heuresAPayer)){let s=t.heuresDemandees-t.heuresAPayer;return'<span style="font-size:12px;line-height:20px;" class="badge bg-danger"><i class="fa-solid fa-triangle-exclamation"></i> Paiement demandé - '+parseFloat(s.toFixed(2))+" hetd(s) demandées en trop. </span></span>"}return"indetermine"},supprimerDemandeMiseEnPaiement(t){this.btnState("remove-"+t,"disabled"),unicaenVue.axios.get(unicaenVue.url("paiement/:intervenant/supprimer-demande/:dmep",{intervenant:this.intervenant,dmep:t})).then(s=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("remove-"+t,"enabled")},4500)}).catch(s=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("remove-"+t,"enabled")},2500)})},disabledPaiement(t){return t.missionId!=""||t.formuleResServiceRefId!=""?!(t.centreCoutId&&t.domaineFonctionnel):!1},enabledPaiement(t,s){if(s=="mission"){let n=document.getElementById("add-"+t),b=document.getElementById("centreCout-"+t).value,i=document.getElementById("domaineFonctionnel-"+t).value;b!=""&&i!=""?n.disabled=!1:n.disabled=!0}},ajouterDemandeMiseEnPaiement(t){this.btnState("add-"+t,"disabled");let s={animation:!0,delay:15e3,autohide:!0},n=document.getElementById("heures-"+t),b=document.getElementById("centreCout-"+t),i=document.getElementById("domaineFonctionnel-"+t),r=Number(n.value),d=Number(n.getAttribute("max")),m=i?i.value:"",c=n.hasAttribute("data-type-heures-id")?n.getAttribute("data-type-heures-id"):"",l=n.hasAttribute("data-service-id")?n.getAttribute("data-service-id"):"",V=n.hasAttribute("data-service-referentiel-id")?n.getAttribute("data-service-referentiel-id"):"",p=n.hasAttribute("data-mission-id")?n.getAttribute("data-mission-id"):"",M=b.value,S=b.options[b.selectedIndex].getAttribute("data-ressources-propres"),G=b.options[b.selectedIndex].getAttribute("data-paie-etat");if(M=="")return unicaenVue.flashMessenger.toast("Vous devez sélectionner un centre de coût pour demander la mise en paiement de ces heures","error",s),this.btnState("add-"+t,"enabled"),!1;if(r>0&&r>d)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible, vous demandez "+r+" hetd(s) alors que vous pouvez demander maximum "+d+" hetd(s)","error",s),this.btnState("add-"+t,"enabled"),!1;if(G==1&&this.dotationPaieEtat>0&&this.dotationPaieEtat-(this.consommationPaieEtat+r)<=0)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible manque de dotation 'paie etat' pour ces heures","error",s),this.btnState("add-"+t,"enabled"),!1;if(S==1&&this.dotationRessourcesPropres>0&&this.dotationRessourcesPropres-(this.consommationRessourcesPropres+r)<=0)return unicaenVue.flashMessenger.toast("Demande de mise en paiement impossible manque de dotation 'ressources propres' pour ces heures","error",s),this.btnState("add-"+t,"enabled"),!1;var H=[];let w={heures:r,centreCoutId:M,typeHeuresId:c,serviceId:l,serviceReferentielId:V,domaineFonctionnelId:m,missionId:p,structureId:this.datas.id};H.push(w),unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),H).then(q=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("add-"+t,"enabled")},4e3)}).catch(q=>{console.error(q),setTimeout(()=>{this.btnState("add-"+t,"enabled")},2500)})},demanderToutesLesHeuresEnPaiement(t,s){this.btnState("add-all-"+t,"disabled");let n=[],i=document.getElementById("demande-mise-en-paiement-"+t).getElementsByTagName("tr");for(var r=0;r<i.length;r++)if(i[r].getElementsByTagName("input").length>0&&i[r].classList.contains("detailHeure")){let d=i[r].getElementsByTagName("input")[0],m=i[r].getElementsByTagName("select")[0],c=i[r].getElementsByTagName("select")[1],l=Number(d.value),V=Number(d.getAttribute("max"));if(l<=0||l>V)console.warn("Le nombre d'heures demandées en paiement n'est pas situé entre le max et min possible.");else{let p=m.value,M=d.hasAttribute("data-type-heures-id")?d.getAttribute("data-type-heures-id"):"",S=d.hasAttribute("data-mission-id")?d.getAttribute("data-mission-id"):"",G=d.hasAttribute("data-service-id")?d.getAttribute("data-service-id"):"",H=d.hasAttribute("data-service-referentiel-id")?d.getAttribute("data-service-referentiel-id"):"",w=c?c.value:"",q={heures:l,centreCoutId:p,typeHeuresId:M,serviceId:G,serviceReferentielId:H,domaineFonctionnelId:w,missionId:S,structureId:this.datas.id};n.push(q)}}unicaenVue.axios.post(unicaenVue.url("paiement/:intervenant/ajouter-demandes",{intervenant:this.intervenant}),n).then(d=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("add-all-"+t,"enabled")},2500)}).catch(d=>{this.$emit("refresh"),setTimeout(()=>{this.btnState("add-all-"+t,"enabled")},2500)})},filtrerCentresCouts(t,s){let n=[];for(var b in t){let i=b,r=[];t[b].forEach(function(d,m){d[s]==1&&r.push(d)}),r.length!=0&&n.push({group:i,child:r})}return n},notValueCentreCoutValue(t,s){return this.filtrerCentresCouts(t,s).length!=0?"Choisir un centre de coût":"Aucun centre de coût disponible demande de paiement impossible"},totalHeure(t){let s=0;for(var n in t)s+=Number(t[n].heuresAPayer);return parseFloat(s.toFixed(2))},shorten(t,s=20){if(t.length>s){var n='<span title="'+t+'"';return n+='data-bs-placement="top" data-bs-toggle="tooltip">',n+=t.substring(0,s)+"...",n+="</span>",n}else return t},btnState(t,s){let n=document.getElementById(t);return n?(s=="enabled"&&(n.disabled=!1,n.querySelector("#waiting").style.display="none",n.querySelector("#action").style.display="inline-block"),s=="disabled"&&(n.disabled=!0,n.querySelector("#waiting").style.display="inline-block",n.querySelector("#action").style.display="none"),!0):!1},formatDate(t,s){return Util.dateToString(t)}}},Fm=["id"],Tm=["id"],Um=["aria-controls","data-bs-target"],Rm=["id","aria-labelledby"],Im={class:"accordion-body"},wm={key:0},$m=e("div",{class:"cartridge gray bordered",style:{"padding-bottom":"5px","margin-bottom":"20px"}},[e("span",null,"Budget")],-1),Lm={class:"container"},Hm={class:"table table-bordered caption-top"},Nm=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressources propres")])],-1),jm={style:{width:"50%"}},qm={key:0,class:"text-center progress position-relative bg-secondary",style:{height:"30px"}},Om={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},zm=["aria-valuemax","aria-valuenow","title"],Bm={key:1,class:"text-center"},Gm={style:{width:"50%"}},Jm={key:0,class:"progress position-relative bg-secondary",style:{height:"30px"}},Ym={class:"position-absolute top-50 start-50 translate-middle",style:{color:"white"}},Wm=["aria-valuemax","aria-valuenow","title"],Qm={key:1,class:"text-center"},Xm={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},Zm=e("span",null,"Enseignement",-1),Km=["innerHTML"],eh={class:"container"},th={class:"row"},sh={class:"col-12"},nh={class:"table mt-3 table-bordered"},ih={class:"table-light"},rh={colspan:"2"},ah={colspan:"2"},oh={class:"table table-sm"},lh=e("thead",null,[e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"40%","font-size":"12px"}},"Centre de cout "),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Etat"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),dh={class:"detailHeure"},uh={key:0,style:{width:"20%"}},ch=["title"],mh={class:"number number-positif"},hh=["title"],_h={class:"number number-positif"},ph={key:1,style:{width:"20%"}},fh={class:"input-group col-1"},bh=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],vh=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),gh={key:2},yh=["id"],xh={value:""},Ch=["label"],Vh=["data-paie-etat","data-ressources-propres","selected","value"],Ph=["innerHTML"],Sh=["innerHTML"],kh={style:{"font-size":"12px"}},Ah={key:0},Mh=["id","onClick"],Dh={key:1},Eh=["id","onClick"],Fh={class:"table-light"},Th=e("th",{scope:"row"},"Total heures à payer",-1),Uh={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},Rh=e("span",null,"Référentiel",-1),Ih={class:"container"},wh={class:"row"},$h={class:"col-12"},Lh={class:"table mt-3 table-bordered"},Hh={colspan:"2"},Nh={class:"table table-sm"},jh=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),qh={class:"detailHeure"},Oh={key:0,style:{width:"20%"}},zh=["title"],Bh={class:"number number-positif"},Gh=["title"],Jh={class:"number number-positif"},Yh={key:1,style:{width:"20%"}},Wh={class:"input-group col-1"},Qh=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],Xh=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"hetd(s)",-1),Zh={key:2},Kh=["id"],e_={value:""},t_=["label"],s_=["data-paie-etat","data-ressources-propres","selected","value"],n_=["innerHTML"],i_={key:4},r_=["id"],a_=e("option",{value:""},"Aucun domaine fonctionnel",-1),o_=["selected","value"],l_={key:5},d_=["innerHTML"],u_={style:{"font-size":"12px"}},c_={key:0},m_=["id","onClick"],h_={key:1},__=["id","onClick"],p_={class:"table-light"},f_=e("th",{scope:"row"},"Total",-1),b_={class:"cartridge gray bordered",style:{"padding-bottom":"5px"}},v_=e("span",null,"Mission",-1),g_={class:"container"},y_={class:"row"},x_={class:"col-12"},C_={class:"table mt-3 table-bordered"},V_={colspan:"2"},P_={class:"table table-sm"},S_=e("thead",null,[e("th",{scope:"col",style:{width:"10%","font-size":"12px"}},"Heures"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Centre de coûts"),e("th",{scope:"col",style:{width:"25%","font-size":"12px"}},"Domaine fonctionnel "),e("th",{scope:"col",style:{width:"20%","font-size":"12px"}},"État"),e("th",{style:{width:"15%","font-size":"12px"}})],-1),k_={class:"detailHeure"},A_={key:0,style:{width:"20%"}},M_=["title"],D_={class:"number number-positif"},E_=["title"],F_={class:"number number-positif"},T_={key:1,style:{width:"20%"}},U_={class:"input-group col-1"},R_=["id","data-domaine-fonctionnel-id","data-mission-id","data-service-id","data-service-referentiel-id","data-type-heures-id","max","value"],I_=e("span",{class:"input-group-text",style:{"font-size":"12px"}},"heure(s)",-1),w_={key:2},$_=["id","onChange"],L_={value:""},H_=["label"],N_=["data-paie-etat","data-ressources-propres","selected","value"],j_=["innerHTML"],q_={key:4},O_=["id","onChange"],z_=e("option",{value:""},"Aucun domaine fonctionnel",-1),B_=["selected","value"],G_={key:5},J_=["innerHTML"],Y_={style:{"font-size":"12px"}},W_={key:0},Q_=["id","onClick"],X_={key:1},Z_=["id","onClick"],K_={class:"table-light"},ep=e("th",{scope:"row"},"Total",-1),tp={style:{"background-color":"#fbfbfb",padding:"10px","padding-right":"40px","text-align":"right"}},sp=["id"];function np(t,s,n,b,i,r){const d=j;return a(),o("div",{id:"demande-mise-en-paiement-"+n.datas.code,class:"accordion-item"},[e("h2",{id:"dmep-heading-"+n.datas.code,class:"accordion-header"},[e("button",{"aria-controls":"dmep-collapse-"+n.datas.code,"data-bs-target":"#dmep-collapse-"+n.datas.code,"aria-expanded":"true",class:"accordion-button bg-light","data-bs-toggle":"collapse",type:"button"},u(n.datas.code+" - "+n.datas.libelle),9,Um)],8,Tm),e("div",{id:"dmep-collapse-"+n.datas.code,"aria-labelledby":"dmep-heading-"+n.datas.code,class:"accordion-collapse collapse show"},[e("div",Im,[this.dotationPaieEtat+i.dotationRessourcesPropres>0?(a(),o("div",wm,[$m,e("div",Lm,[e("table",Hm,[Nm,e("tbody",null,[e("tr",null,[e("td",jm,[this.dotationPaieEtat>0?(a(),o("div",qm,[e("span",Om,u(this.consommationPaieEtat+" sur "+this.dotationPaieEtat)+" HETD",1),e("div",{"aria-valuemax":this.dotationPaieEtat,"aria-valuenow":this.consommationPaieEtat,class:D("progress-bar progress-bar-striped "+this.bgPaieEtat),style:Q("width:"+this.pourcentagePaieEtat+"%;"),title:this.pourcentagePaieEtat+"%","aria-valuemin":"0",role:"progressbar"},null,14,zm)])):h("",!0),this.dotationPaieEtat==0?(a(),o("div",Bm," Aucune dotation paie état ")):h("",!0)]),e("td",Gm,[this.dotationRessourcesPropres>0?(a(),o("div",Jm,[e("span",Ym,u(this.consommationRessourcesPropres+" sur "+this.dotationRessourcesPropres)+" HETD",1),e("div",{"aria-valuemax":this.dotationRessourcesPropres,"aria-valuenow":this.consommationRessourcesPropres,class:D("progress-bar progress-bar-striped "+this.bgRessourcesPropres),style:Q("width:"+this.pourcentageRessourcePropre+"%;"),title:this.pourcentageRessourcePropre+"%","aria-valuemin":"0",role:"progressbar"},null,14,Wm)])):h("",!0),this.dotationRessourcesPropres==0?(a(),o("div",Qm," Aucune dotation ressources propres ")):h("",!0)])])])])])])):h("",!0),(a(!0),o(y,null,C(n.datas.etapes,(m,c)=>(a(),o("div",null,[(a(!0),o(y,null,C(m.enseignements,(l,V)=>(a(),o("div",null,[e("div",Xm,[Zm,e("span",{innerHTML:r.shorten(m.libelle,50)},null,8,Km),e("span",null,u(l.libelle),1)]),e("div",eh,[e("div",th,[(a(!0),o(y,null,C(l.typeHeure,(p,M)=>(a(),o("div",sh,[e("table",nh,[e("thead",ih,[e("tr",null,[e("th",rh,u(p.libelle),1)])]),e("tbody",null,[e("tr",null,[e("td",ah,[e("table",oh,[lh,e("tbody",null,[(a(!0),o(y,null,C(p.heures,(S,G)=>(a(),o("tr",dh,[S.heuresDemandees!=0?(a(),o("td",uh,[S.datePaiement?(a(),o("abbr",{key:0,title:"Payé en "+S.periodeLibelle+" le "+r.formatDate(S.datePaiement)},[e("span",mh,u(Number(S.heuresPayees))+" hetd(s)",1)],8,ch)):h("",!0),S.datePaiement?h("",!0):(a(),o("abbr",{key:1,title:"Demandé le "+r.formatDate(S.dateDemande)},[e("span",_h,u(Number(S.heuresDemandees))+" hetd(s)",1)],8,hh))])):h("",!0),S.heuresDemandees==0?(a(),o("td",ph,[e("div",fh,[e("input",{id:"heures-"+c+"-"+V+"-"+M,"data-domaine-fonctionnel-id":S.domaineFonctionnelId,"data-mission-id":S.missionId,"data-service-id":S.serviceId,"data-service-referentiel-id":S.serviceReferentielId,"data-type-heures-id":S.typeHeureId,max:S.heuresAPayer,value:S.heuresAPayer,class:"form-control form-control-sm",min:"0",type:"number"},null,8,bh),vh])])):h("",!0),S.heuresDemandees==0?(a(),o("td",gh,[e("select",{id:"centreCout-"+c+"-"+V+"-"+M,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",xh,u(r.notValueCentreCoutValue(n.datas.centreCoutPaiement,S.typeHeureCode)),1),(a(!0),o(y,null,C(r.filtrerCentresCouts(n.datas.centreCoutPaiement,S.typeHeureCode),H=>(a(),o("optgroup",{key:H.group,label:H.group},[(a(!0),o(y,null,C(H.child,w=>(a(),o("option",{key:w.value,"data-paie-etat":w.paieEtat,"data-ressources-propres":w.ressourcesPropres,selected:w.centreCoutId==S.centreCout.centreCoutId,value:w.centreCoutId},u(w.centreCoutCode+" - "+w.centreCoutLibelle),9,Vh))),128))],8,Ch))),128))],8,yh)])):h("",!0),S.heuresDemandees!=0?(a(),o("td",{key:3,innerHTML:r.shorten(S.centreCout.code+" - "+S.centreCout.libelle,30)},null,8,Ph)):h("",!0),e("td",{innerHTML:r.heuresStatutToString(S)},null,8,Sh),e("td",kh,[S.heuresPayees==0&&S.heuresDemandees>0?(a(),o("span",Ah,[e("button",{id:"remove-"+S.mepId,class:"btn btn-danger",type:"button",onClick:H=>this.supprimerDemandeMiseEnPaiement(S.mepId)},[_(d,{id:"action",name:"trash",style:{color:"white"}}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Mh)])):h("",!0),S.heuresDemandees==0?(a(),o("span",Dh,[e("button",{id:"add-"+c+"-"+V+"-"+M,class:"btn btn-primary",type:"button",onClick:H=>this.ajouterDemandeMiseEnPaiement(c+"-"+V+"-"+M)},[_(d,{id:"action",name:"plus"}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Eh)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",Fh,[Th,e("td",null,u(r.totalHeure(p.heures))+" hetd(s)",1)])])])]))),256))])])]))),256))]))),256)),(a(!0),o(y,null,C(n.datas.fonctionsReferentiels,(m,c)=>(a(),o("div",null,[e("div",Uh,[Rh,e("span",null,u(m.libelle),1)]),e("div",Ih,[e("div",wh,[e("div",$h,[e("table",Lh,[e("tbody",null,[e("tr",null,[e("td",Hh,[e("table",Nh,[jh,e("tbody",null,[(a(!0),o(y,null,C(m.heures,(l,V)=>(a(),o("tr",qh,[l.heuresDemandees!=0?(a(),o("td",Oh,[l.datePaiement?(a(),o("abbr",{key:0,title:"Payé en "+l.periodeLibelle+" le "+r.formatDate(l.datePaiement)},[e("span",Bh,u(Number(l.heuresPayees))+" hetd(s)",1)],8,zh)):h("",!0),l.datePaiement?h("",!0):(a(),o("abbr",{key:1,title:"Demandé le "+r.formatDate(l.dateDemande)},[e("span",Jh,u(Number(l.heuresDemandees))+" hetd(s)",1)],8,Gh))])):h("",!0),l.heuresDemandees==0?(a(),o("td",Yh,[e("div",Wh,[e("input",{id:"heures-"+c,"data-domaine-fonctionnel-id":l.domaineFonctionnelId,"data-mission-id":l.missionId,"data-service-id":l.serviceId,"data-service-referentiel-id":l.serviceReferentielId,"data-type-heures-id":l.typeHeureId,max:l.heuresAPayer,value:l.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,Qh),Xh])])):h("",!0),l.heuresDemandees==0?(a(),o("td",Zh,[e("select",{id:"centreCout-"+c,class:"selectpicker","data-live-search":"true",name:"centreCout"},[e("option",e_,u(r.notValueCentreCoutValue(n.datas.centreCoutPaiement,l.typeHeureCode)),1),(a(!0),o(y,null,C(r.filtrerCentresCouts(n.datas.centreCoutPaiement,"referentiel"),p=>(a(),o("optgroup",{key:p.group,label:p.group},[(a(!0),o(y,null,C(p.child,M=>(a(),o("option",{key:M.value,"data-paie-etat":M.paieEtat,"data-ressources-propres":M.ressourcesPropres,selected:M.centreCoutId==l.centreCout.centreCoutId,value:M.centreCoutId},u(M.centreCoutCode+" - "+M.centreCoutLibelle),9,s_))),128))],8,t_))),128))],8,Kh)])):h("",!0),l.heuresDemandees!=0?(a(),o("td",{key:3,innerHTML:r.shorten(l.centreCout.code+" - "+l.centreCout.libelle,20)},null,8,n_)):h("",!0),l.heuresDemandees==0?(a(),o("td",i_,[e("select",{id:"domaineFonctionnel-"+c,class:"selectpicker","data-live-search":"true",name:"centreCout"},[a_,(a(!0),o(y,null,C(n.datas.domaineFonctionnelPaiement,p=>(a(),o("option",{selected:p.domaineFonctionnelId==l.domaineFonctionnel.domaineFonctionnelId,value:p.domaineFonctionnelId},u(p.domaineFonctionnelLibelle),9,o_))),256))],8,r_)])):h("",!0),l.heuresDemandees!=0?(a(),o("td",l_,u(l.domaineFonctionnel.libelle),1)):h("",!0),e("td",{innerHTML:r.heuresStatutToString(l)},null,8,d_),e("td",u_,[l.heuresPayees==0&&l.heuresDemandees>0?(a(),o("span",c_,[e("button",{id:"remove-"+l.mepId,class:"btn btn-danger",type:"button",onClick:p=>this.supprimerDemandeMiseEnPaiement(l.mepId)},[_(d,{id:"action",name:"trash",style:{color:"white"}}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,m_)])):h("",!0),l.heuresDemandees==0?(a(),o("span",h_,[e("button",{id:"add-"+c,class:"btn btn-primary",type:"button",onClick:p=>this.ajouterDemandeMiseEnPaiement(c)},[_(d,{id:"action",name:"plus"}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,__)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",p_,[f_,e("td",null,u(r.totalHeure(m.heures))+" hetd(s)",1)])])])])])])]))),256)),(a(!0),o(y,null,C(n.datas.missions,m=>(a(),o("div",null,[e("div",b_,[v_,e("span",null,u(m.libelle),1)]),e("div",g_,[e("div",y_,[e("div",x_,[e("table",C_,[e("tbody",null,[e("tr",null,[e("td",V_,[e("table",P_,[S_,e("tbody",null,[(a(!0),o(y,null,C(m.heures,(c,l)=>(a(),o("tr",k_,[c.heuresDemandees!=0?(a(),o("td",A_,[c.datePaiement?(a(),o("abbr",{key:0,title:"Payé en "+c.periodeLibelle+" le "+r.formatDate(c.datePaiement)},[e("span",D_,u(Number(c.heuresPayees))+" heure(s)",1)],8,M_)):h("",!0),c.datePaiement?h("",!0):(a(),o("abbr",{key:1,title:"Demandé le "+r.formatDate(c.dateDemande)},[e("span",F_,u(Number(c.heuresDemandees))+" heure(s)",1)],8,E_))])):h("",!0),c.heuresDemandees==0?(a(),o("td",T_,[e("div",U_,[e("input",{id:"heures-"+m.missionId,"data-domaine-fonctionnel-id":c.domaineFonctionnelId,"data-mission-id":c.missionId,"data-service-id":c.serviceId,"data-service-referentiel-id":c.serviceReferentielId,"data-type-heures-id":c.typeHeureId,max:c.heuresAPayer,value:c.heuresAPayer,class:"form-control form-control-sm",min:"0",style:{width:"40px"},type:"number"},null,8,R_),I_])])):h("",!0),c.heuresDemandees==0?(a(),o("td",w_,[e("select",{id:"centreCout-"+m.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:V=>r.enabledPaiement(m.missionId,"mission")},[e("option",L_,u(r.notValueCentreCoutValue(n.datas.centreCoutPaiement,c.typeHeureCode)),1),(a(!0),o(y,null,C(r.filtrerCentresCouts(n.datas.centreCoutPaiement,"mission"),V=>(a(),o("optgroup",{key:V.group,label:V.group},[(a(!0),o(y,null,C(V.child,p=>(a(),o("option",{key:p.value,"data-paie-etat":p.paieEtat,"data-ressources-propres":p.ressourcesPropres,selected:p.centreCoutId==c.centreCout.centreCoutId,value:p.centreCoutId},u(p.centreCoutCode+" - "+p.centreCoutLibelle),9,N_))),128))],8,H_))),128))],40,$_)])):h("",!0),c.heuresDemandees!=0?(a(),o("td",{key:3,innerHTML:r.shorten(c.centreCout.code+" - "+c.centreCout.libelle,20)},null,8,j_)):h("",!0),c.heuresDemandees==0?(a(),o("td",q_,[e("select",{id:"domaineFonctionnel-"+m.missionId,class:"selectpicker","data-live-search":"true",name:"centreCout",onChange:V=>r.enabledPaiement(m.missionId,"mission")},[z_,(a(!0),o(y,null,C(n.datas.domaineFonctionnelPaiement,V=>(a(),o("option",{selected:V.domaineFonctionnelId==c.domaineFonctionnel.domaineFonctionnelId,value:V.domaineFonctionnelId},u(V.domaineFonctionnelLibelle),9,B_))),256))],40,O_)])):h("",!0),c.heuresDemandees!=0?(a(),o("td",G_,u(c.domaineFonctionnel.libelle),1)):h("",!0),e("td",{innerHTML:r.heuresStatutToString(c)},null,8,J_),e("td",Y_,[c.heuresPayees==0&&c.heuresDemandees>0?(a(),o("span",W_,[e("button",{id:"remove-"+c.mepId,class:"btn btn-danger",type:"button",onClick:V=>this.supprimerDemandeMiseEnPaiement(c.mepId)},[_(d,{id:"action",name:"trash",style:{color:"white"}}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{color:"white",display:"none"}})],8,Q_)])):h("",!0),c.heuresDemandees==0?(a(),o("span",X_,[e("button",{id:"add-"+m.missionId,class:"btn btn-primary",type:"button",onClick:V=>this.ajouterDemandeMiseEnPaiement(m.missionId)},[_(d,{id:"action",name:"plus"}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}})],8,Z_)])):h("",!0)])]))),256))])])])])]),e("tfoot",null,[e("tr",K_,[ep,e("td",null,u(r.totalHeure(m.heures))+" heure(s)",1)])])])])])])]))),256))]),e("div",tp,[e("button",{id:"add-all-"+n.datas.code,class:"btn btn-primary",type:"button",onClick:s[0]||(s[0]=m=>r.demanderToutesLesHeuresEnPaiement(n.datas.code,n.datas.libelle))},[_(d,{id:"action",name:"square-plus",style:{color:"white"}}),_(d,{id:"waiting",name:"spin",rotate:"right",style:{display:"none"}}),f(" DEMANDER TOUS LES PAIEMENTS POUR "+u(n.datas.libelleCourt),1)],8,sp)])],8,Rm)],8,Fm)}const oe=k(Em,[["render",np]]),ip=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"})),rp={name:"DemandeMiseEnPaiement",components:{DemandeMiseEnPaiementStructure:oe},props:{intervenant:{required:!1}},data(){return{datasDemandesMiseEnPaiement:null,urlGetDemandesMiseEnPaiement:unicaenVue.url("intervenant/:intervenant/mise-en-paiement/get-demandes-mise-en-paiement",{intervenant:this.intervenant})}},methods:{getDemandesMiseEnPaiement(){unicaenVue.axios.get(this.urlGetDemandesMiseEnPaiement).then(t=>{this.datasDemandesMiseEnPaiement=t.data}).catch(t=>{console.error(t)})}},mounted(){this.getDemandesMiseEnPaiement()},updated(){$(".selectpicker").selectpicker("render");var t=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));t.map(function(s){return new bootstrap.Tooltip(s)})}},ap={key:0,class:"text-center"},op=e("div",{class:"mt-5 spinner-border spinner-border-sm",role:"status"},[e("span",{class:"visually-hidden"},"Chargement des demandes de mise en paiement en cours...")],-1),lp={id:"accordionPanelsStayOpenExample",class:"accordion"};function dp(t,s,n,b,i,r){const d=U("demande-mise-en-paiement-structure");return a(),o(y,null,[this.datasDemandesMiseEnPaiement?h("",!0):(a(),o("div",ap,[op,f(" Chargement des demandes de mise en paiement en cours... ")])),e("div",lp,[(a(!0),o(y,null,C(i.datasDemandesMiseEnPaiement,(m,c)=>(a(),R(d,{datas:m,intervenant:n.intervenant,onRefresh:r.getDemandesMiseEnPaiement},null,8,["datas","intervenant","onRefresh"]))),256))])],64)}const up=k(rp,[["render",dp]]),cp=Object.freeze(Object.defineProperty({__proto__:null,default:up},Symbol.toStringTag,{value:"Module"}));function mp(t){for(let s in t)for(let n in t[s])le(t[s][n],s)}function hp(){let t=document.getElementById("unicaen-vue-toast-container");return t||(t=document.createElement("div"),t.id="unicaen-vue-toast-container",t.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(t)),t}function _p(t){return t=pp(t),t=fp(t),t}function pp(t){const s=document.createElement("div");s.innerHTML=t;const n=s.querySelector(".alert");return n?n.innerHTML:s.innerHTML}function fp(t){const s=document.createElement("div");return s.innerHTML=t,s.querySelectorAll("i.fas").forEach(b=>b.style.display="none"),s.innerHTML}function le(t,s,n=null){const b={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},i={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},r=document.createElement("button");r.classList.add("btn-close","btn-close-white","h5"),r.style.float="right",r.setAttribute("data-bs-dismiss","toast"),r.setAttribute("aria-label","Close");const d=document.createElement("i");d.classList.add("icon","fas",`fa-${i[s]}`),d.style.float="left",d.style.fontSize="26pt",d.style.paddingLeft=".4rem",d.style.marginTop=".4rem",d.style.paddingRight="1rem";const m=document.createElement("div");m.classList.add("toast-body"),m.innerHTML=_p(t);const c=document.createElement("div");c.appendChild(r),c.appendChild(d),c.appendChild(m);const l=document.createElement("div");l.classList.add("toast","text-white",b[s]?b[s]:"bg-secondary"),l.setAttribute("role","alert"),l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),s==="error"&&t.length>500&&l.setAttribute("style","width:700px"),l.appendChild(c),hp().appendChild(l),n==null&&(n={animation:!0,delay:s==="warning"?15e3:5e3,autohide:s!=="error"}),new bootstrap.Toast(l,n).show()}const X={toast:le,toasts:mp};let Y={...pe};Y.interceptors.request.use(t=>{if(t.submitter){let s=t.msg?t.msg:"Action en cours";t.popover!=null&&t.popover.dispose(),t.popover=new bootstrap.Popover(t.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+s,html:!0,trigger:"focus"}),t.popover.show()}return t});Y.interceptors.response.use(t=>{if(t.messages=t.data.messages,t.data=t.data.data,t.hasErrors=!!(t.messages&&t.messages.error&&t.messages.error.length>0),t.config.popover){var s=t.config.popover;let n="";for(ns in t.messages)for(mid in t.messages[ns])n+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+t.messages[ns][mid]+"</div>";n?(s._config.content=n,s.setContent(),setTimeout(()=>{s.dispose()},5e3)):s.dispose()}return t.messages&&X.toasts(t.messages),t},t=>{let s=t.response.data;t.response.status==403?s="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":s=t.response.data,X.toast(s,"error")});Y.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const bp={uvAxios:Y},Z={axios:bp.uvAxios,flashMessenger:X,url:(t,s,n)=>{let b=window.__unicaenVueBaseUrl;if(s)for(let r in s)t=t.replace(`:${r}`,s[r]);let i=n?Z.encodeUrlQueryParam(n):null;return b+t+(i?`?${i}`:"")},encodeUrlQueryParam:(t,s)=>{var n=[];for(var b in t)if(t.hasOwnProperty(b)){var i=t[b],r=s?s+"["+encodeURIComponent(b)+"]":encodeURIComponent(b);if(typeof i=="object"&&i!==null)n.push(Z.encodeUrlQueryParam(i,r));else{var d=encodeURIComponent(i);n.push(r+"="+d)}}return n.join("&")}};window.unicaenVue=Z;const vp={name:"DemandeMiseEnPaiementLot.vue",props:{structures:{type:Array,required:!0},canMiseEnPaiement:{type:Boolean,required:!0}},data(){return{selectedStructure:null,urlRechercheDemandeMiseEnPaiement:unicaenVue.url("paiement/demande-mise-en-paiement-lot"),urlProcessDemandeMiseEnPaiement:unicaenVue.url("paiement/process-demande-mise-en-paiement-lot"),urlMiseEnPaiement:unicaenVue.url("paiement/etat-demande-paiement"),permanents:[],vacataires:[],etudiants:[],autres:[],intervenants:[],dotation:!1,liquidation:null,totalConsommationPaieEtat:0,totalConsommationRessourcePropre:0,totalConsommation:0,alertDotation:!1}},computed:{haveDotation(){return this.dotation?this.dotation.total>0:!1},alertPaieEtat(){return this.dotation.paieEtat<this.totalConsommationPaieEtat?"text-danger fw-bold":""},alertRessourcePropre(){return this.dotation.ressourcePropre<this.totalConsommationRessourcePropre?"text-danger fw-bold":""}},methods:{findDemandeMiseEnPaiement(t){this.totalConsommationRessourcePropre=0,this.totalConsommationPaieEtat=0,this.dotation=null,this.liquidation=null;let s=document.getElementById("formRechercheDemandeMiseEnPaiement"),n=new FormData(s),b=document.getElementById("btn-rdmep"),i=document.getElementById("btn-rdmep-inprogress");i.classList.remove("d-none"),b.classList.add("d-none"),b.disabled=!0,unicaenVue.axios.post(this.urlRechercheDemandeMiseEnPaiement,n,{}).then(r=>{this.dispatchDatas(r.data),b.disabled=!1,i.classList.add("d-none"),b.classList.remove("d-none"),document.querySelectorAll('input[type="checkbox"]').forEach(function(m,c){m.checked=!0}),unicaenVue.axios.get(unicaenVue.url("budget/get-budget-structure/:structure",{structure:this.selectedStructure})).then(m=>{let c=m.data;this.dotation=c.dotation,this.liquidation=c.liquidation,this.refreshTotalConsommation()})}).catch(r=>{console.error(r)})},processDemandeMiseEnPaiement(t){let s=document.getElementById("formProcessDemandeMiseEnPaiement"),n=new FormData(s);if(this.dotation.paieEtat>=this.totalConsommationPaieEtat&&this.dotation.ressourcePropre>=this.totalConsommationRessourcePropre||!this.haveDotation){let b=document.getElementById("btn-pdmep"),i=document.getElementById("btn-pdmep-inprogress");i.classList.remove("d-none"),b.classList.add("d-none"),b.disabled=!0,unicaenVue.axios.post(this.urlProcessDemandeMiseEnPaiement,n,{}).then(r=>{this.findDemandeMiseEnPaiement(),b.disabled=!1,i.classList.add("d-none"),b.classList.remove("d-none")}).catch(r=>{console.error("Error process dmep")})}},refreshTotalConsommation(){let t=0,s=0,n=0;t=parseFloat(this.liquidation.paieEtat),s=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.ressourcePropre),n+=parseFloat(this.liquidation.paieEtat),document.querySelectorAll('input[type="checkbox"]').forEach(function(i,r){i.hasAttribute("data-paie-etat")&&i.checked&&(t+=parseFloat(i.getAttribute("data-paie-etat")),n+=parseFloat(i.getAttribute("data-paie-etat"))),i.hasAttribute("data-ressource-propre")&&i.checked&&(s+=parseFloat(i.getAttribute("data-ressource-propre")),n+=parseFloat(i.getAttribute("data-ressource-propre")))}),this.totalConsommationPaieEtat=t.toFixed(2),this.totalConsommationRessourcePropre=s.toFixed(2),this.totalConsommation=n.toFixed(2),this.alertDotation=(this.dotation.paieEtat<this.totalConsommationPaieEtat||this.dotation.ressourcePropre<this.totalConsommationRessourcePropre)&&this.dotation.total>0},totalPayable(t){let s=0;return t.forEach((n,b)=>{n.centreCout.code!=""&&(n.missionId!=""||n.serviceRefId!=""?n.domaineFonctionnel.code!=""&&(s+=n.heuresAPayer):s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalNonPayable(t){let s=0;return t.forEach((n,b)=>{(n.centreCout.code==""||(n.missionId!=""||n.serviceRefId!="")&&n.domaineFonctionnel.code=="")&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePaieEtat(t){let s=0;return t.forEach((n,b)=>{n.centreCout.typeRessourceCode=="paie-etat"&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},totalRessourcePropre(t){let s=0;return t.forEach((n,b)=>{n.centreCout.typeRessourceCode=="ressources-propres"&&(s+=n.heuresAPayer)}),s.toLocaleString("fr-FR",{maximumFractionDigits:2})},dispatchDatas(t){this.vacataires=[],this.permanents=[],this.etudiants=[],this.autres=[],this.intervenants=[],console.log(t);for(const[s,n]of Object.entries(t))switch(n.datasIntervenant.typeIntervenant){case"Vacataire":this.vacataires.push(n),this.intervenants.push(n);break;case"Intervenant permanent":this.permanents.push(n),this.intervenants.push(n);break;case"Étudiant":this.etudiants.push(n),this.intervenants.push(n);break;default:this.autres.push(n),this.intervenants.push(n)}},toggleCheckbox(t){let s=Array.from(document.getElementsByClassName(t.target.className));t.target.checked?s.forEach(function(n,b){n.checked=!0}):s.forEach(function(n,b){n.checked=!1}),this.refreshTotalConsommation()},urlIntervenant(t){return unicaenVue.url("intervenant/code::intervenantCode/mise-en-paiement/demande",{intervenantCode:t.datasIntervenant.code})},formattedHETD(t){return Util.formattedHeures(t,!1)}}},gp=e("h1",null,"Demande de mise en paiement par lots",-1),yp={class:"card text-dark bg-light"},xp=e("div",{class:"card-header text-uppercase fw-bold"}," Recherchez des heures en attente de demande de mise en paiement : ",-1),Cp={class:"card-body"},Vp={id:"formRechercheDemandeMiseEnPaiement",action:"",method:"post"},Pp={class:"mb-3"},Sp=e("label",{class:"form-label",for:"modele"},"Choisissez une structure ",-1),kp=["value"],Ap={class:"mb-3"},Mp=e("button",{id:"btn-rdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),f("  Veuillez patienter... ")],-1),Dp=["disabled"],Ep=e("div",{class:"alert alert-info",role:"alert"},[f(" Seules les HETD "),e("strong",null,"(hors référentiel)"),f(" avec des centres de coûts pré-paramètrés peuvent bénéficier d'une demande de mise en paiement automatisées. Pour les autres, il faudra passer sur chaque fiches intervenant pour faire les demandes en sélectionnant le centre de coût manuellement. ")],-1),Fp={key:0},Tp={key:0,class:"alert alert-danger",role:"alert"},Up={class:"table table-bordered caption-top"},Rp=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"fw-bold",scope:"col"},"Budget"),e("th",{class:"fw-bold",scope:"col"},"Paie etat"),e("th",{class:"fw-bold",scope:"col"},"Ressource propre"),e("th",{class:"fw-bold",scope:"col"},"Total")])],-1),Ip=e("td",null,"Dotation",-1),wp={class:"fw-bold"},$p=e("td",null,"Consommation",-1),Lp={class:"fw-bold"},Hp={id:"dmep",class:"accordion"},Np={id:"formProcessDemandeMiseEnPaiement",action:"",method:"post"},jp={key:0,class:"accordion-item"},qp={id:"dmep-permanents-heading",class:"accordion-header"},Op={"aria-controls":"dmep-permanents-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-permanents-collapse","data-bs-toggle":"collapse",type:"button"},zp={id:"dmep-permanents-collapse","aria-labelledby":"dmep-permanents-heading",class:"accordion-collapse collapse show"},Bp={class:"accordion-body"},Gp={class:"table"},Jp={scope:"col"},Yp=e("th",{scope:"col"},"Intervenant",-1),Wp=e("th",null,"HETD payables",-1),Qp=e("th",null,"HETD non payables",-1),Xp=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Zp=["href"],Kp=["title"],ef={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},tf={key:1,class:"accordion-item"},sf={id:"dmep-vacataires-heading",class:"accordion-header"},nf={"aria-controls":"dmep-vacataires-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-vacataires-collapse","data-bs-toggle":"collapse",type:"button"},rf={id:"dmep-vacataires-collapse","aria-labelledby":"dmep-vacataires-heading",class:"accordion-collapse collapse show"},af={class:"accordion-body"},of={class:"table"},lf=e("th",null,"Intervenant",-1),df=e("th",null,"HETD payables",-1),uf=e("th",null,"HETD non payables",-1),cf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],mf=["href"],hf=["title"],_f={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},pf={key:2,class:"accordion-item"},ff={id:"dmep-etudiants-heading",class:"accordion-header"},bf={"aria-controls":"dmep-etudiants-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-etudiants-collapse","data-bs-toggle":"collapse",type:"button"},vf={id:"dmep-etudiants-collapse","aria-labelledby":"dmep-etudiants-heading",class:"accordion-collapse collapse show"},gf={class:"accordion-body"},yf={class:"table"},xf=e("th",null,"Intervenant",-1),Cf=e("th",null,"HETD payables",-1),Vf=e("th",null,"HETD non payables",-1),Pf=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Sf=["href"],kf=["title"],Af={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},Mf={key:3,class:"accordion-item"},Df={id:"dmep-autres-heading",class:"accordion-header"},Ef={"aria-controls":"dmep-autres-collapse","aria-expanded":"true",class:"accordion-button","data-bs-target":"#dmep-autres-collapse","data-bs-toggle":"collapse",type:"button"},Ff={id:"dmep-autres-collapse","aria-labelledby":"dmep-autres-heading",class:"accordion-collapse collapse show"},Tf={class:"accordion-body"},Uf={class:"table"},Rf=e("th",null,"Intervenant",-1),If=e("th",null,"HETD payables",-1),wf=e("th",null,"HETD non payables",-1),$f=["id","data-paie-etat","data-ressource-propre","disabled","name","title"],Lf=["href"],Hf=["title"],Nf={style:{"text-decoration":"underline dotted",cursor:"help"},title:"Manque un centre de coût et/ou un domaine fonctionnel"},jf={key:4,class:"mt-3"},qf=e("button",{id:"btn-pdmep-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),f("  Veuillez patienter... ")],-1),Of=["disabled"],zf=["href"];function Bf(t,s,n,b,i,r){return a(),o(y,null,[gp,e("div",yp,[xp,e("div",Cp,[e("form",Vp,[e("div",Pp,[Sp,f("  "),v(e("select",{"onUpdate:modelValue":s[0]||(s[0]=d=>i.selectedStructure=d),class:"form-select",name:"structure"},[(a(!0),o(y,null,C(n.structures,d=>(a(),o("option",{value:d.id},u(d.libelle),9,kp))),256))],512),[[F,i.selectedStructure]])]),e("div",Ap,[Mp,e("button",{id:"btn-rdmep",disabled:!i.selectedStructure,class:"btn btn-primary",type:"button",onClick:s[1]||(s[1]=(...d)=>r.findDemandeMiseEnPaiement&&r.findDemandeMiseEnPaiement(...d))}," Lancer la recherche ",8,Dp)])])])]),Ep,r.haveDotation?(a(),o("div",Fp,[i.alertDotation?(a(),o("div",Tp," Attention vous dépassez vos dotations, vous ne pourrez pas lancer les demandes de mise en paiement par lot. Veuillez ajuster votre sélection d'intervenants pour faire les demandes de mise en paiement. ")):h("",!0),e("table",Up,[Rp,e("tbody",null,[e("tr",null,[Ip,e("td",null,u(r.formattedHETD(this.dotation.paieEtat))+" HETD",1),e("td",null,u(r.formattedHETD(this.dotation.ressourcePropre))+" HETD",1),e("td",wp,u(r.formattedHETD(this.dotation.total))+" HETD",1)]),e("tr",null,[$p,e("td",null,[e("span",{class:D(r.alertPaieEtat)},u(r.formattedHETD(this.totalConsommationPaieEtat))+" HETD",3)]),e("td",null,[e("span",{class:D(r.alertRessourcePropre)},u(r.formattedHETD(this.totalConsommationRessourcePropre))+" HETD",3)]),e("td",Lp,u(r.formattedHETD(this.totalConsommation))+" HETD",1)])])])])):h("",!0),e("div",Hp,[e("form",Np,[this.permanents.length>0?(a(),o("div",jp,[e("h2",qp,[e("button",Op,u(this.permanents.length)+" Permanent(s) ",1)]),e("div",zp,[e("div",Bp,[e("table",Gp,[e("thead",null,[e("tr",null,[e("th",Jp,[e("input",{id:"allPermanents",checked:"checked",class:"checkbox-permanent",name:"allPermanents",type:"checkbox",onClick:s[2]||(s[2]=(...d)=>r.toggleCheckbox&&r.toggleCheckbox(...d))})]),Yp,Wp,Qp])]),e("tbody",null,[(a(!0),o(y,null,C(this.permanents,d=>(a(),o("tr",null,[e("td",null,[e("input",{id:"permanent-"+d.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(d.heures),"data-ressource-propre":r.totalRessourcePropre(d.heures),disabled:r.totalPayable(d.heures)==0,name:"intervenant["+d.datasIntervenant.id+"]",title:r.totalPayable(d.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-permanent",type:"checkbox",onChange:s[3]||(s[3]=m=>r.refreshTotalConsommation())},null,40,Xp)]),e("td",null,[e("a",{href:r.urlIntervenant(d),target:"_blank"},u(d.datasIntervenant.nom_usuel.toUpperCase()+" "+d.datasIntervenant.prenom),9,Zp)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(d.heures)+" HETD en paie état / "+r.totalRessourcePropre(d.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(d.heures))+" h",9,Kp)]),e("td",null,[e("span",ef,u(r.totalNonPayable(d.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.vacataires.length>0?(a(),o("div",tf,[e("h2",sf,[e("button",nf,u(this.vacataires.length)+" Vacataire(s) ",1)]),e("div",rf,[e("div",af,[e("table",of,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allVacataire",checked:"checked",class:"checkbox-vacataire",name:"allVacataire",type:"checkbox",onClick:s[4]||(s[4]=(...d)=>r.toggleCheckbox&&r.toggleCheckbox(...d))})]),lf,df,uf])]),e("tbody",null,[(a(!0),o(y,null,C(this.vacataires,d=>(a(),o("tr",null,[e("td",null,[e("input",{id:"vacataire-"+d.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(d.heures),"data-ressource-propre":r.totalRessourcePropre(d.heures),disabled:r.totalPayable(d.heures)==0,name:"intervenant["+d.datasIntervenant.id+"]",title:r.totalPayable(d.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-vacataire",type:"checkbox",onChange:s[5]||(s[5]=m=>r.refreshTotalConsommation())},null,40,cf)]),e("td",null,[e("a",{href:r.urlIntervenant(d),target:"_blank"},u(d.datasIntervenant.nom_usuel.toUpperCase()+" "+d.datasIntervenant.prenom),9,mf)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(d.heures)+" HETD en paie état / "+r.totalRessourcePropre(d.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(d.heures))+" h",9,hf)]),e("td",null,[e("span",_f,u(r.totalNonPayable(d.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.etudiants.length>0?(a(),o("div",pf,[e("h2",ff,[e("button",bf,u(this.etudiants.length)+" Etudiant(s) ",1)]),e("div",vf,[e("div",gf,[e("table",yf,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allEtudiants",checked:"checked",class:"checkbox-etudiant",name:"allEtudiants",type:"checkbox",onClick:s[6]||(s[6]=(...d)=>r.toggleCheckbox&&r.toggleCheckbox(...d))})]),xf,Cf,Vf])]),e("tbody",null,[(a(!0),o(y,null,C(this.etudiants,d=>(a(),o("tr",null,[e("td",null,[e("input",{id:"etudiant-"+d.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(d.heures),"data-ressource-propre":r.totalRessourcePropre(d.heures),disabled:r.totalPayable(d.heures)==0,name:"intervenant["+d.datasIntervenant.id+"]",title:r.totalPayable(d.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-etudiant",type:"checkbox",onChange:s[7]||(s[7]=m=>r.refreshTotalConsommation())},null,40,Pf)]),e("td",null,[e("a",{href:r.urlIntervenant(d),target:"_blank"},u(d.datasIntervenant.nom_usuel.toUpperCase()+" "+d.datasIntervenant.prenom),9,Sf)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(d.heures)+" HETD en paie état / "+r.totalRessourcePropre(d.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(d.heures))+" h",9,kf)]),e("td",null,[e("span",Af,u(r.totalNonPayable(d.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.autres.length>0?(a(),o("div",Mf,[e("h2",Df,[e("button",Ef,u(this.autres.length)+" Autre(s) ",1)]),e("div",Ff,[e("div",Tf,[e("table",Uf,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{id:"allAutres",checked:"checked",class:"checkbox-autre",name:"allAutres",type:"checkbox",onClick:s[8]||(s[8]=(...d)=>r.toggleCheckbox&&r.toggleCheckbox(...d))})]),Rf,If,wf])]),e("tbody",null,[(a(!0),o(y,null,C(this.etudiants,d=>(a(),o("tr",null,[e("td",null,[e("input",{id:"autre-"+d.datasIntervenant.id,"data-paie-etat":r.totalRessourcePaieEtat(d.heures),"data-ressource-propre":r.totalRessourcePropre(d.heures),disabled:r.totalPayable(d.heures)==0,name:"intervenant["+d.datasIntervenant.id+"]",title:r.totalPayable(d.heures)==0?"Aucune heure pré-paramétrée avec un centre de coût ne peut bénéficier d'une demande de mise en paiement":"",checked:"checked",class:"checkbox-autre",type:"checkbox",onChange:s[9]||(s[9]=m=>r.refreshTotalConsommation())},null,40,$f)]),e("td",null,[e("a",{href:r.urlIntervenant(d),target:"_blank"},u(d.datasIntervenant.nom_usuel.toUpperCase()+" "+d.datasIntervenant.prenom),9,Lf)]),e("td",null,[e("span",{title:r.totalRessourcePaieEtat(d.heures)+" HETD en paie état / "+r.totalRessourcePropre(d.heures)+" HETD en ressource propre",style:{"text-decoration":"underline dotted",cursor:"help"}},u(r.totalPayable(d.heures))+" h",9,Hf)]),e("td",null,[e("span",Nf,u(r.totalNonPayable(d.heures))+" h",1)])]))),256))])])])])])):h("",!0),this.intervenants.length>0?(a(),o("div",jf,[qf,e("button",{id:"btn-pdmep",disabled:this.alertDotation,class:"btn btn-primary",type:"button",onClick:s[10]||(s[10]=(...d)=>r.processDemandeMiseEnPaiement&&r.processDemandeMiseEnPaiement(...d))}," Enregistrer les demandes de paiement ",8,Of),this.canMiseEnPaiement?(a(),o("a",{key:0,id:"btn-mep",href:this.urlMiseEnPaiement,class:"ms-2 btn btn-secondary"}," Aller au mise en paiement ",8,zf)):h("",!0)])):h("",!0)])])],64)}const Gf=k(vp,[["render",Bf]]),Jf=Object.freeze(Object.defineProperty({__proto__:null,default:Gf},Symbol.toStringTag,{value:"Module"})),Yf={components:{},props:{parametres:{type:Array,required:!0},servicesAPayer:{type:Array,required:!0}}},I=t=>(z("data-v-d4a24889"),t=t(),B(),t),Wf=I(()=>e("h2",null,"Paramètres généraux ou bien selon le statut",-1)),Qf={class:"table table-bordered table-condensed table-extra-condensed"},Xf=I(()=>e("tr",null,[e("th",null,"Paramètre général"),e("th",null,"Valeur")],-1)),Zf=I(()=>e("h2",null,"Services à payer",-1)),Kf={class:"card"},eb={class:"card-header"},tb={class:"badge bg-primary"},sb={class:"card-body"},nb={class:"row lap"},ib={class:"col-md-6"},rb=I(()=>e("h6",null,"Heures à payer",-1)),ab={class:"table table-bordered table-xs"},ob={key:0,rowspan:"2"},lb={key:1,rowspan:"2"},db=I(()=>e("th",{colspan:"2"},"Taux de rému.",-1)),ub=I(()=>e("th",{colspan:"3"},"Heures",-1)),cb=I(()=>e("tr",null,[e("th",null,"Nom"),e("th",null,"Valeur"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")],-1)),mb={key:0},hb=["title"],_b={key:1},pb=["title"],fb={class:"col-md-6"},bb=I(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),f(" correspondantes")],-1)),vb={class:"table table-bordered table-xs"},gb=I(()=>e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{colspan:"3"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date"),e("th",null,"Total"),e("th",null,"AA"),e("th",null,"AC")])],-1)),yb=["title"],xb=["title"],Cb={key:0},Vb={class:"badge bg-info"},Pb={key:0,class:"row"},Sb=I(()=>e("div",{class:"col-md-6"},null,-1)),kb={class:"col-md-6"},Ab=I(()=>e("h6",null,[e("abbr",{title:"Les demandes de mise en paiement n'ont pas de période ni de date de paiement associées, contrairement aux mises en paiement"},"(Demandes de) Mises en paiement"),f(" en trop")],-1)),Mb={class:"table table-bordered table-xs"},Db=I(()=>e("thead",{class:"bg-danger"},[e("tr",null,[e("th",{rowspan:"2"},"Id"),e("th",{rowspan:"2"},"Centre de coûts"),e("th",{colspan:"2"},"Période"),e("th",{rowspan:"2"},"Heures")]),e("tr",null,[e("th",null,"Mois"),e("th",null,"Date")])],-1)),Eb=["title"],Fb=["title"];function Tb(t,s,n,b,i,r){return a(),o(y,null,[Wf,e("table",Qf,[Xf,(a(!0),o(y,null,C(n.parametres,(d,m)=>(a(),o("tr",{key:m},[e("th",null,u(m),1),e("td",null,u(d),1)]))),128))]),Zf,(a(!0),o(y,null,C(n.servicesAPayer,(d,m)=>(a(),o("div",{key:m},[e("div",Kf,[e("div",eb,[e("span",tb,u(d.type),1),f(" "+u(d.libelle),1)]),e("div",sb,[e("ul",null,[(a(!0),o(y,null,C(d.parametres,(c,l)=>(a(),o("li",{key:l},u(l)+" : "+u(c),1))),128))]),(a(!0),o(y,null,C(d.laps,c=>(a(),o("div",nb,[e("div",ib,[rb,e("table",ab,[e("thead",null,[e("tr",null,[d.type!="Référentiel"?(a(),o("th",ob,"Volume horaire")):(a(),o("th",lb,"Volumes horaires")),db,ub]),cb]),e("tbody",null,[e("tr",null,[d.type!="Référentiel"?(a(),o("td",mb,[e("abbr",{class:"badge bg-secondary",title:c.volumeHoraireHisto},u(c.volumeHoraireId),9,hb),f(" "+u(c.volumeHoraire),1)])):(a(),o("td",_b,[(a(!0),o(y,null,C(c.volumeHoraireId,l=>(a(),o("div",null,[e("abbr",{class:"badge bg-secondary",title:l.HISTO},u(l.ID),9,pb),f(" "+u(l.HEURES)+"h ",1)]))),256))])),e("td",null,u(c.tauxRemu),1),e("td",null,u(c.tauxValeur)+"€",1),e("td",null,u(c.heures),1),e("td",null,u(c.heuresAA),1),e("td",null,u(c.heuresAC),1)])])])]),e("div",fb,[bb,e("table",vb,[gb,e("tbody",null,[(a(!0),o(y,null,C(c.misesEnPaiement,l=>(a(),o("tr",{key:l.id},[e("td",null,[e("abbr",{class:"badge bg-secondary",title:"Nombre d'heures total concernées : "+l.heuresTotal+`
Domaine fonctionnel : `+l.domaineFonctionnel+`
`+l.historique},u(l.id),9,yb)]),e("td",null,[e("abbr",{title:l.centreCoutLibelle},u(l.centreCoutCode),9,xb)]),e("td",null,u(l.periodePaiement),1),e("td",null,u(l.date),1),e("td",null,u(l.heures),1),e("td",null,u(l.heuresAA),1),e("td",null,u(l.heuresAC),1)]))),128))])]),c.heuresRestantes!="0,00"?(a(),o("div",Cb,[e("span",Vb,u(c.heuresRestantes)+"h n'ont pas été demandées en paiement",1)])):h("",!0)])]))),256)),d.misesEnPaiement&&d.misesEnPaiement.length>0?(a(),o("div",Pb,[Sb,e("div",kb,[Ab,e("table",Mb,[Db,e("tbody",null,[(a(!0),o(y,null,C(d.misesEnPaiement,c=>(a(),o("tr",{key:c.id},[e("td",null,[e("abbr",{class:"badge bg-danger",title:"Domaine fonctionnel : "+c.domaineFonctionnel+`
`+c.historique},u(c.id),9,Eb)]),e("td",null,[e("abbr",{title:c.centreCoutLibelle},u(c.centreCoutCode),9,Fb)]),e("td",null,u(c.periodePaiement),1),e("td",null,u(c.date),1),e("td",null,u(c.heures),1)]))),128))])])])])):h("",!0)])])]))),128))],64)}const Ub=k(Yf,[["render",Tb],["__scopeId","data-v-d4a24889"]]),Rb=Object.freeze(Object.defineProperty({__proto__:null,default:Ub},Symbol.toStringTag,{value:"Module"})),Ib={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(t){this.selectedFile=t.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(t){t.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let s=document.getElementById("btn-import"),n=document.getElementById("btn-import-inprogress");n.classList.remove("d-none"),s.classList.add("d-none"),s.disabled=!0;let b=document.getElementById("formImport"),i=new FormData(b);unicaenVue.axios.post(this.importUrl,i,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{let d=r.data;this.fileErrors=d.file,this.intervenantMissing=d.intervenant,d.message.length!=0?this.messageErrors=d.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",s.disabled=!1,n.classList.add("d-none"),s.classList.remove("d-none")}).catch(r=>{console.error("Error uploading")})}}},wb={class:"card text-dark bg-light"},$b=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),Lb={class:"card-body"},Hb={key:0,class:"alert alert-danger",role:"alert"},Nb={key:1,class:"alert alert-success",role:"alert"},jb={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},qb=e("p",{class:"fs-9 text"},[f(" Vous pouvez utiliser le modèle directement extrait de winpaie "),e("strong",null,"(format .xlsx ou .ods)"),f(" ou créer votre modèle générique de classeur "),e("strong",null,"(format .xlsx ou .ods)"),f(" incluant 3 colonnes : insee,numero pec, nom. ")],-1),Ob={class:"mb-3"},zb=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),Bb=K('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),Gb={class:"mb-3"},Jb=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),f("  Veuillez patienter... ")],-1),Yb={key:0,id:"fileErrors",class:"card text-dark bg-light"},Wb=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),Qb={class:"card-body"},Xb={key:0},Zb=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),Kb={key:1},e1=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function t1(t,s,n,b,i,r){return a(),o(y,null,[e("div",wb,[$b,e("div",Lb,[this.messageErrors?(a(),o("div",Hb,u(this.messageErrors),1)):h("",!0),this.messageConfirm?(a(),o("div",Nb,u(this.messageConfirm),1)):h("",!0),e("form",jb,[qb,e("div",Ob,[zb,f("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:s[0]||(s[0]=(...d)=>r.handleFileUpload&&r.handleFileUpload(...d))},null,32)]),Bb,e("div",Gb,[Jb,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:s[1]||(s[1]=(...d)=>r.importFile&&r.importFile(...d))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(a(),o("div",Yb,[Wb,e("div",Qb,[this.fileErrors.length!=0?(a(),o("div",Xb,[Zb,e("ul",null,[(a(!0),o(y,null,C(this.fileErrors,d=>(a(),o("li",null,u(),1))),256))])])):h("",!0),this.intervenantMissing.length!=0?(a(),o("div",Kb,[e1,e("ul",null,[(a(!0),o(y,null,C(this.intervenantMissing,d=>(a(),o("li",null,u(d),1))),256))])])):h("",!0)])])):h("",!0)],64)}const s1=k(Ib,[["render",t1]]),n1=Object.freeze(Object.defineProperty({__proto__:null,default:s1},Symbol.toStringTag,{value:"Module"})),i1={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(t){modAjax(t.target,s=>{this.$emit("refreshListe")})},ajoutValeur(t){modAjax(t.target,s=>{this.$emit("refreshListe")})},saisieValeur(t){t.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:t.currentTarget.dataset.id}),modAjax(t.currentTarget,s=>{this.$emit("refreshListe")})},refreshListe(t){this.$emit("refreshListe")},supprimer(t){popConfirm(t.target,s=>{this.$emit("refreshListe")})},supprimerValeur(t){t.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,s=>{this.$emit("refreshListe")})},refresh(t){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:t.id})).then(s=>{this.$emit("refresh",s.data)})}}},r1={class:"card-header"},a1={style:{display:"inline"}},o1={class:"float-end"},l1=["href"],d1=["href"],u1={class:"card-body"},c1={key:0},m1=e("br",null,null,-1),h1={class:""},_1={class:"row align-items-start"},p1={class:"col-md-6"},f1={class:"col"},b1=["data-id"],v1=["data-id"],g1=["href"],y1={key:1,class:"row"},x1={class:"col-md-7"},C1=e("br",null,null,-1),V1={class:"row align-items-start"},P1={class:"col-md-8"},S1={class:"col-md-auto"},k1=["data-id"],A1=["data-id"],M1=["href"],D1={class:"col"},E1=e("br",null,null,-1),F1={key:0},T1={key:0};function U1(t,s,n,b,i,r){const d=j,m=U("u-heures"),c=O,l=U("taux",!0);return a(),o(y,null,[e("div",{class:D(["card",{"ms-5":n.taux.tauxRemu}])},[e("div",r1,[e("h3",a1,u(n.taux.libelle)+" ("+u(n.taux.code)+")",1),e("div",o1,[n.taux.canEdit?(a(),o("a",{key:0,href:i.saisieUrl,class:"btn btn-primary",onClick:s[0]||(s[0]=P((...V)=>r.saisie&&r.saisie(...V),["prevent"]))},[_(d,{name:"pen-to-square"}),f(" Modifier")],8,l1)):h("",!0),f("   "),n.taux.canDelete?(a(),o("a",{key:1,href:i.supprimerUrl,class:"btn btn-danger",onClick:s[1]||(s[1]=P((...V)=>r.supprimer&&r.supprimer(...V),["prevent"]))},[_(d,{name:"trash-can"}),f(" Supprimer")],8,d1)):h("",!0)])]),e("div",u1,[n.taux.tauxRemu?h("",!0):(a(),o("div",c1,[f(" Modification :"),m1,e("ul",null,[(a(!0),o(y,null,C(n.taux.tauxRemuValeurs,V=>(a(),o("div",{key:V.id},[e("li",h1,[e("div",_1,[e("div",p1,[_(m,{valeur:V.valeur},null,8,["valeur"]),f("€/h à partir du "),_(c,{value:V.dateEffet},null,8,["value"])]),e("div",f1,[n.taux.canEdit?(a(),o("a",{key:0,class:"text-primary",onClick:s[2]||(s[2]=P((...p)=>r.saisieValeur&&r.saisieValeur(...p),["prevent"])),"data-id":V.id},[_(d,{name:"pen-to-square"})],8,b1)):h("",!0),f("   "),n.taux.canEdit?(a(),o("a",{key:1,class:"text-primary",onClick:s[3]||(s[3]=P((...p)=>r.supprimerValeur&&r.supprimerValeur(...p),["prevent"])),"data-id":V.id},[_(d,{name:"trash-can"})],8,v1)):h("",!0)])])])]))),128))]),n.taux.canEdit?(a(),o("a",{key:0,href:i.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:s[4]||(s[4]=P((...V)=>r.ajoutValeur&&r.ajoutValeur(...V),["prevent"]))},[_(d,{name:"plus"}),f(" Ajouter une valeur ")],8,g1)):h("",!0)])),n.taux.tauxRemu?(a(),o("div",y1,[e("div",x1,[f(" Modification :"),C1,e("ul",null,[(a(!0),o(y,null,C(n.taux.tauxRemuValeurs,V=>(a(),o("div",null,[e("li",null,[e("div",V1,[e("div",P1,[f(" Coéfficient de "),_(m,{valeur:V.valeur},null,8,["valeur"]),f(" à partir du "),_(c,{value:V.dateEffet},null,8,["value"])]),e("div",S1,[n.taux.canEdit?(a(),o("a",{key:0,class:"text-primary",onClick:s[5]||(s[5]=P((...p)=>r.saisieValeur&&r.saisieValeur(...p),["prevent"])),"data-id":V.id},[_(d,{name:"pen-to-square"})],8,k1)):h("",!0),f("   "),n.taux.canEdit?(a(),o("a",{key:1,class:"text-primary",onClick:s[6]||(s[6]=P((...p)=>r.supprimerValeur&&r.supprimerValeur(...p),["prevent"])),"data-id":V.id},[_(d,{name:"trash-can"})],8,A1)):h("",!0)])])])]))),256))]),n.taux.canEdit?(a(),o("a",{key:0,href:i.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:s[7]||(s[7]=P((...V)=>r.ajoutValeur&&r.ajoutValeur(...V),["prevent"]))},[_(d,{name:"plus"})],8,M1)):h("",!0)]),e("div",D1,[f(" Valeurs calculées (indexées sur le taux "+u(n.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(a(!0),o(y,null,C(n.taux.tauxRemuValeursIndex,V=>(a(),o("div",null,[e("li",null,[_(m,{valeur:V.valeur},null,8,["valeur"]),f("€/h à partir du "),_(c,{value:V.date},null,8,["value"])])]))),256))]),E1])])):h("",!0)])],2),n.taux.tauxRemu?h("",!0):(a(),o("div",F1,[(a(!0),o(y,null,C(n.listeTaux,V=>(a(),o("div",{key:V},[V.tauxRemu&&V.tauxRemu.id===n.taux.id?(a(),o("div",T1,[(a(),R(l,{onSupprimer:r.supprimer,onRefreshListe:r.refreshListe,key:n.taux.id,taux:V,listeTaux:n.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):h("",!0)]))),128))]))],64)}const de=k(i1,[["render",U1]]),R1=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),I1={components:{taux:de},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,s=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(t){let s=Util.json.indexById(this.listeTaux,t.id);this.listeTaux[s]=t},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(t=>{this.listeTaux=t.data})}}},w1=["href"];function $1(t,s,n,b,i,r){const d=U("taux");return a(),o(y,null,[(a(!0),o(y,null,C(i.listeTaux,m=>(a(),o("div",null,[m.tauxRemu?h("",!0):(a(),R(d,{onSupprimer:r.supprimer,onRefreshListe:r.refreshListe,key:m.id,taux:m,listeTaux:i.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),n.canEditTaux?(a(),o("a",{key:0,class:"btn btn-primary",href:i.ajoutUrl,onClick:s[0]||(s[0]=P((...m)=>r.ajout&&r.ajout(...m),["prevent"]))},"Ajout d'un nouveau taux",8,w1)):h("",!0)],64)}const L1=k(I1,[["render",$1]]),H1=Object.freeze(Object.defineProperty({__proto__:null,default:L1},Symbol.toStringTag,{value:"Module"})),N1={UHeures:"Application/UI/UHeures",UInputFloat:"Application/UI/UInputFloat",Utilisateur:"Application/Utilisateur"};function j1(t,s){const n={};s===void 0&&(s={});for(const b in t){let r=b.slice(2,-4).replaceAll("/","");n[r]=t[b].default}for(const b of document.getElementsByClassName("vue-app")){let i=fe({template:b.innerHTML,components:n});if(s.beforeMount!==void 0&&s.beforeMount(i),s.autoloads!==void 0)for(const r in s.autoloads){let d=s.autoloads[r].replaceAll("/","");i.component(r,n[d])}i.use(be({components:!0,directives:!0})),i.mount(b),s.afterMount!==void 0&&s.afterMount(i)}}const q1={init:j1},O1=Object.assign({"./Application/UI/UHeures.vue":Ce,"./Application/UI/UInputFloat.vue":Ae,"./Application/Utilisateur.vue":Te,"./Employeur/ListeEmployeur.vue":Ye,"./Formule/Administration/Details.vue":st,"./Formule/Administration/Formulator.vue":vt,"./Formule/Administration/Index.vue":gs,"./Formule/Test/Index.vue":Ns,"./Formule/Test/Test.vue":na,"./Intervenant/Recherche.vue":Sa,"./Lieu/Structure.vue":oo,"./Lieu/StructuresAdmin.vue":fo,"./Mission/Liste.vue":Hl,"./Mission/ListeCandidatures.vue":_d,"./Mission/ListeOffreEmploi.vue":zu,"./Mission/ListePrime.vue":Wc,"./Mission/Mission.vue":Rl,"./Mission/OffreEmploi.vue":wu,"./Mission/Prime.vue":$c,"./Mission/Suivi.vue":Dm,"./Mission/SuiviEvent.vue":Sm,"./Paiement/DemandeMiseEnPaiement.vue":cp,"./Paiement/DemandeMiseEnPaiementLot.vue":Jf,"./Paiement/DemandeMiseEnPaiementStructure.vue":ip,"./Paiement/DetailsCalculs.vue":Rb,"./Paiement/ImportNumeroPec.vue":n1,"./Paiement/ListeTaux.vue":H1,"./Paiement/Taux.vue":R1}),z1={autoloads:N1};q1.init(O1,z1);
