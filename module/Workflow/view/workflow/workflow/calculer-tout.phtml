<?php

/**
 * @var $this \Application\View\Renderer\PhpRenderer
 * @var $title
 * @var $action boolean
 * @var $error boolean
 */

$divId = uniqid('di-');

?>
<?php if ($action): ?>

    <?php if ($error): ?>

        <div class="alert alert-danger" role="alert">
            <?= $error ?>
        </div>

    <?php else: ?>

        <div class="alert alert-success" role="alert">
            Calcul du workflow achev√©.
        </div>

    <?php endif; ?>

<?php else: ?>

    <div id="<?= $divId ?>" data-url="<?= $this->url('workflow/calculer-tout', [], ['query' => ['action' => '1']]) ?>">
        <img src="<?= $this->basePath().'/images/wait.gif' ?>" alt="Attente..."/>
        <div>En cours de calcul... Merci de patienter.</div>
    </div>
    <script>

        $(function(){
            $("#<?= $divId?>").refresh();
        });

    </script>

<?php endif; ?>