import{c as a,o as s,t as _,a as e,w as U,v as R,b as u,F as b,r as y,d,n as T,e as f,f as p,g as S,h as C,p as I,i as H,j as q,k as L,l as O,m as W,q as Q,s as X,u as Z,x as K,y as ee}from"./vendor-2e5f87a4.js";const x=(t,i)=>{const r=t.__vccOpts||t;for(const[h,o]of i)r[h]=o;return r},te={props:{valeur:{required:!0,type:Number}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},ie=["innerHTML"];function re(t,i,r,h,o,n){return s(),a("span",{class:"heures",innerHTML:n.affichage},null,8,ie)}const ne=x(te,[["render",re]]),se=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),ae={name:"Utilisateur",props:{nom:String,mail:String}},oe=["href"];function le(t,i,r,h,o,n){return s(),a("a",{href:`mailto:${r.mail}`},_(r.nom),9,oe)}const ue=x(ae,[["render",le]]),de=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"})),ce={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(t){this.formatted=this.formatage(t)}},methods:{formatage(t){if(t===void 0)return;let i=new Date(t);const r=i.getFullYear(),h=(i.getMonth()+1).toString().padStart(2,"0"),o=i.getDate().toString().padStart(2,"0"),n=i.getHours().toString().padStart(2,"0"),c=i.getMinutes().toString().padStart(2,"0"),l=i.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${o}/${h}/${r} à ${n}:${c}`;case"time":return`${n}:${c}:${l}`}return`${o}/${h}/${r}`}}};function me(t,i,r,h,o,n){return _(o.formatted)}const w=x(ce,[["render",me]]),he={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(t){this.searchTerm=t.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(t){return unicaenVue.url("intervenant/code:"+t+"/voir")},reload(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(t=>{let i=t.data,r=[];for(const h in i){if(i[h].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){r.push(i[h]);continue}if(i[h].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){r.push(i[h]);continue}if(i[h].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){r.push(i[h]);continue}}this.intervenants=r,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(t=>{console.log(t.message)})},800)}}},_e=e("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),fe={class:"intervenant-recherche"},ve={class:"critere"},pe=e("br",null,null,-1),be=e("span",{class:"fw-bold"},"Types d'intervenant : ",-1),ge=e("br",null,null,-1),ye={key:0,class:"table table-bordered table-hover"},xe=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),ke=["title"],Ce={style:{}},Ve=["href"],Se=e("i",{class:"fas fa-eye"},null,-1),Me={key:1,class:"table table-bordered table-hover"},Te=e("thead",null,[e("tr",null,[e("th",{style:{width:"90px"}}),e("th",null,"Civilité"),e("th",null,"Nom"),e("th",null,"Prenom"),e("th",null,"Structure"),e("th",null,"Statut"),e("th",null,"Date de naissance"),e("th",null,"N° Personnel")])],-1),je=e("tbody",null,[e("tr",null,[e("td",{colspan:"8",style:{"text-align":"center"}},"Aucun intervenant trouvé")])],-1),Ue=[Te,je];function we(t,i,r,h,o,n){const c=w;return s(),a(b,null,[_e,e("div",fe,[e("div",ve,[e("div",null,[e("input",{id:"term",class:"form-control input",placeholder:"votre recherche...",type:"text",onKeyup:i[0]||(i[0]=(...l)=>n.rechercher&&n.rechercher(...l))},null,32),pe]),e("div",null,[be,U(e("input",{"onUpdate:modelValue":i[1]||(i[1]=l=>o.checkedTypes=l),checked:"checked",name:"type[]",type:"checkbox",value:"permanent",onChange:i[2]||(i[2]=l=>n.reload())},null,544),[[R,o.checkedTypes]]),u(" Permanent "),U(e("input",{"onUpdate:modelValue":i[3]||(i[3]=l=>o.checkedTypes=l),checked:"checked",name:"type[]",type:"checkbox",value:"vacataire",onChange:i[4]||(i[4]=l=>n.reload())},null,544),[[R,o.checkedTypes]]),u(" Vacataire "),U(e("input",{"onUpdate:modelValue":i[5]||(i[5]=l=>o.checkedTypes=l),checked:"checked",name:"type[]",type:"checkbox",value:"etudiant",onChange:i[6]||(i[6]=l=>n.reload())},null,544),[[R,o.checkedTypes]]),u(" Etudiant ")]),ge])]),o.intervenants.length>0?(s(),a("table",ye,[xe,e("tbody",null,[(s(!0),a(b,null,y(o.intervenants,(l,m)=>(s(),a("tr",{class:T({"bg-danger":l.destruction!==null}),title:l.destruction!==null?"Fiche historisé":""},[e("td",Ce,[e("a",{href:n.urlFiche(l.code)},[Se,u(" Fiche")],8,Ve)]),e("td",null,_(l.civilite),1),e("td",null,_(l.nom),1),e("td",null,_(l.prenom),1),e("td",null,_(l.structure),1),e("td",null,_(l.statut),1),e("td",null,[f(c,{value:l["date-naissance"]},null,8,["value"])]),e("td",null,_(l["numero-personnel"]),1)],10,ke))),256))])])):d("",!0),o.intervenants.length==0&&o.noResult==1?(s(),a("table",Me,Ue)):d("",!0)],64)}const De=x(he,[["render",we]]),Re=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));const Ae={name:"Structure",props:{structure:{required:!0}},data(){return{saisieUrl:unicaenVue.url("structure/voir/:structure",{structure:this.structure.id})+"?tab=edition",deleteUrl:unicaenVue.url("structure/delete/:structure",{structure:this.structure.id}),liste:this.$parent.liste}},computed:{hasSousStructures:function(){return this.structure.structures.length>0}},methods:{saisie(t){modAjax(t.currentTarget,i=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,i=>{this.refresh()})},refresh(){this.liste.reload()}}},M=t=>(I("data-v-a94dbf9e"),t=t(),H(),t),Ee={class:"accordion-item"},$e={class:"accordion-header"},Pe=["data-bs-target","aria-controls"],qe=["href"],Le=M(()=>e("i",{class:"fas fa-pen-to-square"},null,-1)),Oe=[Le],Ie=["href"],He=M(()=>e("i",{class:"fas fa-trash-can"},null,-1)),Fe=[He],Be=["id"],Ne={class:"accordion-body"},ze={class:"row"},Ge=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Code"),u(" : ")],-1)),Ye={class:"col-md-5"},Je={class:"row"},We=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Source"),u(" : ")],-1)),Qe={class:"col-md-5"},Xe={class:"row"},Ze=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Composante d'enseignement"),u(" : ")],-1)),Ke={class:"col-md-5"},et={key:0,class:"fas fa-check text-success"},tt={key:1,class:"fas fa-xmark text-danger"},it={class:"row"},rt=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Affichage de l'adresse sur le contrat de travail"),u(" : ")],-1)),nt={class:"col-md-5"},st={key:0,class:"fas fa-check text-success"},at={key:1,class:"fas fa-xmark text-danger"},ot={class:"row"},lt=M(()=>e("div",{class:"col-md-5"},[e("strong",null,"Adresse"),u(" : ")],-1)),ut={class:"col-md-5"},dt={key:0,class:"sous-structures"},ct=M(()=>e("h4",null,"Sous-structures",-1)),mt={class:"accordion"};function ht(t,i,r,h,o,n){const c=S("structure",!0);return s(),a("div",Ee,[e("h2",$e,[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":`#str${r.structure.id}`,"aria-expanded":"true","aria-controls":r.structure.id},[r.structure.canEdit?(s(),a("a",{key:0,title:"Modifier la structure",href:o.saisieUrl,class:"btn btn-primary btn-sm",onClick:i[0]||(i[0]=p((...l)=>n.saisie&&n.saisie(...l),["prevent"]))},Oe,8,qe)):d("",!0),r.structure.canDelete?(s(),a("a",{key:1,title:"Supprimer la structure",href:o.deleteUrl,class:"btn btn-danger btn-sm","data-content":"Êtes-vous sûr de vouloir supprimer la structure ?","data-title":"Suppression de la structure",onClick:i[1]||(i[1]=p((...l)=>n.supprimer&&n.supprimer(...l),["prevent"]))},Fe,8,Ie)):d("",!0),u("   "+_(r.structure.libelleLong)+" ("+_(r.structure.libelleCourt)+") ",1)],8,Pe)]),e("div",{id:`str${r.structure.id}`,class:"accordion-collapse collapse show"},[e("div",Ne,[e("div",ze,[Ge,e("div",Ye,_(r.structure.code),1)]),e("div",Je,[We,e("div",Qe,_(r.structure.source.libelle),1)]),e("div",Xe,[Ze,e("div",Ke,[r.structure.enseignement?(s(),a("i",et)):r.structure.enseignement?d("",!0):(s(),a("i",tt))])]),e("div",it,[rt,e("div",nt,[r.structure.affAdresseContrat?(s(),a("i",st)):r.structure.affAdresseContrat?d("",!0):(s(),a("i",at))])]),e("div",ot,[lt,e("div",ut,[e("pre",null,_(r.structure.adresse),1)])]),n.hasSousStructures?(s(),a("div",dt,[ct,e("div",mt,[(s(!0),a(b,null,y(r.structure.structures,l=>(s(),C(c,{onRefresh:n.refresh,key:l.id,structure:l},null,8,["onRefresh","structure"]))),128))])])):d("",!0)])],8,Be)])}const F=x(Ae,[["render",ht],["__scopeId","data-v-a94dbf9e"]]),_t=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"})),ft={components:{structure:F},props:{canAdd:{type:Boolean,required:!0}},data(){return{structures:[],ajoutUrl:unicaenVue.url("structure/saisie"),liste:this}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,i=>{console.log("coucou"),this.reload()})},reload(){unicaenVue.axios.get(unicaenVue.url("structure/liste")).then(t=>{this.structures=t.data})}}},vt=e("h1",null,"Administration des structures",-1),pt={class:"accordion"},bt=["href"],gt=e("i",{class:"fas fa-pen-to-square"},null,-1);function yt(t,i,r,h,o,n){const c=S("structure");return s(),a(b,null,[vt,e("div",pt,[(s(!0),a(b,null,y(o.structures,l=>(s(),C(c,{key:l.id,structure:l},null,8,["structure"]))),128))]),r.canAdd?(s(),a("a",{key:0,class:"btn btn-primary",href:o.ajoutUrl,onClick:i[0]||(i[0]=p((...l)=>n.ajout&&n.ajout(...l),["prevent"])),title:"Ajouter une structure"},[gt,u(" Ajouter une structure ")],8,bt)):d("",!0)],64)}const xt=x(ft,[["render",yt]]),kt=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"})),Ct={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},Vt=["id"],St={class:"modal-dialog"},Mt={class:"modal-content"},Tt={class:"modal-header"},jt={class:"modal-title"},Ut=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),wt={class:"modal-body"},Dt={class:"modal-footer"},Rt=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function At(t,i,r,h,o,n){return s(),a("div",{class:"modal fade",id:r.id,tabindex:"-1","aria-hidden":"true"},[e("div",St,[e("div",Mt,[e("div",Tt,[e("h5",jt,_(r.title),1),Ut]),e("div",wt,[q(t.$slots,"body")]),e("div",Dt,[q(t.$slots,"footer"),Rt])])])],8,Vt)}const Et=x(Ct,[["render",At]]),$t={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String}}};function Pt(t,i,r,h,o,n){return s(),a("i",{class:T(`fas fa-${r.name} text-${r.variant}`)},null,2)}const j=x($t,[["render",Pt]]);const qt={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(t){this.validationText=this.calcValidation(t)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":'<span class="bg-info">'+Util.formattedHeures(this.mission.heures)+"</span> heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(t){return t===null?"A valider":t.id===null?"Autovalidée":"Validation du "+Util.dateToString(t.histoCreation)+" par "},saisie(t){modAjax(t.currentTarget,i=>{this.refresh()})},supprimer(t){popConfirm(t.currentTarget,i=>{this.$emit("supprimer",this.mission)})},valider(t){popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})},devalider(t){popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})},volumeHoraireSupprimer(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})},volumeHoraireValider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})},volumeHoraireDevalider(t){t.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(t=>{this.$emit("refresh",t.data)})}}},V=t=>(I("data-v-1735108d"),t=t(),H(),t),Lt=["id"],Ot={class:"card-header card-header-h3"},It={key:0},Ht={class:"float-end"},Ft={key:1},Bt={key:2},Nt={class:"float-end"},zt={class:"card-body"},Gt={class:"row"},Yt={class:"col-md-8"},Jt={class:"row"},Wt={class:"col-md-12"},Qt=V(()=>e("label",{class:"form-label"},"Composante en charge du suivi",-1)),Xt={class:"form-control"},Zt={class:"row"},Kt={class:"col-md-6"},ei=V(()=>e("label",{class:"form-label"},"Taux de rémunération",-1)),ti={class:"form-control"},ii={class:"col-md-6"},ri=V(()=>e("label",{class:"form-label"},"Taux majoré (dimanches/jours fériés)",-1)),ni={class:"form-control"},si={class:"col-md-7"},ai=V(()=>e("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),oi={class:"input-group mb-3"},li=["innerHTML"],ui=["data-bs-target"],di={key:0,class:"col-md-5"},ci=V(()=>e("label",{class:"form-label"},"Heures de formation prévues",-1)),mi={class:"form-control"},hi={class:"row"},_i={class:"col-md-12"},fi=V(()=>e("label",{class:"form-label"},"Descriptif de la mission",-1)),vi={class:"form-control"},pi={key:0,class:"row"},bi={class:"col-md-12"},gi=V(()=>e("label",{class:"form-label"},"Etudiants suivis",-1)),yi={class:"form-control"},xi=V(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"}," ")],-1)),ki={class:"row"},Ci={class:"col-md-12"},Vi=["href"],Si=["href"],Mi=["href"],Ti=["href"],ji={class:"col-md-4"},Ui=V(()=>e("div",null,[e("label",{class:"form-label"},"Suivi")],-1)),wi={class:"table table-bordered table-condensed"},Di=V(()=>e("thead",null,[e("tr",null,[e("th",null,"Heures"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),Ri={style:{"text-align":"right"}},Ai=V(()=>e("br",null,null,-1)),Ei={key:0},$i=["data-id"],Pi=["data-id"],qi=["data-id"];function Li(t,i,r,h,o,n){const c=w,l=j,m=S("utilisateur"),k=S("u-heures"),g=Et;return s(),a(b,null,[e("div",{id:r.mission.id,class:T([{"bg-success":r.mission.valide,"bg-default":!r.mission.valide},"card"])},[e("form",{onSubmit:i[4]||(i[4]=p((...v)=>t.submitForm&&t.submitForm(...v),["prevent"]))},[e("div",Ot,[r.mission.libelleMission?(s(),a("h5",It,[u(_(r.mission.libelleMission)+" ",1),e("span",Ht,[u("Du "),f(c,{value:r.mission.dateDebut},null,8,["value"]),u(" au "),f(c,{value:r.mission.dateFin},null,8,["value"])])])):d("",!0),r.mission.libelleMission?(s(),a("h6",Ft,_(r.mission.typeMission.libelle),1)):d("",!0),r.mission.libelleMission?d("",!0):(s(),a("h5",Bt,[u(_(r.mission.typeMission.libelle)+" ",1),e("span",Nt,[u("Du "),f(c,{value:r.mission.dateDebut},null,8,["value"]),u(" au "),f(c,{value:r.mission.dateFin},null,8,["value"])])]))]),e("div",zt,[e("div",Gt,[e("div",Yt,[e("div",Jt,[e("div",Wt,[Qt,e("div",Xt,_(r.mission.structure.libelle),1)])]),e("div",Zt,[e("div",Kt,[ei,e("div",ti,_(r.mission.tauxRemu?r.mission.tauxRemu.libelle:null),1)]),e("div",ii,[ri,e("div",ni,_(r.mission.tauxRemuMajore?r.mission.tauxRemuMajore.libelle:r.mission.tauxRemu?"Idem ("+r.mission.tauxRemu.libelle+")":null),1)]),e("div",si,[ai,e("div",oi,[e("div",{class:"form-control",innerHTML:n.heuresLib},null,8,li),e("button",{"data-bs-target":`#details-${r.mission.id}`,class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal"}," Détails ",8,ui)])]),r.mission.typeMission.besoinFormation?(s(),a("div",di,[ci,e("div",mi,_(r.mission.heuresFormation),1)])):d("",!0)]),e("div",hi,[e("div",_i,[fi,e("div",vi,_(r.mission.description),1)])]),r.mission.typeMission.accompagnementEtudiants?(s(),a("div",pi,[e("div",bi,[gi,e("div",yi,[e("pre",null,_(r.mission.etudiantsSuivis),1)])])])):d("",!0),xi,e("div",ki,[e("div",Ci,[r.mission.canSaisie?(s(),a("a",{key:0,href:o.saisieUrl,class:"btn btn-primary",onClick:i[0]||(i[0]=p((...v)=>n.saisie&&n.saisie(...v),["prevent"]))},"Modifier",8,Vi)):d("",!0),r.mission.canValider?(s(),a("a",{key:1,href:o.validerUrl,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider la mission ?","data-title":"Validation de la mission",onClick:i[1]||(i[1]=p((...v)=>n.valider&&n.valider(...v),["prevent"]))},"Valider",8,Si)):d("",!0),r.mission.canDevalider?(s(),a("a",{key:2,href:o.devaliderUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider la mission ?","data-title":"Dévalidation de la mission",onClick:i[2]||(i[2]=p((...v)=>n.devalider&&n.devalider(...v),["prevent"]))},"Dévalider",8,Mi)):d("",!0),r.mission.canSupprimer?(s(),a("a",{key:3,href:o.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-title":"Suppression de la mission",onClick:i[3]||(i[3]=p((...v)=>n.supprimer&&n.supprimer(...v),["prevent"]))},"Supprimer",8,Ti)):d("",!0)])])]),e("div",ji,[Ui,e("div",null,[f(l,{name:"thumbs-up",variant:"success"}),u(" Créé le "),f(c,{value:r.mission.histoCreation},null,8,["value"]),u(" par "),f(m,{mail:r.mission.histoCreateur.email,nom:r.mission.histoCreateur.displayName},null,8,["mail","nom"])]),e("div",null,[f(l,{name:r.mission.valide?"thumbs-up":"thumbs-down",variant:r.mission.valide?"success":"info"},null,8,["name","variant"]),u(" "+_(o.validationText)+" ",1),r.mission.validation&&r.mission.validation.histoCreateur?(s(),C(m,{key:0,mail:r.mission.validation.histoCreateur.email,nom:r.mission.validation.histoCreateur.displayName},null,8,["mail","nom"])):d("",!0)]),e("div",null,[f(l,{name:r.mission.contrat?"thumbs-up":"thumbs-down",variant:r.mission.contrat?"success":"info"},null,8,["name","variant"]),u(" "+_(r.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),e("div",null,_(r.mission.heuresRealisees)+" heure"+_(r.mission.heuresRealisees<2?"":"s")+" réalisée"+_(r.mission.heuresRealisees<2?"":"s"),1)])])])],32)],10,Lt),f(g,{id:`details-${r.mission.id}`,title:"Détail des heures prévisionnelles"},{body:L(()=>[e("table",wi,[Di,e("tbody",null,[(s(!0),a(b,null,y(r.mission.volumesHorairesPrevus,v=>(s(),a("tr",{key:v.id},[e("td",Ri,[f(k,{valeur:v.heures},null,8,["valeur"])]),e("td",null,[f(l,{name:"thumbs-up",variant:"success"}),u(" Saisi par "),f(m,{mail:v.histoCreateur.email,nom:v.histoCreateur.displayName},null,8,["mail","nom"]),u(" le "),f(c,{value:v.histoCreation},null,8,["value"]),Ai,f(l,{name:v.valide?"thumbs-up":"thumbs-down",variant:v.valide?"success":"info"},null,8,["name","variant"]),u(" "+_(v.validation&&v.validation.id==null?"Autovalidé":v.validation?"":"à valider")+" ",1),v.validation&&v.validation.histoCreateur?(s(),a("span",Ei,[u(" Validé par "),f(m,{mail:v.validation.histoCreateur.email,nom:v.validation.histoCreateur.displayName},null,8,["mail","nom"]),u(" le "),f(c,{value:v.validation.histoCreation},null,8,["value"])])):d("",!0)]),e("td",null,[v.canValider?(s(),a("a",{key:0,"data-id":v.id,class:"btn btn-secondary","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?","data-title":"Validation du volume horaire",onClick:i[5]||(i[5]=p((...D)=>n.volumeHoraireValider&&n.volumeHoraireValider(...D),["prevent"]))},"Valider",8,$i)):d("",!0),v.canDevalider?(s(),a("a",{key:1,"data-id":v.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?","data-title":"Dévalidation du volume horaire",onClick:i[6]||(i[6]=p((...D)=>n.volumeHoraireDevalider&&n.volumeHoraireDevalider(...D),["prevent"]))},"Dévalider",8,Pi)):d("",!0),v.canSupprimer?(s(),a("a",{key:2,"data-id":v.id,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?","data-title":"Suppression du volume horaire",onClick:i[7]||(i[7]=p((...D)=>n.volumeHoraireSupprimer&&n.volumeHoraireSupprimer(...D),["prevent"]))},"Supprimer",8,qi)):d("",!0)])]))),128))])])]),footer:L(()=>[]),_:1},8,["id"])],64)}const B=x(qt,[["render",Li],["__scopeId","data-v-1735108d"]]),Oi=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"})),Ii={components:{mission:B},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],isMounted:!1,ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,i=>{this.reload()})},supprimer(t){this.reload()},refresh(t){let i=Util.json.indexById(this.missions,t.id);this.missions[i]=t,this.refreshPlafonds()},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(t=>{this.missions=t.data,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?($(".plafonds").refresh(),$("#sidebar").refresh()):this.isMounted=!0}}},Hi=["href"];function Fi(t,i,r,h,o,n){const c=S("mission");return s(),a(b,null,[(s(!0),a(b,null,y(o.missions,l=>(s(),C(c,{onSupprimer:n.supprimer,onRefresh:n.refresh,key:l.id,mission:l},null,8,["onSupprimer","onRefresh","mission"]))),128)),r.canAddMission?(s(),a("a",{key:0,class:"btn btn-primary",href:o.ajoutUrl,onClick:i[0]||(i[0]=p((...l)=>n.ajout&&n.ajout(...l),["prevent"]))},"Ajout d'une nouvelle mission",8,Hi)):d("",!0)],64)}const Bi=x(Ii,[["render",Fi]]),Ni=Object.freeze(Object.defineProperty({__proto__:null,default:Bi},Symbol.toStringTag,{value:"Module"})),zi={name:"ListeCandidatures.vue",props:{intervenant:{required:!0},canValiderCandidature:{type:Boolean,required:!1}},data(){return{candidatures:[],urlListeOffre:unicaenVue.url("offre-emploi")}},mounted(){this.reload()},methods:{reload(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/get-candidatures",{intervenant:this.intervenant})).then(t=>{this.candidatures=t.data})},validerCandidature(t){modAjax(t.currentTarget,i=>{this.reload()})},refuserCandidature(t){popConfirm(t.target,i=>{this.reload()})},urlOffre(t){return unicaenVue.url("offre-emploi/detail/:offre",{offre:t.offre.id})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})}}},Gi={class:"table table-bordered"},Yi=e("th",null,"Offre d'emploi",-1),Ji=e("th",null,"Composante",-1),Wi=e("th",null,"Etat",-1),Qi=e("th",null,"Date commission",-1),Xi={key:0},Zi={key:0},Ki={key:0,colspan:"5",style:{"text-align":"center"}},er={style:{"text-align":"center"}},tr=["href"],ir={style:{"text-align":"center"}},rr={style:{"text-align":"center"}},nr={key:0,class:"badge rounded-pill bg-success"},sr={key:1,class:"badge rounded-pill bg-danger"},ar={key:2,class:"badge rounded-pill bg-warning"},or={key:0,style:{"text-align":"center"}},lr=["href"],ur=e("i",{class:"fa-solid fa-check"},null,-1),dr=[ur],cr=["href"],mr=e("i",{class:"fa-sharp fa-solid fa-xmark"},null,-1),hr=[mr],_r=["href"];function fr(t,i,r,h,o,n){const c=w,l=j;return s(),a("div",null,[e("table",Gi,[e("thead",null,[e("tr",null,[Yi,Ji,Wi,Qi,r.canValiderCandidature?(s(),a("th",Xi,"Action")):d("",!0)])]),e("tbody",null,[o.candidatures.length==0?(s(),a("tr",Zi,[r.canValiderCandidature?(s(),a("td",Ki,"Aucune candidature")):d("",!0)])):d("",!0),(s(!0),a(b,null,y(o.candidatures,m=>(s(),a("tr",{key:m.id},[e("td",er,[e("a",{href:n.urlOffre(m)},_(m.offre.titre),9,tr)]),e("td",ir,_(m.offre.structure.libelleCourt),1),e("td",rr,[m.validation?(s(),a("span",nr,"Acceptée par "+_(m.validation.histoCreateur.displayName),1)):d("",!0),!m.validation&&m.motif!==null?(s(),a("span",sr,_(m.motif),1)):d("",!0),!m.validation&&m.motif===null?(s(),a("span",ar,"En attente d'acceptation")):d("",!0)]),e("td",null,[m.dateCommission?(s(),C(c,{key:0,value:m.dateCommission},null,8,["value"])):d("",!0)]),this.canValiderCandidature?(s(),a("td",or,[m.validation?d("",!0):(s(),a("a",{key:0,href:n.urlAccepterCandidature(m),class:"btn btn-success","data-content":"Êtes vous sûr de vouloir accepter cette candidature ?","data-title":"Accepter la candidature",style:{color:"white"},title:"Accepter la candidature",onClick:i[0]||(i[0]=p((...k)=>n.validerCandidature&&n.validerCandidature(...k),["prevent"]))},dr,8,lr)),u("  "),e("a",{href:n.urlRefuserCandidature(m),class:"btn btn-danger","data-content":"Êtes vous sûr de vouloir refuser cette candidature ?","data-title":"Refuser la candidature",style:{color:"white"},title:"Refuser la candidature",onClick:i[1]||(i[1]=p((...k)=>n.refuserCandidature&&n.refuserCandidature(...k),["prevent"]))},hr,8,cr)])):d("",!0)]))),128))])]),e("a",{href:o.urlListeOffre,class:"btn btn-primary",title:"Voir les offres d'emploi"},[f(l,{name:"eye"}),u(" Voir toutes les offres d'emploi ")],8,_r),u("  ")])}const vr=x(zi,[["render",fr]]),pr=Object.freeze(Object.defineProperty({__proto__:null,default:vr},Symbol.toStringTag,{value:"Module"})),br={name:"OffreEmploi.vue",props:{offre:{required:!0},utilisateur:{required:!1},extended:{type:Boolean,required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},decretText:{type:String,required:!1}},data(){return{saisirUrl:unicaenVue.url("offre-emploi/saisir/:offre",{offre:this.offre.id}),supprimerUrl:unicaenVue.url("offre-emploi/supprimer/:offre",{offre:this.offre.id}),validerUrl:unicaenVue.url("offre-emploi/valider/:offre",{offre:this.offre.id}),devaliderUrl:unicaenVue.url("offre-emploi/devalider/:offre",{offre:this.offre.id}),consulterUrl:unicaenVue.url("offre-emploi/detail/:offre",{offre:this.offre.id}),offreEmploiUrl:unicaenVue.url("offre-emploi"),postulerUrl:unicaenVue.url("offre-emploi/postuler/:id",{id:this.offre.id}),decret:!1}},computed:{isCandidat:function(){return!1},shortDesc:function(){if(!this.offre.description)return"";let t=this.offre.description.substr(0,200);return this.offre.description.length>200&&(t+="..."),t},descriptionHtml:function(){return this.offre.description?this.offre.description.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},connectionLink:function(){let t="auth/connexion?redirect="+window.location.href;return unicaenVue.url(t)}},mounted(){this.decretText||(this.decret=!0)},methods:{saisir(t){modAjax(t.target,i=>{this.refresh()})},urlVoir:function(t){return unicaenVue.url("intervenant/:code/voir",{code:"code:"+t.intervenant.code})},urlVoirCandidature:function(t){return unicaenVue.url("intervenant/:code/candidature",{code:"code:"+t.intervenant.code})},urlAccepterCandidature:function(t){return unicaenVue.url("offre-emploi/accepter-candidature/:id",{id:t.id})},urlRefuserCandidature:function(t){return unicaenVue.url("offre-emploi/refuser-candidature/:id",{id:t.id})},refresh(){unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.offre.id})).then(t=>{this.$emit("refresh",t.data)})},supprimer(t){popConfirm(t.target,i=>{this.$emit("supprimer",this.offre)})},postuler(t){popConfirm(t.target,i=>{this.$emit("postuler",this.offre)})},valider(t){popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})},devalider(t){popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})},validerCandidature(t){popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})},refuserCandidature(t){popConfirm(t.currentTarget,i=>{this.$emit("refresh",i.data)})}}},gr={key:0,class:"col"},yr={class:"card h-100"},xr={class:"card-header"},kr={class:"badge rounded-pill bg-info"},Cr={key:0,class:"badge rounded-pill bg-success"},Vr={key:1,class:"badge rounded-pill bg-warning"},Sr={class:"card-body"},Mr={class:"bg-light",style:{padding:"5px"}},Tr=e("b",null,"Créée le : ",-1),jr=e("br",null,null,-1),Ur=e("b",null,"Période à pourvoir : ",-1),wr=e("br",null,null,-1),Dr=e("b",null,"Demandée par la composante :",-1),Rr=e("br",null,null,-1),Ar=e("b",null,"Type de mission :",-1),Er={class:"card-footer"},$r={class:"d-grid gap-2 d-md-flex justify-content-md-end"},Pr=["href"],qr={key:1},Lr={class:"page-header"},Or={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},Ir=e("i",{class:"fa-solid fa-user"},null,-1),Hr={class:"ms-2"},Fr=["href"],Br={key:1,class:"alert alert-primary d-flex align-items-center",role:"alert"},Nr=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),zr=e("div",{class:"ms-2"}," Vous n'avez pas les droits pour postuler à cette offre, merci de contacter votre administration de rattachement. ",-1),Gr=[Nr,zr],Yr={key:2,class:"alert alert-primary d-flex align-items-center",role:"alert"},Jr=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),Wr=e("div",{class:"ms-2"}," Vous avez déjà postulé à cette offre. ",-1),Qr=[Jr,Wr],Xr={class:"bg-light",style:{padding:"10px"}},Zr=e("b",null,"Créée le : ",-1),Kr=e("br",null,null,-1),en=e("b",null,"Période à pourvoir : ",-1),tn=e("br",null,null,-1),rn=e("b",null,"Date limite de candidature :",-1),nn=e("br",null,null,-1),sn=e("b",null,"Demandé par la composante :",-1),an=e("br",null,null,-1),on=e("b",null,"Type de mission :",-1),ln=e("br",null,null,-1),un=e("b",null,"Nombre d'heures pour la mission :",-1),dn=e("br",null,null,-1),cn=e("b",null,"Nombre de postes à pourvoir :",-1),mn=e("br",null,null,-1),hn={key:3,class:"alert alert-info"},_n=["innerHTML"],fn=e("br",null,null,-1),vn={key:4},pn=e("h5",null,[e("strong",null,"Liste des candidats :")],-1),bn={class:"table table-bordered"},gn=e("th",null,"Intervenant",-1),yn=e("th",null,"Etat",-1),xn={key:0},kn={key:0},Cn={key:0,colspan:"4",style:{"text-align":"center"}},Vn={key:1,colspan:"3",style:{"text-align":"center"}},Sn=["href"],Mn={key:0,class:"badge rounded-pill bg-success"},Tn={key:1,class:"badge rounded-pill bg-danger"},jn={key:2,class:"badge rounded-pill bg-warning"},Un={key:0},wn=["href"],Dn={class:"mt-5"},Rn=["href"],An=["href"],En=["href"],$n=["href"],Pn=["href"],qn=["href"];function Ln(t,i,r,h,o,n){const c=w,l=j;return s(),a(b,null,[this.extended?d("",!0):(s(),a("div",gr,[e("div",yr,[e("div",xr,[e("h4",null,_(r.offre.titre),1),e("span",kr,_(r.offre.nombreHeures)+" heure(s)",1),u("   "),r.offre.validation?(s(),a("span",Cr,[u("Validée le "),f(c,{value:r.offre.validation.histoCreation},null,8,["value"]),u(" par "+_(r.offre.validation.histoCreateur.displayName),1)])):d("",!0),r.offre.validation?d("",!0):(s(),a("span",Vr," En attente de validation par la DRH")),u("  ")]),e("div",Sr,[e("p",Mr,[Tr,f(c,{value:r.offre.histoCreation},null,8,["value"]),u(" par "+_(r.offre.histoCreateur.displayName),1),jr,Ur,u("du "),f(c,{value:r.offre.dateDebut},null,8,["value"]),u(" au "),f(c,{value:r.offre.dateFin},null,8,["value"]),wr,Dr,u(" "+_(r.offre.structure.libelleCourt)+" ",1),Rr,Ar,u(" "+_(r.offre.typeMission.libelle),1)]),u(" "+_(n.shortDesc),1)]),e("div",Er,[e("div",$r,[e("a",{href:o.consulterUrl,class:"btn btn-primary",title:"Consulter "},[f(l,{name:"eye"}),u(" Voir ")],8,Pr)])])])])),this.extended?(s(),a("div",qr,[e("h1",Lr,_(r.offre.titre),1),this.utilisateur?d("",!0):(s(),a("div",Or,[Ir,e("div",Hr,[u(" Vous devez "),e("a",{href:n.connectionLink,class:"text-decoration-underline alert-link"},"être identifé",8,Fr),u(" pour pouvoir postuler. ")])])),!r.offre.canPostuler&&this.utilisateur?(s(),a("div",Br,Gr)):d("",!0),n.isCandidat&&this.utilisateur?(s(),a("div",Yr,Qr)):d("",!0),e("p",Xr,[Zr,f(c,{value:r.offre.histoCreation},null,8,["value"]),u(" par "+_(r.offre.histoCreateur.displayName),1),Kr,en,u("du "),f(c,{value:r.offre.dateDebut},null,8,["value"]),u(" au "),f(c,{value:r.offre.dateFin},null,8,["value"]),tn,rn,f(c,{value:r.offre.dateLimite},null,8,["value"]),nn,sn,u(" "+_(r.offre.structure.libelleCourt)+" ",1),an,on,u(" "+_(r.offre.typeMission.libelle)+" ",1),ln,un,u(" "+_(r.offre.nombreHeures)+" heure(s) ",1),dn,cn,u(" "+_(r.offre.nombrePostes)+" poste(s) ",1),mn]),e("p",null,_(this.descriptionHtml),1),this.decretText?(s(),a("p",hn,[U(e("input",{id:"decret","onUpdate:modelValue":i[0]||(i[0]=m=>o.decret=m),name:"decret",type:"checkbox"},null,512),[[R,o.decret]]),u("  "),e("span",{innerHTML:this.decretText},null,8,_n)])):d("",!0),fn,this.canValiderCandidature?(s(),a("div",vn,[pn,e("table",bn,[e("thead",null,[e("tr",null,[gn,yn,r.canValiderCandidature?(s(),a("th",xn,"Action")):d("",!0)])]),e("tbody",null,[r.offre.candidatures.length==0?(s(),a("tr",kn,[r.canValiderCandidature?(s(),a("td",Cn,"Aucune candidature")):d("",!0),r.canValiderCandidature?d("",!0):(s(),a("td",Vn,"Aucune candidature"))])):d("",!0),(s(!0),a(b,null,y(r.offre.candidatures,m=>(s(),a("tr",null,[e("td",null,[e("a",{href:n.urlVoir(m)},_(m.intervenant.prenom+" "+m.intervenant.nomUsuel),9,Sn)]),e("td",null,[m.validation?(s(),a("span",Mn,[u("Acceptée le "),f(c,{value:m.validation.histoCreation},null,8,["value"]),u(" par "+_(m.validation.histoCreateur.displayName),1)])):d("",!0),!m.validation&&m.motif!==null?(s(),a("span",Tn,_(m.motif),1)):d("",!0),!m.validation&&m.motif===null?(s(),a("span",jn,"En attente d'acceptation")):d("",!0)]),this.canValiderCandidature?(s(),a("td",Un,[e("a",{href:n.urlVoirCandidature(m),class:"btn btn-primary",title:"Consulter "},[f(l,{name:"eye"}),u(" Voir ")],8,wn)])):d("",!0)]))),256))])])])):d("",!0),e("div",Dn,[e("a",{href:o.offreEmploiUrl,class:"btn btn-secondary"},"Retour aux offres",8,Rn),u("  "),this.canPostuler?(s(),a("a",{key:0,href:o.postulerUrl,class:T(["btn btn-primary",o.decret?"":"disabled"]),"data-bs-original-title":"Vous devez être connecté pour postuler","data-bs-placement":"top","data-bs-toggle":"tooltip"},"Postuler",10,An)):d("",!0),u("  "),r.offre.canModifier?(s(),a("a",{key:1,href:o.saisirUrl,class:"btn btn-primary",title:"Modifier",onClick:i[1]||(i[1]=p((...m)=>n.saisir&&n.saisir(...m),["prevent"]))},[f(l,{name:"pen-to-square"}),u(" Modifier ")],8,En)):d("",!0),u("  "),r.offre.validation&&r.offre.canValider?(s(),a("a",{key:2,href:o.devaliderUrl,class:"btn btn-danger",title:"Devalider",onClick:i[2]||(i[2]=p((...m)=>n.devalider&&n.devalider(...m),["prevent"]))},[f(l,{name:"thumbs-down"}),u(" Devalider ")],8,$n)):d("",!0),u("  "),!r.offre.validation&&r.offre.canValider?(s(),a("a",{key:3,href:o.validerUrl,class:"btn btn-success",title:"Valider",onClick:i[3]||(i[3]=p((...m)=>n.valider&&n.valider(...m),["prevent"]))},[f(l,{name:"thumbs-up"}),u(" Valider ")],8,Pn)):d("",!0),u("  "),r.offre.canSupprimer?(s(),a("a",{key:4,href:o.supprimerUrl,class:"btn btn-danger","data-content":"Êtes-vous sur de vouloir supprimer l'offre ?","data-title":"Suppression de l'offre",title:"Supprimer",onClick:i[4]||(i[4]=p((...m)=>n.supprimer&&n.supprimer(...m),["prevent"]))},[f(l,{name:"trash"}),u(" Supprimer ")],8,qn)):d("",!0)])])):d("",!0)],64)}const N=x(br,[["render",Ln]]),On=Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"})),In={components:{offreEmploi:N},props:{id:{type:Number,required:!1},utilisateur:{required:!1},canModifier:{type:Boolean,required:!1},canPostuler:{type:Boolean,required:!1},canValider:{type:Boolean,required:!1},canVoirCandidature:{type:Boolean,required:!1},canValiderCandidature:{type:Boolean,required:!1},canSupprimer:{type:Boolean,required:!1}},data(){return{offres:[],ajoutUrl:unicaenVue.url("offre-emploi/saisir")}},mounted(){this.reload()},computed:{extended:function(){return!!this.id}},methods:{ajout(t){modAjax(t.target,i=>{this.reload()})},supprimer(){window.location.href=unicaenVue.url("offre-emploi")},refresh(t){let i=Util.json.indexById(this.offres,t.id);this.offres[i]=t},reload(){this.id?unicaenVue.axios.get(unicaenVue.url("offre-emploi/get/:offreEmploi",{offreEmploi:this.id})).then(t=>{this.offres=[t.data]}):unicaenVue.axios.get(unicaenVue.url("offre-emploi/liste")).then(t=>{this.offres=t.data})}}},Hn={key:0,class:"row row-cols-1 row-cols-md-2 g-4 mb-3"},Fn={key:1},Bn=["href"],Nn={key:2};function zn(t,i,r,h,o,n){const c=S("offreEmploi");return s(),a(b,null,[n.extended?d("",!0):(s(),a("div",Hn,[(s(!0),a(b,null,y(o.offres,l=>(s(),C(c,{key:l.id,canModifier:this.canModifier,canSupprimer:this.canSupprimer,canValider:this.canValider,canVoirCandidature:this.canVoirCandidature,offre:l,decretText:l.decretText,onRefresh:n.refresh,onSupprimer:n.supprimer},null,8,["canModifier","canSupprimer","canValider","canVoirCandidature","offre","decretText","onRefresh","onSupprimer"]))),128))])),n.extended?d("",!0):(s(),a("div",Fn,[this.canModifier?(s(),a("a",{key:0,href:o.ajoutUrl,class:"btn btn-primary",onClick:i[0]||(i[0]=p((...l)=>n.ajout&&n.ajout(...l),["prevent"]))},"Ajouter une nouvelle offre",8,Bn)):d("",!0)])),n.extended?(s(),a("div",Nn,[(s(!0),a(b,null,y(o.offres,l=>(s(),C(c,{key:l.id,canModifier:this.canModifier,canPostuler:this.canPostuler,canSupprimer:this.canSupprimer,canValider:this.canValider,canValiderCandidature:this.canValiderCandidature,canVoirCandidature:this.canVoirCandidature,decretText:l.decretText,extended:n.extended,offre:l,utilisateur:this.utilisateur,onRefresh:n.refresh,onSupprimer:n.supprimer},null,8,["canModifier","canPostuler","canSupprimer","canValider","canValiderCandidature","canVoirCandidature","decretText","extended","offre","utilisateur","onRefresh","onSupprimer"]))),128))])):d("",!0)],64)}const Gn=x(In,[["render",zn]]),Yn=Object.freeze(Object.defineProperty({__proto__:null,default:Gn},Symbol.toStringTag,{value:"Module"})),Jn={name:"Prime.vue",props:{prime:{required:!0},numero:{required:!1},intervenant:{required:!0},canGerer:{type:Boolean,required:!1}},data(){return{declarationUrl:unicaenVue.url("prime/:intervenant/declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerUrl:unicaenVue.url("prime/:intervenant/supprimer-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),validerUrl:unicaenVue.url("prime/:intervenant/valider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),devaliderUrl:unicaenVue.url("prime/:intervenant/devalider-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),telechargerUrl:unicaenVue.url("prime/:intervenant/telecharger-declaration-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),refuserUrl:unicaenVue.url("prime/:intervenant/refuser-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id}),modifierPrimeUrl:unicaenVue.url("prime/:intervenant/saisie/:prime",{intervenant:this.intervenant,prime:this.prime.id}),supprimerPrimeUrl:unicaenVue.url("prime/:intervenant/supprimer-prime/:prime",{intervenant:this.intervenant,prime:this.prime.id})}},computed:{},methods:{supprimer(t){popConfirm(t.target,i=>{this.$emit("reload")})},valider(t){popConfirm(t.target,i=>{this.$emit("reload")})},devalider(t){popConfirm(t.target,i=>{this.$emit("reload")})},refuser(){unicaenVue.axios.post(this.refuserUrl).then(t=>{this.$emit("reload")})},modifierPrime(t){modAjax(t.currentTarget,i=>{this.$emit("reload")})},supprimerPrime(t){popConfirm(t.target,i=>{this.$emit("reload")})}}},Wn={key:0},Qn=e("br",null,null,-1),Xn=e("u",null,"Mission(s) concernée(s)",-1),Zn={key:0},Kn=["action"],es={class:"card-body"},ts={class:"row"},is={key:0,class:"col-md-6"},rs={class:"card text-dark bg-light"},ss=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),as={class:"card-body"},os=e("p",{class:"card-text"},[u(" Pour "),e("b",null,"bénéficier de votre indemnité de fin de contrat"),u(", vous devez déposer une déclaration sur l'honneur ("),e("a",{href:""},"exemple"),u(") signée précisant que vous ne débutez pas d'autre contrat dans la fonction au publique à la suite de ces missions. ")],-1),ls=["disabled"],us={class:"card-footer d-grid gap-2"},ds=["disabled"],cs={key:1,class:"col-md-6"},ms={class:"card text-dark bg-light"},hs=e("div",{class:"card-header"}," Dépôt de votre déclaration sur l'honneur ",-1),_s={class:"card-body"},fs=e("p",{class:"card-text"},"Vous pouvez télécharger votre déclaration sur l'honneur ci-dessous : ",-1),vs=["href"],ps={class:"card-footer",style:{"text-align":"right"}},bs=["href"],gs=["href"],ys=["href"],xs={class:"col-md-6"},ks={key:0},Cs=["checked","disabled"],Vs=e("b",null,"je déclare ne pas pouvoir bénéficier d'une indemnité",-1),Ss=e("br",null,null,-1),Ms=e("br",null,null,-1),Ts=e("div",null,[e("label",{class:"form-label"},"Suivi de la déclaration : ")],-1),js={key:0},Us={key:1},ws={key:2},Ds={key:3},Rs={key:4},As={key:5},Es={key:6},$s={class:"row"},Ps={class:"col-md-12"},qs={class:"float-end"},Ls=["href"],Os=["href"];function Is(t,i,r,h,o,n){const c=w,l=j;return s(),a("div",{class:T([{"bg-success":r.prime.validation,"bg-default":!r.prime.validation&&!r.prime.dateRefus,"bg-danger":r.prime.dateRefus},"card"])},[e("div",{class:T([{"text-white":r.prime.dateRefus},"card-header card-header-h3"])},[r.prime.id?(s(),a("h5",Wn,[u(" Indemnité de fin de contrat N°"+_(r.numero+1),1),Qn])):d("",!0),e("div",null,[Xn,u(" : "),(s(!0),a(b,null,y(r.prime.missions,(m,k)=>(s(),a("span",null,[u(_(m.typeMission.libelle)+" (Pour "+_(m.structure.libelleCourt)+" du ",1),f(c,{value:m.dateDebut},null,8,["value"]),u(" au "),f(c,{value:m.dateFin},null,8,["value"]),u(") "),k!=r.prime.missions.length-1?(s(),a("span",Zn,", ")):d("",!0)]))),256))])],2),e("form",{action:o.declarationUrl,enctype:"multipart/form-data",method:"post"},[e("div",es,[e("div",ts,[r.prime.declaration?d("",!0):(s(),a("div",is,[e("div",rs,[ss,e("div",as,[os,e("input",{ref:"file",disabled:!!r.prime.dateRefus,name:"files[]",type:"file"},null,8,ls)]),e("div",us,[e("input",{disabled:!!r.prime.dateRefus,class:"btn btn-primary",type:"submit",value:"Envoyer"},null,8,ds)])])])),r.prime.declaration?(s(),a("div",cs,[e("div",ms,[hs,e("div",_s,[fs,e("a",{href:o.telechargerUrl},_(r.prime.declaration.nom),9,vs)]),e("div",ps,[r.prime.declaration&&!r.prime.validation&&!r.prime.dateRefus?(s(),a("a",{key:0,href:o.supprimerUrl,class:"btn btn-danger",title:"Supprimer",onClick:i[0]||(i[0]=p((...m)=>n.supprimer&&n.supprimer(...m),["prevent"]))}," Supprimer ",8,bs)):d("",!0),u("  "),r.prime.declaration&&!r.prime.validation&&this.canGerer&&!r.prime.dateRefus?(s(),a("a",{key:1,href:o.validerUrl,class:"btn btn-success",title:"Valider",onClick:i[1]||(i[1]=p((...m)=>n.valider&&n.valider(...m),["prevent"]))}," Valider ",8,gs)):d("",!0),u("  "),r.prime.declaration&&r.prime.validation&&this.canGerer&&!r.prime.dateRefus?(s(),a("a",{key:2,href:o.devaliderUrl,class:"btn btn-danger d-grid gap-2",title:"Dévalider",onClick:i[2]||(i[2]=p((...m)=>n.devalider&&n.devalider(...m),["prevent"]))}," Dévalider ",8,ys)):d("",!0),u("  ")])])])):d("",!0),e("div",xs,[r.prime.validation?d("",!0):(s(),a("div",ks,[e("input",{checked:r.prime.dateRefus,disabled:r.prime.validation,name:"prime",type:"checkbox",onChange:i[3]||(i[3]=(...m)=>n.refuser&&n.refuser(...m))},null,40,Cs),u("  Ou en cochant cette case, "),Vs,u(" de fin de contrat en raison du démarrage d'un nouveau contrat au sein de la fonction publique à la suite de ces missions. "),Ss,Ms])),e("div",null,[Ts,r.prime.dateRefus?(s(),a("div",js,[f(l,{name:"thumbs-down",variant:"danger"}),u(" Indemnité refusée le "),f(c,{value:r.prime.dateRefus},null,8,["value"])])):d("",!0),r.prime.declaration&&!r.prime.dateRefus?(s(),a("div",Us,[f(l,{name:"thumbs-up",variant:"success"}),u(" Déclaration déposée le "),f(c,{value:r.prime.declaration.histoCreation},null,8,["value"]),u(" par "+_(r.prime.declaration.histoCreateur.displayName),1)])):d("",!0),!r.prime.declaration&&!r.prime.dateRefus?(s(),a("div",ws,[f(l,{name:"thumbs-down",variant:"info"}),u(" Aucune déclaration déposée ")])):d("",!0),r.prime.validation&&!r.prime.dateRefus?(s(),a("div",Ds,[f(l,{name:"thumbs-up",variant:"success"}),u(" Déclaration validée le "),f(c,{value:r.prime.validation.histoCreation},null,8,["value"]),u(" par "+_(r.prime.validation.histoCreateur.displayName),1)])):d("",!0),!r.prime.validation&&!r.prime.dateRefus?(s(),a("div",Rs,[f(l,{name:"thumbs-down",variant:"info"}),u(" Aucune déclaration validée ")])):d("",!0),r.prime.validation&&!r.prime.dateRefus?(s(),a("div",As,[f(l,{name:"euro-sign",variant:"success"}),u(" Intervenant éligible à une indemnité de fin de contrat ")])):d("",!0),r.prime.dateRefus?(s(),a("div",Es,[f(l,{name:"euro-sign",variant:"info"}),u(" Intervenant non éligible à une indemnité de fin de contrat ")])):d("",!0)])])]),e("div",$s,[e("div",Ps,[e("span",qs,[!r.prime.validation&&!r.prime.dateRefus&&this.canGerer?(s(),a("a",{key:0,href:o.modifierPrimeUrl,class:"btn btn-primary",onClick:i[4]||(i[4]=p((...m)=>n.modifierPrime&&n.modifierPrime(...m),["prevent"]))},"Modifier",8,Ls)):d("",!0),u("   "),!r.prime.validation&&!r.prime.dateRefus&&this.canGerer?(s(),a("a",{key:1,href:o.supprimerPrimeUrl,class:"btn btn-danger",onClick:i[5]||(i[5]=p((...m)=>n.supprimerPrime&&n.supprimerPrime(...m),["prevent"]))},"Supprimer",8,Os)):d("",!0)])])])])],8,Kn)],2)}const z=x(Jn,[["render",Is]]),Hs=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"})),Fs={components:{prime:z},props:{intervenant:{type:Number,required:!0},numero:{type:Number,required:!1},missionsWithoutPrime:{type:Number,required:!1},canGerer:{type:Boolean,required:!1}},data(){return{load:!1,primes:[],ajoutUrl:unicaenVue.url("prime/:intervenant/saisie/",{intervenant:this.intervenant})}},mounted(){this.reload(),console.log(this.primes.length)},methods:{ajout(t){modAjax(t.currentTarget,i=>{this.reload()})},reload(){this.load=!1,this.primes=[],unicaenVue.axios.get(unicaenVue.url("prime/:intervenant/liste",{intervenant:this.intervenant})).then(t=>{this.primes=t.data,this.load=!0})}}},Bs={key:0,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Ns=e("br",null,null,-1),zs=e("br",null,null,-1),Gs={key:1,class:"text-secondary text-center fs-6",style:{"text-align":"center"}},Ys=e("br",null,null,-1),Js=e("br",null,null,-1),Ws={key:2},Qs=["href"];function Xs(t,i,r,h,o,n){const c=S("prime");return s(),a(b,null,[(s(!0),a(b,null,y(o.primes,(l,m)=>(s(),C(c,{canGerer:r.canGerer,intervenant:this.intervenant,numero:m,prime:l,onReload:n.reload},null,8,["canGerer","intervenant","numero","prime","onReload"]))),256)),o.load?d("",!0):(s(),a("div",Bs,[u(" Chargement en cours..."),Ns,zs])),o.primes.length==0&&o.load?(s(),a("div",Gs,[u(" Aucune indemnité de fin de contrat actuellement..."),Ys,Js])):d("",!0),this.missionsWithoutPrime>0&&this.canGerer?(s(),a("div",Ws,[e("a",{href:o.ajoutUrl,class:"btn btn-primary",onClick:i[0]||(i[0]=p((...l)=>n.ajout&&n.ajout(...l),["prevent"]))},"Créer une nouvelle indemnité",8,Qs)])):d("",!0)],64)}const Zs=x(Fs,[["render",Xs]]),Ks=Object.freeze(Object.defineProperty({__proto__:null,default:Zs},Symbol.toStringTag,{value:"Module"}));const ea={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0},addDateDebut:{type:String,required:!1},addDateFin:{type:String,required:!1}},data(){const t=new Date(this.date);return{mois:t.getMonth()+1,annee:t.getFullYear()}},computed:{listeJours(){const t=new Date(this.date);t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1);let i=t.getDate();return Array.from({length:i},(r,h)=>h+1)}},watch:{date:function(t,i){const r=new Date(this.date);this.mois=r.getMonth()+1,this.annee=r.getFullYear()},mois:function(t,i){const r=new Date(this.date);r.setMonth(t-1),this.$emit("changeDate",r)},annee:function(t,i){const r=new Date(this.date);r.setFullYear(t),this.$emit("changeDate",r)}},methods:{nomJour(t){const i=new Date(this.date);return i.setDate(t),i.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let t=[];const i=new Date;for(let r=1;r<=12;r++){i.setMonth(r-1);let h=i.toLocaleString("fr-FR",{month:"long"});t.push({id:r,libelle:h})}return t},listeAnnees(){const i=new Date().getFullYear(),r=1;let h=[];for(let o=i-r;o<=i+r;o++)h.push(o);return h},canAdd(t){if(!this.canAddEvent)return!1;let i=this.addDateDebut;i===void 0?i=new Date("2000-01-01"):i==="now"?i=new Date:i=new Date(i);let r=this.addDateFin;r===void 0?r=new Date("2500-01-01"):r==="now"?r=new Date:r=new Date(r);let h=new Date(this.date);return h.setDate(t),i=this.isoDateOnly(i),r=this.isoDateOnly(r),h=this.isoDateOnly(h),!(h<i||h>r)},addEvent(t){const i=new Date(this.date);i.setDate(t.currentTarget.dataset.jour),this.$emit("addEvent",i,t)},prevMois(){const t=new Date(this.date);t.setMonth(t.getMonth()-1),this.$emit("changeDate",t)},nextMois(){const t=new Date(this.date);t.setMonth(t.getMonth()+1),this.$emit("changeDate",t)},eventsByJour(t){const i=new Date(this.date);let r={};for(let h in this.events){let o=this.events[h];o.date.getFullYear()===i.getFullYear()&&o.date.getMonth()+1===i.getMonth()+1&&o.date.getDate()===t&&(r[h]=o)}return r},isoDateOnly(t){const i=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),h=String(t.getDate()).padStart(2,"0");return`${i}-${r}-${h}`}}},ta={class:"calendar"},ia={class:"recherche"},ra={class:"recherche btn-group"},na=["value"],sa=["value"],aa={class:"table table-bordered table-hover table-sm"},oa=["data-jour"],la={class:"nom-jour"},ua={class:"numero-jour"},da={class:"num-jour badge bg-secondary rounded-circle"},ca={key:0},ma=["data-jour"];function ha(t,i,r,h,o,n){const c=j;return s(),a("div",ta,[e("div",ia,[e("div",ra,[e("button",{class:"btn btn-light",id:"prevMois",onClick:i[0]||(i[0]=(...l)=>n.prevMois&&n.prevMois(...l)),title:"Mois précédant"},[f(c,{name:"chevron-left"})]),U(e("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":i[1]||(i[1]=l=>o.mois=l)},[(s(!0),a(b,null,y(n.listeMois(),l=>(s(),a("option",{value:l.id},_(l.libelle),9,na))),256))],512),[[O,o.mois]]),U(e("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":i[2]||(i[2]=l=>o.annee=l)},[(s(!0),a(b,null,y(n.listeAnnees(),l=>(s(),a("option",{value:l},_(l),9,sa))),256))],512),[[O,o.annee]]),e("button",{class:"btn btn-light",id:"nextMois",onClick:i[3]||(i[3]=(...l)=>n.nextMois&&n.nextMois(...l)),title:"Mois suivant"},[f(c,{name:"chevron-right"})])])]),e("table",aa,[(s(!0),a(b,null,y(n.listeJours,l=>(s(),a("tr",{"data-jour":l},[e("th",la,_(n.nomJour(l)),1),e("th",ua,[e("div",da,_(l<10?"0"+l.toString():l),1)]),e("td",null,[(s(!0),a(b,null,y(n.eventsByJour(l),(m,k)=>(s(),a("div",{class:"event",style:W("border-color:"+m.color+";background-color:"+m.bgcolor),key:k},[(s(),C(Q(m.component),{event:m},null,8,["event"]))],4))),128)),n.canAdd(l)?(s(),a("div",ca,[e("button",{onClick:i[4]||(i[4]=(...m)=>n.addEvent&&n.addEvent(...m)),"data-jour":l,class:"btn btn-light btn-sm"},[f(c,{name:"plus"}),u(" Nouvel événement ")],8,ma)])):d("",!0)])],8,oa))),256))])])}const _a=x(ea,[["render",ha],["__scopeId","data-v-51bbc42d"]]);const fa={name:"SuiviEvent",props:{event:{type:Object,required:!0}},data(){return{suivi:this.$parent.$parent,modifierUrl:unicaenVue.url("mission/suivi/modifier/:id",{id:this.event.id}),supprimerUrl:unicaenVue.url("mission/suivi/supprimer/:id",{id:this.event.id}),validerUrl:unicaenVue.url("mission/suivi/valider/:id",{id:this.event.id}),devaliderUrl:unicaenVue.url("mission/suivi/devalider/:id",{id:this.event.id})}},computed:{heureDebut(){return this.event.heureDebut.toString().replace(":","h")},heureFin(){return this.event.heureFin.toString().replace(":","h")},heures(){return Util.floatToString(this.event.heures)}},methods:{modifier(t){modAjax(t.currentTarget,i=>{this.suivi.refresh()})},supprimer(t){popConfirm(t.currentTarget,i=>{this.suivi.refresh()})},valider(t){unicaenVue.axios.get(this.validerUrl).then(i=>{this.suivi.refresh()})},devalider(t){popConfirm(t.currentTarget,i=>{this.suivi.refresh()})}}},va={class:"event-content"},pa={class:"mission"},ba={key:0,class:"badge bg-success"},ga={class:"horaires"},ya={key:0,class:"badge bg-secondary"},xa={key:0,class:"description"},ka={class:"event-actions"},Ca={class:"btn-group btn-group-sm"},Va=["data-url"],Sa=["data-url"],Ma=["data-url"],Ta=["data-url"];function ja(t,i,r,h,o,n){const c=j;return s(),a(b,null,[e("div",va,[e("p",pa,[u(_(r.event.mission.libelleCourt)+" ",1),r.event.valide?(s(),a("span",ba,"Validé")):d("",!0)]),e("p",ga,[u(" de "+_(n.heureDebut)+" à "+_(n.heureFin)+", soit "+_(n.heures)+" heure"+_(n.heures<2?"":"s")+" ",1),r.event.formation?(s(),a("span",ya,"En formation")):d("",!0)]),r.event.description?(s(),a("p",xa,_(r.event.description),1)):d("",!0)]),e("div",ka,[e("div",Ca,[r.event.canEdit?(s(),a("button",{key:0,class:"btn btn-light",onClick:i[0]||(i[0]=(...l)=>n.modifier&&n.modifier(...l)),title:"Modifier le suivi","data-url":o.modifierUrl},[f(c,{name:"pen-to-square"})],8,Va)):d("",!0),r.event.canValider?(s(),a("button",{key:1,class:"btn btn-light",onClick:i[1]||(i[1]=(...l)=>n.valider&&n.valider(...l)),title:"Valider le suivi","data-url":o.validerUrl},[f(c,{name:"check",class:"text-success"})],8,Sa)):d("",!0),r.event.canDevalider?(s(),a("button",{key:2,class:"btn btn-light",onClick:i[2]||(i[2]=(...l)=>n.devalider&&n.devalider(...l)),title:"Dévalider le suivi","data-url":o.devaliderUrl,"data-content":"Voulez-vous vraiment dévalider ce suivi ?"},[f(c,{name:"xmark",class:"text-danger"})],8,Ma)):d("",!0),r.event.canSupprimer?(s(),a("button",{key:3,class:"btn btn-light",onClick:i[3]||(i[3]=(...l)=>n.supprimer&&n.supprimer(...l)),title:"Supprimer le suivi","data-url":o.supprimerUrl,"data-content":"Voulez-vous vraiment supprimer ce suivi ?"},[f(c,{name:"trash-can",class:"text-danger"})],8,Ta)):d("",!0)])])],64)}const G=x(fa,[["render",ja],["__scopeId","data-v-17cb1f29"]]),Ua=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"})),wa={name:"Suivi",props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,isMounted:!1,suivi:[]}},methods:{changeDate(t){this.date=t},ajouter(t,i){const r={intervenant:this.intervenant,date:t.toISOString().slice(0,10)};i.currentTarget.dataset.url=unicaenVue.url("mission/suivi/ajout/:intervenant/:date",r),modAjax(i.currentTarget,h=>{this.refresh()})},refresh(){const t=["#e74c3c","#8e44ad","#3498db","#1abc9c","#2ecc71","#f1c40f","#e67e22","#d35400"];let i=0,r=[];unicaenVue.axios.get(unicaenVue.url("mission/suivi/liste/:intervenant",{intervenant:this.intervenant})).then(h=>{let o=[];for(let n in h.data){let c=h.data[n];r[c.mission.id]===void 0&&(r[c.mission.id]=t[i],i++),c.valide&&(c.bgcolor="#d0eddb"),c.color=r[c.mission.id],c.component=X(G),c.date=new Date(c.date),c.intervenant=this.intervenant,o.push(c)}this.suivi=o,this.refreshPlafonds()})},refreshPlafonds(){this.isMounted?$(".plafonds").refresh():this.isMounted=!0}}};function Da(t,i,r,h,o,n){const c=_a;return s(),C(c,{date:o.date,onChangeDate:n.changeDate,onAddEvent:n.ajouter,"can-add-event":r.canAddMission,addDateFin:"now",events:o.suivi},null,8,["date","onChangeDate","onAddEvent","can-add-event","events"])}const Ra=x(wa,[["render",Da]]),Aa=Object.freeze(Object.defineProperty({__proto__:null,default:Ra},Symbol.toStringTag,{value:"Module"}));function Ea(t){for(let i in t)for(let r in t[i])Y(t[i][r],i)}function $a(){let t=document.getElementById("unicaen-vue-toast-container");return t||(t=document.createElement("div"),t.id="unicaen-vue-toast-container",t.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(t)),t}function Pa(t){return t=qa(t),t=La(t),t}function qa(t){const i=document.createElement("div");i.innerHTML=t;const r=i.querySelector(".alert");return r?r.innerHTML:i.innerHTML}function La(t){const i=document.createElement("div");return i.innerHTML=t,i.querySelectorAll("i.fas").forEach(h=>h.style.display="none"),i.innerHTML}function Y(t,i){const r={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},h={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},o=document.createElement("button");o.classList.add("btn-close","btn-close-white","h5"),o.style.float="right",o.setAttribute("data-bs-dismiss","toast"),o.setAttribute("aria-label","Close");const n=document.createElement("i");n.classList.add("icon","fas",`fa-${h[i]}`),n.style.float="left",n.style.fontSize="26pt",n.style.paddingLeft=".4rem",n.style.marginTop=".4rem",n.style.paddingRight="1rem";const c=document.createElement("div");c.classList.add("toast-body"),c.innerHTML=Pa(t);const l=document.createElement("div");l.appendChild(o),l.appendChild(n),l.appendChild(c);const m=document.createElement("div");m.classList.add("toast","text-white",r[i]?r[i]:"bg-secondary"),m.setAttribute("role","alert"),m.setAttribute("aria-live","assertive"),m.setAttribute("aria-atomic","true"),i==="error"&&t.length>500&&m.setAttribute("style","width:700px"),m.appendChild(l),$a().appendChild(m);const k={animation:!0,delay:i==="warning"?15e3:5e3,autohide:i!=="error"};new bootstrap.Toast(m,k).show()}const E={toast:Y,toasts:Ea};let A={...Z};A.interceptors.request.use(t=>{if(t.submitter){let i=t.msg?t.msg:"Action en cours";t.popover!=null&&t.popover.dispose(),t.popover=new bootstrap.Popover(t.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+i,html:!0,trigger:"focus"}),t.popover.show()}return t});A.interceptors.response.use(t=>{if(t.messages=t.data.messages,t.data=t.data.data,t.hasErrors=!!(t.messages&&t.messages.error&&t.messages.error.length>0),t.config.popover){var i=t.config.popover;let r="";for(ns in t.messages)for(mid in t.messages[ns])r+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+t.messages[ns][mid]+"</div>";r?(i._config.content=r,i.setContent(),setTimeout(()=>{i.dispose()},5e3)):i.dispose()}return t.messages&&E.toasts(t.messages),t},t=>{let i=t.response.data;t.response.status==403?i="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":i=t.response.data,E.toast(i,"error")});A.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Oa={uvAxios:A},P={axios:Oa.uvAxios,flashMessenger:E,url:(t,i,r)=>{let h=window.__unicaenVueBaseUrl;if(i)for(let n in i)t=t.replace(`:${n}`,i[n]);let o=r?P.encodeUrlQueryParam(r):null;return h+t+(o?`?${o}`:"")},encodeUrlQueryParam:(t,i)=>{var r=[];for(var h in t)if(t.hasOwnProperty(h)){var o=t[h],n=i?i+"["+encodeURIComponent(h)+"]":encodeURIComponent(h);if(typeof o=="object"&&o!==null)r.push(P.encodeUrlQueryParam(o,n));else{var c=encodeURIComponent(o);r.push(n+"="+c)}}return r.join("&")}};window.unicaenVue=P;const Ia={props:{canImportPec:{type:Boolean,required:!1}},data(){return{selectedFile:null,importUrl:unicaenVue.url("paiement/import-numero-pec"),fileErrors:null,intervenantMissing:null,messageErrors:null,messageConfirm:null}},mounted(){},methods:{handleFileUpload(t){this.selectedFile=t.target.files[0],this.fileErrors=null,this.intervenantMissing=null,this.messageErrors=null,this.messageConfirm=null,document.getElementById("btn-import").disabled=!1},importFile(t){t.preventDefault(),this.messageErrors=null,this.messageConfirm=null;let i=document.getElementById("btn-import"),r=document.getElementById("btn-import-inprogress");r.classList.remove("d-none"),i.classList.add("d-none"),i.disabled=!0;let h=document.getElementById("formImport"),o=new FormData(h);unicaenVue.axios.post(this.importUrl,o,{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{let c=n.data;this.fileErrors=c.file,this.intervenantMissing=c.intervenant,c.message.length!=0?this.messageErrors=c.message:this.messageConfirm="Importation des numéros de prise en charge réalisée avec succés !",i.disabled=!1,r.classList.add("d-none"),i.classList.remove("d-none")}).catch(n=>{console.error("Error uploading")})}}},Ha={class:"card text-dark bg-light"},Fa=e("div",{class:"card-header text-uppercase fw-bold"}," Importation des numéros de prise en charge ",-1),Ba={class:"card-body"},Na={key:0,class:"alert alert-danger",role:"alert"},za={key:1,class:"alert alert-success",role:"alert"},Ga={id:"formImport",action:"",enctype:"multipart/form-data",method:"post"},Ya=e("p",{class:"fs-9 text"},[u(" Vous pouvez utiliser le modèle directement extrait de winpaie ou télécharger le modèle d'import générique en "),e("a",{href:"/modeles/import-numero-pec.xlsx"},"cliquant ici.")],-1),Ja={class:"mb-3"},Wa=e("label",{class:"form-label",for:"importFile"},"Choisissez le fichier à importer :",-1),Qa=K('<div class="mb-3"><label class="form-label" for="modele">Choisissez le modèle d&#39;import :</label>  <select id="modeleImport" class="form-select" name="modeleImport"><option value="winpaie">Winpaie</option><option value="generic">Generique (Modèle à 3 colonnes)</option></select></div>',1),Xa={class:"mb-3"},Za=e("button",{id:"btn-import-inprogress",class:"btn btn-primary d-none",disabled:"",type:"button"},[e("span",{id:"spinner","aria-hidden":"true",class:"spinner-border spinner-border-sm",role:"status"}),u("  Veuillez patienter... ")],-1),Ka={key:0,id:"fileErrors",class:"card text-dark bg-light"},eo=e("div",{class:"card-header text-uppercase fw-bold"}," Rapport de chargement du fichier ",-1),to={class:"card-body"},io={key:0},ro=e("p",null,"Listes des intervenants du fichier dont le numéro INSEE n'est pas valide : ",-1),no={key:1},so=e("p",null,"Listes des intervenants présents dans le fichier mais non trouvés dans OSE : ",-1);function ao(t,i,r,h,o,n){return s(),a(b,null,[e("div",Ha,[Fa,e("div",Ba,[this.messageErrors?(s(),a("div",Na,_(this.messageErrors),1)):d("",!0),this.messageConfirm?(s(),a("div",za,_(this.messageConfirm),1)):d("",!0),e("form",Ga,[Ya,e("div",Ja,[Wa,u("  "),e("input",{class:"form-control",name:"importFile",type:"file",onChange:i[0]||(i[0]=(...c)=>n.handleFileUpload&&n.handleFileUpload(...c))},null,32)]),Qa,e("div",Xa,[Za,e("button",{id:"btn-import",class:"btn btn-primary",disabled:"",type:"button",onClick:i[1]||(i[1]=(...c)=>n.importFile&&n.importFile(...c))}," Importer les numéros de prise en charge ")])])])]),this.fileErrors||this.intervenantMissing?(s(),a("div",Ka,[eo,e("div",to,[this.fileErrors.length!=0?(s(),a("div",io,[ro,e("ul",null,[(s(!0),a(b,null,y(this.fileErrors,c=>(s(),a("li",null,_(),1))),256))])])):d("",!0),this.intervenantMissing.length!=0?(s(),a("div",no,[so,e("ul",null,[(s(!0),a(b,null,y(this.intervenantMissing,c=>(s(),a("li",null,_(c),1))),256))])])):d("",!0)])])):d("",!0)],64)}const oo=x(Ia,[["render",ao]]),lo=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),uo={name:"Taux",props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(t){modAjax(t.target,i=>{this.$emit("refreshListe")})},ajoutValeur(t){modAjax(t.target,i=>{this.$emit("refreshListe")})},saisieValeur(t){t.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:t.currentTarget.dataset.id}),modAjax(t.currentTarget,i=>{this.$emit("refreshListe")})},refreshListe(t){this.$emit("refreshListe")},supprimer(t){popConfirm(t.target,i=>{this.$emit("refreshListe")})},supprimerValeur(t){t.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:t.currentTarget.dataset.id}),popConfirm(t.currentTarget,i=>{this.$emit("refreshListe")})},refresh(t){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:t.id})).then(i=>{this.$emit("refresh",i.data)})}}},co={class:"card-header"},mo={style:{display:"inline"}},ho={class:"float-end"},_o=["href"],fo=["href"],vo={class:"card-body"},po={key:0},bo=e("br",null,null,-1),go={class:""},yo={class:"row align-items-start"},xo={class:"col-md-6"},ko={class:"col"},Co=["data-id"],Vo=["data-id"],So=["href"],Mo={key:1,class:"row"},To={class:"col-md-7"},jo=e("br",null,null,-1),Uo={class:"row align-items-start"},wo={class:"col-md-8"},Do={class:"col-md-auto"},Ro=["data-id"],Ao=["data-id"],Eo=["href"],$o={class:"col"},Po=e("br",null,null,-1),qo={key:0},Lo={key:0};function Oo(t,i,r,h,o,n){const c=j,l=S("u-heures"),m=w,k=S("taux",!0);return s(),a(b,null,[e("div",{class:T(["card",{"ms-5":r.taux.tauxRemu}])},[e("div",co,[e("h3",mo,_(r.taux.libelle)+" ("+_(r.taux.code)+")",1),e("div",ho,[r.taux.canEdit?(s(),a("a",{key:0,href:o.saisieUrl,class:"btn btn-primary",onClick:i[0]||(i[0]=p((...g)=>n.saisie&&n.saisie(...g),["prevent"]))},[f(c,{name:"pen-to-square"}),u(" Modifier")],8,_o)):d("",!0),u("   "),r.taux.canDelete?(s(),a("a",{key:1,href:o.supprimerUrl,class:"btn btn-danger",onClick:i[1]||(i[1]=p((...g)=>n.supprimer&&n.supprimer(...g),["prevent"]))},[f(c,{name:"trash-can"}),u(" Supprimer")],8,fo)):d("",!0)])]),e("div",vo,[r.taux.tauxRemu?d("",!0):(s(),a("div",po,[u(" Modification :"),bo,e("ul",null,[(s(!0),a(b,null,y(r.taux.tauxRemuValeurs,g=>(s(),a("div",{key:g.id},[e("li",go,[e("div",yo,[e("div",xo,[f(l,{valeur:g.valeur},null,8,["valeur"]),u("€/h à partir du "),f(m,{value:g.dateEffet},null,8,["value"])]),e("div",ko,[r.taux.canEdit?(s(),a("a",{key:0,class:"text-primary",onClick:i[2]||(i[2]=p((...v)=>n.saisieValeur&&n.saisieValeur(...v),["prevent"])),"data-id":g.id},[f(c,{name:"pen-to-square"})],8,Co)):d("",!0),u("   "),r.taux.canEdit?(s(),a("a",{key:1,class:"text-primary",onClick:i[3]||(i[3]=p((...v)=>n.supprimerValeur&&n.supprimerValeur(...v),["prevent"])),"data-id":g.id},[f(c,{name:"trash-can"})],8,Vo)):d("",!0)])])])]))),128))]),r.taux.canEdit?(s(),a("a",{key:0,href:o.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:i[4]||(i[4]=p((...g)=>n.ajoutValeur&&n.ajoutValeur(...g),["prevent"]))},[f(c,{name:"plus"}),u(" Ajouter une valeur ")],8,So)):d("",!0)])),r.taux.tauxRemu?(s(),a("div",Mo,[e("div",To,[u(" Modification :"),jo,e("ul",null,[(s(!0),a(b,null,y(r.taux.tauxRemuValeurs,g=>(s(),a("div",null,[e("li",null,[e("div",Uo,[e("div",wo,[u(" Coéfficient de "),f(l,{valeur:g.valeur},null,8,["valeur"]),u(" à partir du "),f(m,{value:g.dateEffet},null,8,["value"])]),e("div",Do,[r.taux.canEdit?(s(),a("a",{key:0,class:"text-primary",onClick:i[5]||(i[5]=p((...v)=>n.saisieValeur&&n.saisieValeur(...v),["prevent"])),"data-id":g.id},[f(c,{name:"pen-to-square"})],8,Ro)):d("",!0),u("   "),r.taux.canEdit?(s(),a("a",{key:1,class:"text-primary",onClick:i[6]||(i[6]=p((...v)=>n.supprimerValeur&&n.supprimerValeur(...v),["prevent"])),"data-id":g.id},[f(c,{name:"trash-can"})],8,Ao)):d("",!0)])])])]))),256))]),r.taux.canEdit?(s(),a("a",{key:0,href:o.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:i[7]||(i[7]=p((...g)=>n.ajoutValeur&&n.ajoutValeur(...g),["prevent"]))},[f(c,{name:"plus"})],8,Eo)):d("",!0)]),e("div",$o,[u(" Valeurs calculées (indexées sur le taux "+_(r.taux.tauxRemu.libelle)+") : ",1),e("ul",null,[(s(!0),a(b,null,y(r.taux.tauxRemuValeursIndex,g=>(s(),a("div",null,[e("li",null,[f(l,{valeur:g.valeur},null,8,["valeur"]),u("€/h à partir du "),f(m,{value:g.date},null,8,["value"])])]))),256))]),Po])])):d("",!0)])],2),r.taux.tauxRemu?d("",!0):(s(),a("div",qo,[(s(!0),a(b,null,y(r.listeTaux,g=>(s(),a("div",{key:g},[g.tauxRemu&&g.tauxRemu.id===r.taux.id?(s(),a("div",Lo,[(s(),C(k,{onSupprimer:n.supprimer,onRefreshListe:n.refreshListe,key:r.taux.id,taux:g,listeTaux:r.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):d("",!0)]))),128))]))],64)}const J=x(uo,[["render",Oo]]),Io=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"})),Ho={components:{taux:J},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(t){modAjax(t.currentTarget,i=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(t){let i=Util.json.indexById(this.listeTaux,t.id);this.listeTaux[i]=t},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(t=>{this.listeTaux=t.data})}}},Fo=["href"];function Bo(t,i,r,h,o,n){const c=S("taux");return s(),a(b,null,[(s(!0),a(b,null,y(o.listeTaux,l=>(s(),a("div",null,[l.tauxRemu?d("",!0):(s(),C(c,{onSupprimer:n.supprimer,onRefreshListe:n.refreshListe,key:l.id,taux:l,listeTaux:o.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),r.canEditTaux?(s(),a("a",{key:0,class:"btn btn-primary",href:o.ajoutUrl,onClick:i[0]||(i[0]=p((...l)=>n.ajout&&n.ajout(...l),["prevent"]))},"Ajout d'un nouveau taux",8,Fo)):d("",!0)],64)}const No=x(Ho,[["render",Bo]]),zo=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"})),Go={UHeures:"Application/UI/UHeures",Utilisateur:"Application/Utilisateur"};function Yo(t,i){const r={};i===void 0&&(i={});for(const h in t){let n=h.slice(2,-4).replace("/","");r[n]=t[h].default}for(const h of document.getElementsByClassName("vue-app")){let o=ee({template:h.innerHTML,components:r});if(i.beforeMount!==void 0&&i.beforeMount(o),i.autoloads!==void 0)for(const n in i.autoloads){let c=i.autoloads[n].replace("/","");o.component(n,r[c])}o.mount(h),i.afterMount!==void 0&&i.afterMount(o)}}const Jo={init:Yo},Wo=Object.assign({"./Application/UI/UHeures.vue":se,"./Application/Utilisateur.vue":de,"./Intervenant/Recherche.vue":Re,"./Lieu/Structure.vue":_t,"./Lieu/StructuresAdmin.vue":kt,"./Mission/Liste.vue":Ni,"./Mission/ListeCandidatures.vue":pr,"./Mission/ListeOffreEmploi.vue":Yn,"./Mission/ListePrime.vue":Ks,"./Mission/Mission.vue":Oi,"./Mission/OffreEmploi.vue":On,"./Mission/Prime.vue":Hs,"./Mission/Suivi.vue":Aa,"./Mission/SuiviEvent.vue":Ua,"./Paiement/ImportNumeroPec.vue":lo,"./Paiement/ListeTaux.vue":zo,"./Paiement/Taux.vue":Io}),Qo={autoloads:Go};Jo.init(Wo,Qo);
