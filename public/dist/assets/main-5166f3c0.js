import{c as l,a as n,b as f,w as M,v as A,F as p,r as x,d as T,o as r,t as m,n as q,e as k,f as N,g as _,h as v,i as U,j as E,k as w,l as g,m as j,p as F,q as z,D as B,s as J,u as Y,x as X}from"./vendor-d4e44988.js";const y=(e,t)=>{const s=e.__vccOpts||e;for(const[u,a]of t)s[u]=a;return s},K={name:"UCalendar",props:{date:{type:Date,required:!0},events:{type:Array,required:!0},canAddEvent:{type:Boolean,required:!0,default:!0}},data(){const e=new Date(this.date);return{mois:e.getMonth()+1,annee:e.getFullYear()}},computed:{listeJours(){const e=new Date(this.date);e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1);let t=e.getDate();return Array.from({length:t},(s,u)=>u+1)}},watch:{date:function(e,t){const s=new Date(this.date);this.mois=s.getMonth()+1,this.annee=s.getFullYear()},mois:function(e,t){const s=new Date(this.date);s.setMonth(e-1),this.$emit("changeDate",s)},annee:function(e,t){const s=new Date(this.date);s.setFullYear(e),this.$emit("changeDate",s)}},methods:{nomJour(e){const t=new Date(this.date);return t.setDate(e),t.toLocaleString("fr-FR",{weekday:"short"})},listeMois(){let e=[];const t=new Date;for(let s=1;s<=12;s++){t.setMonth(s-1);let u=t.toLocaleString("fr-FR",{month:"long"});e.push({id:s,libelle:u})}return e},listeAnnees(){const t=new Date().getFullYear(),s=1;let u=[];for(let a=t-s;a<=t+s;a++)u.push(a);return u},addEvent(e){const t=new Date(this.date);t.setDate(e.currentTarget.dataset.jour),this.$emit("addEvent",t,e)},editEvent(e){const t=e.currentTarget.dataset.index;this.$emit("editEvent",this.events[t],e)},deleteEvent(e){const t=e.currentTarget.dataset.index;this.$emit("deleteEvent",this.events[t],e)},prevMois(){const e=new Date(this.date);e.setMonth(e.getMonth()-1),this.$emit("changeDate",e)},nextMois(){const e=new Date(this.date);e.setMonth(e.getMonth()+1),this.$emit("changeDate",e)},eventsByJour(e){const t=new Date(this.date);let s={};for(let u in this.events){let a=this.events[u];a.date.getFullYear()===t.getFullYear()&&a.date.getMonth()+1===t.getMonth()+1&&a.date.getDate()===e&&(s[u]=a)}return s}}},W={class:"calendar"},G={class:"recherche"},Q={class:"recherche btn-group"},Z=["value"],ee=["value"],te={class:"table table-bordered table-hover table-sm"},ne=["data-jour"],se={class:"nom-jour"},ie={class:"numero-jour"},ae={class:"num-jour badge bg-secondary rounded-circle"},re={class:"event-content"},oe={class:"event-actions"},le={class:"btn-group btn-group-sm"},ue=["data-index"],de=["data-index"],ce={key:0},me=["data-jour"];function he(e,t,s,u,a,i){const d=T("u-icon");return r(),l("div",W,[n("div",G,[n("div",Q,[n("button",{class:"btn btn-light",id:"prevMois",onClick:t[0]||(t[0]=(...o)=>i.prevMois&&i.prevMois(...o)),title:"Mois précédant"},[f(d,{name:"chevron-left"})]),M(n("select",{class:"form-select btn btn-light",id:"otherMois","onUpdate:modelValue":t[1]||(t[1]=o=>a.mois=o)},[(r(!0),l(p,null,x(i.listeMois(),o=>(r(),l("option",{value:o.id},m(o.libelle),9,Z))),256))],512),[[A,a.mois]]),M(n("select",{class:"form-select btn btn-light",id:"otherAnnee","onUpdate:modelValue":t[2]||(t[2]=o=>a.annee=o)},[(r(!0),l(p,null,x(i.listeAnnees(),o=>(r(),l("option",{value:o},m(o),9,ee))),256))],512),[[A,a.annee]]),n("button",{class:"btn btn-light",id:"nextMois",onClick:t[3]||(t[3]=(...o)=>i.nextMois&&i.nextMois(...o)),title:"Mois suivant"},[f(d,{name:"chevron-right"})])])]),n("table",te,[(r(!0),l(p,null,x(i.listeJours,o=>(r(),l("tr",{"data-jour":o},[n("th",se,m(i.nomJour(o)),1),n("th",ie,[n("div",ae,m(o<10?"0"+o.toString():o),1)]),n("td",null,[(r(!0),l(p,null,x(i.eventsByJour(o),(c,b)=>(r(),l("div",{class:"event",style:q("border-color:"+c.color),key:b},[n("div",re,[(r(),k(N(c.component),{event:c},null,8,["event"]))]),n("div",oe,[n("div",le,[n("button",{class:"btn btn-light",onClick:t[4]||(t[4]=(...S)=>i.editEvent&&i.editEvent(...S)),"data-index":b},[f(d,{name:"pen-to-square"})],8,ue),n("button",{class:"btn btn-light",onClick:t[5]||(t[5]=(...S)=>i.deleteEvent&&i.deleteEvent(...S)),"data-index":b},[f(d,{name:"trash-can",class:"text-danger"})],8,de)])])],4))),128)),s.canAddEvent?(r(),l("div",ce,[n("button",{onClick:t[6]||(t[6]=(...c)=>i.addEvent&&i.addEvent(...c)),"data-jour":o,class:"btn btn-light btn-sm"},[f(d,{name:"plus"}),_(" Nouvel événement ")],8,me)])):v("",!0)])],8,ne))),256))])])}const _e=y(K,[["render",he],["__scopeId","data-v-3a57b0ac"]]),ve=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"})),fe={name:"UDate",props:{value:{required:!1,type:[String,Date]},format:{required:!1,type:String}},mounted(){this.formatted=this.formatage(this.value)},data(){return{formatted:void 0}},watch:{value:function(e){this.formatted=this.formatage(e)}},methods:{formatage(e){if(e===void 0)return;let t=new Date(e);const s=t.getFullYear(),u=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),d=t.getMinutes().toString().padStart(2,"0"),o=t.getSeconds().toString().padStart(2,"0");switch(this.format){case"datetime":return`${a}/${u}/${s} à ${i}:${d}`;case"time":return`${i}:${d}:${o}`}return`${a}/${u}/${s}`}}};function pe(e,t,s,u,a,i){return m(a.formatted)}const be=y(fe,[["render",pe]]),ge=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"})),ye={name:"UIcon",props:{valeur:{required:!0,type:Float64Array}},computed:{affichage:function(){return Util.formattedHeures(this.valeur,!0)}}},xe=["innerHTML"];function Te(e,t,s,u,a,i){return r(),l("span",{class:"heures",innerHTML:i.affichage},null,8,xe)}const Ve=y(ye,[["render",Te]]),Se=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"})),ke={name:"UIcon",props:{name:{required:!0,type:String},variant:{required:!1,type:String}}};function Ce(e,t,s,u,a,i){return r(),l("i",{class:U(`fas fa-${s.name} text-${s.variant}`)},null,2)}const R=y(ke,[["render",Ce]]),Me=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"})),je={name:"UModal",props:{id:{required:!0,type:String},title:{required:!0,type:String}}},Ue=["id"],De={class:"modal-dialog"},we={class:"modal-content"},Ae={class:"modal-header"},Ee={class:"modal-title"},Oe=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Re={class:"modal-body"},$e={class:"modal-footer"},He=n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fermer",-1);function Le(e,t,s,u,a,i){return r(),l("div",{class:"modal fade",id:s.id,tabindex:"-1","aria-hidden":"true"},[n("div",De,[n("div",we,[n("div",Ae,[n("h5",Ee,m(s.title),1),Oe]),n("div",Re,[E(e.$slots,"body")]),n("div",$e,[E(e.$slots,"footer"),He])])])],8,Ue)}const Ie=y(je,[["render",Le]]),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"})),qe={name:"Utilisateur",props:{nom:String,mail:String}},Ne=["href"];function Fe(e,t,s,u,a,i){return r(),l("a",{href:`mailto:${s.mail}`},m(s.nom),9,Ne)}const ze=y(qe,[["render",Fe]]),Be=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"})),Je={name:"MonTest",props:{monId:{required:!0,type:Number}},data(){return{contacts:[]}},mounted(){unicaenVue.axios.get(unicaenVue.url("mission/test-data/:monId",{monId:this.monId})).then(e=>{this.contacts=e.data})}},Ye=n("h2",null,"Contacts",-1),Xe={class:"table table-bordered"},Ke=n("thead",null,[n("tr",null,[n("th",null,"Nom"),n("th",null,"Prénom")])],-1);function We(e,t,s,u,a,i){return r(),l(p,null,[n("p",null,"Mon ID : "+m(s.monId),1),Ye,n("table",Xe,[Ke,n("tbody",null,[(r(!0),l(p,null,x(a.contacts,d=>(r(),l("tr",null,[n("td",null,m(d.nom),1),n("td",null,m(d.prenom),1)]))),256))])])],64)}const Ge=y(Je,[["render",We]]),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"})),Ze={name:"Recherche",data(){return{searchTerm:"",noResult:0,intervenants:[],checkedTypes:["vacataire","permanent","etudiant"]}},mixins:[Util],methods:{rechercher:function(e){this.searchTerm=e.currentTarget.value,this.searchTerm==""&&(this.noResult=0),this.searchTerm!=""&&this.reload()},urlFiche(e){return"/intervenant/code:"+e+"/voir"},reload(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{unicaenVue.axios.post(unicaenVue.url("intervenant/recherche-json"),{term:this.searchTerm}).then(e=>{let t=e.data,s=[];for(const u in t){if(t[u].typeIntervenantCode=="E"&&this.checkedTypes.includes("vacataire")){s.push(t[u]);continue}if(t[u].typeIntervenantCode=="P"&&this.checkedTypes.includes("permanent")){s.push(t[u]);continue}if(t[u].typeIntervenantCode=="S"&&this.checkedTypes.includes("etudiant")){s.push(t[u]);continue}}this.intervenants=s,this.intervenants.length==0?this.noResult=1:this.noResult=0}).catch(e=>{console.log(e.message)})},800)}}},et=n("h3",null,"Saisissez le nom suivi éventuellement du prénom (2 lettres minimum)",-1),tt={class:"intervenant-recherche"},nt={class:"critere"},st=n("br",null,null,-1),it=n("span",{class:"fw-bold"},"Types d'intervenant : ",-1),at=n("br",null,null,-1),rt={key:0,class:"table table-bordered table-hover"},ot=n("thead",null,[n("tr",null,[n("th",{style:{width:"90px"}}),n("th",null,"Civilité"),n("th",null,"Nom"),n("th",null,"Prenom"),n("th",null,"Structure"),n("th",null,"Statut"),n("th",null,"Date de naissance"),n("th",null,"N° Personnel")])],-1),lt=["title"],ut={style:{}},dt=["href"],ct=n("i",{class:"fas fa-eye"},null,-1),mt={key:1,class:"table table-bordered table-hover"},ht=n("thead",null,[n("tr",null,[n("th",{style:{width:"90px"}}),n("th",null,"Civilité"),n("th",null,"Nom"),n("th",null,"Prenom"),n("th",null,"Structure"),n("th",null,"Statut"),n("th",null,"Date de naissance"),n("th",null,"N° Personnel")])],-1),_t=n("tbody",null,[n("tr",null,[n("td",{style:{"text-align":"center"},colspan:"8"},"Aucun intervenant trouvé")])],-1),vt=[ht,_t];function ft(e,t,s,u,a,i){const d=T("u-date");return r(),l(p,null,[et,n("div",tt,[n("div",nt,[n("div",null,[n("input",{id:"term",onKeyup:t[0]||(t[0]=(...o)=>i.rechercher&&i.rechercher(...o)),class:"form-control input",type:"text",placeholder:"votre recherche..."},null,32),st]),n("div",null,[it,M(n("input",{onChange:t[1]||(t[1]=o=>i.reload()),type:"checkbox",name:"type[]",value:"permanent",checked:"checked","onUpdate:modelValue":t[2]||(t[2]=o=>a.checkedTypes=o)},null,544),[[w,a.checkedTypes]]),_(" Permanent "),M(n("input",{onChange:t[3]||(t[3]=o=>i.reload()),type:"checkbox",name:"type[]",value:"vacataire",checked:"checked","onUpdate:modelValue":t[4]||(t[4]=o=>a.checkedTypes=o)},null,544),[[w,a.checkedTypes]]),_(" Vacataire "),M(n("input",{onChange:t[5]||(t[5]=o=>i.reload()),type:"checkbox",name:"type[]",value:"etudiant",checked:"checked","onUpdate:modelValue":t[6]||(t[6]=o=>a.checkedTypes=o)},null,544),[[w,a.checkedTypes]]),_(" Etudiant ")]),at])]),a.intervenants.length>0?(r(),l("table",rt,[ot,n("tbody",null,[(r(!0),l(p,null,x(a.intervenants,(o,c)=>(r(),l("tr",{class:U({"bg-danger":o.destruction!==null}),title:o.destruction!==null?"Fiche historisé":""},[n("td",ut,[n("a",{href:i.urlFiche(o.code)},[ct,_(" Fiche")],8,dt)]),n("td",null,m(o.civilite),1),n("td",null,m(o.nom),1),n("td",null,m(o.prenom),1),n("td",null,m(o.structure),1),n("td",null,m(o.statut),1),n("td",null,[f(d,{value:o["date-naissance"]},null,8,["value"])]),n("td",null,m(o["numero-personnel"]),1)],10,lt))),256))])])):v("",!0),a.intervenants.length==0&&a.noResult==1?(r(),l("table",mt,vt)):v("",!0)],64)}const pt=y(Ze,[["render",ft]]),bt=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"}));const gt={name:"Mission",props:{mission:{required:!0}},data(){return{validationText:this.calcValidation(this.mission.validation),saisieUrl:unicaenVue.url("mission/saisie/:mission",{mission:this.mission.id}),validerUrl:unicaenVue.url("mission/valider/:mission",{mission:this.mission.id}),devaliderUrl:unicaenVue.url("mission/devalider/:mission",{mission:this.mission.id}),supprimerUrl:unicaenVue.url("mission/supprimer/:mission",{mission:this.mission.id})}},watch:{"mission.validation"(e){this.validationText=this.calcValidation(e)}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures==this.mission.heuresValidees?Util.formattedHeures(this.mission.heures)+" heures (validées)":this.mission.heuresValidees==0?Util.formattedHeures(this.mission.heures)+" heures (non validées)":Util.formattedHeures(this.mission.heures)+" heures ("+Util.formattedHeures(this.mission.heuresValidees)+" validées)"}},methods:{calcValidation(e){return e===null?"A valider":e.id===null?"Autovalidée":"Validation du "+e.histoCreation+" par "},saisie(e){modAjax(e.currentTarget,t=>{this.refresh()})},supprimer(e){popConfirm(e.currentTarget,t=>{this.$emit("supprimer",this.mission)})},valider(e){popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},devalider(e){popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireSupprimer(e){e.currentTarget.href=unicaenVue.url("mission/volume-horaire/supprimer/:missionVolumeHoraire",{missionVolumeHoraire:e.currentTarget.dataset.id}),popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireValider(e){e.currentTarget.href=unicaenVue.url("mission/volume-horaire/valider/:missionVolumeHoraire",{missionVolumeHoraire:e.currentTarget.dataset.id}),popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},volumeHoraireDevalider(e){e.currentTarget.href=unicaenVue.url("mission/volume-horaire/devalider/:missionVolumeHoraire",{missionVolumeHoraire:e.currentTarget.dataset.id}),popConfirm(e.currentTarget,t=>{this.$emit("refresh",t.data)})},refresh(){unicaenVue.axios.get(unicaenVue.url("mission/get/:mission",{mission:this.mission.id})).then(e=>{this.$emit("refresh",e.data)})}}},V=e=>(F("data-v-212ac409"),e=e(),z(),e),yt=["id"],xt={class:"card-header card-header-h3"},Tt={class:"float-end"},Vt={class:"card-body"},St={class:"row"},kt={class:"col-md-8"},Ct={class:"row"},Mt={class:"col-md-12"},jt=V(()=>n("label",{class:"form-label"},"Composante en charge du suivi",-1)),Ut={class:"form-control"},Dt={class:"row"},wt={class:"col-md-5"},At=V(()=>n("label",{class:"form-label"},"Taux de rémunération",-1)),Et={class:"form-control"},Ot={class:"col-md-7"},Rt=V(()=>n("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1)),$t={class:"input-group mb-3"},Ht=["innerHTML"],Lt=["data-bs-target"],It={class:"row"},Pt={class:"col-md-12"},qt=V(()=>n("label",{class:"form-label"},"Descriptif de la mission",-1)),Nt={class:"form-control"},Ft=V(()=>n("div",{class:"row"},[n("div",{class:"col-md-12"}," ")],-1)),zt={class:"row"},Bt={class:"col-md-12"},Jt=["href"],Yt=["href"],Xt=["href"],Kt=["href"],Wt={class:"col-md-4"},Gt=V(()=>n("div",null,[n("label",{class:"form-label"},"Suivi")],-1)),Qt=V(()=>n("div",null," Aucune heure réalisée ",-1)),Zt={class:"table table-bordered table-condensed"},en=V(()=>n("thead",null,[n("tr",null,[n("th",null,"Heures"),n("th",null,"Statut"),n("th",null,"Actions")])],-1)),tn={style:{"text-align":"right"}},nn=V(()=>n("br",null,null,-1)),sn={key:0},an=["data-id"],rn=["data-id"],on=["data-id"];function ln(e,t,s,u,a,i){const d=T("u-date"),o=T("u-icon"),c=T("utilisateur"),b=T("u-heures"),S=T("u-modal");return r(),l(p,null,[n("div",{id:s.mission.id,class:U(["card",{"bg-success":s.mission.valide,"bg-default":!s.mission.valide}])},[n("form",{onSubmit:t[4]||(t[4]=g((...h)=>e.submitForm&&e.submitForm(...h),["prevent"]))},[n("div",xt,[n("h5",null,[_(m(s.mission.typeMission.libelle)+" ",1),n("span",Tt,[_("Du "),f(d,{value:s.mission.dateDebut},null,8,["value"]),_(" au "),f(d,{value:s.mission.dateFin},null,8,["value"])])])]),n("div",Vt,[n("div",St,[n("div",kt,[n("div",Ct,[n("div",Mt,[jt,n("div",Ut,m(s.mission.structure.libelle),1)])]),n("div",Dt,[n("div",wt,[At,n("div",Et,m(s.mission.tauxRemu.libelle),1)]),n("div",Ot,[Rt,n("div",$t,[n("div",{class:"form-control",innerHTML:i.heuresLib},null,8,Ht),n("button",{class:"input-group-btn btn btn-secondary","data-bs-toggle":"modal","data-bs-target":`#details-${s.mission.id}`}," Détails ",8,Lt)])])]),n("div",It,[n("div",Pt,[qt,n("div",Nt,m(s.mission.description),1)])]),Ft,n("div",zt,[n("div",Bt,[s.mission.canSaisie?(r(),l("a",{key:0,href:a.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=g((...h)=>i.saisie&&i.saisie(...h),["prevent"]))},"Modifier",8,Jt)):v("",!0),s.mission.canValider?(r(),l("a",{key:1,href:a.validerUrl,class:"btn btn-secondary","data-title":"Validation de la mission","data-content":"Êtes-vous sur de vouloir valider la mission ?",onClick:t[1]||(t[1]=g((...h)=>i.valider&&i.valider(...h),["prevent"]))},"Valider",8,Yt)):v("",!0),s.mission.canDevalider?(r(),l("a",{key:2,href:a.devaliderUrl,class:"btn btn-danger","data-title":"Dévalidation de la mission","data-content":"Êtes-vous sur de vouloir dévalider la mission ?",onClick:t[2]||(t[2]=g((...h)=>i.devalider&&i.devalider(...h),["prevent"]))},"Dévalider",8,Xt)):v("",!0),s.mission.canSupprimer?(r(),l("a",{key:3,href:a.supprimerUrl,class:"btn btn-danger","data-title":"Suppression de la mission","data-content":"Êtes-vous sur de vouloir supprimer la mission ?",onClick:t[3]||(t[3]=g((...h)=>i.supprimer&&i.supprimer(...h),["prevent"]))},"Supprimer",8,Kt)):v("",!0)])])]),n("div",Wt,[Gt,n("div",null,[f(o,{name:"thumbs-up",variant:"success"}),_(" Créé le "),f(d,{value:"mission.histoCreation"}),_(" par "),f(c,{nom:s.mission.histoCreateur.displayName,mail:s.mission.histoCreateur.email},null,8,["nom","mail"])]),n("div",null,[f(o,{name:s.mission.valide?"thumbs-up":"thumbs-down",variant:s.mission.valide?"success":"info"},null,8,["name","variant"]),_(" "+m(a.validationText)+" ",1),s.mission.validation&&s.mission.validation.histoCreateur?(r(),k(c,{key:0,nom:s.mission.validation.histoCreateur.displayName,mail:s.mission.validation.histoCreateur.email},null,8,["nom","mail"])):v("",!0)]),n("div",null,[f(o,{name:s.mission.contrat?"thumbs-up":"thumbs-down",variant:s.mission.contrat?"success":"info"},null,8,["name","variant"]),_(" "+m(s.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),Qt])])])],32)],10,yt),f(S,{id:`details-${s.mission.id}`,title:"Détail des heures prévisionnelles"},{body:j(()=>[n("table",Zt,[en,n("tbody",null,[(r(!0),l(p,null,x(s.mission.volumesHoraires,h=>(r(),l("tr",{key:h.id},[n("td",tn,[f(b,{valeur:h.heures},null,8,["valeur"])]),n("td",null,[f(o,{name:"thumbs-up",variant:"success"}),_(" Saisi par "),f(c,{nom:h.histoCreateur.displayName,mail:h.histoCreateur.email},null,8,["nom","mail"]),_(" le "+m(h.histoCreation)+" ",1),nn,f(o,{name:h.valide?"thumbs-up":"thumbs-down",variant:h.valide?"success":"info"},null,8,["name","variant"]),_(" "+m(h.validation&&h.validation.id==null?"Autovalidé":h.validation?"":"à valider")+" ",1),h.validation&&h.validation.histoCreateur?(r(),l("span",sn,[_(" Validé par "),f(c,{nom:h.validation.histoCreateur.displayName,mail:h.validation.histoCreateur.email},null,8,["nom","mail"]),_(" le "+m(h.validation.histoCreation),1)])):v("",!0)]),n("td",null,[h.canValider?(r(),l("a",{key:0,class:"btn btn-secondary","data-id":h.id,"data-title":"Validation du volume horaire","data-content":"Êtes-vous sur de vouloir valider ce volume horaire ?",onClick:t[5]||(t[5]=g((...C)=>i.volumeHoraireValider&&i.volumeHoraireValider(...C),["prevent"]))},"Valider",8,an)):v("",!0),h.canDevalider?(r(),l("a",{key:1,class:"btn btn-danger","data-id":h.id,"data-title":"Dévalidation du volume horaire","data-content":"Êtes-vous sur de vouloir dévalider ce volume horaire ?",onClick:t[6]||(t[6]=g((...C)=>i.volumeHoraireDevalider&&i.volumeHoraireDevalider(...C),["prevent"]))},"Dévalider",8,rn)):v("",!0),h.canSupprimer?(r(),l("a",{key:2,class:"btn btn-danger","data-id":h.id,"data-title":"Suppression du volume horaire","data-content":"Êtes-vous sur de vouloir supprimer le volume horaire ?",onClick:t[7]||(t[7]=g((...C)=>i.volumeHoraireSupprimer&&i.volumeHoraireSupprimer(...C),["prevent"]))},"Supprimer",8,on)):v("",!0)])]))),128))])])]),footer:j(()=>[]),_:1},8,["id"])],64)}const H=y(gt,[["render",ln],["__scopeId","data-v-212ac409"]]),un=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"})),dn={components:{mission:H},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],ajoutUrl:unicaenVue.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){this.reload()},methods:{ajout(e){modAjax(e.currentTarget,t=>{this.reload()})},supprimer(e){this.reload()},refresh(e){console.log(e);let t=Util.json.indexById(this.missions,e.id);this.missions[t]=e},reload(){unicaenVue.axios.get(unicaenVue.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(e=>{this.missions=e.data})}}},cn=["href"];function mn(e,t,s,u,a,i){const d=T("mission");return r(),l(p,null,[(r(!0),l(p,null,x(a.missions,o=>(r(),k(d,{onSupprimer:i.supprimer,onRefresh:i.refresh,key:o.id,mission:o},null,8,["onSupprimer","onRefresh","mission"]))),128)),s.canAddMission?(r(),l("a",{key:0,class:"btn btn-primary",href:a.ajoutUrl,onClick:t[0]||(t[0]=g((...o)=>i.ajout&&i.ajout(...o),["prevent"]))},"Ajout d'une nouvelle mission",8,cn)):v("",!0)],64)}const hn=y(dn,[["render",mn]]),_n=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),vn={name:"SuiviEvent",props:{event:{type:Object,required:!0}}},fn={key:0};function pn(e,t,s,u,a,i){const d=B;return r(),l(p,null,[n("p",null,m(s.event.mission.libelle),1),n("p",null,[_(" de "+m(s.event.heureDebut)+" à "+m(s.event.heureFin)+", "+m(s.event.heures)+" heures ",1),s.event.nocturne?(r(),k(d,{key:0},{default:j(()=>[_("Nocturne")]),_:1})):v("",!0),s.event.formation?(r(),k(d,{key:1},{default:j(()=>[_("En formation")]),_:1})):v("",!0)]),s.event.description?(r(),l("p",fn,m(s.event.description),1)):v("",!0)],64)}const L=y(vn,[["render",pn]]),bn=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),gn={name:"Suivi",props:{intervenant:{type:Number,required:!0}},mounted(){this.refresh()},data(){return{date:new Date,suivi:[]}},methods:{changeDate(e){this.date=e},addVolumeHoraire(e,t){t.currentTarget.dataset.url=unicaenVue.url("intervenant/:intervenant/missions-suivi-saisie",{intervenant:this.intervenant}),modAjax(t.currentTarget,s=>{this.refresh()})},editVolumeHoraire(e,t){t.currentTarget.dataset.url=unicaenVue.url("intervenant/:intervenant/missions-suivi-saisie/:guid",{intervenant:this.intervenant,guid:e.guid}),modAjax(t.currentTarget,s=>{this.refresh()})},saveVolumeHoraire(e){console.log("submit!!!"),e.preventDefault(),this.modal.hide(),this.vhr.date=new Date(this.vhr.date),this.vhrIndex===void 0?this.realise.push(this.vhr):this.realise[this.vhrIndex]=this.vhr},deleteVolumeHoraire(e,t){const s=this.realise.indexOf(e);this.realise.splice(s,1),console.log(s),console.log(this.realise)},refresh(){unicaenVue.axios.get(unicaenVue.url("intervenant/:intervenant/missions-suivi-data",{intervenant:this.intervenant})).then(e=>{let t=[];for(let s in e.data){let u=e.data[s];u.component=J(L),u.date=new Date(u.date),t.push(u)}this.suivi=t})}}};function yn(e,t,s,u,a,i){const d=T("u-calendar");return r(),k(d,{date:a.date,onChangeDate:i.changeDate,onAddEvent:i.addVolumeHoraire,onEditEvent:i.editVolumeHoraire,onDeleteEvent:i.deleteVolumeHoraire,"can-add-event":!0,events:a.suivi},null,8,["date","onChangeDate","onAddEvent","onEditEvent","onDeleteEvent","events"])}const xn=y(gn,[["render",yn]]),Tn=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),Vn={name:"VmTest",props:{nombre:{required:!0,type:Number},chaine:{required:!0,type:String}}},Sn=n("br",null,null,-1);function kn(e,t,s,u,a,i){return r(),l(p,null,[_(" Nombre = "+m(s.nombre),1),Sn,_(" chaine = "+m(s.chaine),1)],64)}const Cn=y(Vn,[["render",kn]]),Mn=Object.freeze(Object.defineProperty({__proto__:null,default:Cn},Symbol.toStringTag,{value:"Module"})),jn={name:"Taux",components:{UIcon:R},props:{taux:{required:!0},listeTaux:{required:!0}},data(){return{saisieUrl:unicaenVue.url("taux/saisir/:tauxRemu",{tauxRemu:this.taux.id}),supprimerUrl:unicaenVue.url("taux/supprimer/:tauxRemu",{tauxRemu:this.taux.id}),ajoutValeurUrl:unicaenVue.url("taux/saisir-valeur/:tauxRemu",{tauxRemu:this.taux.id})}},methods:{saisie(e){modAjax(e.target,t=>{this.$emit("refreshListe")})},ajoutValeur(e){modAjax(e.target,t=>{this.$emit("refreshListe")})},saisieValeur(e){e.currentTarget.href=unicaenVue.url("taux/saisir-valeur/:tauxRemu/:tauxRemuValeur",{tauxRemu:this.taux.id,tauxRemuValeur:e.currentTarget.dataset.id}),modAjax(e.currentTarget,t=>{this.$emit("refreshListe")})},refreshListe(e){this.$emit("refreshListe")},supprimer(e){popConfirm(e.target,t=>{this.$emit("refreshListe")})},supprimerValeur(e){e.currentTarget.href=unicaenVue.url("taux/supprimer-valeur/:tauxRemuValeur",{tauxRemuValeur:e.currentTarget.dataset.id}),popConfirm(e.currentTarget,t=>{this.$emit("refreshListe")})},refresh(e){unicaenVue.axios.get(unicaenVue.url("taux/get/:tauxRemu",{tauxRemu:e.id})).then(t=>{this.$emit("refresh",t.data)})}}},Un={class:"card-header"},Dn={style:{display:"inline"}},wn={class:"float-end"},An=["href"],En=["href"],On={class:"card-body"},Rn={key:0},$n=n("br",null,null,-1),Hn={class:""},Ln={class:"row align-items-start"},In={class:"col-md-4"},Pn={class:"col"},qn=["data-id"],Nn=["data-id"],Fn=["href"],zn={key:1,class:"row"},Bn={class:"col-md-7"},Jn=n("br",null,null,-1),Yn={class:"row align-items-start"},Xn={class:"col-md-8"},Kn={class:"col-md-auto"},Wn=["data-id"],Gn=["data-id"],Qn=["href"],Zn={class:"col"},es=n("br",null,null,-1),ts={key:0},ss={key:0};function is(e,t,s,u,a,i){const d=T("u-icon"),o=T("taux",!0);return r(),l(p,null,[n("div",{class:U(["card",{"ms-5":s.taux.tauxRemu}])},[n("div",Un,[n("h3",Dn,m(s.taux.libelle)+" ("+m(s.taux.code)+")",1),n("div",wn,[s.taux.canEdit?(r(),l("a",{key:0,href:a.saisieUrl,class:"btn btn-primary",onClick:t[0]||(t[0]=g((...c)=>i.saisie&&i.saisie(...c),["prevent"]))},[f(d,{name:"pen-to-square"}),_(" Modifier")],8,An)):v("",!0),_("   "),s.taux.canDelete?(r(),l("a",{key:1,href:a.supprimerUrl,class:"btn btn-danger",onClick:t[1]||(t[1]=g((...c)=>i.supprimer&&i.supprimer(...c),["prevent"]))},[f(d,{name:"trash-can"}),_(" Supprimer")],8,En)):v("",!0)])]),n("div",On,[s.taux.tauxRemu?v("",!0):(r(),l("div",Rn,[_(" Modification :"),$n,n("ul",null,[(r(!0),l(p,null,x(s.taux.tauxRemuValeurs,c=>(r(),l("div",{key:c.id},[n("li",Hn,[n("div",Ln,[n("div",In,m(c.valeur)+"€/h à partir du "+m(c.dateEffet),1),n("div",Pn,[s.taux.canEdit?(r(),l("a",{key:0,class:"text-primary",onClick:t[2]||(t[2]=g((...b)=>i.saisieValeur&&i.saisieValeur(...b),["prevent"])),"data-id":c.id},[f(d,{name:"pen-to-square"})],8,qn)):v("",!0),_("   "),s.taux.canEdit?(r(),l("a",{key:1,class:"text-primary",onClick:t[3]||(t[3]=g((...b)=>i.supprimerValeur&&i.supprimerValeur(...b),["prevent"])),"data-id":c.id},[f(d,{name:"trash-can"})],8,Nn)):v("",!0)])])])]))),128))]),s.taux.canEdit?(r(),l("a",{key:0,href:a.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:t[4]||(t[4]=g((...c)=>i.ajoutValeur&&i.ajoutValeur(...c),["prevent"]))},[f(d,{name:"plus"}),_(" Ajouter une valeur ")],8,Fn)):v("",!0)])),s.taux.tauxRemu?(r(),l("div",zn,[n("div",Bn,[_(" Modification :"),Jn,n("ul",null,[(r(!0),l(p,null,x(s.taux.tauxRemuValeurs,c=>(r(),l("div",null,[n("li",null,[n("div",Yn,[n("div",Xn," Coéfficient de "+m(c.valeur)+" à partir du "+m(c.dateEffet),1),n("div",Kn,[s.taux.canEdit?(r(),l("a",{key:0,class:"text-primary",onClick:t[5]||(t[5]=g((...b)=>i.saisieValeur&&i.saisieValeur(...b),["prevent"])),"data-id":c.id},[f(d,{name:"pen-to-square"})],8,Wn)):v("",!0),_("   "),s.taux.canEdit?(r(),l("a",{key:1,class:"text-primary",onClick:t[6]||(t[6]=g((...b)=>i.supprimerValeur&&i.supprimerValeur(...b),["prevent"])),"data-id":c.id},[f(d,{name:"trash-can"})],8,Gn)):v("",!0)])])])]))),256))]),s.taux.canEdit?(r(),l("a",{key:0,href:a.ajoutValeurUrl,class:"btn btn-primary btn-sm",onClick:t[7]||(t[7]=g((...c)=>i.ajoutValeur&&i.ajoutValeur(...c),["prevent"]))},[f(d,{name:"plus"})],8,Qn)):v("",!0)]),n("div",Zn,[_(" Valeurs calculées (indexées sur le taux "+m(s.taux.tauxRemu.libelle)+") : ",1),n("ul",null,[(r(!0),l(p,null,x(s.taux.tauxRemuValeursIndex,c=>(r(),l("div",null,[n("li",null,m(c.valeur)+"€/h à partir du "+m(c.date),1)]))),256))]),es])])):v("",!0)])],2),s.taux.tauxRemu?v("",!0):(r(),l("div",ts,[(r(!0),l(p,null,x(s.listeTaux,c=>(r(),l("div",{key:c},[c.tauxRemu&&c.tauxRemu.id===s.taux.id?(r(),l("div",ss,[(r(),k(o,{onSupprimer:i.supprimer,onRefreshListe:i.refreshListe,key:s.taux.id,taux:c,listeTaux:s.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))])):v("",!0)]))),128))]))],64)}const I=y(jn,[["render",is]]),as=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"})),rs={components:{taux:I},props:{canEditTaux:{type:Boolean,required:!0}},data(){return{listeTaux:[],ajoutUrl:unicaenVue.url("taux/saisir")}},mounted(){this.reload()},methods:{ajout(e){modAjax(e.currentTarget,t=>{this.reload()})},supprimer(){this.reload()},refreshListe(){this.reload()},refresh(e){let t=Util.json.indexById(this.listeTaux,e.id);this.listeTaux[t]=e},reload(){unicaenVue.axios.get(unicaenVue.url("taux/liste-taux")).then(e=>{this.listeTaux=e.data})}}},os=["href"];function ls(e,t,s,u,a,i){const d=T("taux");return r(),l(p,null,[(r(!0),l(p,null,x(a.listeTaux,o=>(r(),l("div",null,[o.tauxRemu?v("",!0):(r(),k(d,{onSupprimer:i.supprimer,onRefreshListe:i.refreshListe,key:o.id,taux:o,listeTaux:a.listeTaux},null,8,["onSupprimer","onRefreshListe","taux","listeTaux"]))]))),256)),s.canEditTaux?(r(),l("a",{key:0,class:"btn btn-primary",href:a.ajoutUrl,onClick:t[0]||(t[0]=g((...o)=>i.ajout&&i.ajout(...o),["prevent"]))},"Ajout d'un nouveau taux",8,os)):v("",!0)],64)}const us=y(rs,[["render",ls]]),ds=Object.freeze(Object.defineProperty({__proto__:null,default:us},Symbol.toStringTag,{value:"Module"})),cs={UIcon:"Application/UI/UIcon",UHeures:"Application/UI/UHeures",UModal:"Application/UI/UModal",UDate:"Application/UI/UDate",UCalendar:"Application/UI/UCalendar",Utilisateur:"Application/Utilisateur"};function ms(e){for(let t in e)for(let s in e[t])P(e[t][s],t)}function P(e,t){const s={info:"info",success:"success",warning:"warning",error:"danger"},u={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},a="alert-"+s[t],i="alert-div-"+Math.floor(Math.random()*1e5+1),d=document.createElement("div");d.setAttribute("id",i),d.classList.add("alert","navbar-fixed-bottom",a),d.setAttribute("role","alert"),d.style.display="none";const o=document.createElement("button");o.setAttribute("type","button"),o.classList.add("btn-close","float-md-end"),o.setAttribute("data-bs-dismiss","alert"),o.setAttribute("aria-label","Close"),d.appendChild(o);const c=document.createElement("div");c.classList.add("container"),d.appendChild(c);const b=document.createElement("p");b.classList.add("text-center"),c.appendChild(b);const S=document.createElement("span");S.classList.add("icon","fas","fa-"+u[t]),b.appendChild(S);const h=document.createElement("span");h.classList.add("message"),h.innerHTML=e,b.appendChild(h),document.body.appendChild(d),d.style.display="block",setTimeout(()=>{d.style.display="none",d.classList.remove(a)},t!=="error"?3e3:0)}const O={alert:P,alerts:ms},D={axios:Y,url:(e,t,s)=>{let u=window.__unicaenVueBaseUrl;if(t)for(let i in t)e=e.replace(`:${i}`,t[i]);let a=s?new URLSearchParams(s).toString():null;return u+e+(a?`?${a}`:"")}};D.axios.interceptors.request.use(e=>{if(e.submitter){let t=e.msg?e.msg:"Action en cours";e.popover!=null&&e.popover.dispose(),e.popover=new bootstrap.Popover(e.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+t,html:!0,trigger:"focus"}),e.popover.show()}return e});D.axios.interceptors.response.use(e=>{if(e.messages=e.data.messages,e.data=e.data.data,e.hasErrors=!!(e.messages&&e.messages.error&&e.messages.error.length>0),e.config.popover){var t=e.config.popover;let s="";for(ns in e.messages)for(mid in e.messages[ns])s+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+e.messages[ns][mid]+"</div>";s?(t._config.content=s,t.setContent(),setTimeout(()=>{t.dispose()},3e3)):t.dispose()}return e.messages&&O.alerts(e.messages),e},e=>{var t=$("<div>").html(e.response.data);t.find("i.fas").hide(),O.alert(t.find(".alert").html(),"error")});D.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.unicaenVue=D;function hs(e,t){const s={};t===void 0&&(t={});for(const u in e){let i=u.slice(2,-4).replace("/","");s[i]=e[u].default}for(const u of document.getElementsByClassName("vue-app")){let a=X({template:u.innerHTML,components:s});if(t.beforeMount!==void 0&&t.beforeMount(a),t.autoloads!==void 0)for(const i in t.autoloads){let d=t.autoloads[i].replace("/","");a.component(i,s[d])}a.mount(u),t.afterMount!==void 0&&t.afterMount(a)}}const _s={init:hs},vs=Object.assign({"./Application/UI/UCalendar.vue":ve,"./Application/UI/UDate.vue":ge,"./Application/UI/UHeures.vue":Se,"./Application/UI/UIcon.vue":Me,"./Application/UI/UModal.vue":Pe,"./Application/Utilisateur.vue":Be,"./Exemple/MonTest.vue":Qe,"./Intervenant/Recherche.vue":bt,"./Mission/Liste.vue":_n,"./Mission/Mission.vue":un,"./Mission/Suivi.vue":Tn,"./Mission/SuiviEvent.vue":bn,"./Mission/VmTest.vue":Mn,"./Paiement/ListeTaux.vue":ds,"./Paiement/Taux.vue":as}),fs={autoloads:cs};_s.init(vs,fs);
