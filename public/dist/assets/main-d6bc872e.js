import{c as g,n as x,o as c,t as a,a as t,b as m,w as p,d as u,e as h,f as B,r as f,F as v,g as k,h as D}from"./vendor-eb9f4386.js";const w={toast:()=>{alert("salut mon pote")}},b=(o,i)=>{const r=o.__vccOpts||o;for(const[l,e]of i)r[l]=e;return r},M={name:"icon",props:{name:{required:!0,type:String}}};function S(o,i,r,l,e,n){return c(),g("i",{class:x(`fas fa-${r.name}`)},null,2)}const Q=b(M,[["render",S]]),z=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),G={name:"Utilisateur",props:{nom:String,mail:String}},U=["href"];function F(o,i,r,l,e,n){return c(),g("a",{href:`mailto:${r.mail}`},a(r.nom),9,U)}const I=b(G,[["render",F]]),j=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"})),R={name:"Mission",components:{utilisateur:I,icon:Q},props:{mission:{required:!0}},data(){return{mission:this.mission,saisieUrl:Util.url("mission/saisie/:mission",{mission:this.mission.id}),supprimerUrl:Util.url("mission/supprimer/:mission",{mission:this.mission.id})}},computed:{heuresLib:function(){return this.mission.heures===null||this.mission.heures===0?"Aucune heure saisie":this.mission.heures-this.mission.heuresValidees==0?this.mission.heures+" heures validés":this.mission.heuresValidees==0?this.mission.heures+" heures à valider":this.mission.heures+" heures dont "+(this.mission.heures-this.mission.heuresValidees)+" à valider"},validation:function(){return this.mission.validation===null?"A valider":this.mission.validation.id===null?"Autovalidée":"Validation du "+this.mission.validation.histoCreation+" par "}},methods:{saisie(o){modAjax(o.target,i=>{axios.get(Util.url("mission/get/:mission",{mission:this.mission.id})).then(r=>{this.mission=r.data})})},supprimer(o){popAjax(o.target,i=>{this.$emit("supprimer",this.mission),w.toast()})},valider(){},devalider(){},test(){w.toast()}}},Y=["id"],K={class:"float-end"},L={class:"card-body"},W={class:"row"},O={class:"col-md-8"},J={class:"row"},Z={class:"col-md-12"},N=t("label",{class:"form-label"},"Composante en charge du suivi",-1),V={class:"form-control"},q={class:"row"},H={class:"col-md-6"},T=t("label",{class:"form-label"},"Taux de rémunération",-1),X={class:"form-control"},P={class:"col-md-6"},_=t("label",{class:"form-label"},"Nombre d'heures prévisionnelles",-1),$={class:"input-group mb-3"},ee={class:"form-control"},te=t("button",{onclick:"alert('non implémenté')",class:"input-group-btn btn btn-secondary"},"Suivi",-1),oe={class:"row"},ie={class:"col-md-12"},ne=t("label",{class:"form-label"},"Descriptif de la mission",-1),re={class:"form-control"},ae=t("div",{class:"row"},[t("div",{class:"col-md-12"}," ")],-1),se={class:"row"},de={class:"col-md-12"},ce=["href"],le=["href"],Ae={class:"col-md-4"},ge=t("div",null,[t("label",{class:"form-label"},"Suivi")],-1),pe=t("div",null," Aucune heure réalisée ",-1);function me(o,i,r,l,e,n){const s=f("icon"),A=f("utilisateur");return c(),g("div",{id:e.mission.id,class:"card bg-default"},[t("form",{onSubmit:i[3]||(i[3]=p((...d)=>o.submitForm&&o.submitForm(...d),["prevent"]))},[t("div",{class:x(["card-header",{"bg-info":e.mission.valide}])},[m(a(e.mission.typeMission.libelle)+" ",1),t("span",K,"Du "+a(e.mission.dateDebut)+" au "+a(e.mission.dateFin),1)],2),t("div",L,[t("div",W,[t("div",O,[t("div",J,[t("div",Z,[N,t("div",V,a(e.mission.structure.libelle),1)])]),t("div",q,[t("div",H,[T,t("div",X,a(e.mission.missionTauxRemu.libelle),1)]),t("div",P,[_,t("div",$,[t("div",ee,a(n.heuresLib),1),te])])]),t("div",oe,[t("div",ie,[ne,t("div",re,a(e.mission.description),1)])]),ae,t("div",se,[t("div",de,[e.mission.canEdit?(c(),g("a",{key:0,href:e.saisieUrl,class:"btn btn-primary",onClick:i[0]||(i[0]=p((...d)=>n.saisie&&n.saisie(...d),["prevent"]))},"Modifier la mission",8,ce)):u("",!0),t("a",{class:"btn btn-danger",onClick:i[1]||(i[1]=p((...d)=>o.devalidation&&o.devalidation(...d),["prevent"]))},"Dévalidation de la mission"),t("a",{class:"btn btn-danger",href:e.supprimerUrl,"data-title":"Suppression de la mission","data-content":"Êtes-vous sur de vouloir supprimer la mission ?","data-confirm":"true",onClick:i[2]||(i[2]=p((...d)=>n.supprimer&&n.supprimer(...d),["prevent"]))},"Suppression de la mission",8,le)])])]),t("div",Ae,[ge,t("div",null,[h(s,{name:"thumbs-up"}),m(" Créé le "+a(e.mission.histoCreation)+" par ",1),h(A,{nom:e.mission.histoCreateur.displayName,mail:e.mission.histoCreateur.email},null,8,["nom","mail"])]),t("div",null,[h(s,{name:e.mission.valide?"thumbs-up":"thumbs-down"},null,8,["name"]),m(" "+a(n.validation)+" ",1),e.mission.validation&&e.mission.validation.histoCreateur?(c(),B(A,{key:0,nom:e.mission.validation.histoCreateur.displayName,mail:e.mission.validation.histoCreateur.email},null,8,["nom","mail"])):u("",!0)]),t("div",null,[h(s,{name:e.mission.contrat?"thumbs-up":"thumbs-down"},null,8,["name"]),m(" "+a(e.mission.contrat?"Contrat établi":"Pas de contrat"),1)]),pe])])])],32),t("button",{onClick:i[4]||(i[4]=(...d)=>n.test&&n.test(...d))},"Test")],8,Y)}const y=b(R,[["render",me]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:y},Symbol.toStringTag,{value:"Module"})),be={components:{mission:y},props:{intervenant:{type:Number,required:!0},canAddMission:{type:Boolean,required:!0}},data(){return{missions:[],ajoutUrl:Util.url("mission/ajout/:intervenant",{intervenant:this.intervenant})}},mounted(){axios.get(Util.url("mission/liste/:intervenant",{intervenant:this.intervenant})).then(o=>{this.missions=o.data})},methods:{ajout(o){modAjax(o.target,i=>{axios.get(Util.url("mission/get/:mission",{mission:this.mission.id})).then(r=>{this.missions.push(r.data)})})},supprimer(o){this.missions.indexOf(o)}}},ue=["href"];function fe(o,i,r,l,e,n){const s=f("mission");return c(),g(v,null,[(c(!0),g(v,null,k(e.missions,A=>(c(),B(s,{onSupprimer:n.supprimer,key:A.id,mission:A},null,8,["onSupprimer","mission"]))),128)),r.canAddMission?(c(),g("a",{key:0,class:"btn btn-primary",href:e.ajoutUrl,onClick:i[0]||(i[0]=p((...A)=>n.ajout&&n.ajout(...A),["prevent"]))},"Ajout d'une nouvelle mission",8,ue)):u("",!0)],64)}const ve=b(be,[["render",fe]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const C=Object.assign({"./components/Application/Icon.vue":z,"./components/Application/Utilisateur.vue":j,"./components/Mission/Liste.vue":we,"./components/Mission/Mission.vue":he});let Ce="./components/";const E={};for(const o in C){let i=o.slice(Ce.length,-4).replace("/","");E[i]=C[o].default}for(const o of document.getElementsByClassName("vue-app"))D({template:o.innerHTML,components:E}).mount(o);
